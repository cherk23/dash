/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(i){var a,r={},o=null;function n(){var e=0;for(key in r)e++;for(key in r)r[key].animate({bottom:3*--e+"em"})}i.top_status=function(e){var t,s;e=i.extend({container:"#sidetabs_body_container",box_class:null,fade_out:500,content:null,remove_after:0},e),o&&e.fade_out?o.css("opacity",1).animate({opacity:0},{duration:e.fade_out,complete:function(){o&&o.remove(),o=null,e.content&&i.top_status(e)}}):(jQuery.remove_top_status(),e.content&&(s=i("<div>").addClass("top_status").addClass(e.box_class).attr("data-testid","top-status-"+e.box_class).html(e.content),e.user_closeable&&(t=i("<a>",{href:"#",class:"close-btn","data-testid":"top-status-close-button"}).append(i("<i>",{class:"fa fa-remove"})).click(function(){return i.remove_top_status(),!1}),s.prepend(t)),s=i("<div>").addClass("top_status_inner_wrapper").append(s),o=i("<div>").addClass("top_status_wrapper").attr("data-testid","top-status-wrapper").append(s).prependTo(e.container),e.remove_after&&(a=setTimeout(function(){i.top_status({fade_out:e.fade_out})},e.remove_after))))},i.fn.xhr_status=function(e,o){o=i.extend({fade_out:3e3,progress_msg:"saving",success_msg:"Changes saved",error_msg:"Failed to save changes."},o);var t=i(this),r=t.find(".alert-danger").not(t.find(".modal .alert-danger, .drop-widget .alert-danger")).not(t.find(".secondary-status")).first(),n=t.find(".alert.xhr_status").not(t.find(".modal .alert-danger, .drop-widget .alert-danger"));r.length||(r=i("<div>",{class:"alert alert-danger"}).hide().prependTo(this)),n.length||(n=i("<div>").hide().prependTo(this)),r.hide(),n.attr("class","alert xhr_status working alert-clear"),n.html(i.ajaxui.thin_indicator(o.progress_msg)).fadeIn(),e.done(function(e){var t=o.success_msg;e.hasOwnProperty("success_message")&&e.success_message&&0<e.success_message.length&&(t=e.success_message);"object"==typeof t&&(t=t.join("<br/>"));!1===o.success_msg&&n.hide();n.addClass("alert-success").attr("data-testid","alert-success").removeClass("alert-clear").text(t);t=i(".success_callback");0<t.length&&t.trigger("submit_success",e)}).error(function(e){r.show();var t=o.error_msg;try{var s=JSON.parse(e.responseText);t=s.error||s.errors;var a=s.details.list_items}catch(e){}"object"==typeof t&&(t=t.join("<br/>"));a&&Array.isArray(a)&&(t="<ul>"+_.reduce(a,function(e,t){return e+"<li>"+t+"</li>"},t)+"</ul>");r.show().html(t),n.hide()}).always(function(){n.removeClass("working")})},i.remove_top_status=function(){o&&o.remove(),o=null,a&&clearTimeout(a)},i.add_status=function(e,t){var s,a,o;t=i.extend({content:"Status",box_class:null},t),r[e]||(s=i("<div/>").addClass("status_message").addClass(t.box_class).html(t.content),r[e]=s,n(),s.appendTo("body"),a=i(window),(o=0==(o=i(".save_button_container")).length?i(".s3actions .unsaved"):o).is(":visible")&&(a.scrollTop()+a.height()>o.offset().top?s.hide():s.show()),i(window).bind("scroll resize",function(){o.is(":visible")&&(a.scrollTop()+a.height()>o.offset().top?s.hide():s.show())}))},i.remove_status=function(e){var t=r[e];t&&(t.remove(),delete r[e],n())}}(jQuery);