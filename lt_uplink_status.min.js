/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(n){window.lt_uplink_status={};var t,a,o,i=[],s=[],_=[],r=!0,c=!1,p=[mkigraph.line_color,mkigraph.gold_line_color,mkigraph.green_line_color],g=[mkigraph.fill_color_transparent,mkigraph.gold_fill_color_transparent,mkigraph.green_fill_color_transparent];function l(i){var t,a,e;o.is(":hidden")||(e=a=t=!1,s=[],_=[],n.each(i.data,function(i,l){0!=l.length&&("squid_client_usage"==i?_.push({data:l,lines:{show:!0,fill:.2},color:Mkiconf.using_beta_colors?mkigraph.beta_line_color[1]:mkigraph.line_color}):"squid_inet_usage"==i?_.push({data:l,lines:{lineWidth:2,show:!0,fill:.2},color:Mkiconf.using_beta_colors?mkigraph.beta_line_color[0]:mkigraph.green_line_color}):"wan0"==i?(t=!0,s.push({data:l,lines:{show:!0,fill:!0,fillColor:(Mkiconf.using_beta_colors?mkigraph.beta_fill_color:g)[0]},color:(Mkiconf.using_beta_colors?mkigraph.beta_line_color:p)[0]})):"wan1"==i?(a=!0,s.push({data:l,lines:{show:!0,fill:.2},color:(Mkiconf.using_beta_colors?mkigraph.beta_line_color:p)[1]})):"cellular"==i&&(e=!0,s.push({data:l,lines:{show:!0,fill:.3},color:(Mkiconf.using_beta_colors?mkigraph.beta_line_color:p)[2]})))}),n("#wan_legend #wan_legend_inet1").toggle(t),n("#wan_legend #wan_legend_inet2").toggle(a),n("#wan_legend #wan_legend_cellular").toggle(e),n("#wan_legend").toggle(t||a||e),r=!1,mkigraph.simple_timeseries({xaxis:{ticks:0},canvas:o,data:s}),c&&0<_.length&&mkigraph.simple_timeseries({xaxis:{ticks:0},yaxis:{min:0,ticks:mkigraph.tick_generators.bpsTickGenerator},canvas:squid_graph,data:_.reverse()}))}lt_uplink_status.init=function(i){tool_html=i,c=Mkiconf.node_show_info.web_cache_enabled,o=n("#lt_wan_traffic").tmpl().appendTo(i).filter(".wan_traffic_graph"),c&&(squid_graph=n("#lt_squid_traffic").tmpl().appendTo(i).filter(".web_cache_graph"),n("#wan_traffic_header").prepend("All"),dashhelp(["http_traffic"]));function l(){n(o).css("width",function(i){return n(window).width()-n("#lt_tools_display").position().left-250}),c&&n(squid_graph).css("width",function(i){return n(window).width()-n("#lt_tools_display").position().left-250}),r?(mkigraph.loading_graph({canvas:o,xaxis:{ticks:0}}),c&&mkigraph.loading_graph({canvas:squid_graph,xaxis:{ticks:0}})):(mkigraph.simple_timeseries({xaxis:{ticks:0},canvas:o,data:s}),c&&mkigraph.simple_timeseries({xaxis:{ticks:0},canvas:squid_graph,data:_}))}n(window).resize(l),l(),c&&(n("#web_cache_legend").show(),n("#inet_traffic_legend").show(),n("#client_traffic_legend").show()),t=i.find(".ltplay").click(lt_uplink_status.run_tool),a=i.find(".ltstop").click(lt_uplink_status.stop),lt_uplink_status.run_tool()},lt_uplink_status.run_tool=function(){c?i.push(n.comet.node_subscribe("WanSquidUsage",l)):i.push(n.comet.node_subscribe("WanUsage",l)),live_toolbox.set_tool_status(lt_uplink_status,!0),a.show(),t.hide()},lt_uplink_status.stop=function(){n.each(i,function(i,l){l.stop()}),i=[],live_toolbox.set_tool_status(lt_uplink_status,!1),a.hide(),t.show()}}(jQuery);