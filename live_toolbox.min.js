/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(r){window.live_toolbox={};var t,n,e,i,l=[];live_toolbox.init=function(){var i=r("#lt_tools_container");e=r("#lt_display_container"),r.each(l,function(o,t){t.header=r("<div/>").addClass("tool_header").html("<span>"+t.name+"</span>").appendTo(i),_.contains(["Protobuf fetch","Read file","Network config","Test credentials","Curl","System","Text ping"],t.name)&&t.header.addClass("adminhighlight"),t.header.click(function(){live_toolbox.display_tool(t)}),r("<img class='ltstop' src='"+Mkiconf.images+"onebyone.gif'>").prependTo(t.header).click(function(o){t.stop(),o.stopPropagation()}),t.inited=!1}),run_with_tmpl("#lt_trace_tmpl",function(){t=!0,live_toolbox.display_tool(n||l[0])},Mkiconf.lt_tmpl_path)},live_toolbox.clear_tools=function(){r("#lt_tools_container, #lt_display_container").html(""),l=[]},live_toolbox.register=function(o,t){o.name=t||"Unknown",l.push(o)},live_toolbox.set_tool_status=function(o,t){o.header.find(".ltstop").css("visibility",t?"visible":"hidden")},live_toolbox.display_tool=function(o){r(".tool_body").hide(),r(".current_tool").removeClass("current_tool"),o.header.addClass("current_tool"),t?(i&&i.on_hide&&i.on_hide(),o.inited||(o.container=o.display||r("<div/>"),o.container.addClass("tool_body").appendTo(e).show(),o.init&&o.init(o.container),o.inited=!0),o.container.show(),o.on_show&&o.on_show(),i=o):n=o},live_toolbox.stop=function(){r.each(l,function(o,t){t.inited&&t.stop&&t.stop()})},live_toolbox.make_grabber_runner=function(o,t){"/"!=o[0]&&(o=url_for({action:o})),a();var i,n,e=!1,l={};function a(){r.ajax({url:o,success:s,data:i?{reqid:i}:{},type:"POST"})}function s(o){e||(o.reqid&&(i=o.reqid),o.status<0?t("failed",o):o&&o.status&&0!=o.status?(t("running",o),n=setTimeout(a,5e3)):t("finished",o))}return l.stop=function(){clearTimeout(n),e=!0},l}}(jQuery);