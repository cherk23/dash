/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(n){var t=0;n.fn.ajax_upload=function(e){function a(){n("body > .upload").remove(),n("<iframe class='upload' src='javascript:false;' name='upload_frame_"+(t+=1)+"' />").hide().appendTo("body").on("load",function(){var a=n(this).contents().find("body").text();try{var t=n.parseJSON(a);t.error?e.fail(t):e.done(t)}catch(a){e.fail()}});var a=n("<form class='upload' method='POST' enctype='multipart/form-data'><input type='file' name='file' /></form>");a.append(n("<input/>",{name:"authenticity_token",value:Mkiconf.authenticity_token,type:"hidden"})),a.attr("action",e.url).attr("target","upload_frame_"+t).hide().appendTo("body"),a.find('input[type="file"]').click().change(function(){a.submit()})}e=n.extend({done:n.noop,fail:n.noop},e),n(this).each(function(){n(this).click(a)})}}(jQuery);