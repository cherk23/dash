"use strict";/*! Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */(self.webpackChunkmanage_monorepo=self.webpackChunkmanage_monorepo||[]).push([[445],{1431:(ae,x,e)=>{e.d(x,{$3:()=>r,$7:()=>n,BT:()=>E,FG:()=>s,HC:()=>R,JG:()=>h,X$:()=>_,XK:()=>a,lJ:()=>i,xj:()=>t});var W=e(14602),C=e.n(W),g=e(310466),c=e(869592),y=e.n(c);const d=g.q9.enhanceEndpoints({addTagTypes:["PccNodeGroup"]}).injectEndpoints({endpoints:A=>({updateAgentVersion:A.mutation({query:({deviceId:S,agentVersion:p})=>({url:y()({controller:"pcc",action:"upgrade_pcc_machine",id:S}),method:"POST",body:{overridden_agent_version:p,upgrade_now:"1"},headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Mkiconf.authenticity_token}})}),fetchIosSwInventory:A.query({query:({deviceId:S})=>({url:y()({controller:"pcc",action:"ios_sw_inventory",id:S}),headers:{"X-Requested-With":"XMLHttpRequest"}})}),fetchPerformanceGraphs:A.query({query:({deviceId:S})=>({url:y()({controller:"pcc",action:"perf_graphs",id:S}),headers:{"X-Requested-With":"XMLHttpRequest"}})}),fetchSmAgentLog:A.query({query:({deviceId:S})=>({url:y()({controller:"pcc",action:"log",id:S}),headers:{Accept:"application/json"}})}),fetchSmAgentUpgradeLog:A.query({query:({deviceId:S})=>({url:y()({controller:"pcc",action:"upgrade_log",id:S}),headers:{Accept:"application/json"}})}),runDeviceCommandLine:A.mutation({query:({deviceIds:S,command:p})=>({url:y()({controller:"pcc",action:"command"}),method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token},body:{machines:S,command:p}})})}),overrideExisting:!1}),f="PccLocalUsers",l=g.kC.enhanceEndpoints({addTagTypes:[f]}).injectEndpoints({endpoints:A=>({fetchLocalUsers:A.query({query:({organizationId:S,networkIds:p,endpointIds:I})=>({url:`organizations/${S}/sm/localUsers`,params:{networkIds:p,endpointIds:I}}),providesTags:S=>S?[...S.map(({id:p})=>({type:f,id:p})),{type:f,id:"LIST"}]:[{type:f,id:"LIST"}]}),logOutCurrentUser:A.mutation({query:({organizationId:S,endpointIds:p})=>({url:`organizations/${S}/sm/localUsers/logout`,method:"PUT",body:{endpointIds:p}})}),deleteUser:A.mutation({query:({organizationId:S,endpointId:p,usernames:I,deleteAllUsers:U,forceDelete:D,requiresNetworkTether:u})=>({url:`organizations/${S}/sm/localUsers/deleteFromEndpoint`,method:"PUT",body:{endpointId:p,usernames:I,deleteAllUsers:U,forceDeletion:D,requestRequiresNetworkTether:u}})}),setUserPassword:A.mutation({query:({organizationId:S,endpointId:p,guids:I,password:U,requiresNetworkTether:D})=>({url:`organizations/${S}/sm/localUsers/setPassword`,method:"PUT",body:{endpointId:p,guids:I,password:U,requestRequiresNetworkTether:D}})})})}),{useUpdateAgentVersionMutation:_,useFetchIosSwInventoryQuery:a,useFetchPerformanceGraphsQuery:h,useLazyFetchSmAgentLogQuery:s,useLazyFetchSmAgentUpgradeLogQuery:t,useRunDeviceCommandLineMutation:n}=d,{useFetchLocalUsersQuery:E,useLogOutCurrentUserMutation:i,useDeleteUserMutation:R,useSetUserPasswordMutation:r}=l},1455:(ae,x,e)=>{e.d(x,{BX:()=>R,Bp:()=>S,Hd:()=>A,P5:()=>p,aJ:()=>s,ni:()=>n,r8:()=>i});var W=e(379432),C=e.n(W),g=e(14602),c=e.n(g),y=e(917157),d=e(652129),f=e(310466),l=e(869188);const _="Device",a="DeviceInternal",h="DeviceStatus",s=(0,d.L)().create().createStore(),t=(M,m)=>{const P=[];for(let T=0;T<M.length;T+=m){const O=M.slice(T,T+m);P.push(O)}return P},n=f.kC.enhanceEndpoints({addTagTypes:[_,h]}).injectEndpoints({overrideExisting:!0,endpoints:({query:M,mutation:m})=>({fetchDevicesIndex:M({query:({organizationId:P,...T})=>({url:`organizations/${P}/devices${(0,y.DK)(T)}`}),providesTags:P=>P?[...P.map(T=>({type:_,id:T.serial})),{type:_,id:"ALL"}]:[{type:_,id:"ALL"}]}),updateDevice:m({query:({serial:P,device:T})=>({url:`devices/${P}`,method:"PUT",body:T}),invalidatesTags:(P,T,O)=>{if(!P)return[];const v=[{type:_,id:P.serial}];return(O.device.name||O.device.tags)&&v.push({type:h,id:P.serial}),v},async onQueryStarted({organizationId:P},{dispatch:T,queryFulfilled:O}){try{const{data:v}=await O;T(n.util.updateQueryData("fetchDevicesIndex",{organizationId:P},L=>{const B=L.findIndex(F=>F.serial===v.serial);B!==-1&&(L[B]=v)}))}catch(v){console.error(v)}}}),swapDevices:m({query:({organizationId:P,swaps:T})=>({url:`organizations/${P}/inventory/devices/swaps/bulk`,body:{swaps:T},method:"POST"}),invalidatesTags:P=>P?P.swaps.map(T=>({type:_,id:T.devices.old.serial})):[]}),fetchSwapStatus:M({query:({organizationId:P,jobId:T})=>({url:`organizations/${P}/inventory/devices/swaps/bulk/${T}`,method:"GET"})}),fetchDeviceAvailabilitiesWithAutoMacBatching:M({queryFn:async(P,T,O,v)=>{var L;const B=t((L=P.macs)!==null&&L!==void 0?L:[],50),F=({organizationId:z,...ne})=>`organizations/${z}/devices${(0,y.DK)(ne)}`,K=B.map(z=>v(F({...P,macs:z})).then(ne=>({type:"device",...ne}))),b=({organizationId:z,...ne})=>`organizations/${z}/devices/availabilities${(0,y.DK)(ne)}`,q=B.map(z=>v(b({...P,macs:z})).then(ne=>({type:"avail",...ne}))),j=await Promise.all([...K,...q]),J=j.find(z=>!!z.error);if(J)return{error:J};const ee=j.filter(z=>z.type==="device").flatMap(z=>z.data),V=j.filter(z=>z.type==="avail").flatMap(z=>z.data),N=(0,l.v)(V,"mac");return{data:Object.values(ee).map(z=>{var ne;return{...z,status:(ne=N[z.mac])===null||ne===void 0?void 0:ne.status}})}},providesTags:P=>P?[...P.map(T=>({type:h,id:T.serial})),{type:h,id:"ALL"}]:[{type:h,id:"ALL"}]}),fetchDeviceStatuses:M({query:({orgId:P,...T})=>({url:`organizations/${P}/devices/statuses${(0,y.DK)(T)}`}),transformResponse:P=>P.map(T=>({...T,id:T.serial})),providesTags:P=>P?[...P.map(({serial:T})=>({type:h,id:T})),{type:h,id:"ALL"}]:[{type:h,id:"ALL"}]}),fetchDeviceStatusesOverview:M({query:({orgId:P,networkIds:T,productTypes:O})=>({url:`organizations/${P}/devices/statuses/overview${(0,y.DK)({networkIds:T,productTypes:O})}`})})})}),E=f.iK.enhanceEndpoints({addTagTypes:[a]}).injectEndpoints({endpoints:({query:M,mutation:m})=>({fetchDevicesInternalApiIndex:M({query:({organizationId:P,...T})=>({url:`organizations/${P}/devices${(0,y.DK)({...T})}`}),providesTags:P=>P?[...P.map(T=>({type:a,id:T.serial})),{type:a,id:"ALL"}]:[{type:a,id:"ALL"}]}),updateDeviceInternalApi:m({query:({serial:P,device:T})=>({url:`devices/${P}`,method:"PUT",body:T}),invalidatesTags:P=>P?[{type:a,serial:P.serial}]:[],async onQueryStarted({organizationId:P},{dispatch:T,queryFulfilled:O}){try{const{data:v}=await O;T(E.util.updateQueryData("fetchDevicesInternalApiIndex",{organizationId:P},L=>{const B=L.findIndex(F=>F.serial===v.serial);B!==-1&&(L[B]=v)}))}catch(v){console.error(v)}}})})}),{useFetchDevicesIndexQuery:i,useFetchDeviceAvailabilitiesWithAutoMacBatchingQuery:R,useUpdateDeviceMutation:r,useSwapDevicesMutation:A,useFetchSwapStatusQuery:S,useLazyFetchSwapStatusQuery:p,useLazyFetchDevicesIndexQuery:I,useFetchDeviceStatusesQuery:U,useFetchDeviceStatusesOverviewQuery:D}=n,{useFetchDevicesInternalApiIndexQuery:u,useUpdateDeviceInternalApiMutation:o}=E},10129:(ae,x,e)=>{e.d(x,{o1:()=>R});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(776545),_=e(881509);const a=["healthStatuses"],h=(0,W.L)().withStoreName("ClientHealthStore").withModels(a).create(),s=h.actions,t=(S,p,I,U,D)=>{var u;if(((u=p.getState().context.currentCli)===null||u===void 0?void 0:u.id)===I)return y().ajax({url:f()({controller:"client_health",action:`${I}/refresh_status`}),data:{status_name:U.name,device_id:D,uplink_id:U.uplink_id,client_id:I}}).done(o=>{const M=g().get((0,_.F)(p.getState(),{id:D}),["statuses"]),m=g().findIndex(M,P=>P.name===o.name&&P.uplink_id===o.uplink_id);if(m!==-1){const P=Object.assign({},M);P[m]=o,S(s.updateHealthStatusesWithMerge([{id:D,statuses:P}]))}})},n=()=>h.createStore(),E=(S,p,I)=>{const U=n();I.forEach(D=>{D.statuses.forEach(u=>{setInterval(t,l.A.secondsToMilliseconds(u.refresh_data_in),S,U,p,u,D.id)})})},i=(S,p)=>I=>(I(s.requestHealthStatuses()),y().ajax(f()({controller:"client_health",action:`${p}/connection_health`})).done(U=>{I(s.updateHealthStatusesWithMerge(U)),E(I,p,U)}).always(()=>{I(h.actions.doneRequestingHealthStatuses())})),R=g().extend({},s,{fetchClientHealth:i}),r=h.actionTypes;var A=null},11303:(ae,x,e)=>{e.d(x,{ST:()=>T,rk:()=>v});var W=e(652129),C=e(310466),g=e(413144);const c=g.Ay.string().ip(),y=g.Ay.string(),d=g.Ay.string(),f=["online","alerting","offline","dormant"],l=g.Ay.enum(f),_=["appliance","cellularGateway","environmental","sensor","switch","wireless","wirelessController","power","camera","phone","systemsManager","campusGateway"],a=g.Ay.enum(_),h=g.Ay.object({counts:g.Ay.object({total:g.Ay.number()})}),s=g.Ay.object({ports:g.Ay.object({counts:g.Ay.object({byStatus:g.Ay.object({active:g.Ay.number().or(g.Ay.null())})})})}),t=g.Ay.object({vlanId:g.Ay.number().or(g.Ay.null()),pppoe:g.Ay.optional(g.Ay.undefined().or(g.Ay.object({enabled:g.Ay.boolean()})))}),n=g.Ay.object({chassisId:g.Ay.string(),systemName:g.Ay.string().or(g.Ay.null()),systemDescription:g.Ay.string().or(g.Ay.null()),systemCapabilities:g.Ay.array(g.Ay.string()).or(g.Ay.null()),managementAddress:c.or(g.Ay.null())}),E=g.Ay.object({platform:g.Ay.string(),deviceId:g.Ay.string(),address:c.or(g.Ay.null()),capabilities:g.Ay.array(g.Ay.string()).or(g.Ay.null()),managementAddress:c.or(g.Ay.null())}),i=g.Ay.object({derivedId:g.Ay.string(),mac:d.or(g.Ay.null()),root:g.Ay.optional(g.Ay.boolean().or(g.Ay.undefined())),type:g.Ay.enum(["discovered"]),discovered:g.Ay.object({lldp:n,cdp:g.Ay.null()}).or(g.Ay.object({lldp:g.Ay.null(),cdp:E}))}),R=g.Ay.object({connected_aps:g.Ay.object({counts:g.Ay.number().or(g.Ay.undefined())}),ap_networks:g.Ay.object({counts:g.Ay.number().or(g.Ay.undefined())})}),r=g.Ay.object({derivedId:g.Ay.string(),mac:d.or(g.Ay.null()),root:g.Ay.optional(g.Ay.boolean().or(g.Ay.undefined())),type:g.Ay.enum(["device"]),device:g.Ay.object({serial:y,name:g.Ay.string(),model:g.Ay.string(),productType:a,status:l,lastReportedAt:g.Ay.string().or(g.Ay.null()),clients:g.Ay.optional(g.Ay.undefined().or(h)),switch:g.Ay.optional(g.Ay.undefined().or(s)),uplinks:g.Ay.array(t),wlc:g.Ay.optional(g.Ay.undefined().or(R))})}),A=g.Ay.object({derivedId:g.Ay.string(),mac:d.or(g.Ay.null()),root:g.Ay.optional(g.Ay.boolean().or(g.Ay.undefined())),type:g.Ay.enum(["stack"]),stack:g.Ay.object({id:g.Ay.string(),name:g.Ay.string(),clients:h,members:g.Ay.array(r.or(i))})}),S=g.Ay.object({derivedId:g.Ay.string(),type:g.Ay.enum(["unknown"]),mac:g.Ay.undefined().or(g.Ay.null()),root:g.Ay.undefined().or(g.Ay.null()).or(g.Ay.boolean())}),p=g.Ay.discriminatedUnion("type",[A,i,r,S]),I=["device","discovered","stack","unknown"],U=g.Ay.enum(I),D="yes",u=["device","discovered"],o=g.Ay.enum(u),M="yes",m=g.Ay.object({node:g.Ay.object({derivedId:g.Ay.string(),type:U}),device:g.Ay.null().or(g.Ay.optional(g.Ay.object({serial:y,name:g.Ay.string()}))),discovered:g.Ay.null().or(g.Ay.object({lldp:g.Ay.null().or(g.Ay.object({portId:g.Ay.string(),portDescription:g.Ay.string().or(g.Ay.null())})),cdp:g.Ay.null().or(g.Ay.object({portId:g.Ay.string(),nativeVlan:g.Ay.number().or(g.Ay.null())}))}))}),P=g.Ay.object({nodes:g.Ay.array(p),links:g.Ay.array(g.Ay.object({ends:g.Ay.tuple([m,m]),lastReportedAt:g.Ay.null().or(g.Ay.string())})),errors:g.Ay.array(g.Ay.string())}),T=(0,W.L)().create().createStore(),O=C.kC.injectEndpoints({endpoints:B=>({fetchLinkLayer:B.query({query:({networkId:F})=>({url:`networks/${F}/topology/linkLayer`}),transformResponse:(F,K)=>{if(K?.ok){const b=P.safeParse(F);b.success||console.warn("networks/:networkId/topology/linkLayer returned unexpected data",b.error)}return F}})})}),{useFetchLinkLayerQuery:v,useLazyFetchLinkLayerQuery:L}=O},15706:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(6464),d=e(869592),f=e.n(d);const l={SET_VPN_UPLINK_PREFS:"SET_VPN_UPLINK_PREFS"},_=y.A.createStore({initialize(){this.bindActions(l.SET_VPN_UPLINK_PREFS,this.setVpnUplinkPrefs),this.loadingVpnUplinkPrefs=!0,this.vpnUplinkPrefs=[],this.performanceClasses=[]},setVpnUplinkPrefs(s){this.loadingVpnUplinkPrefs=!1,this.vpnUplinkPrefs=s.vpnUplinkPrefs,this.performanceClasses=s.performanceClasses,this.emit("change")},getState(){return{loadingVpnUplinkPrefs:this.loadingVpnUplinkPrefs,vpnUplinkPrefs:this.vpnUplinkPrefs,performanceClasses:this.performanceClasses}}}),a={fetchVpnUplinkPrefs(){c().getJSON(f()({controller:"vpn",action:"vpn_uplink_preferences"})).done(s=>{const t=s.vpn_uplink_prefs;t.forEach(n=>{n.id=C().uniqueId(),n.l3_filters.forEach(E=>{E.id=C().uniqueId()}),n.l7_filters=n.l7_filters.map(E=>({category:E,id:C().uniqueId()}))}),this.dispatch(l.SET_VPN_UPLINK_PREFS,{vpnUplinkPrefs:t,performanceClasses:s.performance_classes})}).error(()=>{this.dispatch(l.SET_VPN_UPLINK_PREFS,{vpnUplinkPrefs:[],performanceClasses:[]})})}};function h(s){s.store("VpnUplinkPrefsStore")||(s.addStore("VpnUplinkPrefsStore",new _),s.addActions({vpnUplinkPrefsStore:a}))}},19804:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(522224),C=e.n(W),g=e(6464),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d);const l={RESET_CURRENT_ORG:"RESET_CURRENT_ORG",UPDATE_CURRENT_ORG:"UPDATE_CURRENT_ORG"},_=g.A.createStore({initialize(){this.currentOrg={},this.bindActions(l.RESET_CURRENT_ORG,this.onReset,l.UPDATE_CURRENT_ORG,this.onUpdate)},onReset(s){this.currentOrg=s,this.emit("change")},onUpdate(s){this.currentOrg=C().extend({},this.currentOrg,s),this.emit("change")},getState(){return C().clone(this.currentOrg)}}),a={reset(s){this.dispatch(l.RESET_CURRENT_ORG,s)},update(s){this.dispatch(l.UPDATE_CURRENT_ORG,s)}};function h(s){s.store("CurrentOrgStore")||(s.addStore("CurrentOrgStore",new _),s.addActions({currentOrg:a}))}},25286:(ae,x,e)=>{e.d(x,{A:()=>R});var W=e(6464),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(646894),f=e.n(d),l=e(869592),_=e.n(l);const a="API_JOB_STORE",h=5e3,s={NEW:"new",PENDING:"pending",SUCCESS:"success",FAILURE:"failure"},t={START:`${a}_START`,RESET:`${a}_RESET`,CLEAR:`${a}_CLEAR`,FIND:`${a}_FIND`,UPDATE_PROGRESS_PARAMS:`${a}_UPDATE_PROGRESS_PARAMS`,JOB_STATES:s};class n extends Error{constructor(A){super(A),this.message=A,this.name="ApiJobError"}}const E=W.A.createStore({initialize(){this.jobs={},this.timers={},this.bindActions.apply(this,[t.START,this.onStart,t.RESET,this.onReset,t.CLEAR,this.onClear,t.FIND,this.onFind,t.UPDATE_PROGRESS_PARAMS,this.onUpdateProgressParams])},getJobForKey(r){return this.jobs[r]},initJob(r,A,S=!0){const p=S?s.PENDING:null;this.jobs=f()(this.jobs,{[r]:{$set:{scope:A,status:p,payload:{}}}}),this.emit("change")},updateJob(r,A,S){const p={status:{$set:A}};g().isUndefined(S)||(p.payload={$set:S}),this.jobs=f()(this.jobs,{[r]:p}),this.emit("change")},cancelPolling(r){const A=this.timers[r];A&&(clearTimeout(A.timer),delete this.timers[r],A.reject(new n("Request cancelled")))},ajaxPromise(r){return new Promise((A,S)=>{y().ajax(r).done(p=>{A(p)}).fail(p=>{S(p)})})},delayedPromise(r,A,S){return new Promise((p,I)=>{const U=setTimeout(()=>{delete this.timers[r],p(S())},A);if(this.timers[r])throw new n("trying to track twice");this.timers[r]={timer:U,reject:I}})},startJobPromise(r,A){return this.ajaxPromise({url:r,data:A,type:"POST",dataType:"json"})},pollJobPromise(r,A){const S=_()({controller:"dashboard",action:"job_data"});return this.delayedPromise(r,h,()=>this.ajaxPromise({url:S,data:{api_job_status:"true",job_action:"fetch",job_ids:[this.jobs[r].id],scope:this.jobs[r].scope,progress_options:this.jobs[r].progressOptions},type:A?"POST":"GET",dataType:"json"}).then(p=>this.resolveJobPoll(r,p,A)))},findJobPromise(r,A,S){const p=_()({controller:"dashboard",action:"job_data"}),{onlyActive:I,createdAfter:U,...D}=A;return this.ajaxPromise({url:p,data:{api_job_status:"true",job_action:"find",job_class:S,request_fields:D,created_after:U,only_active:I||!1,scope:this.jobs[r].scope},type:"GET",dataType:"json"})},resolveJobStart(r,A,S){var p;const I=(p=A.id)!==null&&p!==void 0?p:A.jobId,{status:U,value:D}=A;return this.jobs=f()(this.jobs,{[r]:{$merge:{id:I,status:U,payload:D}}}),U!==s.PENDING?this.resolveJobPoll(r,A,S):(this.emit("change"),this.pollJobPromise(r,S))},resolveFindJob(r,A,S){var p;const I=(p=A.id)!==null&&p!==void 0?p:A.jobId,{status:U,value:D}=A;if(this.jobs=f()(this.jobs,{[r]:{$merge:{id:I,status:U,payload:D}}}),g().isEmpty(U)&&!g().isEmpty(D))this.updateJob(r,s.FAILURE,D);else return U!==s.PENDING?this.resolveJobPoll(r,A,S):(this.updateJob(r,U,D),this.pollJobPromise(r,S))},resolveJobPoll(r,A,S){const{status:p,value:I,error:U}=A;if(g().isEmpty(p)&&!g().isEmpty(U)){this.updateJob(r,s.FAILURE,U);return}switch(p){case s.FAILURE:this.updateJob(r,p,U||"Unknown error running job");break;case s.SUCCESS:this.updateJob(r,p,I);break;default:return this.updateJob(r,p,I),this.pollJobPromise(r,S)}return this.jobs[r]},throwJobError(r){var A=r;try{A=JSON.parse(r).error}catch{throw new n("Unknown error response")}throw new n(A)},onStart(r){const{jobKey:A,url:S,data:p,scope:I,largeRequests:U}=r;this.initJob(A,I),this.startJobPromise(S,p).then(D=>this.resolveJobStart(A,D,U),D=>{this.throwJobError(D.responseText)}).catch(D=>{const u=D.message||D.responseText||`${D}`;this.updateJob(A,s.FAILURE,u||"Network error")})},onFind(r){const{jobKey:A,filter:S,scope:p,jobClass:I,largeRequests:U}=r;this.initJob(A,p,!1),this.findJobPromise(A,S,I).then(D=>this.resolveFindJob(A,D,U),D=>{this.throwJobError(D.responseText)}).catch(D=>{if(D.name==="ApiJobError")this.updateJob(A,s.FAILURE,D.message||"Network error");else throw D})},onReset(r){const{jobKey:A}=r;this.cancelPolling(A)},onClear(r){const{jobKey:A}=r;this.cancelPolling(A),this.jobs=g().omit(this.jobs,A),this.emit("change")},onUpdateProgressParams(r){const{jobKey:A,params:S}=r;this.jobs[A]&&(this.jobs=f()(this.jobs,{[A]:{$set:f()(this.jobs[A],{progressOptions:{$set:S}})}}))}});E.constants=t;const i={start(r,A,S,p,I){if(p!=="ng"&&p!=="org")throw new n("Invalid ApiBackgroundJob scope");this.dispatch(E.constants.START,{jobKey:r,url:A,data:S,scope:p,largeRequests:I})},find(r,A,S,p,I){if(S!=="ng"&&S!=="org")throw new n("Invalid ApiBackgroundJob scope");const U=p||"ApiBackgroundJob";this.dispatch(E.constants.FIND,{jobKey:r,filter:A,scope:S,jobClass:U,largeRequests:I})},reset(r){this.dispatch(E.constants.RESET,{jobKey:r})},clear(r){this.dispatch(E.constants.CLEAR,{jobKey:r})},updateProgressParams(r,A){this.dispatch(E.constants.UPDATE_PROGRESS_PARAMS,{jobKey:r,params:A})}};function R(r){return r.stores.ApiJobStore||(r.addStore("ApiJobStore",new E),r.addActions({apiJobStore:i})),E}},29977:(ae,x,e)=>{e.d(x,{Tp:()=>Pe,U1:()=>Re,o1:()=>ne});var W=e(522224),C=e.n(W),g=e(97132),c=e(652129),y=e(644200),d=e(684690),f=e(544157),l=e(117891),_=e(796273);const a=["sites","users","datacenters","datacenterRegions","headendDetails","connectedUsers","assignedRemoteAccessUsers","umbrellavmxs","securityActivities","directoryUsers","remoteAccessUserIds"],h=[y.RJ],s=(0,c.L)().withStoreName("NetworkServicesStore").withModels(a).withContextOptions(h).withPrefs().withUser().withApiJobs().withCustomKeyedModel("events",({occurredAt:re,type:Ae,networkId:$e})=>`${re}-${Ae}-${$e}`).withCustomKeyedModel("devices",({serial:re})=>re).create(),t=s.actions,n=re=>re(t.updateLocals({errors:[]})),E=re=>re(t.updateLocals({message:null})),i=(re,Ae)=>(E(re),re(t.updateLocals({errors:Ae}))),R=(re,Ae)=>(n(re),re(t.updateLocals({message:Ae}))),r=re=>(n(re),re(t.updateLocals({isLoadingLatSaml:!0,samlDetails:{}}))),A=()=>re=>(r(re),(0,f._L)().then(({data:Ae})=>re(t.updateLocals({samlDetails:Ae}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isLoadingLatSaml:!1})))),S=()=>re=>(0,f.uC)().then(({data:Ae})=>re(t.updateLocals({samlDetails:Ae}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isLoadingLatSaml:!1}))),p=()=>re=>(0,f.Vs)().then(({data:Ae})=>{re(t.updateLocals({hasSamlExplosion:!1,samlMetadata:Ae,isMissingSamlSigner:!1}))}).catch(({errors:Ae})=>{Ae[0]==="org not found"&&re(t.updateLocals({isMissingSamlSigner:!0})),Ae[0]==="Error fetching metadata"&&(i(re,["SAML error please reload page"]),re(t.updateLocals({hasSamlExplosion:!0})))}).finally(()=>re(t.updateLocals({isLoadingMerakiSaml:!1}))),I=()=>re=>(0,f.ZD)().then(()=>R(re,"New SAML signing authority created!")).catch(({errors:Ae})=>{Ae[0]==="Error generating IDP"&&(i(re,["SAML error please reload page"]),re(t.updateLocals({hasSamlExplosion:!0})))}).finally(()=>re(p())),U=()=>re=>(re(t.requestDirectoryUsers()),(0,f.xO)().then(({data:Ae})=>{Ae.data&&Ae.data.data&&(re(t.updateLocals({totalUmbrellaUsers:Ae.data.total})),re(t.addDirectoryUsers(Ae.data.data)))}).catch(({errors:Ae})=>{re(t.failedRequestingDirectoryUsers()),i(re,Ae)}).finally(()=>{re(t.doneRequestingDirectoryUsers)})),D=()=>re=>(re(t.requestRemoteAccessUserIds()),(0,f.fU)().then(({data:Ae})=>{if(Ae[0]===void 0||Ae[0].rules===void 0)return[];const $e=Ae[0].rules.find(Ye=>Ye.ruleAction==="allow");if($e===void 0)return[];const Fe=$e.ruleConditions.find(Ye=>Ye.attributeOperator==="INTERSECT");return Fe===void 0?[]:re(t.updateLocals({remoteAccessUserIds:Fe.attributeValue}))}).catch(({errors:Ae})=>{i(re,Ae),re(t.failedRequestingRemoteAccessUserIds())}).finally(()=>re(t.doneRequestingRemoteAccessUserIds()))),u=()=>re=>(re(t.updateLocals({isFetchingComplianceCertificates:!0})),(0,f.b$)().then(({data:Ae})=>re(t.updateLocals({endpointComplianceCertificates:Ae.count}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isFetchingComplianceCertificates:!1})))),o=()=>re=>(re(t.updateLocals({isFetchingTunnels:!0})),(0,f.zP)().then(({data:Ae})=>re(t.updateLocals({networkTunnelsData:Ae.data}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isFetchingTunnels:!1})))),M=()=>re=>(re(t.requestSites()),(0,f.f7)().then(({data:Ae})=>re(t.addSites(Ae)))),m=()=>re=>(re(t.requestUsers()),(0,f.lo)().then(({data:Ae})=>{re(t.addUsers(Ae))}).catch(({errors:Ae})=>{re(t.failedRequestingUsers()),i(Ae)}).finally(()=>re(t.doneRequestingUsers()))),P=()=>re=>(re(t.requestUmbrellavmxs()),(0,f.$4)().then(({data:Ae})=>re(t.addUmbrellavmxs(Ae)))),T=re=>Ae=>(0,f.kg)(re).then(({data:$e})=>(0,f.wr)($e.eid,re.password).then(()=>R(Ae,"Successfully added user and emailed connection details")).catch(()=>R(Ae,"Successfully added user but failed to email connection details"))).catch(({errors:$e})=>i(Ae,$e)),O=re=>Ae=>(0,f.TK)(re).then(({data:$e})=>(0,f.fh)($e.id,re.password).then(()=>R(Ae,"Successfully updated user and emailed connection details")).catch(()=>R(Ae,"Successfully updated user but failed to email connection details"))).catch(({errors:$e})=>i(Ae,$e)),v=()=>(re,Ae)=>{if(!Ae().locals.isLoadingUmbrellaOrgConfig)return re(t.updateLocals({isLoadingUmbrellaOrgConfig:!0})),(0,f.Ji)().then(({data:Fe})=>re(t.updateLocals({umbrellaOrgConfig:Fe}))).catch(({errors:Fe})=>i(re,Fe)).finally(()=>re(t.updateLocals({isLoadingUmbrellaOrgConfig:!1})))},L=()=>re=>(re(t.updateLocals({isDeletingUmbrellaOrgConfig:!0})),(0,f.CB)().then(({data:Ae})=>{Ae.success===!0&&(re(t.updateLocals({umbrellaOrgConfig:null})),R("Successfully deleted Umbrella Org Config. Your new organization ID will be automatically inferred the next time you re-enter your Umbrella API keys."))}).catch(({errors:Ae})=>{i(re,Ae)}).finally(()=>{re(t.updateLocals({isDeletingUmbrellaOrgConfig:!1}))})),B=()=>re=>(re(t.updateLocals({isLoadingUmbrellaOrgApiKeys:!0})),(0,f.jC)().then(({data:Ae})=>re(t.updateLocals({umbrellaOrgApiKeys:Ae}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isLoadingUmbrellaOrgApiKeys:!1})))),F=()=>re=>(re(t.updateLocals({isLoadingUmbrellaSCIMTokenPresent:!0})),(0,f.i4)().then(({data:Ae})=>re(t.updateLocals({umbrellaSCIMTokenPresent:Ae}))).catch(({errors:Ae})=>i(re,Ae)).finally(()=>re(t.updateLocals({isLoadingUmbrellaSCIMTokenPresent:!1})))),K=({secret:re,callback:Ae})=>$e=>(0,f.$1)().then(()=>(0,f.PD)(re)).then(f.zi).then(Fe=>{var Ye;return!(Fe==null||(Ye=Fe.data)===null||Ye===void 0)&&Ye.success?Promise.resolve():Promise.reject(["Failed to log change"])}).then(f.Ii).then(()=>{$e(t.updateLocals({responseApiModal:{success:!0},umbrellaSCIMTokenPresent:!0})),typeof Ae<"u"&&Ae($e)}).catch(({errors:Fe})=>{i($e,Fe),$e(t.updateLocals({responseApiModal:{errors:!0}}))}),b=({keyName:re,key:Ae,secret:$e,callback:Fe})=>Ye=>(0,f.iJ)(re,Ae,$e).then(()=>{Ye(t.updateLocals({responseApiModal:{success:!0}})),typeof Fe<"u"&&Fe(Ye)}).catch(({errors:Le})=>{i(Ye,Le),Ye(t.updateLocals({responseApiModal:{errors:!0}}))}),q=re=>Ae=>{Ae(t.updateLocals({selectedSiteIdForDrawer:re}))},j=re=>Ae=>{Ae(t.updateLocals({selectedUserIdForDrawer:re}))},J=()=>re=>(0,f.K0)().then(({data:Ae})=>{Ae&&Ae.nodes&&re(t.updateLocals({nodesForCases:Ae.nodes}))}).catch(({errors:Ae})=>{i(re,Ae)}),ee=()=>re=>(re(t.requestConnectedUsers()),(0,f.ij)().then(({data:Ae})=>{const{users:$e}=Ae;re(t.addConnectedUsers($e.map(Fe=>({...Fe,id:Fe.userName}))))}).catch(({errors:Ae})=>{i(re,Ae),re(t.failedRequestingConnectedUsers())}).finally(()=>re(t.doneRequestingConnectedUsers()))),V=(re,Ae)=>$e=>($e(t.updateLocals({loadRemoteAccessLogsExports:d._t})),(0,f.VH)(re,Ae).then(({data:{data:Fe}})=>{$e(t.updateLocals({remoteAccessLogsExports:Fe,loadRemoteAccessLogsExports:d.r9}))}).catch(({errors:Fe})=>{i($e,Fe),$e(t.updateLocals({loadRemoteAccessLogsExports:d.IU(Fe?.join(",")||!0)}))})),N=(re,Ae)=>$e=>($e(t.updateLocals({loadRemoteAccessLogsExport:d._t})),(0,f.ur)(Ae).then(({data:Fe})=>{$e(t.updateLocals({remoteAccessLogsExport:Fe,loadRemoteAccessLogsExport:d.r9}))}).catch(({errors:Fe})=>{i($e,Fe),$e(t.updateLocals({loadRemoteAccessLogsExport:d.IU(Fe?.join(",")||!0)}))})),w=(re,Ae,$e)=>Fe=>(Fe(t.updateLocals({loadRemoteAccessLogsExportCreate:d._t})),(0,f.Qn)(re,{from:Ae,to:$e}).then(({data:Ye})=>{Fe(t.updateLocals({remoteAccessLogsExportCreate:Ye,loadRemoteAccessLogsExportCreate:d.r9}))}).catch(({errors:Ye})=>{i(Fe,Ye),Fe(t.updateLocals({loadRemoteAccessLogsExportCreate:d.IU(Ye?.join(",")||!0)}))})),z=(re,Ae)=>$e=>($e(t.updateLocals({loadRemoteAccessLogsExportDownload:d._t})),(0,f.gX)(re,Ae).then(({data:Fe})=>{$e(t.updateLocals({remoteAccessLogsExportDownload:Fe,loadRemoteAccessLogsExportDownload:d.r9}))}).catch(({errors:Fe})=>{i($e,Fe),$e(t.updateLocals({loadRemoteAccessLogsExportDownload:d.IU(Fe?.join(",")||!0)}))})),ne=C().extend({},t,{clearErrors:n,fetchEndpointComplianceCertificates:u,fetchUmbrellaOrgApiKeys:B,fetchUmbrellaSCIMTokenPresent:F,fetchLatitudeSaml:A,doUploadSamlToUmbrella:S,fetchMerakiSaml:p,fetchNodesForCases:J,fetchUmbrellaUsers:U,fetchNetworkTunnels:o,fetchSites:M,fetchUmbrellaConfig:v,fetchUsers:m,fetchUmbrellaVmxs:P,fetchConnectedUsers:ee,flashMessage:R,destroyUmbrellaOrgConfig:L,merakiSamlCreate:I,saveUmbrellaConfig:b,saveUmbrellaSCIMToken:K,userCreate:T,userUpdate:O,setSelectedSitesIdForDrawer:q,setSelectedUserIdForDrawer:j,displayErrors:i,fetchRemoteAccessRuleset:D,fetchRemoteAccessLogsExports:V,fetchRemoteAccessLogsExport:N,remoteAccessLogsExportCreate:w,remoteAccessLogsExportDownload:z}),Y=s.selectors,te=re=>Object.values(re.models.sites.byId).map(Ae=>({...Ae,key:Ae.id})),Te=re=>Object.values(re.models.users.byId).map(Ae=>({...Ae,key:Ae.id})),me=re=>Object.values(re.models.umbrellavmxs.byId).map(Ae=>({...Ae,key:Ae.id})),Me=re=>Object.values(re.models.directoryUsers.byId).map(Ae=>({...Ae})),Ie=re=>re.models.remoteAccessUserIds.isFetching,ge=re=>re.locals.remoteAccessUserIds,de=re=>re.models.connectedUsers.isFetching,se=re=>re.locals.totalUmbrellaUsers,X=re=>Object.values(re.models.connectedUsers.byId).map(Ae=>({...Ae,key:Ae.id})),Oe=(0,g.Mz)(Me,ge,X,(re,Ae,$e)=>re.map(Fe=>{const Ye=$e.find(Le=>Le.id===Fe.id);return{...Fe,remoteAccessEnabled:Ae?Ae.includes(parseInt(Fe.id,10)):null,connectionStatus:Ye?"connected":"disconnected"}})),H=(re,Ae)=>re.models.users.byId[Ae],$=re=>re.locals.selectedSiteIdForDrawer,le=re=>re.models.sites.byId[re.locals.selectedSiteIdForDrawer],ce=re=>re.locals.selectedUserIdForDrawer,ve=re=>re.models.directoryUsers.byId[re.locals.selectedUserIdForDrawer],_e=re=>Array.isArray(re.locals.networkTunnelsData)===!1?[]:re.locals.networkTunnelsData,Ee=(0,g.Mz)(_e,re=>re.length>0),Se=(0,g.Mz)(_e,re=>re.length),k=re=>re.locals.samlDetails&&re.locals.samlDetails.validity===1,G=re=>{if(re.locals.nodesForCases&&(0,_.$O)(re))return(0,l.J)(re.locals.nodesForCases,(0,_.$O)(re),!1,{hasFrontizoNg:!0})},ie=re=>re.locals.umbrellaOrgConfig?re.locals.umbrellaOrgConfig.umbrella_organization_id:null,fe=re=>{var Ae;return(Ae=re.locals.remoteAccessLogsExports)===null||Ae===void 0?void 0:Ae[0]},De=re=>re.locals.loadRemoteAccessLogsExports||d.ue,We=re=>re.locals.loadRemoteAccessLogsExportCreate||d.ue,we=re=>re.locals.remoteAccessLogsExportDownload,Ve=re=>re.locals.loadRemoteAccessLogsExportDownload||d.ue,Pe=C().extend({},Y,{allSites:te,allUsers:Te,allUmbrellaVmxs:me,allConnectedUsers:X,getUserById:H,getSiteDataForDrawer:le,getSelectedSitesIdForDrawer:$,getUserDataForDrawer:ve,getSelectedUserIdForDrawer:ce,getSelectList:G,getUmbrellaUserCount:se,getDirectoryUsers:Oe,getNetworkTunnelsCount:Se,getIsFetchingConnectedUsers:de,getIsFetchingRemoteAccessUserIds:Ie,getNetworkTunnelsData:_e,getDoAnyTunnelsExist:Ee,getIsSamlConfigured:k,getUmbrellaOrgConfigId:ie,getLatestRemoteAccessLogsExport:fe,getRemoteAccessLogsExportsLoading:De,getRemoteAccessLogsExportCreateLoading:We,getRemoteAccessLogsExportDownload:we,getRemoteAccessLogsExportDownloadLoading:Ve}),Re=()=>s.createStore();var Ke=null},31023:(ae,x,e)=>{e.d(x,{A:()=>_});var W=e(941669),C=e.n(W),g=e(522224),c=e.n(g),y=e(6464);const d={RESET:"RESET"},f=y.A.createStore({initialize(){C().comet.init("/cometd"),this.bindActions(d.RESET,this.reset)},updateDecisionStore(a){this.loading=!1,!c().isEmpty(a.data)&&c().isUndefined(a.data.error)&&(this.data=a.data||[],this.flow_decisions=a.data[0].flow_decisions||[]),this.emit("change")},reset(a){c().isUndefined(this.live_subscription)||this.live_subscription.stop(),!c().isUndefined(a.node_id)&&(this.live_subscription=C().comet.node_subscribe("IwanDecisionMonitor",this.updateDecisionStore,a.node_id),this.loading=!0,this.flow_decisions=[],this.data=[],this.emit("change"))},getState(){return{data:this.data,flow_decisions:this.flow_decisions,loading:this.loading}}});var l={reset(a){this.dispatch(d.RESET,{node_id:a})}};function _(a,h){a.store("IwanDecisionStore")||(a.addStore("IwanDecisionStore",new f(h)),a.addActions({decisionStore:l}))}},38618:(ae,x,e)=>{e.d(x,{U1:()=>h,o1:()=>E});var W=e(652129),C=e(644200),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(967720),l=e(758928),_=e.n(l);const a=(0,W.L)().withStoreName("AnyConnectLicensing").withContextOptions([C.RJ]).withModal().create(),h=()=>a.createStore(),{actions:s}=a,t=(i,R,r)=>async A=>{try{A(s.updateModal({errors:[],isSaving:!0}));const S=d()({controller:"manage/vpn/anyconnect_licensing",action:"accept_agreement",organization:{eid:R}}),p={node_group_id:i,legal_text:r},U=await(await(0,f.A)(S,{method:"POST",headers:{"Content-Type":"application/json","X-CSRF-Token":_().authenticity_token},body:JSON.stringify(p)})).json(),D=U?.errors;let u=!0;D&&D.length&&(u=!1),A(s.updateModal({isSaving:!1,saveSuccess:u,errors:D}))}catch(S){let p=[];const I=S.responseText;if(I)try{p=JSON.parse(I).errors}catch{p=["Error saving license agreement"]}A(s.updateModal({isSaving:!1,saveSuccess:!1,errors:p.length?p:["Error saving license agreement"]}))}};var n=null;const E=c().extend({},s,{submitAgreement:t})},40359:(ae,x,e)=>{e.d(x,{eI:()=>U,f7:()=>D});var W=e(901715),C=e(388691),g=e(191328),c=e(813989),y=e(540590),d=e(640173),f=e(14602),l=e(113363);const _=(u,o)=>`${l.r_.BASE_PATH[o]}incidents/${u}/overview`,a=u=>{const o={};return u.split(`
`).forEach(M=>{const m=M.split("|");o[m[1]||""]=m[2]||""}),o},h=(u=[])=>u?.map(o=>({count:o.count,value:o.value,type:o.type})),s={1:"clean",2:"malicious",3:"suspicious",4:"common",5:"unknown"},t=(u=[])=>u?.map(o=>({count:o.count,value:o.value,type:o.type,disposition:s[o.disposition]||"unknown"})),n=(u="")=>{if(u==="")return[];const o=u.split("<br/>");return o?.map(M=>{const[,m,P,T]=M.replace("- ","").match(/\[(.+)\]\((http.+)\) \(x(\d+)\)/)||[];return{name:m||M,url:P||"",count:parseInt(T||"",10)}})},E=(u="")=>{if(u==="")return[];const o=u.split(", ");return o?.map(M=>{const[,m,P]=M.match(/\[(.+)\]\((http.+)\)/)||[];return{name:m||M,url:P||""}})},i=(u,o,M)=>{var m,P,T,O,v,L;const B=M.incident;if(!B)throw new Error("Incident details missing");const F=a(B.description||"");return{name:B.title,priority:(m=B.scores)===null||m===void 0?void 0:m.global,status:B.status,reportedBy:B.source,reportedByUrl:B.source_uri,reportedAt:(P=B.incident_time)===null||P===void 0?void 0:P.reported,assignedTo:B.assignees,mitreTactics:[],mitreTechniques:[],xdrIncidentUrl:_(u,o),detectionRisk:(T=B.scores)===null||T===void 0?void 0:T.ttp,assetValueAtRisk:(O=B.scores)===null||O===void 0?void 0:O.asset,shortDescription:B.short_description,longDescription:F["**Description**"]||"",assetsAtRisk:h((v=M.targets)===null||v===void 0?void 0:v.data)||[],observables:t((L=M.observables)===null||L===void 0?void 0:L.data)||[],sources:n(F["**Sources**"]),commonIndicators:E(F["**Common Indicators**"]),nextSteps:F["**Next Steps**"]||"",createdAt:F["**Created**"]||"",updatedAt:F["**Updated**"]||""}},R=u=>{var o,M;return{name:u.title,description:u.description,mitreId:(o=u.mitre)===null||o===void 0?void 0:o.external_id,url:(M=u.mitre)===null||M===void 0?void 0:M.url}},r=(u,o)=>{var M;return{name:u.title,description:u.description,mitreId:o,url:(M=u.mitre)===null||M===void 0?void 0:M.url}},A=u=>{const o=[],M={};return u?.forEach(m=>{var P;o.push(R(m)),(P=m.techniques)===null||P===void 0||P.forEach(T=>{var O;const v=(O=T.mitre)===null||O===void 0?void 0:O.external_id;M[v]||(M[v]=r(T,v))})}),{mitreTactics:o,mitreTechniques:Object.values(M)}};var S=e(899921);const p=C.JO.injectEndpoints({endpoints:u=>({getIncidentDetails:u.query({queryFn:async({incidentId:o,region:M},m,P,T)=>{var O,v,L,B,F;const K={url:`${W.Pu.CONURE_ROUTES.INCIDENT}/${o}/summary`};let q=await T(K);if(((O=q)===null||O===void 0||(v=O.error)===null||v===void 0?void 0:v.status)===429){var j;return m.dispatch(c.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,S.PE)((j=q)===null||j===void 0?void 0:j.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}}}else m.dispatch(c.o1.toggleRateLimitReached({reached:!1,retryAfter:0}));if(((L=q)===null||L===void 0||(B=L.error)===null||B===void 0?void 0:B.status)===401){const ee=(await(0,C.FF)(g.VF,m,P)).data;ee&&(m.dispatch(c.o1.updateAuthToken(ee.access_token)),q=await T(K))}if(!((F=q)===null||F===void 0)&&F.error)return{error:{status:"FETCH_ERROR",error:"Error fetching incident details"}};try{return{data:i(o,M,q.data)}}catch{return{error:{status:"CUSTOM_ERROR",error:"Error parsing incident details"}}}}})})}),I=C.DA.injectEndpoints({endpoints:u=>({getIncidentTactics:u.query({queryFn:async({incidentId:o},M,m,P)=>{var T,O,v,L,B;const F={url:`${W.Pu.PRIVATE_INTEL_PROXY.ROUTES.INCIDENT}/${o}/tactics`};let b=await P(F);if(((T=b)===null||T===void 0||(O=T.error)===null||O===void 0?void 0:O.status)===429){var q;return M.dispatch(c.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,S.PE)((q=b)===null||q===void 0?void 0:q.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}}}else M.dispatch(c.o1.toggleRateLimitReached({reached:!1,retryAfter:0}));if(((v=b)===null||v===void 0||(L=v.error)===null||L===void 0?void 0:L.status)===401){const J=(await(0,C.FF)(g.VF,M,m)).data;J&&(M.dispatch(c.o1.updateAuthToken(J.access_token)),b=await P(F))}if(!((B=b)===null||B===void 0)&&B.error)return{error:{status:"FETCH_ERROR",error:"Error fetching incident tactics"}};try{return{data:A(b.data)}}catch{return{error:{status:"CUSTOM_ERROR",error:"Error parsing incident tactics"}}}}})})}),{useGetIncidentDetailsQuery:U}=p,{useGetIncidentTacticsQuery:D}=I},42897:(ae,x,e)=>{e.d(x,{U1:()=>b,o1:()=>K});var W=e(540590),C=e.n(W),g=e(652129),c=e(522224),y=e.n(c),d=e(941669),f=e.n(d),l=e(869592),_=e.n(l),a=e(59347),h=e(720388),s=e(268533),t=e(763287),n=e(901439),E=e(136950),i=e(604236),R=e(36005),r=e(831657);const A={subnetPoolModal:null,cellularGatewayGroupConfig:s.lu,reservedIpRanges:t.xd,fixedIpAssignments:n.pp,portForwarding:E.vm,ipv6InboundRules:R.Tx,pingerDestinations:i.Se,cellularGateways:r.Li},S=Object.keys(A),p=(0,g.L)().withStoreName("CellularGatewaySettingsStore").withModels(S).withChanges().create(),I=p.actions,U=j=>{const J=["First","Second","Third","Fourth"];return j.map((ee,V)=>({subnet:ee.subnet,applianceIp:ee.gateway_ip,name:`${J[V]} MG`,origin:"Cellular",ipv6Subnets:[]}))},D=j=>{const J="serial",ee=y().reduce(j.cellularGatewaysContext,(V,N)=>(V[N[J]]=N,V),{});return j.addressingNat.ipv6Subnets.forEach(V=>{const N=ee[V[J]];N&&(N.ipv6Subnets?N.ipv6Subnets.push(V):N.ipv6Subnets=[V])}),j.addressingNat.subnets.map(V=>({...ee[V[J]],...V}))},u=j=>y().map(j.portForwarding,(J,ee)=>({id:ee.toString(),...J})),o=(j,J)=>{const ee="mac",V=[];let N=0;return y().forEach(j,w=>{const z=J[w[ee]];V.push({id:N,nodeId:w.id,name:w.name,ipv6InboundConnectionsEnabled:z.ipv6InboundConnectionsEnabled,allowedRemoteIps:z.allowedRemoteIps}),N++}),V},M=(j,J)=>{const ee="mac";let V=0;const N=[];return y().forEach(j,w=>{const ne=(J[w[ee]]||[]).sort((Y,te)=>a.A.ipv4DotToNumber(Y.start)<a.A.ipv4DotToNumber(te.start)?-1:1);y().forEach(ne,Y=>{N.push({id:V,nodeId:w.id,comment:Y.comment,start:Y.start,end:Y.end}),V++})}),N},m=(j,J)=>{const ee="mac";let V=0;const N=[];return y().forEach(j,w=>{const ne=y().map(J[w[ee]]||{},(Y,te)=>({mac:te,...Y})).sort((Y,te)=>a.A.ipv4DotToNumber(Y.ip)<a.A.ipv4DotToNumber(te.ip)?-1:1);y().forEach(ne,Y=>{N.push({id:V,nodeId:w.id,mac:Y.mac,name:Y.name,ip:Y.ip}),V++})}),N},P=j=>j.map((J,ee)=>({id:ee,ip:J.ip,description:J.description,isDefault:J.default})),T=(j,J)=>{const ee={id:"0"},V={poolNetwork:J.addressingNat.cidr.split("/")[0],poolMask:J.addressingNat.cidr.split("/")[1],subnetMask:J.addressingNat.mask,deploymentMode:J.addressingNat.deploymentMode,ipv6Enabled:J.addressingNat.ipv6Enabled};y().extend(ee,V),j(I.addSubnetPoolModal([{id:"0",...V}])),y().extend(ee,y().omit(J.dhcpSubnet,"fixedIpAssignments")),y().extend(ee,{ipv6InboundConnectionsEnabled:J.ipv6InboundRules.enabled});const N=J.trafficShaping,w=N.limitUp===N.limitDown,z=w&&N.limitUp!==null?parseInt(N.limitUp,10)/1e3:0,ne=w&&[5,10,20,50,0].includes(z);return j(I.updateLocals({isSimpleCellularBandwidth:ne,originalCellularBandwidth:ne})),y().extend(ee,{limitSimple:[5,10,20,50,0].includes(z)?z:0,upLimitDetail:N.limitUp===null?0:parseInt(N.limitUp,10)/1e3,downLimitDetail:N.limitDown===null?0:parseInt(N.limitDown,10)/1e3}),[ee]},O=()=>(j,J)=>{const ee=J(),V=Object.values((0,h.o)(ee))[0];f().getJSON(_()({controller:"configure",action:"refreshed_subnets_json",pool_network:V.poolNetwork,pool_mask:V.poolMask,subnet_mask:V.subnetMask})).done(N=>{let w=0;const z={};y().each((0,r.t9)(ee),(Y,te)=>{z[te]={subnet:N[w].subnet,applianceIp:N[w].gateway_ip},w++}),j(I.changeManyCellularGateways(z));const ne=U(N);j(I.updateLocals({cellularGatewaysSample:ne})),j(I.changeCellularGatewayGroupConfig("0",{...V})),j(I.updateSubnetPoolModal([V])),j(I.updateLocals({showModal:!1,refreshDhcp:!0,refreshPortForwarding:!0}))}).fail(()=>{j(I.updateLocals({errors:["There was an issue grabbing refreshed subnets!"]}))}).always(()=>{j(I.resetSubnetPoolModalChanges())})},v=()=>(j,J)=>{const ee=J();f().getJSON(_()({controller:"configure",action:"cellular_gateway_ipv6_json"})).done(V=>{const N="serial",w=y().reduce(V,(ne,Y)=>(ne[Y[N]]?ne[Y[N]].push(Y):ne[Y[N]]=[Y],ne),{}),z={};y().each((0,r.t9)(ee),(ne,Y)=>{z[Y]={ipv6Subnets:w[ne.serial]?w[ne.serial]:[]}}),j(I.changeManyCellularGateways(z)),j(I.changeCellularGatewayGroupConfig("0",{ipv6Enabled:!0})),j(I.updateLocals({fetchingIpv6:!1}))}).fail(()=>{j(I.updateLocals({errors:["There was an issue grabbing IPv6 addresses!"]}))})},L=j=>J=>{J(I.resetAllChanges());const ee=U(j.cellularGatewaysSample),V=D(j),N=m(V,j.dhcpSubnet.fixedIpAssignments),w=M(V,j.dhcpSubnet.reservedIpRanges),z=o(V,j.ipv6InboundRules.rulesPerMg);J(I.updateLocals({cellularGatewaysSample:ee,...j.uiContextHash})),J(I.addCellularGateways(V)),J(I.addPortForwarding(u(j))),J(I.addReservedIpRanges(w)),J(I.addFixedIpAssignments(N)),J(I.addIpv6InboundRules(z)),J(I.addPingerDestinations(P(j.trafficShaping.destinations))),J(I.addCellularGatewayGroupConfig(T(J,j))),J(I.updateLocals({isLoading:!1}))},B=()=>(j,J)=>{j(I.updateLocals({isSaving:!0,saveSuccess:!1,errors:[]}));const ee={},V=J();y().each(A,(N,w)=>{N&&!y().isEmpty(N(V))&&(ee[w]=N(V))}),f().ajax({url:_()({controller:"configure",action:"update_cellular_gateway_settings"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({changes:ee})}).done(N=>{const w=y().isEmpty(N.errors);w&&j(L(N.new_settings)),j(I.updateLocals({isSaving:!1,saveSuccess:w,errors:N.errors}))}).fail(N=>{j(I.updateLocals({isSaving:!1,saveSuccess:!1,errors:[N.responseText]}))})},F=()=>j=>{j(I.resetAllChanges()),j(I.requestCellularGateways()),j(I.requestSubnetPoolModal()),j(I.requestFixedIpAssignments()),j(I.requestPortForwarding()),j(I.requestIpv6InboundRules()),j(I.requestPingerDestinations()),j(I.requestCellularGatewayGroupConfig()),f().getJSON(_()({controller:"configure",action:"cellular_gateway_settings_json"}),J=>{j(L(J))})},K=y().extend({},I,{submitChanges:B,fetchSettings:F,fetchRefreshedSubnets:O,fetchIpv6:v}),b=()=>p.createStore(),q=p.actionTypes},46069:(ae,x,e)=>{e.d(x,{o1:()=>p});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(720506),_=e(489978);const a=["hardwareDefects","serialsForRefurbishment","orgsForRma","orgsForSetInfoSubmitted","nodesToMarkDefectiveAndOrderable","orgsForReminder","nodesToRemoveFromReplacement"],h=(0,f.L)().withStoreName("HardwareReplacementsStore").withModels(a).withChanges().create(),s=h.actions,t=()=>D=>(D(s.requestHardwareDefects()),c().ajax(d()({controller:"organization",action:"defects_json"})).then(u=>{D(s.addHardwareDefects([C().extend({id:C().uniqueId("defects-")},u)]))})),n=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.KL)(o)||{}).nodes||{},m={serials:C().compact((M.serials||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"admin",action:"update_refurbish_devices"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},E=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.Ag)(o)||{}).orgs||{},m={replacementProgram:(M.replacementProgram||{}).value,orgIdsForRMA:C().compact((M.orgIdsForRMA||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"admin",action:"update_hardware_replacements_select_for_rma"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},i=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.ZB)(o)||{}).orgs||{},m={replacementProgram:(M.replacementProgram||{}).value,orgIdsThatSubmittedInfo:C().compact((M.orgIdsThatSubmittedInfo||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"admin",action:"update_set_replacement_info_submitted"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},R=()=>D=>(D(s.updateLocals({isLoadingReplacementPrograms:!0})),c().ajax(d()({controller:"admin",action:"replacement_program_names"})).then(u=>{D(s.updateLocals({isLoadingReplacementPrograms:!1})),D(s.updateContext({replacementProgramNames:u}))})),r=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.TC)(o)||{}).nodes||{},m={replacementProgram:(M.replacementProgram||{}).value,nodeSerialsToMarkDefectiveAndOrderable:C().compact((M.nodeSerialsToMarkDefectiveAndOrderable||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"support_admin",action:"update_mark_devices_orderable"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},A=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.Yw)(o)||{}).orgs||{},m={replacementProgram:(M.replacementProgram||{}).value,orgIdsForReminder:C().compact((M.orgIdsForReminder||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"admin",action:"update_hardware_replacements_reminder"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},S=()=>(D,u)=>{D(s.updateLocals({isSaving:!0,saveSuccess:!1,saveErrors:[]}));const o=u(),M=((0,_.Qn)(o)||{}).devices||{},m={replacementProgram:(M.replacementProgram||{}).value,organizationId:M.orgId,nodeSerials:C().compact((M.nodeIds||"").split(/[\r\n]+/))};return c().ajax({type:"POST",url:d()({controller:"admin",action:"update_hardware_replacements_remove_devices_from_replacement"}),data:m}).done(()=>{D(s.resetAllChanges()),D(s.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(P=>{const T=l.A.parseErrorsFromResponse(P);D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:T}))})},p=C().extend({},s,{fetchHardwareDefects:t,submitSerialsForRefurbishment:n,submitOrgsForRmaSelection:E,submitOrgsForSetInfoSubmitted:i,fetchReplacementProgramNames:R,submitNodesToMarkOrderable:r,submitOrgsForReminder:A,submitNodesForRemovalFromReplacement:S}),I=()=>{h.createStore()};var U=null},48330:(ae,x,e)=>{e.d(x,{U1:()=>R,o1:()=>E});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(652129),d=e(328203);const f=["mfgTokenCertificates"],l=(0,y.L)().withStoreName("UserProfileStore").withModels(f).withModal().withUser().create(),_=l.actions,a=()=>r=>C().ajax({url:c()({controller:"users",action:"user_profile_settings"}),type:"GET",dataType:"json"}).done(A=>r(_.updateUser({distanceUnit:A.distance_unit}))).fail(()=>r(_.updateUser({distanceUnit:d.Tk}))),h=r=>A=>{A(_.updateLocals({mfgTokenCertificates:r}))},E=Object.assign({},_,{fetchMfgTokenCertificates:r=>A=>{A(_.requestMfgTokenCertificates());const S=`users/${r}/mfg_token_certificates`;return C().ajax({url:c()({controller:S,action:"index"})}).done(p=>{A(_.addMfgTokenCertificates(p))}).fail(p=>{A(_.updateMfgTokenCertificatesLocals({errors:p}))}).always(()=>{A(_.doneRequestingMfgTokenCertificates())})},persistMfgTokenCertificateAddition:(r,A)=>S=>{const p=`users/${r}/mfg_token_certificates`;return S(h({saving:!0,success:null,errors:[]})),C().ajax({url:c()({controller:p}),type:"POST",data:A}).done(I=>{S(_.updateMfgTokenCertificates([I])),S(h({saving:!1,success:!0}))}).fail(I=>{const{errors:U}=JSON.parse(I.responseText);S(h({saving:!1,success:!1,errors:U}))})},persistMfgTokenCertificateDeletion:(r,{serial:A})=>S=>{const p=`users/${r}/mfg_token_certificates/${A}`;return S(h({saving:!0,success:null,errors:[]})),C().ajax({url:c()({controller:p}),type:"DELETE"}).done(({id:I})=>{S(_.deleteMfgTokenCertificatesById(I)),S(h({saving:!1,success:!0}))}).fail(I=>{const{errors:U}=JSON.parse(I.responseText);S(h({saving:!1,success:!1,errors:U}))})},updateMfgTokenCertificateLocals:h,fetchUserDistanceUnit:a});var i=null;const R=r=>l.createStore(r)},51813:(ae,x,e)=>{e.d(x,{G8:()=>t});var W=e(14602),C=e.n(W),g=e(296540),c=e(652129),y=e(310466),d=e(869188);const f="GroupPolicy",l="_ALL_",_=()=>buildFactory().create().createStore(),a=n=>({...n,id:n.groupPolicyId,key:n.groupPolicyId}),h=y.kC.enhanceEndpoints({addTagTypes:[f]}).injectEndpoints({endpoints:({query:n})=>({fetchGroupPolicies:n({query:({networkId:E})=>({url:`networks/${E}/groupPolicies`}),transformResponse:E=>E.map(i=>a(i)),providesTags:E=>E?[...E.map(({groupPolicyId:i})=>({type:f,id:i})),{type:f,id:l}]:[{type:f,id:l}]})}),overrideExisting:!1}),{useFetchGroupPoliciesQuery:s}=h,t=n=>{const{data:E,isLoading:i,isFetching:R,...r}=s(n);return(0,g.useMemo)(()=>({data:(0,d.v)(E??[],"groupPolicyId"),isLoading:i,isFetching:R,...r}),[E,i,R,r])}},51937:(ae,x,e)=>{e.d(x,{A:()=>r});var W=e(640173),C=e.n(W),g=e(14602),c=e.n(g),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(967720),s=e(4933);const t=(0,s.A)("SHARD_CHECKOUT_STORE"),n={add_authorized_users:"authorization",checkout:"checkout",checkin:"checkin",renew:"renew",transfer_checkout:"transfer"},E="checkouts",i={add_authorized_users:"PUT",checkout:"POST",checkin:"DELETE",renew:"PUT",transfer_checkout:"PUT"},R={fetch(){return l().get(a()({controller:"shard_checkout",action:E})).done(A=>{this.dispatch(t.constants.RESET,A)})},fetch_shard_history(A){return l().get(a()({controller:"shard_checkout",action:"shard_history"}),A).done(S=>{this.dispatch(t.constants.RESET,S)})},sendRequest(A,S,p,I,U){S.timestamp=new Date().toISOString(),S.request_type=A,l().remove_top_status();var u=l()("#requestFailure");u.fadeOut();const o=n[A];l().top_status({content:`${baseline_spinner_html()} Processing ${o} request`,box_class:"working"});function M(v){d().each(l()(".requestButton"),L=>{l()(L).prop("disabled",v)})}M(!0);function m(v){l().remove_top_status(),I();const L=`Error processing ${o} request<br><br>${v.replace(/\n/g,"<br>")}`;u.html(L).fadeIn()}var P;function T(v){return new Promise(L=>{(0,h.A)(a()({controller:"shard_checkout",action:"shard_history",params:v})).then(B=>B.json()).then(B=>{const F=d().pluck(B,"checkout_history");F[0].length===0?L(null):L(A==="checkin"?F[0][0].checkin_result:F[0][0].checkout_result)})})}const O=async()=>{let v=await Promise.all(S.shard_names.map(L=>T({shard_name:L})));return(v.includes(null)||v.indexOf("")!==-1)&&(v=await new Promise(L=>{setTimeout(()=>L(O()),2e3)})),v};return l().ajax({url:a()({controller:"shard_checkout",action:E}),type:i[A],data:S}).always(()=>{U()}).done(v=>{S.ids=d().pluck(v,"id");async function L(){let B=d().pluck(v,A==="checkin"?"checkin_result":"checkout_result");(B.includes(null)||B.indexOf("")!==-1)&&(B=await O()),M(!1),B.find(K=>K==="DIRTY SHARD")?(m("Checkin attempted on dirty shard"),I()):B.every(K=>K==="SUCCESS")?(l().top_status({content:`Completed ${o} request`,box_class:"good",remove_after:1e4}),p()):(m("An unexpected error occurred"),I())}L()}).fail(v=>{m(JSON.parse(v.responseText).error),P&&P.kill(),M(!1)})}};function r(A){A.store("ShardCheckoutStore")||(A.addStore("ShardCheckoutStore",t),A.addActions({shard_checkouts:R}))}},53785:(ae,x,e)=>{e.d(x,{u:()=>c});var W=e(310466),C=e(917157);const g=W.kC.injectEndpoints({endpoints:y=>({fetchCellularDataProfilesBySerials:y.query({query:d=>({url:`organizations/${Mkiconf.org_id}/devices/cellular/data/devices${(0,C.DK)({includeAssigned:!0,serials:d})}`})})})}),{useLazyFetchCellularDataProfilesBySerialsQuery:c}=g},55766:(ae,x,e)=>{e.d(x,{U1:()=>E,o1:()=>t});var W=e(652129),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d),l=e(720506);const _=["firewallTestQueryResults"],a=(0,W.L)().withStoreName("FirewallTestQueryStore").withModels(_).withPrefs().withFlexTables().create(),h=a.actions,s=()=>R=>{R(h.requestFirewallTestQueryResults());const r=y().get(g()({controller:"support_admin",action:"customers_failing_firewall_test"}));R(h.updateLocals({error:""})),r.done(A=>{R(h.addFirewallTestQueryResults(A))}),r.fail(A=>{const S=l.A.parseErrorsFromResponse(A)[0];R(h.updateLocals({error:S}))}),r.always(()=>h.doneRequestingFirewallTestQueryResults())},t=f().extend({},h,{fetchFirewallTestQueryResults:s}),n=a.createStore(),E=()=>a.createStore();var i=null},64241:(ae,x,e)=>{e.d(x,{$q:()=>a,Al:()=>_,DW:()=>i,Ov:()=>n,T3:()=>s,VD:()=>t,Vn:()=>p,XJ:()=>h,Yk:()=>R,ZS:()=>S,_n:()=>r,i3:()=>f,pM:()=>E,qI:()=>A,sG:()=>c,yl:()=>l});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.iK.enhanceEndpoints({addTagTypes:["reportDownload"]}).injectEndpoints({endpoints:I=>({fetchReportS3UrlById:I.query({query:({orgId:U,captureId:D})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/downloadReportUrl/generate`,method:"POST"}),providesTags:(U,D,u)=>[{type:"reportDownload",id:u.captureId}]})})}),d=C.kC.enhanceEndpoints({addTagTypes:["packetCapture","packetCaptureDownload"]}).injectEndpoints({endpoints:I=>({fetchPacketCapturesInNetwork:I.query({query:({orgId:U,networkIds:D,perPage:u,startingAfter:o,endingBefore:M,name:m,process:P,notes:T,deviceName:O,adminName:v,clientMac:L,clientName:B,ssidName:F,serials:K,t0:b,t1:q})=>({url:`organizations/${U}/devices/packetCapture/captures${(0,g.DK)({networkIds:D,perPage:u,startingAfter:o,endingBefore:M,name:m,process:P,notes:T,deviceName:O,adminName:v,clientMac:L,clientName:B,ssidName:F,serials:K,t0:b,t1:q})}`}),providesTags:(U,D)=>[{type:"packetCapture",id:"ALL"}]}),fetchPacketCaptureById:I.query({query:({orgId:U,captureIds:D})=>({url:`organizations/${U}/devices/packetCapture/captures${(0,g.DK)({captureIds:D})}`})}),fetchPacketCaptureS3UrlById:I.query({query:({orgId:U,captureId:D,serial:u})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/downloadUrl/generate${(0,g.DK)({serial:u})}`,method:"POST"}),providesTags:(U,D,u)=>[{type:"packetCaptureDownload",id:u.captureId}]}),startPacketCapture:I.mutation({query:({orgId:U,capture:D})=>({url:`organizations/${U}/devices/packetCapture/captures`,method:"POST",body:D}),invalidatesTags:(U,D)=>[{type:"packetCapture",id:"ALL"}]}),startBulkPacketCapture:I.mutation({query:({orgId:U,capture:D})=>({url:`organizations/${U}/devices/packetCapture/captures/bulkCreate`,method:"POST",body:D}),invalidatesTags:(U,D)=>[{type:"packetCapture",id:"ALL"}]}),deletePacketCapturesById:I.mutation({query:({orgId:U,captureId:D})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}`,method:"DELETE"}),invalidatesTags:()=>[{type:"packetCapture",id:"ALL"}]}),bulkDeletePacketCapturesByIds:I.mutation({query:({orgId:U,captureIds:D})=>({url:`organizations/${U}/devices/packetCapture/captures/bulkDelete`,method:"POST",body:{captureIds:D}}),invalidatesTags:()=>[{type:"packetCapture",id:"ALL"}]}),stopPacketCaptureById:I.mutation({query:({orgId:U,captureId:D,capture:u})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/stop`,method:"POST",body:u}),invalidatesTags:(U,D)=>[{type:"packetCapture",id:"ALL"}]}),fetchPcapFlowHighlightsById:I.query({query:({orgId:U,captureId:D})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/highlights`})}),fetchPacketCaptureSummaryById:I.query({query:({orgId:U,captureId:D})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/summary`})}),fetchPacketCaptureReasoningById:I.query({query:({orgId:U,captureId:D})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/reasoning`})}),fetchPacketCaptureCapabilitiesById:I.query({query:({orgId:U,captureId:D,endpoints:u})=>({url:`organizations/${U}/devices/packetCapture/captures/${D}/capabilities${(0,g.DK)({endpoints:u})}`})})}),overrideExisting:!1}),{useFetchPacketCapturesInNetworkQuery:f,useFetchPacketCaptureByIdQuery:l,useLazyFetchPacketCaptureByIdQuery:_,useFetchPacketCaptureS3UrlByIdQuery:a,useStartPacketCaptureMutation:h,useStartBulkPacketCaptureMutation:s,useDeletePacketCapturesByIdMutation:t,useBulkDeletePacketCapturesByIdsMutation:n,useStopPacketCaptureByIdMutation:E,useFetchPcapFlowHighlightsByIdQuery:i,useFetchPacketCaptureSummaryByIdQuery:R,useFetchPacketCaptureReasoningByIdQuery:r,useFetchPacketCaptureCapabilitiesByIdQuery:A,util:S}=d,{useFetchReportS3UrlByIdQuery:p}=y},71564:(ae,x,e)=>{e.d(x,{A:()=>f});var W=e(4933),C=e(967720),g=e(869592),c=e.n(g);const y=(0,W.A)("SCHEDULE_ENTRY_STORE"),d={reset(l){this.dispatch(y.constants.RESET,l)},update(l){this.dispatch(y.constants.UPDATE,l)},fetch(){return(0,C.A)(c()({controller:"schedules",action:"schedule_entries_json"}),{credentials:"same-origin"}).then(l=>l.json()).then(l=>{this.dispatch(y.constants.RESET,l)})}},f=l=>{l.store("ScheduleEntryStore")||(l.addStore("ScheduleEntryStore",y),l.addActions({scheduleEntry:d}))}},72201:(ae,x,e)=>{e.d(x,{Ay:()=>i,GP:()=>E,xQ:()=>n});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(646894),d=e.n(y),f=e(689917),l=e(625473),_=e.n(l),a=e(184988),h=e.n(a);const s=R=>R.charAt(0).toUpperCase()+R.slice(1),t=R=>R.id;class n extends f.A{constructor(r,A={}){super(),this.modelName=r,c().isFunction(A.getId)?this.getId=A.getId:this.getId=t}modelActionTypes(){const r=this.modelName.toUpperCase();return{requestPageFor:`REQUEST_PAGE_FOR_${r}`,gotAllPagesFor:`GOT_ALL_PAGES_FOR_${r}`}}internalModelActionTypes(){const r=this.modelName.toUpperCase();return c().extend({},this.modelActionTypes(),{update:`UPDATE_${r}`})}buildModelActions(){const r=s(this.modelName),A=this.modelActionTypes();return{[`requestPageFor${r}`]:(S={},p=0,I=0)=>({type:A.requestPageFor,params:S,offset:p,expectedResults:I}),[`gotAllPagesFor${r}`]:S=>({type:A.gotAllPagesFor,params:S})}}buildModelReducer(){const r=this.internalModelActionTypes(),A={isFetching:!1,fetchingFor:{},lastIdFetched:null,totalToFetch:null};return(S=A,p)=>{switch(p.type){case r.requestPageFor:return d()(S,{isFetching:{$set:!0},fetchingFor:{[_()(p.params)]:{$set:!0}},totalToFetch:{$set:p.expectedResults||S.totalToFetch||0}});case r.update:{const I=p.updates;if(I.length===0){const U=c().omit(S.fetchingFor,_()(p.params)),D=d()(A,{fetchingFor:{$set:U}});return d()(S,{$merge:D})}else{const U=this.getId(I[I.length-1]);return d()(S,{lastIdFetched:{$set:U}})}}case r.gotAllPagesFor:{const I=c().omit(S.fetchingFor,_()(p.params)),U=d()(A,{fetchingFor:{$set:I}});return d()(S,{$merge:U})}default:return S}}}create(){return{actions:this.buildModelActions(),actionTypes:this.modelActionTypes(),reducer:this.buildModelReducer()}}}class E{constructor(r,A,S,p){this.modelName=r,this.actions=A,this.queryAction=S,this.parseAction=p,this.name=s(r),this[`getPaginated${this.name}`]=this.getPaginatedObjects}startGettingPages=(r,A,S)=>p=>(this.debug&&h()(`Pagination:${this.name} Start fetch of ${S} ${this.name} with`,r),p(this.actions[`requestPageFor${this.name}`](r,A,S)),Promise.resolve());doneFetchingPages=r=>A=>(this.debug&&h()(`Pagination:${this.name} Done fetching pages`),A(this.actions[`gotAllPagesFor${this.name}`](r)),Promise.resolve());addPageToStore=r=>A=>(this.debug&&h()(`Pagination:${this.name} updating store with ${r.length} new objects`),A(this.actions[`update${this.name}`](r)),Promise.resolve(r));shouldFetchNextPage=(r,A,S,p)=>I=>r.length===0||S>0&&r.length<S?I(this.doneFetchingPages(A)):I(this.fetchNextPage(A,S,p));fetchNextPage=(r,A,S)=>p=>(this.debug&&h()(`Pagination:${this.name} Fetch from offset ${S}`),p(this.queryAction(r,S)).then(I=>p(this.parseAction(I,S))).then(([I,U])=>p(this.addPageToStore(I)).then(()=>p(this.shouldFetchNextPage(I,r,A,U)))));getPaginatedObjects=(r,A,S=0,p=0)=>(I,U)=>(this.debug&&h()(`Pagination:${this.name} Initiating fetch with`,r),U().models[this.modelName].fetchingFor[_()(r)]?(this.debug&&h()(`Pagination:${this.name} Already fetching ${this.name}, aborting.`),Promise.resolve()):I(this.startGettingPages(r,p,A)).then(()=>I(this.fetchNextPage(r,S,p))))}const i=n},74998:(ae,x,e)=>{e.d(x,{Tp:()=>n,mG:()=>o,o1:()=>I});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(646894),d=e.n(y),f=e(869592),l=e.n(f),_=e(82960);const a=C().throttle((m,P)=>{c().ajax({url:l()({controller:"dashboard",action:"quiet_update"}),type:"POST",contentType:"application/json",data:JSON.stringify({user_prefs:m})}).done(P)},2e3),h={UPDATE_PREF:"PREFS.UPDATE_PREFS",PREFS_SAVED:"PREFS.PREFS_SAVED",RESET_PREFS:"PREFS.RESET_PREFS",MARK_POST:"PREFS.MARK_POST"},s=(m,P)=>{if(m.prefs&&m.prefs.prefs)return m.prefs.prefs[P.key]},t=m=>m.prefs.prefs,n={getPrefByKey:s},E=()=>({type:h.PREFS_SAVED}),i=()=>({type:h.MARK_POST}),R=(m,P)=>({type:h.UPDATE_PREF,prefKey:m,prefValue:P}),r=(m,P)=>(T,O)=>{T(R(m,P));const v=O();T(i()),a(t(v),()=>T(E()))},I={updatePref:r,resetPrefs:m=>({type:h.RESET_PREFS,payload:m}),setPref:(m,P)=>r(m,{$set:P}),setNestedPref:(m,P)=>{const T=Object.keys(P).reduce((O,v)=>{const L=typeof P[v]<"u";return O[v]={$set:L?P[v]:null},O},{});return r(m,T)}},U=(m={},P)=>{switch(P.type){case h.UPDATE_PREF:{const T=m[P.prefKey]?m:d()(m,{[P.prefKey]:{$set:{}}});return d()(T,{[P.prefKey]:P.prefValue})}case h.RESET_PREFS:return C().clone(P.payload)||{};default:return m}},D=(m={updatedAt:new Date,savedAt:new Date,lastPost:0},P)=>{switch(P.type){case h.UPDATE_PREF:return d()(m,{updatedAt:{$set:new Date}});case h.PREFS_SAVED:return d()(m,{savedAt:{$set:new Date}});case h.MARK_POST:return d()(m,{lastPost:{$set:new Date}});default:return m}},u=(0,_.combineReducers)({prefs:U,meta:D}),o=()=>({actions:I,reducer:u,actionTypes:h});var M=null},80485:(ae,x,e)=>{e.d(x,{A:()=>c});var W=e(4933);const C=(0,W.A)("COPIED_ORGANIZATIONS_STORE"),g={reset(y){this.dispatch(C.constants.RESET,y)},update(y){this.dispatch(C.constants.UPDATE,y)}};function c(y){y.store("CopiedOrganizationsStore")||(y.addStore("CopiedOrganizationsStore",C),y.addActions({copiedOrganizations:g}))}},90648:(ae,x,e)=>{e.d(x,{U1:()=>r,o1:()=>R,xV:()=>h});var W=e(758928),C=e.n(W),g=e(917157),c=e(787915),y=e(773489),d=e(652129),f=e(864025);const l=["ospfRouting","orgWideOspfRoutings"],_=(0,d.L)().withStoreName("OspfRoutingStore").withModels(l).withChanges().create(),a=_.actions,h="Default",s=(S,p)=>{const{vrf:I,v3:U,...D}=p,u=[{id:"v2",...D}];U&&u.push({id:"v3",...U}),S(a.addOspfRouting(u))},t=(S={})=>{const{vrfName:p}=S,I=!p||p===h?"":(0,g.DK)({vrf:p});return async U=>{U(a.requestOspfRouting());try{const D=await(0,c.A)({version:1,resource:`/networks/N_${C().ng_id}/switch/routing/ospf${I}`,operation:"read"});s(U,D)}catch{U(a.updateLocals({fetchErrors:["Failed request to fetch OSPF routing config"]}))}finally{U(a.doneRequestingOspfRouting())}}},n=(S,p)=>{const{items:I}=p,U=I.map(D=>{const{vrf:u}=D;return{...D,id:u?u.name:h}});S(a.addOrgWideOspfRoutings(U))},R=Object.assign({},a,{fetchOspfRoutingConfig:t,fetchOrgWideOspfRoutingConfigs:()=>async S=>{S(a.requestOrgWideOspfRoutings());try{const p=await(0,c.A)({version:1,resource:`/organizations/${C().org_id}/switch/routing/ospf?networkIds[]=N_${C().ng_id}`,operation:"read"});n(S,p)}catch{S(a.updateLocals({fetchErrors:["Failed request to fetch OSPF routing configs"]}))}finally{S(a.doneRequestingOrgWideOspfRoutings())}},submitUpdatedOspfRoutingConfig:({version:S,vrf:p}={version:void 0,vrf:void 0})=>{const I=!p||p===h?"":(0,g.DK)({vrf:p});return async(U,D)=>{const u=D();U(a.updateLocals({isSaving:!0,saveSuccess:null,errors:[]}));const o=(0,f.Js)(u,{id:S});S==="v2"&&!o.md5AuthenticationEnabled&&delete o.md5AuthenticationKey;try{const M=await(0,c.A)({version:1,resource:`/networks/N_${C().ng_id}/switch/routing/ospf${I}`,operation:"update",body:S==="v2"?o:{v3:o}});U(a.updateLocals({saveSuccess:!0})),U(a.resetOspfRoutingChangesById(S)),U(y.o1.fetchL3DataForAllModels(p)),s(U,M)}catch(M){U(a.updateLocals({errors:[M.message]}))}finally{U(a.updateLocals({isSaving:!1})),U(a.doneRequestingOspfRouting())}}}}),r=()=>_.createStore();var A=null},98442:(ae,x,e)=>{e.d(x,{U1:()=>Oe,o1:()=>de,px:()=>P});var W=e(995843),C=e.n(W),g=e(14602),c=e.n(g),y=e(184988),d=e.n(y),f=e(758928),l=e.n(f),_=e(522224),a=e.n(_),h=e(652129),s=e(967720),t=e(399730),n=e(202263),E=e(703314),i=e(158438),R=e(175038);const r=1,A=20,S=["adaptivePolicyAcls","adaptivePolicyGroups","adaptivePolicyOverview","adaptivePolicies","globalSettings"],p=(0,h.L)().withStoreName("AdaptivePoliciesStore").withModels(S).withPrefs().withChanges().withFlexTables().withModal().create(),I=p.actions,U=()=>I.updateLocals({showConfirmation:!1,saveSuccess:!1,saveErrors:[],isSaving:!0}),D=()=>I.updateLocals({showConfirmation:!0,saveSuccess:!0,saveErrors:[],isSaving:!1}),u=$=>I.updateLocals({showConfirmation:!0,saveSuccess:!1,saveErrors:$,isSaving:!1}),o=()=>I.updateLocals({showConfirmation:!1,saveSuccess:!1,saveErrors:[],isSaving:!1}),M={create:"POST",read:"GET",update:"PUT",destroy:"DELETE"},m=$=>new Promise(le=>setTimeout(le,$)),P=async $=>{const{resource:le,operation:ce,body:ve,version:_e=r}=$,Ee=`/api/v${_e}${le}`,Se={method:M[ce],headers:{"X-CSRF-Token":l().authenticity_token}};if(Se.method===void 0)throw Error(`Invalid operation: ${ce}`);ve&&(Se.body=JSON.stringify(ve),Se.headers["Content-Type"]="application/json");const k=await(0,s.A)(Ee,Se);if(k.ok){const we=await k.text();return we===""?{}:JSON.parse(we)}const{headers:G,status:ie}=k;if(ie===429){const we=parseInt(G.get("Retry-After"),10)*1e3;return await m(we),P($)}let fe,De;try{var We;fe=await k.json(),De=(We=fe.errors)===null||We===void 0?void 0:We.join(`
`)}catch{De="A server error occurred"}throw d()(`${ie} ${Ee} - ${JSON.stringify(Se)} => ${JSON.stringify(fe)}`),i.Ay.error(De,{team:R.T3.MS_DASHBOARD.tag,feature:R.Gv.ADAPTIVE_POLICY_API.tag}),Error(De)},T=async($,le)=>{const ve=a().chain($).groupBy(({version:k=r})=>k).map(a().partial(a().chunk,a(),A)).flatten(1).value().map(async k=>{const G=k.length===1,ie=k.map(We=>a().object(Object.entries(We).filter(([we])=>we==="version"||!we.startsWith("_"))));let fe=!1,De=[];try{const We=await P(G?ie[0]:{version:k[0].version,resource:`/organizations/${l().org_id}/actionBatches`,operation:"create",body:{confirmed:!0,synchronous:!0,actions:ie}});if(!G){const we=We;fe=we.status.failed,De=we.status.errors}}catch(We){fe=!0,De=We.message.split(`
`)}return k.forEach(We=>{We.failed=fe}),De}),_e=await Promise.all(ve),Ee=$.filter(k=>!k.failed),Se=a().uniq(_e.flat());if(le&&Ee.length>0&&await le(Ee),Se.length>0)throw new Error(Se.join(`
`))},O=$=>async(le,ce)=>{le(U());try{return await $(le,ce),le(D())}catch(ve){return le(u(ve.message.split(`
`)))}},v=({version:$,endpoint:le,modelName:ce,modelActions:ve,responseToEntities:_e=Se=>Se,merge:Ee})=>{const Se=ce.charAt(0).toUpperCase()+ce.substring(1),{[`doneRequesting${Se}`]:k,[`request${Se}`]:G}=ve,ie=ve[Ee?`update${Se}`:`add${Se}`];return async fe=>{fe(G());try{const De=await P({version:$,resource:le,operation:"read"});fe(ie(_e(De)))}catch{}return fe(k())}},L=({version:$,endpoint:le,modelName:ce,modelActions:ve,saveActionWrapper:_e,apiEntityToEntity:Ee=k=>k,flexTableKey:Se})=>{const k=ce.charAt(0).toUpperCase()+ce.substring(1),{[`update${k}WithMerge`]:G,[`update${k}`]:ie,[`delete${k}ById`]:fe}=ve,De=Pe=>({version:$,resource:le,operation:"create",body:Pe}),We=Pe=>({version:$,resource:`${le}/${Pe.id}`,operation:"update",body:Pe}),we=Pe=>({_id:Pe,version:$,resource:`${le}/${Pe}`,operation:"destroy"}),Ve=()=>v({version:$,endpoint:le,modelName:ce,modelActions:ve,responseToEntities:Pe=>Pe.map(Ee)});return{fetchEntities:Ve,fetchEntity:Pe=>v({version:$,endpoint:`${le}/${Pe}`,modelName:ce,modelActions:ve,responseToEntities:Re=>[Ee(Re)],merge:!0}),createEntities:Pe=>_e(Re=>T(Pe.map(De),()=>{if(Pe.length>0)return Re(Ve())})),createEntity:Pe=>_e(async Re=>{const Ke=await P(De(Pe));return Re(ie([Ee(Ke)]))}),updateEntities:Pe=>_e(Re=>T(Pe.map(We),Ke=>{const re=Ke.map(Ae=>Ee(Ae.body));return Re(G(re))})),updateEntity:Pe=>_e(async Re=>{const Ke=await P(We(Pe));return Re(ie([Ee(Ke)]))}),deleteEntities:Pe=>_e(Re=>T(Pe.map(we),Ke=>{const re=Ke.map(Ae=>Ae._id);return Se&&Re(E.o1.uncheckItems(Se,re)),Re(fe(re))})),deleteEntity:Pe=>_e(async Re=>(await P(we(Pe)),Se&&Re(E.o1.uncheckItems(Se,[Pe])),Re(fe([Pe]))))}},{fetchEntities:B,createEntity:F,updateEntity:K,deleteEntities:b}=L({endpoint:`/organizations/${l().org_id}/adaptivePolicy/groups`,modelName:"adaptivePolicyGroups",modelActions:I,saveActionWrapper:O,apiEntityToEntity:$=>({...$,id:$.groupId}),flexTableKey:t.eX}),q=()=>($,le)=>{const ce=le(),{checkedItems:ve}=ce.flexTable[t.eX];if(ve.length<2)return;const{adaptivePolicyGroups:_e}=ce.models,Ee=ve.filter(Se=>_e.byId[Se].isDefaultGroup);if(Ee.length>0)return $(E.o1.uncheckItems(t.eX,Ee))},{fetchEntities:j,createEntity:J,createEntities:ee,updateEntity:V,updateEntities:N,deleteEntities:w}=L({endpoint:`/organizations/${l().org_id}/adaptivePolicy/policies`,modelName:"adaptivePolicies",modelActions:I,saveActionWrapper:O,apiEntityToEntity:$=>({...$,id:$.adaptivePolicyId}),flexTableKey:t.ut}),{fetchEntities:z,createEntity:ne,updateEntity:Y,deleteEntities:te}=L({endpoint:`/organizations/${l().org_id}/adaptivePolicy/acls`,modelName:"adaptivePolicyAcls",modelActions:I,saveActionWrapper:O,apiEntityToEntity:$=>({...$,id:$.aclId}),flexTableKey:t.V2}),Te=()=>v({endpoint:`/organizations/${l().org_id}/adaptivePolicy/overview`,modelName:"adaptivePolicyOverview",modelActions:I,responseToEntities:$=>[{...$,id:"overview"}]}),me=$=>({...$,id:"settings"}),Me=()=>v({endpoint:`/organizations/${l().org_id}/adaptivePolicy/settings`,modelName:"globalSettings",modelActions:I,responseToEntities:$=>[me($)]}),de={...I,fetchAdaptivePolicies:j,createAdaptivePolicy:J,createAdaptivePolicies:ee,updateAdaptivePolicy:V,updateAdaptivePolicies:N,deleteAdaptivePolicies:w,fetchAdaptivePolicyGroups:B,createAdaptivePolicyGroup:F,deleteAdaptivePolicyGroups:b,updateAdaptivePolicyGroup:K,deselectDefaultAdaptivePolicyGroups:q,fetchAdaptivePolicyAcls:z,createAdaptivePolicyAcl:ne,deleteAdaptivePolicyAcls:te,updateAdaptivePolicyAcl:Y,fetchAdaptivePolicyOverview:Te,fetchGlobalSettings:Me,updateGlobalSettings:$=>O(async le=>{const ce=await P({resource:`/organizations/${l().org_id}/adaptivePolicy/settings`,operation:"update",body:$});return le(I.updateGlobalSettings([me(ce)])),le(E.o1.setCheckedItems(t.Dk,[]))}),fetchAdaptivePolicyModels:()=>($,le)=>{const ce=le(),ve=(0,n.xJ)(ce),_e=(0,n.G7)(ce),Ee=(0,n.Ey)(ce);return Promise.all([ve.length===0&&$(z()),_e.length===0&&$(j()),Ee.length===0&&$(B()),$(Te()),$(Me())])},resetSaveStatus:o},{actionTypes:se,selectors:X}=p,Oe=()=>p.createStore();var H=null},98989:(ae,x,e)=>{e.d(x,{EW:()=>l,UB:()=>_,te:()=>a});var W=e(14602),C=e.n(W),g=e(630789),c=e.n(g),y=e(310466);const d="SmScriptJobs",f=y.kC.enhanceEndpoints({addTagTypes:[d]}).injectEndpoints({endpoints:h=>({fetchScriptJobStatusesByScriptByInterval:h.query({query:({networkId:s,scriptIds:t,timespan:n,t0:E,t1:i})=>{const R=new URLSearchParams;return n?R.append("timespan",n.toString()):E&&i&&(R.append("t0",E),R.append("t1",i)),t.forEach(r=>{R.append("scriptIds[]",r)}),{url:`networks/${s}/sm/scripts/jobs/statuses/latest/byScript/byInterval?${R}`}},providesTags:(s,t,n)=>{const E=[{type:d,id:JSON.stringify(n)}];return n.scriptIds&&n.scriptIds.forEach(i=>{E.push({type:d,id:`scriptId:${i}`})}),E}}),fetchScriptJobStatuses:h.query({query:({networkId:s,scriptId:t,sortOrder:n,sortKey:E,perPage:i,startingAfter:R,endingBefore:r})=>({url:`networks/${s}/sm/scripts/jobs/statuses/latest/byScriptAndDevice`,params:{scriptId:t,sortOrder:n,sortKey:E,perPage:i,startingAfter:R,endingBefore:r}}),transformResponse:(s,t)=>{const n={firstPageUrl:t?.firstPageUrl,lastPageUrl:t?.lastPageUrl,nextPageUrl:t?.nextPageUrl,prevPageUrl:t?.prevPageUrl};return{data:s,paginationMeta:n}},providesTags:(s,t,n)=>{const E=[{type:d,id:JSON.stringify(n)}];return n.scriptId&&E.push({type:d,id:`scriptId:${n.scriptId}`}),E}}),createScriptJob:h.mutation({query:({networkId:s,job:t})=>({url:`networks/${s}/sm/scripts/jobs`,method:"POST",body:t}),invalidatesTags:(s,t,n)=>[{type:d,id:`scriptId:${n.job.scriptId}`}]})})}),{useFetchScriptJobStatusesByScriptByIntervalQuery:l,useFetchScriptJobStatusesQuery:_,useCreateScriptJobMutation:a}=f},106469:(ae,x,e)=>{e.d(x,{k:()=>C});const W=null,C=["Performance","Stability","Broke old features","Unifying networks versions","Testing","Other"]},110260:(ae,x,e)=>{e.d(x,{Yg:()=>E,o1:()=>n});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(418562);const _=["vpnParticipatingVlans"],a=(0,W.L)().withStoreName("VpnParticipantsStore").withModels(_).withPrefs().withFlexTables().create(),h=a.actions,s=R=>R.map(r=>{const A={id:(0,l.A)(),networkName:r.ng_name,vlanName:r.vlan_name,vlanId:r.vlan_id,ipv6Enabled:r.ipv6_enabled,subnets:[]};return r.subnets.forEach(S=>{A.subnets.push({subnet:S.subnet,ipVersion:S.ip_version})}),A}),t=()=>R=>{R(h.requestVpnParticipatingVlans()),y().getJSON(f()({controller:"vpn_participants",action:"vpn_participating_vlans"}),r=>{R(h.addVpnParticipatingVlans(s(r.vpn_participating_vlans))),R(h.doneRequestingVpnParticipatingVlans())})},n=g().extend({},h,{fetchVpnParticipatingVlans:t}),E=()=>a.createStore();var i=null},113363:(ae,x,e)=>{e.d(x,{Lh:()=>W,Pu:()=>C,Wl:()=>c,r_:()=>g});const W=Object.freeze({ASSIGNEES:"assignees",STATUS:"status"}),C=Object.freeze({VISIBILITY_BASE_PATH:{NA:"https://visibility.amp.cisco.com/",EMEA:"https://visibility.eu.amp.cisco.com/",APJC:"https://visibility.apjc.amp.cisco.com/",TEST:"https://visibility.test.iroh.site/",INT:"https://visibility.int.iroh.site/"},CONURE_BASE_PATH:{NA:"https://conure.us.security.cisco.com/global/v1/",EMEA:"https://conure.eu.security.cisco.com/global/v1/",APJC:"https://conure.apjc.security.cisco.com/global/v1/",TEST:"https://conure.test.iroh.site/global/v1/",INT:"https://conure.int.iroh.site/global/v1/"},PRIVATE_INTEL_PROXY:{ROUTES:{INCIDENT:"iroh/private-intel/incident",INCIDENT_SEARCH:"iroh/private-intel/incident/search",USER_SEARCH:"iroh/user-mgmt/search/users"},QUERIES:{UNASSIGNED:`!${W.ASSIGNEES}:(*)`,ASSIGNED:`${W.ASSIGNEES}:(*)`},SORT_ORDERS:{ASCEND:"asc",DESCEND:"desc"}},CONURE_ROUTES:{INCIDENT:"incident"}}),g=Object.freeze({BASE_PATH:{NA:"https://xdr.us.security.cisco.com/",EMEA:"https://xdr.eu.security.cisco.com/",APJC:"https://xdr.apjc.security.cisco.com/",TEST:"https://xdr.test.iroh.site/",INT:"https://xdr.int.iroh.site/"}}),c="_exists_:scores"},116866:(ae,x,e)=>{e.d(x,{U1:()=>n,o1:()=>t});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129);const l=["mxLogExposureAffectedNetworks"],_=(0,f.L)().withStoreName("MxLogExposureStore").withModels(l).create(),a=_.actions,h=()=>i=>(i(a.requestMxLogExposureAffectedNetworks()),c().getJSON(d()({controller:"organization",action:"fetch_mx_log_exposure"})).done(R=>{const{mx_log_exposure_networks:r}=R;i(a.addMxLogExposureAffectedNetworks(r))}).fail(()=>{const R={danger:"Failed request to disable local status pages."};i(a.updateLocals({alerts:R}))}).always(()=>{i(a.doneRequestingMxLogExposureAffectedNetworks())})),s=()=>i=>(i(a.requestMxLogExposureAffectedNetworks()),c().ajax(d()({controller:"organization",action:"fix_mx_log_exposure"}),{type:"POST",dataType:"json"}).done(R=>{const{alerts:r,mx_log_exposure_networks:A}=R;i(a.updateLocals({alerts:r})),i(a.addMxLogExposureAffectedNetworks(A))}).fail(()=>{const R={danger:"Failed request to disable local status pages."};i(a.updateLocals({alerts:R}))}).always(()=>{i(a.doneRequestingMxLogExposureAffectedNetworks())})),t=C().extend({},a,{fetchMxLogExposureAffectedNetworks:h,fixMxLogExposureAffectedNetworks:s}),n=()=>_.createStore();var E=null},120373:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("EVENT_LOG_STORE",{idKey:"time_f",indices:["ap_id"]}),f={fetch(_={}){var a,h,s;const t={},n=!!(!((a=_.node)===null||a===void 0)&&a.is_aurora2_catalyst_device);return n&&(_==null||(h=_.node)===null||h===void 0||(s=h.nouns)===null||s===void 0?void 0:s.noun)==="switch"&&(t.is_catalyst=n),_.nodeId&&(t.node_id=_.nodeId),_.t1?t.older_than=_.t1:_.t0&&(t.newer_than=_.t0),C().ajax({url:c()({controller:"dashboard",action:"event_data"}),type:"GET",data:t}).then(E=>{const i=E.events.map(R=>({...R,type:E.event_types[R.el_type]}));return{...E,events:i}}).done(E=>{this.dispatch(d.constants.RESET,E.events)})}};function l(_){_.store("EventLogStore")||(_.addStore("EventLogStore",d),_.addActions({eventLog:f}))}},124477:(ae,x,e)=>{e.d(x,{m:()=>W});const W=["Offline","Online"]},126889:(ae,x,e)=>{e.d(x,{DH:()=>_,Dy:()=>i,Gq:()=>s,PQ:()=>a,T4:()=>t,U1:()=>c,m7:()=>n,rH:()=>h,xC:()=>E});var W=e(301002),C=e(310466),g=e(652129);const c=()=>(0,g.L)().create().createStore(),y=R=>{var r;return{conds:R.criteria.reduce((S,p,I)=>{var U;if(!p.selection)return S;const D={condNeg:p.excludeCriteria?"1":"0",condType:p.selection};I!==0&&(D.condBool=p.isAnd?"0":"1");const u=W.pZ[p.selection];return S[I]={...D,...u==null||(U=u.toBackendExpectedKeys)===null||U===void 0?void 0:U.call(u,p)},S},{}),networkType:R.networkType,desiredNodeCount:R.networkQueryLimits.upgradeNodeLimit,desiredNgCount:R.networkQueryLimits.upgradeNetworkLimit,networkLimit:R.networkQueryLimits.perShardNetworkLimit,onePerOperator:R.networkQueryLimits.oneNetworkPerOperator,supportsNextunnel:R.networkQueryLimits.nextunnelSupport||"all_networks",targetVersionId:(r=R.upgradeInfo.newTargetVersionInfo)===null||r===void 0?void 0:r.id,excludeAmberMode:R.networkQueryLimits.excludeAmberMode,excludeEmptyNetworks:R.networkQueryLimits.excludeEmptyNetworks}},d=C.q9.injectEndpoints({endpoints:({query:R})=>({fetchEmailAndDashboardMessages:R({query:r=>({url:`manage/versions/generate_bulk_upgrade_emails?network_type=${r.networkType}&new_firmware_features=${encodeURI(r.featureList)}&extra_notes=${encodeURI(r.notes)}&critical_note=${r.criticalMessage}&new_ver_id=${encodeURI(r.newVersionId)}`,headers:{"X-CSRF-TOKEN":Mkiconf.authenticity_token}})})})}),f="BulkUpgrades",l=C.iK.enhanceEndpoints({addTagTypes:[f]}).injectEndpoints({endpoints:({query:R,mutation:r})=>({fetchSchedulerOptions:R({query:()=>"support_admin/admin_bulk_upgrades/scheduler_options"}),fetchNetworkList:r({query:A=>({url:"support_admin/admin_bulk_upgrades/get_upgrade_candidates_from_shards",method:"POST",body:y(A)})}),scheduleUpgrade:r({query:({searchParams:A,...S})=>({url:"support_admin/admin_bulk_upgrades",method:"POST",body:{...S,networkSearchParams:y(A)}}),invalidatesTags:[f]}),fetchUpgrades:R({query:()=>"support_admin/admin_bulk_upgrades?perPage=200&sortOrder=descending",providesTags:[f]}),fetchStatus:R({query:A=>`support_admin/admin_bulk_upgrades/${A}/job_statuses`}),cancelUpgrade:r({query:A=>({url:"support_admin/adminBulkUpgrades/cancel",method:"POST",body:A})}),cancelUpgradesByNetwork:r({query:A=>({url:"support_admin/admin_bulk_upgrades/cancel/by_network",method:"POST",body:A})})})}),{useFetchEmailAndDashboardMessagesQuery:_}=d,{useFetchSchedulerOptionsQuery:a,useFetchNetworkListMutation:h,useScheduleUpgradeMutation:s,useFetchUpgradesQuery:t,useFetchStatusQuery:n,useCancelUpgradeMutation:E,useCancelUpgradesByNetworkMutation:i}=l},133570:(ae,x,e)=>{e.d(x,{hd:()=>d});var W=e(652129);const C=(0,W.L)().withStoreName("Sidebar").create();C.createStore();const{updateLocals:g}=C.actions,c=()=>g({isSidebarVisible:!1,sidebarComponentName:null,sidebarComponentProps:null}),y=(f,l={})=>g({sidebarComponentName:f,sidebarComponentProps:l}),d=f=>g({isSidebarVisible:f})},133915:(ae,x,e)=>{e.d(x,{AW:()=>D,BL:()=>m,D1:()=>o,Ge:()=>p,U1:()=>t,UG:()=>u,ey:()=>n,gW:()=>M,o1:()=>T,rq:()=>U,wM:()=>I,yl:()=>S});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466),y=e(869592),d=e.n(y),f=e(304469),l=e(917157);const _=["esimInventory"],a=(0,g.L)().withStoreName("SimInventory").withModels(_).create(),s={...a.actions},t=()=>a.createStore(),n=Object.freeze({claimEsim:{visible:!1,state:{esimsToClaim:""}},swapServicePlan:{visible:!1,state:{esim:[],serviceProviderAccount:{},communicationPlan:{},ratePlan:{}}},esimStatusChangeModal:{visible:!1,state:{eid:"",changeTo:"",isDestructive:!1}},addAccountModal:{visible:!1,state:{serviceProvider:{},isValidated:!1,title:"",accountId:"",username:"",apiKey:""}},editAccountModal:{visible:!1,state:{serviceProvider:{},isValidated:!1,title:"",apiKey:""}},removeAccountModal:{visible:!1,state:{}}}),E={eid:"",changeTo:"",isDestructive:!1};function i(O,v){return`${O}${(0,l.DK)(v)}`}const R={toggleModal:(O,v)=>(L,B)=>{const F={...B().locals.latest};v&&(F[O].state=structuredClone(n[O].state)),F[O].visible=v,L(s.updateLocals({latest:F}))},updateModalState:(O,v,L)=>(B,F)=>{const K={...F().locals.latest},b={...K[O].state};b[v]=L,K[O].state=b,B(s.updateLocals({latest:K}))},updateModalStates:(O,v)=>(L,B)=>{const F={...B().locals.latest},K={...F[O].state,...v};F[O].state=K,L(s.updateLocals({latest:F}))},toggleAndUpdateModalState:(O,v,L,B)=>(F,K)=>{const b={...K().locals.latest};let q;B?q=structuredClone(n[O].state):q={...b[O].state},q[v]=L,b[O].state=q,b[O].visible=B,F(s.updateLocals({latest:b}))},toggleAndUpdateModalStates:(O,v,L)=>(B,F)=>{const K={...F().locals.latest};let b;L?b={...structuredClone(n[O].state),...v}:b={...K[O].state,...v},K[O].state=b,K[O].visible=L,B(s.updateLocals({latest:K}))},swapEsimServicePlan:O=>(v,L)=>{const B={...L().locals.latest};B.inventory.data=O,B.swapServicePlan.visible=!1,v(s.updateLocals({latest:B}))},deleteDataFromStore:(O,v,L,B,F)=>async(K,b)=>{const q={...b().locals.latest};q[O].data=q[O].data.filter(j=>j[v]!==L),B&&F&&(q[B].visible=!1,q.apiMessage=F),K(s.updateLocals({latest:q}))},setSuccessMessageAndToggleModal:(O,v,L)=>(B,F)=>{const K={...F().locals.latest};K[O].visible=v,K.apiMessage=L,B(s.updateLocals({latest:K}))},clearSuccessMessage:()=>(O,v)=>{const L={...v().locals.latest};L.apiMessage={type:"",message:"",additionalInfo:[]},O(s.updateLocals({latest:L}))}},r=c.q9.injectEndpoints({endpoints:O=>({esimInventoryNodeData:O.query({query:({eid:v,name:L})=>({url:d()({controller:"nodes",action:"json",node_group:{eid:v,name:L}}),method:"GET"})})})}),A=c.kC.injectEndpoints({endpoints:O=>({getInventoryData:O.query({async queryFn({organizationId:v},{dispatch:L,getState:B},F,K){const b=await K(`organizations/${v}/cellularGateway/esims/inventory`);if(b.error)return{error:"Error fetching data"};const q=[];let j=[];if(b.data){j=b.data.items.map(w=>(0,f.M)(w));const V=j.filter(w=>w.status==="swapping").map(w=>A.endpoints.getEsimSwapPlanStatus.initiate({organizationId:v,id:w.eid})(L,B,F));(await Promise.all(V)).forEach(w=>{var z;!(w==null||(z=w.data)===null||z===void 0)&&z.status&&q.push(w.data)})}return{data:{inventory:j,swapStatus:q}}}}),getServiceProviderData:O.query({async queryFn({organizationId:v},L,B,F){const K=await F(`organizations/${v}/cellularGateway/esims/serviceProviders`);return K.error?{error:"Error fetching data"}:{data:{serviceProviders:K.data.items}}}}),getServiceProviderAccountData:O.query({async queryFn({organizationId:v},L,B,F){const K=await F(`organizations/${v}/cellularGateway/esims/serviceProviders/accounts`);if(K.error)return{error:"Error fetching data"};const b=K.data;if(K.data){const ee=b.items,V=ee.map(me=>me.accountId),N=F(i(`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/communicationPlans`,{accountIds:V})),w=F(i(`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/ratePlans`,{accountIds:V})),[z,ne]=await Promise.all([N,w]),Y={},te={};if(z.data){const me=z.data;me.items.forEach(Me=>{var Ie;Y[Me.accountId]||(Y[Me.accountId]={commPlans:[],ratePlans:[]}),(Ie=Y[Me.accountId])===null||Ie===void 0||Ie.commPlans.push({name:Me.name,apns:Me.apns||[]})});for(const Me in me.errors)if(me.errors[Me]){var q;te[Me]=(q=me.errors[Me])!==null&&q!==void 0?q:[]}}if(ne.data){const me=ne.data;me.items.forEach(Me=>{var Ie;Y[Me.accountId]||(Y[Me.accountId]={commPlans:[],ratePlans:[]}),(Ie=Y[Me.accountId])===null||Ie===void 0||Ie.ratePlans.push({name:Me.name})});for(const Me in me.errors)if(me.errors[Me]){var j,J;te[Me]=[...(j=te[Me])!==null&&j!==void 0?j:[],...(J=me.errors[Me])!==null&&J!==void 0?J:[]]}}const Te=!!z.error||!!ne.error;b.items=ee.map(me=>{var Me,Ie,ge;return{...me,plans:{loading:!1,hasFetchError:Te,planFetchErrors:(Me=te[me.accountId])!==null&&Me!==void 0?Me:[],data:{communicationPlans:((Ie=Y[me.accountId])===null||Ie===void 0?void 0:Ie.commPlans)||[],ratePlans:((ge=Y[me.accountId])===null||ge===void 0?void 0:ge.ratePlans)||[]}}}})}return{data:{serviceProviderAccounts:b.items}}}}),updateEsimServicePlan:O.mutation({query:({organizationId:v,swapData:L})=>({url:`organizations/${v}/cellularGateway/esims/swap`,method:"POST",body:{swaps:L}})}),createServiceProviderAccount:O.mutation({query:({organizationId:v,addAccountInfo:L})=>({url:`organizations/${v}/cellularGateway/esims/serviceProviders/accounts`,method:"POST",body:L}),async onQueryStarted({organizationId:v,pageCacheObjectKey:L},{dispatch:B,getState:F,queryFulfilled:K,extra:b}){try{const{data:q}=await K,j=await A.endpoints.addCommRatePlan.initiate({organizationId:v,accountId:q.accountId})(B,F,b),J={...q,plans:{loading:!1,hasFetchError:!!j.error,data:{communicationPlans:j.data?j.data.commPlans:[],ratePlans:j.data?j.data.ratePlans:[]}}};B(A.util.updateQueryData("getServiceProviderAccountData",L,ee=>(ee.serviceProviderAccounts.push(J),ee)))}catch{}}}),addCommRatePlan:O.query({async queryFn({organizationId:v,accountId:L},B,F,K){try{const b={commPlans:[],ratePlans:[]},q=K(`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/communicationPlans/${L}`),j=K(`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/ratePlans/${L}`),[J,ee]=await Promise.all([q,j]);return J.data&&J.data.forEach(N=>{b.commPlans.push({name:N.name,apns:N.apns||[]})}),ee.data&&ee.data.forEach(N=>{b.ratePlans.push({name:N.name})}),{data:b}}catch{}}}),deleteServiceProviderAccount:O.mutation({query:({organizationId:v,accountId:L})=>({url:`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/${L}`,method:"DELETE"}),async onQueryStarted({accountId:v,pageCacheObjectKey:L},{dispatch:B,queryFulfilled:F}){try{await F,B(A.util.updateQueryData("getServiceProviderAccountData",L,K=>(K.serviceProviderAccounts=K.serviceProviderAccounts.filter(b=>b.accountId!==v),K)))}catch{}}}),updateDeviceStatus:O.mutation({query:({organizationId:v,id:L,statusData:B})=>({url:`organizations/${v}/cellularGateway/esims/inventory/${L}`,method:"PUT",body:B}),async onQueryStarted({pageCacheObjectKey:v},{dispatch:L,queryFulfilled:B}){try{const{data:F}=await B;L(A.util.updateQueryData("getInventoryData",v,K=>{const b=K.inventory.findIndex(q=>q.eid===F.eid);return K.inventory[b]=(0,f.M)(F),K}))}catch{}}}),updateAccount:O.mutation({query:({organizationId:v,id:L,updateAccountInfo:B})=>({url:`organizations/${v}/cellularGateway/esims/serviceProviders/accounts/${L}`,method:"PUT",body:B}),async onQueryStarted({pageCacheObjectKey:v},{dispatch:L,queryFulfilled:B}){try{const{data:F}=await B;L(A.util.updateQueryData("getServiceProviderAccountData",v,K=>{const b=K.serviceProviderAccounts.findIndex(q=>q.accountId===F.accountId);return K.serviceProviderAccounts[b]={...K.serviceProviderAccounts[b],...F},K}))}catch{}}}),getEsimSwapPlanStatus:O.query({query:({organizationId:v,id:L})=>({url:`organizations/${v}/cellularGateway/esims/swap/${L}`,method:"PUT"})})})}),{useEsimInventoryNodeDataQuery:S}=r,{useGetInventoryDataQuery:p,useGetServiceProviderDataQuery:I,useGetServiceProviderAccountDataQuery:U,useUpdateEsimServicePlanMutation:D,useCreateServiceProviderAccountMutation:u,useDeleteServiceProviderAccountMutation:o,useUpdateDeviceStatusMutation:M,useUpdateAccountMutation:m,useGetEsimSwapPlanStatusQuery:P}=A,T={...s,...R}},137990:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(6464),C=e(755373),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d);const l={FETCH_THREATGRID_REPORT:"FETCH_THREATGRID_REPORT"},_=W.A.createStore({initialize(){this._networks={},this._promise_cache={},this.bindActions(l.FETCH_THREATGRID_REPORT,this.onFetchThreatGridReport)},getThreatGridReport(s,t,n){const E=this._getNetwork(s),i=`${t}-${n}`;let R={};return f().has(E,i)?R=E[i]:(window.setTimeout(()=>{this.flux.actions.threatgrid.fetchReport(s,t,n)},0),R={loading:!0,report:{}}),R},onFetchThreatGridReport(s){const t=this._getNetwork(s.networkEid),n=`${s.runid}-${s.sha256}`;f().has(t,n)||(this._setThreatGridReportLoading(s.networkEid,n,!0),this._fetch(this._getUrl(s.networkEid,{runid:s.runid,sha256:s.sha256})).then(E=>{t[n]=E,t[n].loading=!1,this.emit("change")}).catch(()=>{this._setThreatGridReportLoading(s.networkEid,n,!1)}))},_getUrl(s,t){const n=g().stringify(t,{arrayFormat:"brackets"});return`/n/${s}/manage/threat_grid/report?${n}`},_getNetwork(s){return f().has(this._networks,s)||(this._networks[s]={}),this._networks[s]},_fetch(s){return f().has(this._promise_cache,s)||(this._promise_cache[s]=new Promise((t,n)=>{y().get(s,E=>t(E),"json").fail((E,i)=>n(i))})),this._promise_cache[s]},_setThreatGridReportLoading(s,t,n){const E=this._getNetwork(s);f().has(E,t)||(E[t]={}),E[t].loading=n,this.emit("change")}}),a={fetchReport(s,t,n){this.dispatch(l.FETCH_THREATGRID_REPORT,{networkEid:s,runid:t,sha256:n})}},h=s=>{s.store("ThreatGridReportStore")||(s.addStore("ThreatGridReportStore",new _),s.addActions({threatgrid:a}))}},143245:(ae,x,e)=>{e.d(x,{h0:()=>D,o1:()=>U});var W=e(14602),C=e.n(W),g=e(652129),c=e(522224),y=e.n(c),d=e(941669),f=e.n(d),l=e(869592),_=e.n(l),a=e(778658);const h=["counterSetRules","trafficShaperClasses","trafficExpressions"],s=(0,g.L)().withStoreName("TrafficShapingStore").withModels(h).withChanges().withModal().create(),t=s.actions,n=o=>M=>{if(o.update_messages){const m=o.update_messages;if(m.errors.length===0&&m.warnings.length===0){const P=o.newReactSettings;M(t.updateTrafficShaperClasses(P.trafficShaperClasses)),M(t.resetAllChanges())}}},E=()=>o=>{o(t.requestCounterSetRules()),f().getJSON(_()({controller:"traffic_shaping/counter_set_rules"},{to_s:!0})).done(M=>{o(t.updateCounterSetRules(M)),o(t.doneRequestingCounterSetRules()),o(t.updateLocals({fetchedCounterSetRules:!0}))})},i=()=>o=>{f().getJSON(_()({controller:"traffic_shaping/traffic_shaper_classes"})).done(M=>{o(t.updateTrafficShaperClasses(M)),o(t.updateLocals({fetchedTrafficShaperClasses:!0}))})},R=()=>o=>{f().getJSON(_()({controller:"traffic_shaping/traffic_expressions"})).done(M=>{o(t.updateTrafficExpressions(M)),o(t.updateLocals({fetchedTrafficExpressions:!0}))})},r=(o,M)=>{const m=JSON.parse(M.responseText).error;o(t.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:m}))},A=()=>(o,M)=>{const m=(0,a.bK)(M()),P=y().keys(m)[0],T=m[P],O=y().omit(T,"id");return o(t.updateLocals({isSaving:!0,saveSuccess:null,saveErrors:[]})),f().post(_()({controller:"traffic_shaping/traffic_expressions"}),{traffic_expression:O}).done(v=>{o(t.updateTrafficExpressionsWithMerge([v])),o(t.updateModal({trafficExprToEditId:null})),o(t.resetTrafficExpressionsChanges()),o(t.updateLocals({isSaving:!1,saveSuccess:!0}))}).error(v=>r(o,v))},S=()=>(o,M)=>{const m=(0,a.bK)(M()),P=y().keys(m)[0],T=m[P];return o(t.updateLocals({isSaving:!0,saveSuccess:null,saveErrors:[]})),f().ajax({url:_()({controller:"traffic_shaping/traffic_expressions",action:"update"}),type:"PUT",data:{traffic_expression:{...T,id:P}}}).done(O=>{o(t.updateTrafficExpressionsWithMerge([O])),o(t.updateModal({trafficExprToEditId:null})),o(t.resetTrafficExpressionsChanges()),o(t.updateLocals({isSaving:!1,saveSuccess:!0}))}).error(O=>r(o,O))},p=o=>M=>(M(t.updateLocals({isSaving:!0,saveSuccess:null,saveErrors:[]})),f().ajax({url:_()({controller:"traffic_shaping/traffic_expressions",action:"destroy"}),type:"DELETE",data:{traffic_expression:{id:o}}}).done(m=>{M(t.deleteTrafficExpressionsById(m.id)),M(t.resetTrafficExpressionsChanges()),M(t.updateLocals({isSaving:!1,saveSuccess:!0}))}).error(m=>r(M,m))),I=()=>o=>{f().getJSON(_()({controller:"traffic_shaping/traffic_shaper_classes",action:"dscp_tags"})).done(M=>{o(t.updateLocals({dscpTags:M,fetchedDscpTags:!0}))})},U=y().extend({},t,{fetchCounterSetRules:E,fetchTrafficShaperClasses:i,fetchTrafficShaperDscpTags:I,fetchTrafficExpressions:R,onSubmitSuccess:n,persistTrafficExpressionChanges:S,persistTrafficExpressionCreation:A,persistTrafficExpressionDeletion:p}),D=()=>s.createStore();var u=null},150895:(ae,x,e)=>{e.d(x,{$h:()=>S,Tp:()=>U,U1:()=>D,o1:()=>A,q3:()=>p});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(793847),f=e(758928),l=e.n(f),_=e(459324),a=e(281034),h=e(703314),s=e(91979),t=e(417046),n=e(386378),E=e(644200);const i=(u,o=[])=>c().uniq(o.concat(u)).sort(),R=["tags","photos","certificates","devices","depAccounts","userAccessDevices","trustedAccessConfigs"],r=(0,y.L)().withStoreName("PccOwnersPageStore").withModels(R).withCustomKeyedModel("pccUsers",u=>u.email).withContextOptions([E.RJ]).withChanges().withApiJobs().withPrefs().withFlexTables().withModal().withForm().create(),A={...r.actions};A.fetchDevices=()=>(u,o)=>{u(A.requestDevices()),(0,a.uw)(["pcc_user_email"]).then(a.Ud).then(M=>{const m=o();if(m.form.owner){const P=M.filter(T=>T.pcc_user_email.toUpperCase()===m.form.owner.email.toUpperCase());u(A.updateForm({owner:{...m.form.owner,device_ids:P.map(T=>T.id)}}))}u(A.addDevices(M)),u(A.updateLocals({hasFetchedDevices:!0}))})},A.fetchTags=()=>u=>{u(A.requestTags()),(0,a._Y)().then(o=>{u(A.addTags(o))})},A.fetchDepAccounts=()=>u=>{u(A.requestDepAccounts()),(0,a.CP)({all:!l().has_pcc_network_level_asm_users}).then(o=>{u(A.addDepAccounts(o))})},A.fetchUserAccessDevices=()=>(u,o)=>{u(A.requestUserAccessDevices()),(0,a.Vq)().then(M=>{u(A.addUserAccessDevices(M));const m={};M.forEach(T=>{const O=T.pcc_user_email;O in m||(m[O]={email:O,user_access_device_ids:[]}),m[O].user_access_device_ids.push(T.id)}),u(A.updatePccUsersWithMerge(m));const P=o();if(P.form.owner){const T=M.filter(O=>O.pcc_user_email.toUpperCase()===P.form.owner.email.toUpperCase());u(A.updateForm({owner:{...P.form.owner,user_access_device_ids:T.map(O=>O.id)}}))}})},A.fetchTrustedAccessConfigs=()=>u=>{u(A.requestTrustedAccessConfigs()),(0,a.B3)().then(o=>{u(A.addTrustedAccessConfigs(o))})},A.fetchOwnersDashboardMessages=()=>u=>(0,a.P)("owners").then(o=>{u(A.updateLocals({dashMsgs:o}))}),A.fetchPccUsers=()=>(u,o)=>{u(A.requestPccUsers()),u(A.updateLocals({isFetchingOwners:!0}));const M=T=>u(A.updatePccUsers(T)),m=T=>u(A.addPccUsers(T)),P=()=>{u(A.doneRequestingPccUsers()),u(A.updateLocals({isFetchingOwners:!1})),(0,n.WI)(o()).includes(_.jlu)&&u(A.fetchDevices()),u(A.fetchUserAccessDevices())};(0,a.r0)(m,M,P)},A.fetchPccUsersTotal=()=>u=>{(0,a.m)().then(o=>{u(A.updateLocals({totalOwnersCount:o}))})},A.markOwnersForDeletion=u=>(o,M)=>{const m=(0,s.id)(M(),{ids:u}),[P,T]=c().partition(m,F=>F.is_new),O=c().pluck(P,"id"),v=c().pluck(P,"email"),L=c().pluck(T,"email");o(h.o1.uncheckItems(_.SmW,O)),o(A.resetPccUsersChangesById(v));const B=c().object(c().map(L,F=>[F,{deleted:!0}]));o(A.changeManyPccUsers(B))},A.updateDevicesForUser=(u,o,M)=>m=>{if(!c().isEqual(o,M)){const P=c().difference(M,o),T=c().difference(o,M);P.forEach(O=>{m(A.changeDevices(O,{pcc_user_email:u}))}),T.forEach(O=>{m(A.changeDevices(O,{pcc_user_email:null}))})}},A.updateUsersFromModal=(u,o=_.PxV)=>(M,m)=>{const P=m().models.pccUsers.byId,T=m().models.tags.byId,O={},v={};u.forEach(L=>{const B={...L},F=L.email,K=L.tags||[],b=L.devices||[];c().isEmpty(K)||(B.tags=K.map(j=>j.id)),P[F]?(B.type||(B.type=o),B.types=i(o,P[F].types)):(B.is_new=!0,B.type=o,B.types=[o],B.id=c().uniqueId("pcc_user")),K.forEach(j=>{!T[j.id]&&!v[j.id]&&(v[j.id]=j)});const q=((0,t.Vv)(m(),{email:F})||[]).map(j=>j.id);M(A.updateDevicesForUser(F,q,b.map(j=>j.id))),O[F]=B}),M(A.changeManyTags(v)),M(A.changeManyPccUsers(O))};const S=(0,d.A)("userAccessDevices").getModifiedObjectsById,p=(0,d.A)("trustedAccessConfigs").getModifiedObjectById,I=r.actionTypes,U=r.selectors,D=()=>r.createStore()},155830:(ae,x,e)=>{e.d(x,{Ay:()=>s,Ou:()=>a});var W=e(640173),C=e.n(W),g=e(522224),c=e.n(g),y=e(689917),d=e(646894),f=e.n(d);function l(t){return t.charAt(0).toUpperCase()+t.slice(1)}const _=t=>t.id;class a extends y.A{constructor(n,E={}){super(),this.modelName=n,c().isFunction(E.getId)?this.getId=E.getId:this.getId=_}modelActionTypes(){const n=this.modelName.toUpperCase();return{request:`REQUEST_${n}`,doneRequesting:`DONE_REQUESTING_${n}`,failedRequesting:`FAILED_REQUESTING_${n}`,resetRequesting:`RESET_REQUESTING_${n}`,add:`ADD_${n}`,addNested:`ADD_NESTED_${n}`,clear:`CLEAR_${n}`,replace:`REPLACE_${n}`,replaceOrdered:`REPLACE_ORDERED_${n}`,replaceNested:`REPLACE_NESTED_${n}`,update:`UPDATE_${n}`,updateNested:`UPDATE_NESTED_${n}`,delete:`DELETE_${n}`}}buildModelActions(){const n=this.modelActionTypes(),E=l(this.modelName);return{[`request${E}`]:()=>({type:n.request}),[`doneRequesting${E}`]:()=>({type:n.doneRequesting}),[`failedRequesting${E}`]:()=>({type:n.failedRequesting}),[`resetRequesting${E}`]:()=>({type:n.resetRequesting}),[`add${E}`]:i=>({type:n.add,objects:i}),[`addNested${E}`]:i=>({type:n.addNested,objects:i}),[`clear${E}`]:()=>({type:n.clear}),[`replace${E}`]:i=>({type:n.replace,objects:i}),[`replaceOrdered${E}`]:i=>({type:n.replaceOrdered,objects:i}),[`replaceNested${E}`]:i=>({type:n.replaceNested,objects:i}),[`update${E}`]:i=>({type:n.update,updates:i}),[`update${E}WithMerge`]:i=>({type:n.update,updates:i,merge:!0}),[`updateNested${E}`]:i=>({type:n.updateNested,updates:i}),[`delete${E}ById`]:i=>({type:n.delete,deleted:i})}}buildModelReducer(){const n=this.modelActionTypes();return(E={isFetching:!1,byId:{},orderedIds:[]},i)=>{var R={},r,A;switch(i.type){case n.request:return f()(E,{isFetching:{$set:!0},fetchFailed:{$set:!1}});case n.doneRequesting:return f()(E,{isFetching:{$set:!1}});case n.failedRequesting:return f()(E,{fetchFailed:{$set:!0}});case n.resetRequesting:return f()(E,{isFetching:{$set:void 0}});case n.add:return A=c().reduce(i.objects,(S,p)=>(S[this.getId(p)]=p,S),{}),R=f()(E,{byId:{$set:A},isFetching:{$set:!1}}),R;case n.addNested:{const S=i.objects.id;return A=Object.keys(i.objects).reduce((p,I)=>(I!=="id"&&(p[S]=i.objects[I]),p),{}),R=f()(E,{byId:{$set:A},isFetching:{$set:!1}}),R}case n.clear:return f()(E,{byId:{$set:{}}});case n.replace:return A=c().reduce(i.objects,(S,p)=>(S[this.getId(p)]=p,S),{}),f()(E,{byId:{$set:A}});case n.replaceOrdered:return A=c().reduce(i.objects,(S,p)=>(S[this.getId(p)]=p,S),{}),f()(E,{byId:{$set:A},orderedIds:{$set:c().map(i.objects,"id")}});case n.replaceNested:{const S=i.objects.id;return A=Object.keys(i.objects).reduce((p,I)=>(I!=="id"&&(p[S]=i.objects[I]),p),{}),f()(E,{byId:{$set:A}})}case n.update:return r=c().reduce(i.updates,(S,p)=>(i.merge&&E.byId[this.getId(p)]?S[this.getId(p)]={$merge:p}:S[this.getId(p)]={$set:p},S),{}),R=f()(E,{byId:r}),R;case n.updateNested:{const S=i.updates.id;return r=Object.keys(i.updates).reduce((p,I)=>(I!=="id"&&i.updates[I]&&(p[S]={$set:i.updates[I]}),p),{}),R=f()(E,{byId:r}),R}case n.delete:return R=f()(E,{byId:{$apply:S=>c().omit(S,i.deleted)}}),R;default:return E}}}create(){return{actions:this.buildModelActions(),actionTypes:this.modelActionTypes(),reducer:this.buildModelReducer()}}}const h=t=>new a(t),s=a},161435:(ae,x,e)=>{e.d(x,{U1:()=>A,o1:()=>i});var W=e(723665),C=e(652129),g=e(758928),c=e.n(g),y=e(775113),d=e(653806);const f=["openRoamingCertificates"],l="organizations/:orgId/openRoaming/certificates",_=(0,C.L)().withModels(f).withStoreName("OpenRoamingCertificatesStore").withChanges().withModal().withPrefs().withFlexTables().create(),a=_.actions,h=(p=c().org_id)=>y.A.urlForApi({version:"v1",path:l,orgId:p}),s=(p,I=c().org_id)=>y.A.urlForApi({version:"v1",path:`${l}/${p}`,orgId:I}),t=()=>p=>{const I=h();return p(a.requestOpenRoamingCertificates()),(0,d.AT)("GET",I).then(({data:U})=>{p(a.addOpenRoamingCertificates(U)),p(a.updateLocals({isLoaded:!0}))}).finally(()=>{p(a.doneRequestingOpenRoamingCertificates())})},n=p=>I=>{const U=h();return I(a.requestOpenRoamingCertificates()),(0,d.AT)("POST",U,JSON.stringify(p)).then(()=>{I(t()),I(a.updateLocals({saveSuccess:!0}))}).catch(D=>{I(a.updateLocals({errors:D.errors,saveSuccess:!1}))}).finally(()=>{I(a.doneRequestingOpenRoamingCertificates())})},E=(p,I)=>U=>{const D=s(p);return U(a.requestOpenRoamingCertificates()),(0,d.AT)("PUT",D,JSON.stringify(I)).then(()=>{U(t()),U(a.updateLocals({updateSuccess:!0}))}).catch(u=>{U(a.updateLocals({errors:u.errors,updateSuccess:!1}))}).finally(()=>{U(a.doneRequestingOpenRoamingCertificates())})},i=W.A.extend({},a,{fetchOpenroamingCertificates:t,requestOpenRoamingCertCSR:n,updateOpenRoamingCertificate:E}),R=_.actionTypes,r=_.selectors,A=()=>_.createStore();var S=null},167716:(ae,x,e)=>{e.d(x,{oI:()=>d,sO:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["multicast"]}).injectEndpoints({endpoints:f=>({fetchMulticast:f.query({query:l=>({url:`networks/${l}/switch/routing/multicast`}),providesTags:(l,_,a)=>[{type:"multicast",id:a}]}),updateMulticast:f.mutation({query:({networkId:l,multicastConfiguration:_})=>({url:`networks/${l}/switch/routing/multicast`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"multicast",id:a.networkId}]})}),overrideExisting:!1}),{useFetchMulticastQuery:y,useUpdateMulticastMutation:d}=c},169270:(ae,x,e)=>{e.d(x,{A:()=>s});var W=e(941669),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(6464);const _={RESET:"SCHEMA_INFO_STORE_RESET"},a=f.A.createStore({initialize(){this.schemaInfo={pg:[],lt:[]},this.bindActions.apply(this,[_.RESET,this.onReset])},getPostgresSchemaInfo(){return this.schemaInfo.pg},getLittleTableSchemaInfo(){return this.schemaInfo.lt},onReset(t){const{key:n,sortedData:E}=t;this.schemaInfo[n]=E,this.emit("change")}});a.constants=_;const h={fetchPG(t){return C().get(d()({controller:"queries",action:"new_schema_inspector"}),t).done(n=>{const E=c().sortBy(n,R=>R.name),i="pg";this.dispatch(a.constants.RESET,{key:i,sortedData:E})})},fetchLT(t){return C().get(d()({controller:"queries",action:"lt_schema_inspector"}),t).done(n=>{const E=c().sortBy(n,R=>R.name),i="lt";this.dispatch(a.constants.RESET,{key:i,sortedData:E})})}},s=t=>(t.store("SchemaInfoStore")||(t.addStore("SchemaInfoStore",new a),t.addActions({schemaInfo:h})),a)},171603:(ae,x,e)=>{e.d(x,{O1:()=>y,au:()=>d});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["stormControl"]}).injectEndpoints({endpoints:f=>({fetchStormControl:f.query({query:l=>({url:`networks/${l}/switch/stormControl`}),providesTags:(l,_,a)=>[{type:"stormControl",id:a}]}),updateStormControl:f.mutation({query:({networkId:l,stormControlConfiguration:_})=>({url:`networks/${l}/switch/stormControl`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"stormControl",id:a.networkId}]})}),overrideExisting:!1}),{useFetchStormControlQuery:y,useUpdateStormControlMutation:d}=c},171957:(ae,x,e)=>{e.d(x,{o1:()=>h});var W=e(967720),C=e(869592),g=e.n(C),c=e(758928),y=e.n(c),d=e(652129);const f=["externalStreamUsers"],l=(0,d.L)().withStoreName("ExternalStreamUsersStore").withModels(f).withModal().withChanges().create(),_=l.actions,h={..._,fetchExternalStreamUsers:()=>E=>{const i=`/api/v1/networks/N_${y().ng_id}/camera/externalStreamUsers`;return(0,W.A)(g()({global:!0,controller:i}),{credentials:"same-origin"}).then(R=>R.json()).then(R=>{E(_.addExternalStreamUsers(R))})}},s=l.actionTypes,t=()=>l.createStore();var n=null},174168:(ae,x,e)=>{e.d(x,{U1:()=>We,o1:()=>fe});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(941669),l=e.n(f),_=e(652129),a=e(967720),h=e(415234),s=e(618359),t=e(136716),n=e(32839),E=e(745872),i=e(592575),R=e(486143),r=e(543635),A=e(644200),S=e(758928),p=e.n(S),I;const U=["nodes","nodeDetails","schedules","scheduleEntries","cameraConfigs","motionAlertConfigs","cameraAnalyticsModules","mqttBrokerConfigs","doNotDisturbConfigs","vrrpGroups","vrrpGroupCandidates","switches","switchports"],D=(0,_.L)().withStoreName("NodesPageStore").withModels(U).withModal().withPrefs().withChanges().withLiveTools().withCameraPlayer().withContextOptions([A.RJ]).create(),u=D.actions,o=p().org_id,M=["address","ap_port_profile_id","emergency_address","lat","lng","name","network_eid","notes","tags","uses_hitless_power_mode"],m=100,P=({f:Pe,loading:Re,updateFlux:Ke=()=>{},initLimit:re=m,t0:Ae,t1:$e,timespan:Fe,isCameras:Ye=!1})=>Le=>{const Be=Ze=>l().getJSON(d()({controller:"nodes",action:"json"}),{f:Pe,t0:Ae,t1:$e,timespan:Fe,...Ze,paginated:!0}).fail(()=>{Le(u.failedRequestingNodes())}),je=()=>Be({skip_expensive:!1}).then(({nodes:Ze})=>{Le(u.updateNodesWithMerge(Ze)),Ke(Ze)}),ze=(Ze=0,lt=re,Et=!1)=>Be({skip_expensive:!0,offset:Ze,limit:lt+1,t0:Ae,t1:$e,timespan:Fe}).then(({nodes:ft})=>{if(Et&&Le(u.updateLocals({nodesFirstPageLoaded:!0})),Le(u.updateNodesWithMerge(ft)),Ke(ft),Object.keys(ft).length>lt)return Ye?ze(Ze+lt,re):ze(Ze+lt,lt*2)}),Xe=Re;return Xe&&Le(u.requestNodes()),Le(u.updateLocals({nodesFirstPageLoaded:!1})),Promise.all([ze(0,re,!0),je()]).then(()=>{Xe&&Le(u.doneRequestingNodes())})},T=0,O=({f:Pe,search:Re="",enableLoadingState:Ke,updateFlux:re=()=>{},limit:Ae=m,offset:$e=T,t0:Fe,t1:Ye,timespan:Le})=>Be=>(Ke&&Be(u.requestNodes()),l().getJSON(d()({controller:"nodes",action:"json"}),{f:Pe,t0:Fe,t1:Ye,timespan:Le,search:Re,skip_expensive:!0,limit:Ae,offset:$e,paginated:!0}).then(({nodes:je})=>{Be(u.updateNodesWithMerge(je)),re(je)}).fail(()=>{Be(u.failedRequestingNodes())}).always(()=>{Ke&&Be(u.doneRequestingNodes())})),v=(Pe,Re,Ke,re,Ae,$e=c().noop)=>(Re&&Ae(u.requestNodes()),l().ajax({url:d()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:Pe}).done(Fe=>{Ke&&!c().isEmpty(Fe.skipped_expensive_fields)&&v(c().extend(Pe,{skip_expensive:!1,f:c().union(Fe.skipped_expensive_fields,["id"])}),Re,Ke,re,Ae),Ae(u.updateNodesWithMerge(Fe.nodes)),$e(Fe.nodes),re(Fe)}).fail(()=>{Ae(u.failedRequestingNodes())}).always(()=>{Re&&Ae(u.doneRequestingNodes())})),L=()=>Pe=>(Pe(u.requestCameraConfigs()),(0,a.A)(d()({controller:"cameras",action:"camera_configs_json",params:{type:"map"}}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>{Pe(u.resetCameraConfigs()),Pe(u.updateCameraConfigsWithMerge(Re))})),B=(Pe={},Re=c().noop)=>{const Ke={f:["default"],ids:Pe.id?Pe.id:void 0,skip_expensive:!!Pe.twoStepLoad};return c().extend(Ke,c().omit(Pe,"id","twoStepLoad","loading","updateFlux")),re=>Promise.all([v(Ke,Pe.loading,Pe.twoStepLoad,Re,re,Pe.updateFlux),re(L())])},F=(Pe,Re)=>Ke=>(Ke(u.updateLocals({nodes:{success:!1,saving:!0,submitted:!1}})),l().ajax({url:d()({controller:"nodes",action:"move_devices"}),type:"POST",data:{ids:Pe.ids,network:Pe.network,retain_video_data:Pe.retainVideoData}}).done(()=>{Ke(u.deleteNodesById(Pe.ids)),Ke(u.updateLocals({nodes:{success:!0,saving:!1,submitted:!0}}))}).fail(re=>{Ke(u.updateLocals({nodes:{success:!1,saving:!1,submitted:!0}})),Re(re)})),K=(Pe,Re)=>Ke=>(Ke(u.updateLocals({nodes:{success:!1,saving:!0,submitted:!1}})),l().ajax({url:d()({controller:"node_group",action:"remove_nodes"}),type:"POST",data:{nodes:Pe.serials}}).done(()=>{Ke(u.deleteNodesById(Pe.ids)),Ke(u.updateLocals({nodes:{success:!0,saving:!1,submitted:!0}}))}).fail(re=>{Ke(u.updateLocals({nodes:{success:!1,saving:!1,submitted:!0}})),Re(re)})),b=(Pe,Re)=>(Ke,re)=>(Ke(u.updateLocals({nodes:{success:!1,saving:!0}})),l().ajax({url:d()({controller:"nodes",action:"update_tags"}),type:"POST",data:{ids:Pe.ids,add_tags:Pe.tags.join(" ")}}).done(()=>{const Ae=[];c().each(Pe.ids,$e=>{const Fe=(0,h.I$)(re(),{id:$e}),Ye=c().union(c().compact((Fe.tags||"").split(/\s+/)),Pe.tags).sort();Ae.push(c().extend({},Fe,{tags:` ${Ye.join(" ")} `}))}),Ke(u.updateNodes(Ae)),Ke(u.updateLocals({nodes:{success:!0,saving:!1}}))}).fail(Ae=>{Ke(u.updateLocals({nodes:{success:!1,saving:!1}})),Re(Ae)})),q=(Pe,Re)=>(Ke,re)=>(Ke(u.updateLocals({nodes:{success:!1,saving:!0}})),l().ajax({url:d()({controller:"nodes",action:"update_tags"}),type:"POST",data:{ids:Pe.ids,remove_tags:Pe.tags}}).done(()=>{const Ae=[];c().each(Pe.ids,$e=>{const Fe=(0,h.I$)(re(),{id:$e}),Ye=c().difference(c().compact((Fe.tags||"").split(/\s+/)),Pe.tags).sort();Ae.push(c().extend({},Fe,{tags:` ${Ye.join(" ")} `}))}),Ke(u.updateNodes(Ae)),Ke(u.updateLocals({nodes:{success:!0,saving:!1}}))}).fail(Ae=>{Ke(u.updateLocals({nodes:{success:!1,saving:!1}})),Re(Ae)}));let j,J,ee;!((I=p().features)===null||I===void 0)&&I.has_aurora_write_access&&(ee=(Pe,Re,Ke)=>async re=>{re(u.updateLocals({nodes:{success:!1,saving:!0}}));const Ae=d()({controller:"nodes",action:"create_catalyst_conversions"}),$e=await(0,a.A)(Ae,{body:JSON.stringify(Pe),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":p().authenticity_token},method:"POST"});if($e.ok)re(u.updateLocals({nodes:{success:!0,saving:!1}})),Re();else{let Fe;const Ye=await $e.text();try{Fe=JSON.parse(Ye)}catch{Fe={errors:[Ye]}}re(u.updateLocals({nodes:{success:!1,saving:!1}})),Ke(Fe)}});const V=()=>Pe=>(Pe(u.requestSchedules()),(0,a.A)(d()({controller:"schedules",action:"json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>{Pe(u.resetSchedules()),Pe(u.addSchedules(Re))})),N=()=>Pe=>(Pe(u.requestScheduleEntries()),(0,a.A)(d()({controller:"schedules",action:"schedule_entries_json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>{Pe(u.resetScheduleEntries()),Pe(u.addScheduleEntries(Re))})),w=({nodeId:Pe}={})=>Re=>{Re(u.requestCameraConfigs());const Ke=Pe?`?node_id=${Pe}`:"",re=d()({controller:"cameras",action:"camera_config"})+Ke;return(0,a.A)(re,{credentials:"same-origin"}).then(Ae=>Ae.json()).then(Ae=>(Re(u.resetCameraConfigs()),Re(u.addCameraConfigs([Ae])),Ae))},z=()=>Pe=>(Pe(u.requestCameraConfigs()),(0,a.A)(d()({controller:"cameras",action:"camera_configs_json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>(Pe(u.resetCameraConfigs()),Pe(u.addCameraConfigs(Re)),Re))),ne=({nodeId:Pe}={})=>Re=>{Re(u.requestMotionAlertConfigs());const Ke=Pe?`?node_id=${Pe}`:"",re=d()({controller:"cameras",action:"motion_alert_configs_json"})+Ke;return(0,a.A)(re,{credentials:"same-origin"}).then(Ae=>Ae.json()).then(Ae=>{Re(u.resetMotionAlertConfigs()),Re(u.addMotionAlertConfigs(Ae))})},Y=()=>Pe=>(Pe(u.requestCameraAnalyticsModules()),(0,a.A)(d()({controller:"cameras",action:"camera_analytics_modules_json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>{Pe(u.resetCameraAnalyticsModules()),Pe(u.addCameraAnalyticsModules(Re))})),te=()=>Pe=>(Pe(u.requestMqttBrokerConfigs()),(0,a.A)(d()({controller:"cameras",action:"mqtt_broker_configs_json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>{Pe(u.resetMqttBrokerConfigs()),Pe(u.addMqttBrokerConfigs(Re))})),Te=Pe=>Re=>{Re(u.replaceDoNotDisturbConfigs(Pe.doNotDisturbConfigs)),Re(u.replaceSchedules(Pe.schedules)),Re(u.replaceScheduleEntries(Pe.scheduleEntries)),Re(u.resetAllChanges())},me=()=>Pe=>(Pe(u.requestDoNotDisturbConfigs()),(0,a.A)(d()({controller:"configure",action:"do_not_disturb_configs_json"}),{credentials:"same-origin"}).then(Re=>Re.json()).then(Re=>Pe(u.addDoNotDisturbConfigs(Re)))),Me=Pe=>(Re,Ke)=>{Re({type:"UPDATE_LOCALS",update:{saving:!0,success:!1,failure:!1}});const re=(0,n.ZX)(Ke()),Ae=(0,E.w1)(Ke()),$e=(0,s.dz)(Ke()),Fe=(0,t.KF)(Ke());return(0,a.A)(d()({controller:"schedules",action:"post_all"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":p().authenticity_token},method:"POST",body:JSON.stringify({cameraConfigs:re,motionAlertConfigs:Ae,schedules:$e,scheduleEntries:Fe})}).then(Ye=>Ye.json()).then(Ye=>{if(!Ye.success)return Promise.reject("bad response",Ye)}).then(()=>Pe?.()).then(()=>Promise.all([V()(Re),N()(Re),z()(Re),ne()(Re)])).then(()=>{Re(u.updateLocals({saving:!1,success:!0}))}).catch(Ye=>{Re(u.updateLocals({saving:!1,failure:!0,errors:Ye}))})},Ie=(Pe,Re,Ke,re)=>{let Ae={artifactId:Re,enabled:re,parameters:[{name:"detection_threshold",value:Ke}]};return re||(Ae={enabled:!1}),()=>l().ajax({url:`/api/v1/devices/${Pe}/camera/customAnalytics`,type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(Ae)})},ge=()=>Pe=>l().ajax({url:`/api/v1/organizations/${o}/camera/customAnalytics/artifacts`,type:"GET"}).then(Re=>{Re.sort((Ke,re)=>re.artifactId-Ke.artifactId),Pe(u.updateLocals({artifacts:Re}))}),de=(Pe,Re)=>Ke=>(Ke(u.updateLocals({pandoraErrors:null})),l().ajax({url:`/api/v1/organizations/${o}/camera/customAnalytics/artifacts`,type:"POST",data:{name:Re}}).then(re=>l().ajax({url:re.uploadUrl,type:"PUT",contentType:"binary/octet-stream",processData:!1,context:void 0,data:Pe})).fail(re=>Ke(u.updateLocals({pandoraErrors:JSON.parse(re.responseText).errors})))),se=Pe=>Re=>l().ajax({url:`/api/v1/organizations/${o}/camera/customAnalytics/artifacts/${Pe}`,type:"DELETE"}).fail(Ke=>Re(u.updateLocals({pandoraErrors:JSON.parse(Ke.responseText).errors}))),X=(Pe=()=>{})=>(Re,Ke)=>{const re=Ke().locals.mqttBroker;if(re.security==="tls"&&!re.has_ca_cert)return Re(u.updateLocals({saving:!1,mqttSaveSuccess:!1,mqttErrors:"No TLS cert provided."}));Re(u.updateLocals({saving:!0,mqttSaveSuccess:null,mqttErrors:null,cameraToTestId:null,connectionTestSuccess:null}));const Ae=re.id==="new";return(0,a.A)(d()({controller:"cameras",action:"update_mqtt_broker_config"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":p().authenticity_token},method:"PUT",body:JSON.stringify({broker:re})}).then($e=>$e.json()).then($e=>{if($e.success)Ae?Pe(Re):setTimeout(()=>Pe(Re),2e3);else return Promise.reject($e.errors)}).then(()=>Promise.all([te()(Re)])).then(()=>{Re(u.updateLocals({saving:!1,mqttSaveSuccess:!0}))}).catch($e=>{Re(u.updateLocals({saving:!1,mqttSaveSuccess:!1,mqttErrors:$e}))})},Oe=Pe=>Re=>{Re(u.updateLocals({saving:!0})),l().ajax({url:d()({controller:"cameras",action:"delete_mqtt_broker_config"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({broker_id:Pe})}).done(Ke=>{Re(u.updateLocals({saving:!1,mqttSaveSuccess:c().isEmpty(Ke.errors),mqttErrors:Ke.errors})),c().isEmpty(Ke.errors)?(Re(u.deleteMqttBrokerConfigsById(Pe)),Re(u.updateLocals({saving:!1,mqttSaveSuccess:null,mqttErrors:[]}))):Re(u.updateLocals({saving:!1,mqttSaveSuccess:!1,mqttErrors:Ke.errors}))}).fail(Ke=>{Re(u.updateLocals({saving:!1,mqttSaveSuccess:!1,mqttErrors:JSON.parse(Ke.responseText).errors}))})},H=()=>(Pe,Re)=>{const Ke=(0,i.pc)(Re());return Pe(u.updateLocals({saving:!0,success:null,failureCameraAnalyticsModules:null,errorsCameraAnalyticsModules:null,deleting:Object.keys(Ke).some(re=>Ke[re].deleted)})),(0,a.A)(d()({controller:"cameras",action:"update_analytics_modules_settings"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":p().authenticity_token},method:"PUT",body:JSON.stringify({changes:Ke})}).then(re=>re.json()).then(re=>{if(!re.success)return Promise.reject("bad response",re)}).then(()=>Promise.all([Y()(Pe)])).then(()=>{Pe(u.updateLocals({saving:!1,success:!0,deleting:!1}))}).catch(re=>{Pe(u.updateLocals({saving:!1,success:!1,failureCameraAnalyticsModules:!0,errorsCameraAnalyticsModules:re,deleting:!1}))})},$=()=>Pe=>{Pe(u.requestVrrpGroups());const Re=d()({controller:"vrrp_group",action:"show"});l().getJSON(Re).done(re=>{Pe(u.addVrrpGroups(re.vrrp_groups))})},le=Pe=>{const Re=c().all(Pe,Ae=>Ae.deleted),Ke=c().all(Pe,Ae=>Ae.created),re=c().all(Pe,Ae=>!Ae.created&&!Ae.deleted);if(Re)return"delete_vrrp_groups";if(Ke)return"create_vrrp_groups";if(re)return"update_vrrp_groups";throw new Error("User in unexpected state")},ce=Pe=>{const Re=le(Pe.vrrp_group_changes);return l().ajax({url:d()({controller:"vrrp_group",action:Re}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(Pe)})},ve=Pe=>(Re,Ke)=>{Re(u.updateLocals({savingVrrpGroupChanges:!0}));const re={vrrp_group_changes:(0,R.Bm)(Ke())},Ae=ce(re);Ae.done($e=>{Re(u.addVrrpGroups($e.vrrp_groups)),Re(u.updateLocals({savingVrrpGroupChanges:!1,success:!0,errors:[]})),Re(u.resetVrrpGroupsChanges()),Pe()}),Ae.fail($e=>{let Fe;$e.status===403?Fe=["You do not have permission to do that"]:$e.responseText?Fe=JSON.parse($e.responseText).errors:Fe=["An error occurred while saving"],Re(u.updateLocals({savingVrrpGroupChanges:!1,errors:Fe,success:!1}))})},_e=Pe=>Re=>{Re(u.requestVrrpGroupCandidates());const Ke=d()({controller:"vrrp_group",action:"vrrp_group_candidates",params:{id:Pe}});l().getJSON(Ke).done(Ae=>{Re(u.addVrrpGroupCandidates(Ae))})},Ee=()=>Pe=>{Pe(u.requestNodeDetails());const Re={f:["id","external_antennas","product_short_description","wan_appliance_short_description","device_type","detected_antenna_types","serial","elevation","elevation_uncertainty","gps_antenna_cable_length","afc_status","afc_expires_at"]};return(()=>(Pe(u.requestNodeDetails()),l().ajax({url:d()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:Re}).then(re=>{Pe(u.addNodeDetails(re.nodes)),Pe(u.updateLocals({submitting:!1,failed:null}))})))()},Se=()=>(Pe,Re)=>{const Ke=Re(),re=(0,r.$_)(Ke),Ae=Object.keys(re)[0],$e={external_antennas:JSON.stringify(re[Ae].external_antennas)};Pe(u.updateLocals({submitting:!0})),l().ajax({url:`/nodes/${Ae}`,type:"PUT",data:$e}).done(Fe=>{Pe(u.updateLocals({submitting:!1,failed:null})),Pe(u.resetAllChanges()),Pe(u.updateNodeDetailsWithMerge({nodeId:Fe}))}).fail(Fe=>{Pe(u.updateLocals({submitting:!1,failed:!0,errors:[Fe.responseText]}))})},k=()=>Pe=>{const Re=d()({controller:"manage/switches",action:"switch_power_info"}),Ke=l().getJSON(Re);Ke.fail(re=>{Pe(u.updateLocals({submitting:!1,failed:!0,errors:[re.responseText]}))}),Ke.done(re=>{Pe(u.updateNodesWithMerge(re))})},G=(Pe,Re)=>Ke=>{Ke(u.requestNodes());const re=c().pick(Re,M);if(c().size(re)>0)return l().ajax({url:`/nodes/${Pe.id}`,type:"PUT",data:re}).done(Ae=>{Ke(u.updateNodes([Ae]))}).always(()=>Ke(u.doneRequestingNodes()))},ie=(Pe,Re,Ke)=>re=>{re(u.requestNodes());const Ae=c().pick(Re,M);if(c().size(Ae)>0)return l().ajax({url:`/api/v1/devices/${Pe}/camera/imagers/${Ke}`,type:"PUT",data:Ae}).done($e=>{re(u.updateNodes([$e]))}).always(()=>re(u.doneRequestingNodes()))},fe=c().extend({},u,{fetchNodes:B,fetchNodesPaginated:P,fetchNodesWithSearch:O,moveNodes:F,removeNodes:K,addTags:b,removeTags:q,addAdminTags:j,removeAdminTags:J,convertNodesToCatalyst:ee,fetchSchedules:V,fetchCameraConfig:w,fetchCameraConfigs:z,fetchMotionAlertConfigs:ne,fetchCameraAnalyticsModules:Y,fetchMqttBrokerConfigs:te,fetchDoNotDisturbConfigs:me,fetchScheduleEntries:N,replaceAllData:Te,postAll:Me,saveMqttBrokerConfigToServer:X,saveArtifactToDevice:Ie,fetchPandoraArtifacts:ge,submitPandoraArtifact:de,deletePandoraArtifact:se,deleteMqttBroker:Oe,submitCameraAnalyticsModules:H,submitVrrpGroupChanges:ve,fetchVrrpGroups:$,fetchNodeDetails:Ee,submitExternalAntennaChanges:Se,fetchVrrpGroupCandidates:_e,fetchSwitchPowerInfo:k,fetchFovRotationAjax:L,update:G,updateImager:ie}),De=D.actionTypes,We=()=>D.createStore(),we=c().extend({},D,{configureStore:We,actions:fe,actionTypes:De});var Ve=null},174399:(ae,x,e)=>{e.d(x,{S:()=>C});var W=e(360116);const C=c=>({enabled:W.az.datatype.boolean(),primarySerial:(0,W.iO)(),spareSerial:(0,W.iO)(),uplinkMode:(0,W.aA)(["virtual","public"]),wan1:{ip:W.az.internet.ipv4(),subnet:`${W.az.internet.ipv4()}/${W.az.internet.port()}`},wan2:{ip:W.az.internet.ipv4(),subnet:`${W.az.internet.ipv4()}/${W.az.internet.port()}`},...c}),g=c=>[rest.get("/api/v1/networks/:networkId/appliance/warmSpare",(y,d,f)=>d(f.status(200),f.json(c(y,d,f))))]},174597:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("PCC_ASM_USER_STORE",{idKey:"uuid"}),f={fetch(){this.dispatch(d.constants.LOADING,!0);const _=c()({controller:"configure",action:"pcc_asm_users"});return C().get(_).done(a=>{this.dispatch(d.constants.RESET,a.users),this.dispatch(d.constants.LOADING,!1)})},reset(_){this.dispatch(d.constants.RESET,_)},deleteById(_){this.dispatch(d.constants.REMOVE,{id:_})},deleteAll(_){this.dispatch(d.constants.REMOVE,_)},update(_){this.dispatch(d.constants.UPDATE,_)}},l=_=>{_.store("PccAsmUserStore")||(_.addStore("PccAsmUserStore",d),_.addActions({pccAsmUsers:f}))}},178943:(ae,x,e)=>{e.d(x,{A:()=>a});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933),d=e(758928),f=e.n(d);const l=(0,y.A)("ACTIVE_TEMPORARY_PERMISSION_STORE"),_={fetch(){return C().post(c()({controller:"manage/temporary_permissions",action:"get_active_temporary_permissions",global:!0}),{org_id:f().org_id},h=>this.dispatch(l.constants.RESET,h.temporary_permissions)).fail(()=>this.dispatch(l.constants.RESET,[]))}};function a(h){h.store("ActiveTemporaryPermissionStore")||(h.addStore("ActiveTemporaryPermissionStore",l),h.addActions({active_temporary_permissions:_}))}},181911:(ae,x,e)=>{e.d(x,{xT:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.injectEndpoints({endpoints:d=>({fetchFirmwareUpgradeStatus:d.query({query:({organizationId:f,serial:l,firmwareUpgradeBatchId:_})=>({url:`organizations/${f}/firmware/upgrades/byDevice`,method:"GET",params:{serials:[l],firmwareUpgradeBatchIds:[_]}}),transformResponse:f=>f?.[0]})}),overrideExisting:!1}),{useFetchFirmwareUpgradeStatusQuery:y}=c},183106:(ae,x,e)=>{e.d(x,{f$:()=>l,hl:()=>f});var W=e(917157),C=e(652129),g=e(310466);const c=(0,C.L)().create().createStore(),y=g.kC.injectEndpoints({endpoints:_=>({fetchBySwitch:_.query({query:({organizationId:a,...h})=>`organizations/${a}/switch/ports/bySwitch${(0,W.DK)(h)}`})})}),d=g.kC.injectEndpoints({endpoints:_=>({fetchStatusBySwitch:_.query({query:({organizationId:a,...h})=>`organizations/${a}/switch/ports/statuses/bySwitch${(0,W.DK)(h)}`})})}),{useFetchBySwitchQuery:f}=y,{useFetchStatusBySwitchQuery:l}=d},186144:(ae,x,e)=>{e.d(x,{U1:()=>B,o1:()=>v,ww:()=>I,yC:()=>p});var W=e(14602),C=e.n(W),g=e(941669),c=e.n(g),y=e(522224),d=e.n(y),f=e(869592),l=e.n(f),_=e(652129),a=e(720506),h=e(675604),s=e.n(h),t=e(967720),n=e(758928),E=e.n(n),i=e(741931),R=e(644200);const r=["nodeGroupDefaultIotRadio","mqttBrokerConfigs","wirelessMqttSettings"],A=(0,_.L)().withStoreName("IotRadioSettingsStore").withModal().withModels(r).withContextOptions([R.RJ]).withChanges().create(),S=A.actions,p=s().message_fields_shared,I=s().message_fields_ble,U=s().message_fields_wifi,D=K=>{const b=d().values((0,i.SO)(K));return d().isEmpty(b)?"0":b[0].id},u=()=>K=>(K(S.requestMqttBrokerConfigs()),(0,t.A)(l()({controller:"configure",action:"wireless_mqtt_broker_configs_json"}),{credentials:"same-origin"}).then(b=>b.json()).then(b=>{K(S.resetMqttBrokerConfigs()),K(S.addMqttBrokerConfigs(b))})),o=(K=()=>{})=>(b,q)=>{const j=q().locals.mqttBroker;b(S.updateLocals({saving:!0,saveSuccess:null,saveErrors:null}));const J=j.id==="new";return(0,t.A)(l()({controller:"configure",action:"update_wireless_mqtt_broker_config"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":E().authenticity_token},method:"POST",body:JSON.stringify({broker:j})}).then(ee=>ee.json()).then(ee=>{if(ee.success)J?K(b):setTimeout(()=>K(b),2e3);else return Promise.reject(ee.error)}).then(()=>Promise.all([u()(b)])).then(()=>{b(S.updateLocals({saving:!1,saveSuccess:!0}))}).catch(ee=>{b(S.updateLocals({saving:!1,saveSuccess:!1,saveErrors:ee}))})},M=K=>b=>{b(S.updateLocals({saving:!0})),c().ajax({url:l()({controller:"configure",action:"delete_wireless_mqtt_broker_config"}),headers:{accept:"application/json"},type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({broker_id:K})}).done(q=>{b(S.updateLocals({saving:!1,saveSuccess:d().isEmpty(q.errors),saveErrors:q.errors})),d().isEmpty(q.errors)?(b(S.deleteMqttBrokerConfigsById(K)),b(S.updateLocals({saving:!1,saveSuccess:null,saveErrors:[]}))):b(S.updateLocals({saving:!1,saveSuccess:!1,saveErrors:q.errors}))}).fail(q=>{b(S.updateLocals({saving:!1,saveSuccess:!1,saveErrors:JSON.parse(q.responseText).errors}))})},m=()=>{const K={mqttEnabled:!1,mqttBrokerConfigId:null,topic:"",messageFields:p.concat(I,U).filter(b=>b!=="rnum").join(" "),pubFreq:1,pubQos:0,bleEnabled:!1,bleHysteresisEnabled:!1,bleHysteresisThreshold:1,bleFlushFreq:60,bleMacWhitelist:"",bleUuidWhitelist:"",bleTypeFilter:"None",wifiEnabled:!1,wifiPubType:"Visible",wifiHysteresisEnabled:!1,wifiHysteresisThreshold:1,wifiFlushFreq:60,wifiMacWhitelist:""};return b=>(b(S.requestWirelessMqttSettings()),(0,t.A)(l()({controller:"configure",action:"wireless_mqtt_settings_configs_json"}),{credentials:"same-origin"}).then(q=>(b(S.resetWirelessMqttSettings()),b(S.updateLocals({hasAdvancedLicense:!0})),q.json().then(j=>{if(q.status===400&&j.errors&&j.errors.includes("No valid license for MQTT")){b(S.updateLocals({hasAdvancedLicense:!1})),b(S.addWirelessMqttSettings([])),b(S.updateLocals({mqttSetting:K})),b(S.updateLocals({mqttSettingPrev:K}));return}d().isEmpty(j)?(b(S.addWirelessMqttSettings([])),b(S.updateLocals({mqttSetting:K})),b(S.updateLocals({mqttSettingPrev:K}))):(b(S.addWirelessMqttSettings([j])),b(S.updateLocals({mqttSetting:j})),b(S.updateLocals({mqttSettingPrev:j})))}))))},P=(K=()=>{})=>(b,q)=>{const j=q().locals.mqttSetting;return b(S.updateLocals({saving:!0,saveSuccess:null,saveErrors:null})),(0,t.A)(l()({controller:"configure",action:"update_wireless_mqtt_settings"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":E().authenticity_token},method:"POST",body:JSON.stringify({setting:j})}).then(J=>J.json()).then(J=>{if(J.success)setTimeout(()=>K(b),2e3);else return Promise.reject(J.errors)}).then(()=>Promise.all([m()(b)])).then(()=>{b(S.updateLocals({saving:!1,saveSuccess:!0}))}).catch(J=>{b(S.updateLocals({saving:!1,saveSuccess:!1,saveErrors:J}))})},T=K=>b=>{const q=d().extend({autoMajorMinorActive:K.isNew||K.autoMajorEnabled&&K.autoMinorEnabled},K);b(S.addNodeGroupDefaultIotRadio([q])),b(S.updateLocals({isLoading:!1,isSaving:!1,saveSuccess:!1,saveErrors:[],nodeGroupDefaultIotRadioId:K.id}))},O=()=>(K,b)=>{const q=b(),j=D(q),J=(0,i.KV)(q)[j]||{},ee=(J.bluetoothNodeSettings||[]).filter(z=>z.nodeId).map(z=>({id:z.nodeId,esl_enabled:!!z.eslEnabled,esl_channel:z.eslChannel===void 0?null:z.eslChannel})),V={};Object.entries({uuid:["uuid"],major:["major"],minor:["minor"],advertisingActive:["bleadv_enabled"],scanningActive:["blescan_enabled"],autoMajorMinorActive:["use_auto_major","use_auto_minor"],eslEnabled:["esl_enabled"],eslHostname:["esl_host_name"],eslMode:["esl_mode"],sensorConnectActive:["sensor_connect_enabled"],privateMacFilteringActive:["random_private_mac_filter_enabled"]}).forEach(([z,ne])=>{ne.forEach(Y=>{V[Y]=J[z]})});const w={};Object.keys(V).length!==0&&(w.node_group=V),ee.length>0&&(w.nodes=ee),K(S.updateLocals({isSaving:!0,saveErrors:[]})),c().ajax({type:"POST",url:l()({controller:"configure",action:"update_iot_radio_settings"}),headers:{accept:"application/json"},data:w}).done(z=>{K(S.resetAllChanges()),K(T(z)),K(S.updateLocals({saveSuccess:!0}))}).fail(z=>{const ne=a.A.parseErrorsFromResponse(z);K(S.updateLocals({isLoading:!1,isSaving:!1,saveSuccess:!1,saveErrors:ne}))})},v=d().extend({},S,{populateIotRadioSettings:T,submitIotRadioSettings:O,getIotRadioSettingId:D,fetchMqttBrokerConfigs:u,saveMqttBrokerConfigToServer:o,deleteMqttBroker:M,fetchMqttSettings:m,SaveMqttSettingsToServer:P}),L=A.actionTypes,B=()=>A.createStore();var F=null},190317:(ae,x,e)=>{e.d(x,{D:()=>W});const W=["days","weeks","months"]},191328:(ae,x,e)=>{e.d(x,{T7:()=>f,VF:()=>c,WZ:()=>y});var W=e(917157),C=e(686663),g=e(310466);const c=(0,W.dk)({controller:"xdr_integrations",action:"fetch_token"}),y="XDR not integrated",d=g.q9.injectEndpoints({endpoints:l=>({fetchAuthToken:l.query({query:()=>({url:C.stringifyUrl({url:c})})})})}),{useFetchAuthTokenQuery:f}=d},200521:(ae,x,e)=>{e.d(x,{U1:()=>U,o1:()=>S});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(684563);const _=["ecos","ecoDevices"],a=(0,W.L)().withStoreName("ExtraConfigOptionsStore").withModels(_).withPrefs().withChanges().withFlexTables().withModal().create(),h=a.actions,s=()=>h.updateLocals({showSuccessFailureModal:!0,saveSuccess:!0}),t=u=>h.updateLocals({showSuccessFailureModal:!0,saveSuccess:!1,saveErrors:u}),n=()=>u=>{u(h.updateLocals({showSuccessFailureModal:!1,saveErrors:[]}))},E=()=>u=>(u(h.requestEcoDevices()),y().get(f()({controller:"organization",action:"devices_eco_json"}),o=>{u(h.addEcoDevices(o))})),i=(u,o,M)=>m=>y().post(f()({controller:"admin_tags",action:"update_org_admin_tags"}),{ids:u,add_tags:o,remove_tags:M}).done(()=>{m(E()),m(s())}).fail(P=>{const T=JSON.parse(P.responseText).error;m(t(T))}),R=u=>{const o=u.reduce((M,m)=>(M[m]={deleted:!0},M),{});return M=>{M(h.changeManyEcos(o)),M(h.actionTable.uncheckItems("tagged-ecos",u))}},r="An unknown error occurred while saving",A=()=>(u,o)=>{const M=(0,l.WC)(o());return u(h.requestEcos()),y().ajax({url:f()({controller:"organization",action:"update_extra_config_options"}),type:"POST",contentType:"application/json",data:JSON.stringify({ecos:M}),dataType:"json"}).done(m=>{m.extra_config_options?(u(h.replaceEcos(m.extra_config_options)),u(h.updateLocals({showSaveErrors:[],showSaveSuccess:!0})),u(h.resetEcosChanges()),u(E())):m.errors?u(h.updateLocals({showSaveErrors:m.errors,showSaveSuccess:!1})):u(h.updateLocals({showSaveErrors:[r],showSaveSuccess:!1}))}).fail(m=>{const P=JSON.parse(m.responseText);u(h.updateLocals({showSaveErrors:P.errors||[r],showSaveSuccess:!1}))}).always(()=>{u(h.doneRequestingEcos())})},S=g().extend({},h,{fetchEcoDevices:E,hideSuccessFailureModal:n,updateAdminTags:i,updateExtraConfigOptionsXhr:A,markEcosToDelete:R}),p=a.actionTypes,I=a.selectors,U=()=>a.createStore();var D=null},200877:(ae,x,e)=>{e.d(x,{FH:()=>D,U1:()=>p,cP:()=>P,K_:()=>O,WK:()=>m,pO:()=>K,gx:()=>u,VL:()=>q,XZ:()=>M,Gc:()=>F,nT:()=>B,r1:()=>b,qZ:()=>T});var W=e(995843),C=e(14602),g=e(961225),c=e(551066),y=e(296540),d=e(652129),f=e(310466),l=e(869188),_=e(97132),a=e(697268);const h=(j,J)=>(0,a.iH)(j,J).map(V=>{if(V.type==="stack"){var N;return{...V,vlanProfile:(N=V.children[0])===null||N===void 0?void 0:N.vlanProfile}}return V}),s=({networkId:j},J)=>(0,y.useMemo)(()=>{const ee=D.endpoints.fetchSwitchStacks.select({networkId:j}),V=D.endpoints.fetchVlanProfileAssignments.select({networkId:j}),N={data:[],isLoading:!1,error:void 0};return(0,_.Mz)(w=>ee(w),w=>V(w),(w,z)=>{const{data:ne,isLoading:Y,error:te}=J?w:N,{data:Te,isLoading:me,error:Me}=z;return{data:ne&&Te?h(ne,Te):void 0,isLoading:Y||me,error:Me||te}})},[j,J]),t=(j,J)=>{const ee=J.reduce((V,N)=>{const{iname:w}=N.vlanProfile;return V[w]=[...V[w]||[],N],V},{});return j.map(V=>{const{iname:N}=V,z=(ee[N]||[]).reduce((ne,Y)=>{const{productType:te}=Y;return ne[te]=[...ne[te]||[],Y],ne},{switch:[],wireless:[]});return{...V,assignedDevices:z}})},n=({networkId:j})=>(0,y.useMemo)(()=>{const J=D.endpoints.fetchVlanProfiles.select({networkId:j}),ee=D.endpoints.fetchVlanProfileAssignments.select({networkId:j});return(0,_.Mz)(V=>J(V),V=>ee(V),(V,N)=>{const{data:w,isLoading:z,error:ne}=V,{data:Y,isLoading:te,error:Te}=N;return{data:w&&Y?t(w,Y):void 0,isLoading:z||te,error:ne||Te}})},[j]);var E=e(222855);const i="SwitchStack",R="VlanProfile",r="Assignment",A="AdaptivePolicyGroup",S="_ALL_",p=()=>(0,d.L)().create().createStore(),I=j=>({name:j.name,iname:j.iname,isDefault:j.isDefault,vlanNames:j.vlanNames.map(({name:J,vlanId:ee,adaptivePolicyGroup:V})=>({name:J,vlanId:ee,adaptivePolicyGroup:V})),vlanGroups:j.vlanGroups.map(({name:J,vlanIds:ee})=>({name:J,vlanIds:ee})),activeVlans:j.activeVlans}),U=j=>({...j,id:j.iname,key:j.iname,vlanNames:j.vlanNames.map((J,ee)=>({...J,key:ee})),vlanGroups:j.vlanGroups.map((J,ee)=>({...J,key:ee}))}),D=f.kC.enhanceEndpoints({addTagTypes:[i,R,r,A]}).injectEndpoints({endpoints:({query:j,mutation:J})=>({fetchSwitchStacks:j({query:({networkId:ee})=>({url:`networks/${ee}/switch/stacks`}),providesTags:ee=>ee?[...ee.map(({id:V})=>({type:i,id:V})),{type:i,id:S}]:[{type:i,id:S}]}),fetchAdaptivePolicyGroups:j({query:({organizationId:ee})=>({url:`organizations/${ee}/adaptivePolicy/groups`}),providesTags:ee=>ee?[...ee.map(({groupId:V})=>({type:A,groupId:V})),{type:A,id:S}]:[{type:A,id:S}]}),fetchVlanProfiles:j({query:({networkId:ee})=>({url:`networks/${ee}/vlanProfiles`}),transformResponse:ee=>ee.map(V=>U(V)),providesTags:ee=>ee?[...ee.map(({iname:V})=>({type:R,id:V})),{type:R,id:S}]:[{type:R,id:S}]}),addVlanProfile:J({query:({networkId:ee,body:V})=>({url:`networks/${ee}/vlanProfiles`,method:"POST",body:I(V)}),invalidatesTags:[{type:R,id:S}]}),updateVlanProfile:J({query:({networkId:ee,body:V})=>({url:`networks/${ee}/vlanProfiles/${V.iname}`,method:"PUT",body:I(V)}),invalidatesTags:(ee,V,N)=>[{type:R,id:N.body.iname}]}),deleteVlanProfile:J({query:({networkId:ee,iname:V})=>({url:`networks/${ee}/vlanProfiles/${V}`,method:"DELETE"}),invalidatesTags:[{type:R,id:S}]}),fetchVlanProfileAssignments:j({async queryFn({networkId:ee}){const{data:V,errors:N}=await(0,E.LiY)({method:"GET",url:`/api/v1/networks/${ee}/vlanProfiles/assignments/byDevice`});return N.length>0?{error:{errors:N.flat()}}:{data:V.flat()}},providesTags:ee=>ee?[...ee.map(({serial:V})=>({type:r,id:V})),{type:r,id:S}]:[{type:r,id:S}]}),updateVlanProfileAssignment:J({query:({networkId:ee,body:V})=>({url:`networks/${ee}/vlanProfiles/assignments/reassign`,method:"POST",body:V}),invalidatesTags:[{type:r,id:S}]})}),overrideExisting:!1}),{useFetchVlanProfileAssignmentsQuery:u,useFetchSwitchStacksQuery:o,useFetchVlanProfilesQuery:M,useFetchAdaptivePolicyGroupsQuery:m,useAddVlanProfileMutation:P,useUpdateVlanProfileMutation:T,useDeleteVlanProfileMutation:O,useUpdateVlanProfileAssignmentMutation:v}=D,L=j=>{const{data:J,...ee}=M(j);return(0,y.useMemo)(()=>({data:(0,l.v)(J??[],"iname"),...ee}),[J,ee])},B=({iname:j,...J})=>{const{data:ee,...V}=L(J);return(0,y.useMemo)(()=>({data:ee?.[j],...V}),[j,ee,V])},F=j=>{const{data:J,...ee}=M(j);return(0,y.useMemo)(()=>({data:J?.find(V=>V.isDefault),...ee}),[J,ee])},K=({networkId:j},J)=>(o(J?{networkId:j}:c.skipToken),u({networkId:j}),(0,g.useSelector)(s({networkId:j},J))),b=({networkId:j})=>{const[J,ee]=v();return[(0,y.useCallback)(({selectedProfileIname:N,selectedDeviceSerials:w,selectedSwitchStackIds:z})=>J({networkId:j,body:{vlanProfile:{iname:N},serials:w,stackIds:z}}),[j,J]),ee]},q=({networkId:j})=>(M({networkId:j}),u({networkId:j}),(0,g.useSelector)(n({networkId:j})))},204013:(ae,x,e)=>{e.d(x,{Ct:()=>y,DE:()=>d});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.injectEndpoints({endpoints:f=>({getConfigHistory:f.query({query:({serial:l})=>({url:`devices/${l}/switch/configs`,method:"GET"})}),getConfigText:f.query({query:({serial:l,configId:_})=>({url:`devices/${l}/switch/configs/${_}`,method:"GET"})})})}),{useGetConfigHistoryQuery:y,useGetConfigTextQuery:d}=c},204207:(ae,x,e)=>{e.d(x,{Tp:()=>N,o1:()=>V,sj:()=>ge});var W=e(640173),C=e.n(W),g=e(522224),c=e.n(g),y=e(646894),d=e.n(y),f=e(82960),l=e(74998),_=e(878821),a=e(253320);const h="mapPosition",s="selectedFloorplan",t=de=>de.replace(/\//g,"."),n={ADD_NOTICE:"ADD_NOTICE",DELETE_NOTICE:"DELETE_NOTICE",GET_NOTICE:"GET_NOTICE",ADD_NOTICEMARKER:"ADD_NOTICEMARKER",DELETE_NOTICEMARKER:"DELETE_NOTICEMARKER",UPDATE_LOADING:"UPDATE_LOADING",RESET_LOADING:"RESET_LOADING",UPDATE_POSITION:"UPDATE_POSITION",UPDATE_MAPTYPE:"UPDATE_MAPTYPE",UPDATE_FLOORPLAN_ANGLE:"UPDATE_FLOORPLAN_ANGLE",UPDATE_FLOORPLAN_CENTER:"UPDATE_FLOORPLAN_CENTER",UPDATE_SELECTED_FLOORPLAN:"UPDATE_SELECTED_FLOORPLAN",UPDATE_MKIMAPSHACK_REDRAW_ID:"UPDATE_MKIMAPSHACK_REDRAW_ID"},E=(de,se,X)=>({type:n.ADD_NOTICE,id:de,mapId:se,message:X}),i=de=>({type:n.DELETE_NOTICE,id:de}),R=(de,se,X)=>({type:n.ADD_NOTICEMARKER,id:de,mapId:se,coords:X}),r=de=>({type:n.DELETE_NOTICEMARKER,id:de}),A=(de,se)=>({type:n.UPDATE_LOADING,mapId:de,isLoading:se}),S=de=>({type:n.RESET_LOADING,mapId:de}),p=(de,se)=>({type:n.UPDATE_POSITION,mapId:de,position:se}),I=(de,se)=>({type:n.UPDATE_MKIMAPSHACK_REDRAW_ID,mapId:de,redrawId:se}),U=(de,se)=>({type:n.UPDATE_MAPTYPE,mapId:de,mapType:se}),D=(de,se)=>({type:n.UPDATE_FLOORPLAN_ANGLE,mapId:de,floorplanAngle:se}),u=(de,se)=>({type:n.UPDATE_FLOORPLAN_CENTER,mapId:de,floorplanCenter:se}),o=de=>de.maps.notices.byId,M=de=>de.maps.noticeMarkers.byId,m=(de,se)=>{const X=de.maps.notices.byId;return c().omit(X,Oe=>Oe.mapId!==se.mapId)},P=(de,se)=>{const X=de.maps.noticeMarkers.byId;return c().omit(X,Oe=>Oe.mapId!==se.mapId)},T=(de,se)=>de.maps.notices.byId[se.notice.id],O=(de,se)=>de.maps.noticeMarkers.byId[se.noticeMarker.id],v=(de,se)=>de.maps.loading.byMapId[se.mapId],L=(de,se)=>de.maps.position.byMapId[se.mapId],B=(de,se)=>de.maps.mapType.byMapId[se.mapId],F=(de,se)=>de.maps.floorplanAngle.byMapId[se.mapId],K=(de,se)=>de.maps.floorplanCenter.byMapId[se.mapId],b=(de,se)=>{if(se.useLocals)return de.locals.selectedFloorplan;{const X=`${se.mapId}${t(window.location.pathname)}`,Oe=l.Tp.getPrefByKey(de,{key:s});return Oe&&Oe[X]}},q=(de,se)=>de.maps._mkiMapsHack_redrawId.byMapId[se.mapId],j=(de,se)=>{const X=l.Tp.getPrefByKey(de,{key:h}),Oe=`${se.mapId}${t(window.location.pathname)}`;if(X&&!c().isUndefined(X[Oe])){const{zoom:H,center:$}=X[Oe];return{zoom:H,center:{lat:$&&Number($.lat),lng:$&&Number($.lng)}}}else return null},V={addNotice:E,deleteNotice:i,addNoticeMarker:R,deleteNoticeMarker:r,updateLoading:A,resetLoading:S,updatePosition:p,savePosition:de=>(se,X)=>{const Oe=X(),H=a.A.buildId(null,Mkiconf.ng_id),$=`${de}${t(window.location.pathname)}`;let le=L(Oe,{mapId:de});de==="pccMap"&&(le={...le,networkId:H}),se(l.o1.setNestedPref(h,{[$]:le}))},updateMapType:U,updateFloorplanAngle:D,updateFloorplanCenter:u,updateSelectedFloorplan:(de,se,X)=>Oe=>{const H=se&&se.id;if(X)Oe(_.o1.updateLocals({selectedFloorplan:H}));else{const $=`${de}${t(window.location.pathname)}`;Oe(l.o1.setNestedPref(s,{[$]:H}))}},update_mkiMapsHack_redrawId:I},N={getAllNotices:o,getAllNoticeMarkers:M,getNoticeById:T,getNoticeMarkerById:O,getNoticesByMapId:m,getNoticeMarkersByMapId:P,getLoadingByMapId:v,getPositionByMapId:L,getSavedPositionByMapId:j,getMapTypeByMapId:B,getFloorplanAngleByMapId:F,getFloorplanCenterByMapId:K,getSelectedFloorplanByMapId:b,get_mkiMapsHack_redrawIdByMapId:q},w=(de={byId:{}},se)=>{const{id:X}=se;switch(se.type){case n.ADD_NOTICE:{const Oe={mapId:se.mapId,message:se.message};return d()(de,{byId:{[X]:{$set:Oe}}})}case n.DELETE_NOTICE:return{byId:c().omit(de.byId,X)};default:return de}},z=(de={byId:{}},se)=>{const{id:X}=se;switch(se.type){case n.ADD_NOTICEMARKER:{const Oe={mapId:se.mapId,coords:se.coords};return d()(de,{byId:{[X]:{$set:Oe}}})}case n.DELETE_NOTICEMARKER:return{byId:c().omit(de.byId,X)};default:return de}},ne=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_LOADING:return d()(de,{byMapId:{[X]:{$set:se.isLoading}}});case n.RESET_LOADING:return d()(de,{byMapId:{[X]:{$set:void 0}}});default:return de}},Y=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_MAPTYPE:return d()(de,{byMapId:{[X]:{$set:se.mapType}}});default:return de}},te=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_FLOORPLAN_ANGLE:return d()(de,{byMapId:{[X]:{$set:se.floorplanAngle}}});default:return de}},Te=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_FLOORPLAN_CENTER:return d()(de,{byMapId:{[X]:{$set:se.floorplanCenter}}});default:return de}},me=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_POSITION:{const Oe={zoom:se.position.zoom,center:se.position.center};return d()(de,{byMapId:{[X]:{$set:Oe}}})}default:return de}},Me=(de={byMapId:{}},se)=>{const{mapId:X}=se;switch(se.type){case n.UPDATE_MKIMAPSHACK_REDRAW_ID:return d()(de,{byMapId:{[X]:{$set:se.redrawId}}});default:return de}},Ie=(0,f.combineReducers)({notices:w,noticeMarkers:z,loading:ne,position:me,mapType:Y,floorplanAngle:te,floorplanCenter:Te,_mkiMapsHack_redrawId:Me}),ge=()=>({actions:V,reducer:Ie,actionTypes:n})},204330:(ae,x,e)=>{e.d(x,{U1:()=>h,o1:()=>_});var W=e(652129),C=e(281034),g=e(644200);const c=["namedTagScopes","tags"],y=(0,W.L)().withStoreName("PccSettingsPageStore").withModels(c).withContextOptions([g.RJ]).withChanges().create(),d=y.actions,_={...d,fetchNamedTagScopes:()=>s=>(s(d.requestNamedTagScopes()),(0,C.bQ)().then(C.QW).then(t=>{s(d.addNamedTagScopes(t))})),fetchTags:()=>s=>(s(d.requestTags()),(0,C._Y)().then(t=>{s(d.addTags(t))}))},a=y.actionTypes,h=()=>y.createStore()},206228:(ae,x,e)=>{e.d(x,{SK:()=>B,o1:()=>v});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(720506),l=e(652129),_=e(644200),a=e(69013),h=e(70783);const s=["scheduledReports","scheduledReportScopes"],t=[_.OF],n=(0,l.L)().withStoreName("ScheduledReportsStore").withModels(s).withContextOptions(t).withChanges().withPrefs().create(),E=n.actions,i=(K,b,q,j)=>{const J=C().map(b,ee=>C().extend({id:C().uniqueId("scope_")},ee));j?(K(E.updateScheduledReports(q)),K(E.updateScheduledReportScopes(J))):(K(E.addScheduledReports(q)),K(E.addScheduledReportScopes(J)))},R=()=>K=>{K(E.requestScheduledReports()),c().get(d()({controller:"scheduled_reports",action:"all_by_scope"})).done(b=>i(K,b.scopes,b.reports,!1))},r=K=>b=>{b(E.requestScheduledReports()),c().get(d()({controller:"scheduled_reports",action:"current"}),{scope_string:JSON.stringify(K)}).done(q=>i(b,[q.scope],q.reports,!0))},A=(K,b)=>E.updateLocals({[`${K}_modal`]:b}),S=(K,b)=>E.updateLocals({[`${K}_duplicateReportIds`]:b}),p=(K,b)=>E.updateLocals({[`${K}_status`]:b}),I=K=>p(K,{saving:!0}),U=(K,b)=>p(K,{saving:!1,saveSuccess:!0,saveErrors:null,saveWarnings:b}),D=(K,b,q,j)=>p(K,{saving:!1,saveSuccess:!1,saveErrors:b,saveWarnings:q,errorText:j}),u=(K,b,q)=>{if(!C().isEmpty(b.errors)){K(D(q,b.errors,b.warnings));return}b.report_updates&&(K(E.updateScheduledReportsWithMerge(b.report_updates)),C().each(b.report_updates,j=>K(E.resetScheduledReportsById(j.id)))),b.new_reports&&K(E.updateScheduledReportsWithMerge(b.new_reports)),b.scope_update&&(K(E.updateScheduledReportScopesWithMerge([b.scope_update])),K(E.resetScheduledReportScopesById(q))),b.new_reports&&C().each(b.new_reports,j=>K(E.resetScheduledReportsById(j.frontend_id))),b.scope_deletion&&K(E.deleteScheduledReportScopesById([b.scope_deletion])),b.report_deletions&&(K(E.deleteScheduledReportsById(b.report_deletions)),C().each(b.report_deletions,j=>K(E.resetScheduledReportsById(j)))),K(U(q,b.warnings)),K(A(q,!1)),K(E.updateLocals({showModal:!1}))},o=K=>C().chain(K).pairs().reduce((b,q)=>b+q[0]*q[1].length,0).value(),M=K=>`There are ${o(K)} duplicate report recipients:`,m=K=>C().chain(K).pairs().map(b=>C().map(b[1],q=>{const j=a.U3[q.frequency];return`To ${q.email}, with ${j} frequency`})).flatten().value(),P=K=>(b,q)=>{const j=q();b(I(K));const J=j.models.scheduledReportScopes.byId[K],ee=(0,h.dW)(j)[K],V=(0,h.LB)(j)[K].report_ids,N=C().pick((0,h.jX)(j),V);if(!ee&&C().isEmpty(N)){b(E.resetScheduledReportScopesById(K)),C().each(V,ne=>b(E.resetScheduledReportsById(ne))),b(U(K)),b(A(K,!1)),b(E.updateLocals({showModal:!1}));return}const w=(0,h.II)(j,{id:K});if(C().isEmpty(w))b(S(K,[]));else{const ne=m(w),Y=M(w),te=(0,h.Ln)(j,{id:K});b(D(K,ne,void 0,Y)),b(S(K,te));return}const z={scope:C().omit(J,"logo_blob"),reports:N};return ee&&(Object.prototype.hasOwnProperty.call(ee,"deleted")?z.deleted=ee.deleted:(Object.prototype.hasOwnProperty.call(ee,"name")&&(z.name=ee.name),Object.prototype.hasOwnProperty.call(ee,"logo")&&(z.logo=ee.logo,z.logo_blob=ee.logo_blob||null))),c().ajax({url:d()({controller:"scheduled_reports",action:"update_scope"}),type:"POST",data:JSON.stringify(z),contentType:"application/json; charset=utf-8"}).done(ne=>u(b,ne,K)).error(()=>b(D(K,["Request failed"])))},T=(K,b,q,j)=>{const J=C().pick(K,b);return ee=>c().ajax({url:d()({controller:"scheduled_reports",action:"convert_to_new_report"}),type:"POST",data:{report_scopes:J}}).done(V=>{C().each(V.updated_scopes,(N,w)=>u(ee,N,w)),q()}).error(V=>{j(f.A.parseErrorsFromResponse(V))})},O=K=>E.updateLocals({filter:K}),v=C().extend({},E,{fetchAllScheduledReports:R,fetchCurrentScheduledReports:r,setModalVisibility:A,submitChangedScope:P,updateFilter:O,submitConvertToNewReport:T}),L=n.actionTypes,B=()=>n.createStore();var F=null},210752:(ae,x,e)=>{e.d(x,{o1:()=>M});var W=e(967720),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(758928),f=e.n(d),l=e(522224),_=e.n(l),a=e(652129),h=e(120267);window.urlFor=g();const s=["cameraWirelessSettings","wirelessProfiles"],t=(0,a.L)().withStoreName("CameraWirelessSettingsStore").withModels(s).withModal().withChanges().withApiJobs().withPrefs().withFlexTables().create(),n=t.actions,E=O=>{const v=O.map(L=>({...L}));return n.addCameraWirelessSettings(v)},i=({nodeId:O}={})=>v=>{if(!f().can_read)return;v(n.requestCameraWirelessSettings());const L=O?`?node_id=${O}`:"",B=g()({controller:"cameras",action:"camera_wireless_settings_json"})+L;return(0,W.A)(B,{credentials:"same-origin"}).then(F=>F.json()).then(F=>{v(E(F))})},R=()=>O=>{if(f().can_read)return O(n.requestWirelessProfiles()),(0,W.A)(g()({controller:"cameras",action:"camera_wireless_profiles_json"}),{credentials:"same-origin"}).then(v=>v.json()).then(v=>{O(n.addWirelessProfiles(v.wireless_profiles))})},r=()=>O=>{const v={showCameraWirelessBulkEditModal:!1,showViewCameraWirelessProfilesModal:!1,showAssignWirelessProfileModal:!1,showCreateWirelessProfileModal:!1,showReview:!1,selectedWirelessProfiles:new Array(3),errors:[],isSaving:!1,saveSuccess:null,id:null,name:null,protocol:"WPA-PSK",ssid:null,password:null,identity:null};O(n.updateModal(v))},A=()=>O=>{O(i()),O(R())},S=()=>O=>{O(n.updateModal({id:null,name:null,protocol:"WPA-PSK",ssid:null,password:null,identity:null}))},p=O=>{const v=O();if(_().isEmpty((0,h.c_)(v)))return;const L={};return L.cameraWireless_changes=(0,h.c_)(v),y().ajax({url:g()({controller:"cameras",action:"update_wireless_settings"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({changes:L})})},I=()=>(O,v)=>{O(n.updateModal({isSaving:!0})),p(v).done(L=>{O(n.updateModal({isSaving:!1,saveSuccess:_().isEmpty(L.update_messages.errors),errors:L.update_messages.errors})),_().isEmpty(L.update_messages.errors)?(O(n.updateModal({isSaving:!1,saveSuccess:null,errors:[]})),O(n.resetAllChanges()),O(E(L.new_settings))):O(n.updateModal({isSaving:!1,saveSuccess:!1,errors:L.update_messages.errors}))}).fail(L=>{O(n.updateModal({isSaving:!1,saveSuccess:!1,errors:JSON.parse(L.responseText).update_messages.errors}))})},U=()=>(O,v)=>{_().isEmpty((0,h.c_)(v()))||(O(n.updateModal({isSaving:!0})),p(v).done(L=>{O(n.updateModalWithErrors({isSaving:!1,saveSuccess:_().isEmpty(L.update_messages.errors)},L.update_messages.errors)),_().isEmpty(L.update_messages.errors)?setTimeout(()=>{O(n.updateModalWithErrors({showCameraWirelessBulkEditModal:!1,showAssignWirelessProfileModal:!1,isSaving:!1,saveSuccess:null},[])),O(n.updateLocals({selectedCameraWireless:[]})),O(n.resetAllChanges()),O(E(L.new_settings)),r()},3e3):O(n.updateModalWithErrors({isSaving:!1,saveSuccess:!1},L.update_messages.errors))}).fail(L=>{O(n.updateModalWithErrors({isSaving:!1,saveSuccess:!1},JSON.parse(L.responseText).update_messages.errors))}))},D=()=>(O,v)=>{_().isEmpty((0,h.c_)(v()))||(O(n.updateLocals({wirelessTabIsSaving:!0})),p(v).done(L=>{O(n.updateLocals({wirelessTabIsSaving:!1,wirelessTabSaveSuccess:_().isEmpty(L.update_messages.errors),wirelessTabErrors:L.update_messages.errors})),_().isEmpty(L.update_messages.errors)?setTimeout(()=>{O(n.updateLocals({wirelessTabIsSaving:!1,wirelessTabSaveSuccess:null,wirelessTabErrors:[]})),O(n.updateLocals({selectedCameraWireless:[]})),O(n.resetAllChanges()),O(E(L.new_settings))},3e3):O(n.updateLocals({wirelessTabIsSaving:!1,wirelessTabSaveSuccess:!1,wirelessTabErrors:L.update_messages.errors}))}).fail(L=>{O(n.updateLocals({wirelessTabIsSaving:!1,wirelessTabSaveSuccess:!1,wirelessTabErrors:JSON.parse(L.responseText).update_messages.errors}))}))},u=O=>(v,L)=>{const B=L();if(_().isEmpty((0,h.oC)(B)))return;const F={profile_changes:(0,h.oC)(B)[O]};v(n.updateModal({createIsSaving:!0})),y().ajax({url:g()({controller:"cameras",action:"update_wireless_profile"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({changes:F})}).done(K=>{v(n.updateModal({createIsSaving:!1,createSaveSuccess:_().isEmpty(K.update_messages.errors),createErrors:K.update_messages.errors})),_().isEmpty(K.update_messages.errors)?(v(n.updateWirelessProfiles([{password:F.profile_changes.password,...K.new_settings[0]}])),v(n.resetWirelessProfilesChangesById(O)),setTimeout(()=>{v(n.updateModal({createIsSaving:!1,createSaveSuccess:null,showCreateWirelessProfileModal:!1,showEditWirelessProfileModal:!0,createErrors:[]})),v(S())},1e3)):(v(n.resetAllChanges()),v(n.updateModal({createIsSaving:!1,createSaveSuccess:!1,createErrors:K.update_messages.errors})))}).fail(K=>{v(n.resetAllChanges()),v(n.updateModal({createIsSaving:!1,createSaveSuccess:!1,createErrors:JSON.parse(K.responseText).update_messages.errors}))})},o=O=>v=>{v(n.updateModal({isSaving:!0})),y().ajax({url:g()({controller:"cameras",action:"delete_wireless_profile"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({camera_wireless_profile_id:O})}).done(L=>{v(n.updateModal({isSaving:!1,saveSuccess:_().isEmpty(L.errors),errors:L.errors})),_().isEmpty(L.errors)?(v(n.deleteWirelessProfilesById(O)),v(n.updateModal({isSaving:!1,saveSuccess:null,errors:[]}))):v(n.updateModal({isSaving:!1,saveSuccess:!1,errors:L.errors}))}).fail(L=>{v(n.updateModal({isSaving:!1,saveSuccess:!1,errors:JSON.parse(L.responseText).errors}))})},M=_().extend({},n,{initializeCameraWireless:A,fetchCameraWirelessSettings:i,fetchWirelessProfiles:R,initializeModal:r,resetCreateModal:S,submitModal:U,submitWirelessPage:D,submitCameraWireless:I,submitProfile:u,deleteProfile:o}),m=t.actionTypes,P=()=>t.createStore();var T=null},219757:(ae,x,e)=>{e.d(x,{U1:()=>o,o1:()=>D});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(967720),d=e(652129),f=e(869592),l=e.n(f),_=e(52354);const a=["versions"],h=(0,d.L)().withStoreName("FirmwareVersionsStore").withModels(a).withPrefs().withFlexTables().withChanges().create(),s=h.actions,t=()=>s.updateLocals({saveVersionSuccess:!0,saveVersionErrors:[]}),n=m=>s.updateLocals({saveVersionSuccess:!1,saveVersionErrors:m}),E=()=>m=>{m(s.requestVersions());const P=`${l()({controller:"versions",action:"list"})}`;return c().getJSON(P).done(T=>{m(s.addVersions(T))})},i=m=>P=>{P(s.requestVersions());const T=`${l()({controller:"versions"})}/${m}`;return c().getJSON(T).done(O=>{P(s.addVersions([O]))})},R=()=>(m,P)=>{if(P().buildNamesByNetworkType)return!0;const O=`${l()({controller:"versions",action:"version_context_json"})}`;return c().getJSON(O).done(v=>{const L=(K,b)=>(K[b[1]]=b[0],K),B=v.network_types.reduce(L,{}),F=v.backup_versions_by_network_type;m(s.updateContext({buildNamesByNetworkType:v.build_names,backupVersionsByNetworkType:F,networkTypes:B}))})},r=()=>(m,P)=>{m(s.updateLocals({fetchedVersionStat:!1}));const T=P(),O=(0,_.l0)(T),v=l()({controller:"versions",action:"list_helper"});return(0,y.A)(v).then(L=>L.json()).then(L=>{const B=Object.values(O).map(F=>{const K={total_networks:0,...L.version_stats[F.id]};return{...F,totalNetworks:K.total_networks}});m(s.addVersions(B)),m(s.updateLocals({fetchedVersionStat:!0}))})},A=m=>{if(m.status<200||m.status>=300){let P=[];try{const T=JSON.parse(m.responseText);P=T.errors||[T.error]}catch{switch(m.status){case 404:P.push("We can't find the version you are looking for.");break;default:P.push("An error has occurred. Please try again.")}}return P}return[]},S=()=>s.updateLocals({saveVersionErrors:[]}),p=m=>P=>{const T=`${l()({controller:"versions"})}`;return P(s.updateLocals({saveVersionSuccess:!1})),c().ajax({url:T,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({version:m})}).done(O=>{const v={totalNetworks:0,...m,...O};P(s.updateVersions([v])),P(t())}).fail(O=>{const v=A(O);P(n(v))})},I=m=>(P,T)=>{const O=(0,_.ay)(T(),{id:m.id}),v=`${l()({controller:"versions"})}/${m.id}`;return P(s.updateLocals({saveVersionSuccess:!1})),c().ajax({url:v,type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({version:m})}).done(L=>{const B={...O,...m,...L};P(s.updateVersions([B])),P(t())}).fail(L=>{const B=A(L);P(n(B))})},U=m=>P=>{const T=`${l()({controller:"versions"})}/${m.id}`;return P(s.updateLocals({saveVersionSuccess:!1})),c().ajax({url:T,type:"DELETE"}).done(()=>{P(s.deleteVersionsById([m.id])),P(t())}).fail(O=>{const v=A(O);P(n(v))})},D=C().extend({},s,{addVersion:p,updateVersion:I,deleteVersion:U,fetchVersion:i,fetchVersions:E,fetchVersionsStat:r,fetchVersionContext:R,resetErrors:S}),u=h.actionTypes,o=()=>h.createStore();var M=null},228066:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("SSID_STORE"),f={fetch(){return C().get(c()({controller:"configure",action:"ssids_json"})).done(_=>{this.dispatch(d.constants.RESET,_)})},reset(_){this.dispatch(d.constants.RESET,_)},update(_){this.dispatch(d.constants.UPDATE,_)}},l=_=>{_.store("SSIDStore")||(_.addStore("SSIDStore",d),_.addActions({ssid:f}))}},230655:(ae,x,e)=>{e.d(x,{U1:()=>R,o1:()=>E});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(50811),d=e.n(y),f=e(652129),l=e(513603);const _=["events","usageData"],a=(0,f.L)().withModels(_).withChanges().create(),h=a.actions,s=r=>async A=>{var S;A(h.requestEvents());const p=(0,l.q)(r),I=`/api/v1/organizations/${Mkiconf.org_id}/nac/sessions/history?${p}`,U=await(0,y.apiRequest)("GET",I);let D=U.data.items.map((o,M)=>({...o,id:M}));const u={meta:U.data.meta,id:(S=D)===null||S===void 0?void 0:S.length};return D=[...D,u],A(h.addEvents(D))},t=r=>async()=>{const A=`/api/v1/organizations/${Mkiconf.org_id}/nac/sessions/${r}/details`;return await(0,y.apiRequest)("GET",A)},n=r=>async A=>{A(h.requestUsageData());let S=`/api/v1/organizations/${Mkiconf.org_id}/nac/license/usage?`;S+=`startDate=${r.startDate}`,r.endDate&&(S+=`&endDate=${r.endDate}`),r.networkIds&&r.networkIds.length>0&&r.networkIds.forEach(I=>{S+=`&networkIds[]=${encodeURIComponent(I)}`});const p=await(0,y.apiRequest)("GET",S);return A(h.updateLocals({usageData:p.data})),A(h.addUsageData({id:"current",...p.data}))},E=c().extend({},h,{fetchEvents:s,fetchCurrentEvent:t,fetchUsage:n}),i=a.actionTypes,R=r=>a.createStore(r)},231356:(ae,x,e)=>{e.d(x,{Tp:()=>t,U1:()=>n,o1:()=>R});var W=e(652129),C=e(941669),g=e.n(C),c=e(522224),y=e.n(c),d=e(745916),f=e(869592),l=e.n(f);const _=["dhcpSnoopList","addEntryList","deleteEntryList","editEntryList","daiBlockedEvents"],a=(0,W.L)().withStoreName("DynamicArpInspectionStore").withModels(_).withChanges().withPrefs().withFlexTables().create(),h=a.actions,s=a.actionTypes,t=a.selectors,n=()=>a.createStore(),E=A=>(S,p)=>{const I=p(),U=Object.assign({},(0,d.Ju)(I));A.forEach(D=>{const u=d.ny.buildDaiEventId(D.details.mac,D.details.vlan),o=U[u];y().isUndefined(o)?U[u]={nodeId:D.ap_id,lastSeen:D.time_f,firstSeen:D.time_f,id:u,mac:D.details.mac,vid:D.details.vlan,count:1,ip:y().isUndefined(D.details.ip)?"unknown":D.details.ip,duplicates:[]}:(o.count+=1,o.firstSeen=D.time_f,y().isUndefined(D.details.ip)||(o.ip=D.details.ip,o.nodeId=D.ap_id),U[u]=o)}),y().isEmpty(U)||S(h.addDaiBlockedEvents(Object.values(U)))},R={...h,fetchDaiBlockedEventLog:()=>(A,S)=>{const p=S(),{fetchedUntil:I,maxEvents:U}=t.getLocals(p);return g().ajax({url:l()({controller:"dashboard",action:"event_data",event_type_include:["dai_blocked"],older_than:I,max_events:U}),type:"GET"}).then(D=>{if(!y().isUndefined(D.events)&&!y().isEmpty(D.events)){const u=D.events.slice(-1)[0].time_f;A(h.updateLocals({fetchedUntil:u})),A(E(D.events))}else{const u=D.t0;A(h.updateLocals({fetchedUntil:u}))}})}};var r=null},233484:(ae,x,e)=>{e.d(x,{U1:()=>b,o1:()=>K});var W=e(953746),C=e.n(W),g=e(14602),c=e.n(g),y=e(941669),d=e.n(y),f=e(522224),l=e.n(f),_=e(869592),a=e.n(_),h=e(138944),s=e(598989),t=e(652129),n=e(370552),E=e(415234),i=e(174168);const R=["floorplans"],r=(0,t.L)().withStoreName("FloofplansStore").withModels(R).withChanges().withPrefs().withFlexTables().create();var A=null;const S={FETCH_FLOORPLANS:"FETCH_FLOORPLANS",UPLOAD_FLOORPLAN:"UPLOAD_FLOORPLAN",ADD_FLOORPLAN:"ADD_FLOORPLAN",UPDATE_FLOORPLAN:"UPDATE_FLOORPLAN",DELETE_FLOORPLAN:"DELETE_FLOORPLAN",UPDATE_NODE_PLACEMENT:"UPDATE_NODE_PLACEMENT"},p=(q,j)=>{const J=j||"image/png",ee=512,V=atob(q),N=[];for(let w=0;w<V.length;w+=ee){const z=V.slice(w,w+ee),ne=new Array(z.length);for(let te=0;te<z.length;te++)ne[te]=z.charCodeAt(te);const Y=new Uint8Array(ne);N.push(Y)}return new Blob(N,{type:J})},I=()=>r.actions.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:[]}),U=()=>r.actions.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]}),D=q=>r.actions.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:q}),u=(q,j)=>{q.node_floorplan_placements=q.node_floorplan_placements.filter(te=>!j.includes(te.node_id)),q.node_ids=q.node_floorplan_placements.map(te=>te.node_id).toString();const{width:J,height:ee}=s.A.nonGeoalignedFloorplanMeterDimensions(q),[V,N]=window.latlng_for(0,0,-ee/4,-J/4),[w,z]=window.latlng_for(0,0,ee/4,J/4);if(l().extend(q,{sw_lat:V,sw_lng:N,ne_lat:w,ne_lng:z,rotation_angle:0}),l().isEmpty(q.node_floorplan_placements))return;const ne=r.createStore(),Y=ne.subscribe(()=>{const te=(0,E.ki)(ne.getState());if(l().isEmpty(te))return;Y();const Te=l().reduce(q.node_floorplan_placements,(me,Me)=>{const Ie=te[Me.node_id];if(Ie){const ge=l().extend({},Ie,{lat:Me.deg_north,lng:Me.deg_east});me.push(ge)}return me},[]);ne.dispatch(i.o1.updateNodesWithMerge(Te))})},o=(q,j)=>{const J={lat:0,lng:0},ee=s.A.midpointBetweenCoords({lat:j.sw_lat,lng:j.sw_lng},{lat:j.ne_lat,lng:j.ne_lng}),{width:V,height:N}=s.A.nonGeoalignedFloorplanMeterDimensions(j),w=Math.sqrt(Math.pow(V,2)+Math.pow(N,2))/2,ne=s.A.metersBetweenCoords({lat:j.sw_lat,lng:j.sw_lng},{lat:j.ne_lat,lng:j.ne_lng})/w,te=s.A.metersBetweenCoords(q,J)*ne,Te=s.A.bearing(J,q)+(0,h.zh)(j.rotation_angle);return s.A.destFromStartGivenBearingAndDist(ee,Te,te)},M=(q,j)=>(j.locals.hasLocale?q.locale_id=j.locals.localeId:q.node_group_id=j.locals.nodeGroupId,q),m=q=>j=>(j(r.actions.requestFloorplans()),d().get(`/${q.scope}/${q.networkId}/floorplans`).done(J=>{if(J.success===!1&&l().first(J.errors)==="Permission denied")return;const ee=l().reduce(J,(N,w)=>{const z=w.node_ids&&w.node_ids.split(",");return z?N.concat(z):N},[]),V=J.map(N=>{const w={...l().omit(N,"image_md5"),img_md5:N.image_md5};return w.is_geoaligned||u(w,ee),w});j(r.actions.addFloorplans(V)),q.floorplanId&&j(r.actions.updateLocals(q.floorplanId))}).always(()=>{j(r.actions.doneRequestingFloorplans())})),P=q=>j=>{j(r.actions.updateLocals({floorplanImage:{isUploading:!0}}));const J=new FormData;return J.append("u",p(q.data,q.type)),d().ajax({url:a()({controller:"configure",action:"custom_maps_image_upload"}),data:J,type:"POST",processData:!1,contentType:!1}).done(ee=>{const V=JSON.parse(ee);j(r.actions.updateLocals({floorplanImage:{isUploading:!1,success:!0,url:V.url,md5:V.md5,width:V.width,height:V.height}}))}).fail(()=>{j(r.actions.updateLocals({floorplanImage:{error:["Error uploading file. Please ensure your image meets the requirements below."],success:!1,isUploading:!1}}))})},T=()=>(q,j)=>{q(r.actions.requestFloorplans()),q(r.actions.updateLocals({isSaving:!0}));const J=j(),ee=(0,n.LF)(J)[J.locals.selectedFloorplan];return d().post("/floorplans",M(l().omit(ee,"id"),J)).done(V=>{q(r.actions.updateFloorplansWithMerge([V])),q(r.actions.updateLocals({selectedFloorplan:V.id})),q(r.actions.resetAllChanges()),q(U())}).fail((V,N,w)=>{q(D([w]))}).always(()=>{q(r.actions.doneRequestingFloorplans())})},O=(q,j)=>(J,ee)=>{J(r.actions.requestFloorplans()),J(r.actions.updateLocals({isSaving:!0}));const V=ee(),N=q||V.locals.selectedFloorplan,w=j||(0,n.Lj)(V,{id:N});if(!w)J(U()),J(r.actions.doneRequestingFloorplans());else return d().ajax({url:`/floorplans/${N}`,type:"PUT",data:M(w,V)}).done(z=>{J(r.actions.updateFloorplansWithMerge([z])),J(i.o1.resetNodesChangesById(q)),J(U())}).fail((z,ne,Y)=>{J(D([Y]))}).always(()=>{J(r.actions.doneRequestingFloorplans())})},v=()=>(q,j)=>{q(r.actions.requestFloorplans()),q(r.actions.updateLocals({isSaving:!0}));const J=j(),ee=J.locals.selectedFloorplan,V=(0,n.Xv)(J,{id:ee}),N=(0,E.ki)(J),w={},z=[];V.node_floorplan_placements.forEach(Y=>{const te=N[Y.node_id];if(!te)return;const Te=o(te,V);w[te.id]=Te,z.push({id:te.id,...Te})});const ne={new_node_locs:w,node_ids:l().keys(w).toString(),...l().omit(V,"is_geoaligned","node_ids")};return d().post(`/floorplans/${ee}/geoalign`,M(ne,J)).done(Y=>{const te={floorplanId:Y.id};J.locals.hasLocale?(te.scope="locales",te.networkId=Y.locale_id):(te.scope="node_groups",te.networkId=Y.node_group_ids[0]),m(te)(q),q(i.o1.updateNodesWithMerge(z)),q(U())}).fail((Y,te,Te)=>{q(D([Te]))}).always(()=>{q(r.actions.doneRequestingFloorplans())})},L=()=>(q,j)=>{q(r.actions.requestFloorplans()),q(r.actions.updateLocals({isSaving:!0}));const J=j(),ee=J.locals.selectedFloorplan;return d().ajax({url:`/floorplans/${ee}`,type:"DELETE",data:M({},J)}).done(()=>{const V=j(),N=(0,n.sK)(V);if(l().some(N,z=>!z.is_geoaligned)){const z=(0,n.Xv)(V,{id:ee}),ne={};V.locals.hasLocale?(ne.scope="locales",ne.networkId=z.locale_id):(ne.scope="node_groups",ne.networkId=z.node_group_ids[0]),m(ne)(q)}else q(r.actions.deleteFloorplansById([ee])),q(r.actions.updateLocals({selectedFloorplan:void 0}));q(U())}).fail((V,N,w)=>{q(D([w]))}).always(()=>{q(r.actions.doneRequestingFloorplans())})},B=(q,j,J,ee,V)=>(N,w)=>{N(i.o1.requestNodes()),N(r.actions.requestFloorplans()),N(i.o1.requestCameraConfigs());const z=w(),ne=[],Y=l().map(q,(me,Me)=>d().ajax({url:`/nodes/${Me}`,type:"PUT",data:me}).done(Ie=>{N(i.o1.updateNodesWithMerge([Ie])),N(i.o1.resetNodesChangesById(Me))}).fail((Ie,ge,de)=>{const se=ee[Me];ne.push(`${se.name||se.mac}: ${de}`)})),te=l().map(j,(me,Me)=>d().ajax({url:`/floorplans/${Me}`,type:"PUT",data:M(me,z)}).done(Ie=>{N(r.actions.updateFloorplansWithMerge([Ie])),N(r.actions.resetFloorplansChangesById(Me))}).fail((Ie,ge,de)=>{ne.push(`${V[Me].name}: ${de}`)})),Te=l().map(J,(me,Me)=>(me.id=Me,d().ajax({url:a()({controller:"cameras",action:"update_map_settings"}),type:"PUT",dataType:"json",data:me}).done(Ie=>{N(i.o1.updateCameraConfigsWithMerge([Ie])),N(i.o1.resetCameraConfigsChangesById(Me))}).fail((Ie,ge,de)=>{const se=ee[Me];ne.push(`${se.name||se.mac}: ${de}`)})));d().when(...Y,...te,...Te).done(()=>{N(i.o1.doneRequestingNodes()),N(r.actions.doneRequestingFloorplans()),N(i.o1.doneRequestingCameraConfigs()),l().isEmpty(ne)?N(U()):N(D(ne))})},F=()=>(q,j)=>{const J=j().locals.floorplanImage;if(!(J&&J.success))return;const ee=j().locals.floorplanImage.md5;return d().ajax({url:a()({controller:"configure",action:"delete_uploaded_floorplan"}),data:JSON.stringify({md5:ee}),type:"POST",processData:!1,contentType:"application/json"})},K=l().extend({},r.actions,{fetchFloorplans:m,uploadFloorplan:P,addFloorplan:T,updateFloorplan:O,geoalignFloorplan:v,deleteUploadedImage:F,deleteFloorplan:L,clearSaveState:I,updateNodePlacement:B}),b=()=>r.createStore()},233685:(ae,x,e)=>{e.d(x,{A:()=>s});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(643699),l=e(4933);const _=(0,l.A)("INVENTORY_STORE"),a=t=>C().map(t,n=>C().object(C().zip(["id","name","mac","serial","ng_id","model","claimed_at","type","document_number","country_code","model_alt"],n))),h={fetchInventory(){return c().get(d()({controller:"organization",action:"inventory_data"})).done(t=>{this.dispatch(_.constants.RESET,a(t.unused)),this.dispatch(f.A.constants.RESET,t.license_state)})},claimDevicesJob(t){return c().post(d()({controller:"organization",action:"claim_store_orders"}),t)},createNetwork(t){return c().post(d()({controller:"organization",action:"create_network"}),t)},pollJobStatus(t){return c().get(d()({controller:"organization",action:"get_claim_store_orders_job_status"}),{job_id:t},null,"json")},validateItems(t){return c().post(d()({controller:"organization",action:"validate_claim_items"}),t)}};function s(t){t.store("InventoryStore")||(t.addStore("InventoryStore",_),t.addActions({inventoryData:h}))}},235338:(ae,x,e)=>{e.d(x,{GF:()=>d,W:()=>f});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c="switchSpanningTree",y=C.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:l=>({fetchSwitchSpanningTree:l.query({query:({orgId:_,networkId:a})=>({url:`organizations/${_}/switch/spanningTree?networkId=${a}`}),providesTags:(_,a,{networkId:h})=>[{type:c,id:h}]}),updateSwitchSpanningTree:l.mutation({query:({networkId:_,switchSpanningTreeConfiguration:a})=>({url:`networks/${_}/switch/spanningTree`,method:"PUT",body:a}),invalidatesTags:(_,a,h)=>[{type:c,id:h.networkId}]})}),overrideExisting:!1}),{useFetchSwitchSpanningTreeQuery:d,useUpdateSwitchSpanningTreeMutation:f}=y},236310:(ae,x,e)=>{e.d(x,{U1:()=>P,o1:()=>M});var W=e(14602),C=e.n(W),g=e(630789),c=e.n(g),y=e(869592),d=e.n(y),f=e(522224),l=e.n(f),_=e(652129),a=e(184988),h=e.n(a),s=e(399752),t=e(967720),n=e(644200),E=e(459324),i=e(281034);const R=["apps","devices","namedTagScopes","policies","profiles","scheduleEntries","scheduleTags","schedules","tags","geofences","geofenceTags","geofenceRegions"],r=(0,_.L)().withStoreName("PccTagsPageStore").withModels(R).withCustomKeyedModel("pccUsers",T=>T.email).withContextOptions([n.RJ]).withChanges().withModal().withForm().withMaps().create(),A=r.actions,S={};S.fetchTags=()=>T=>(T(A.requestTags()),(0,i._Y)().then(O=>{T(A.addTags(O))})),S.fetchProfiles=()=>{let T;l().isEmpty(Mkiconf.locale_id)?T=`N_${Mkiconf.systems_manager.id}`:T=`L_${Mkiconf.locale_id}`;const O=new URLSearchParams([...[T].map(L=>["networkIds[]",L])]),v=`/api/v1/organizations/${Mkiconf.org_id}/sm/tags/profiles?${O}`;return L=>(L(A.requestProfiles()),(0,t.A)(v).then(B=>B.json()).then(B=>L(A.addProfiles(B))))},S.fetchApps=()=>{const T=d()({controller:"configure",action:"pcc_managed_apps_json"});return O=>(O(A.requestApps()),(0,t.A)(T).then(v=>v.json()).then(v=>O(A.addApps(v))))},S.fetchDevices=()=>T=>(T(A.requestDevices()),(0,i.uw)().then(i.Ud).then(i.UD).then(O=>{T(A.addDevices(O))})),S.fetchPolicies=()=>T=>(T(A.requestPolicies()),(0,t.A)(d()({controller:"configure",action:"pcc_security_policies_json"}),{credentials:"same-origin"}).then(O=>O.json()).then(O=>{l().each(O,v=>{if(v.device_type==="ios"||v.device_type==="android"){let L=[];L=L.concat(v.app_blacklist||[]),L=L.concat(v.app_whitelist||[]),L=L.concat(v.mandatory_app_list||[]),s.A.actions.pccApps.setAppsInUse(v.device_type,`policy.${v.id}`,l().uniq(L))}}),s.A.actions.pccApps.fetchInitialAppMetadata(),T(A.addPolicies(O))})),S.fetchSchedules=()=>T=>(T(A.requestSchedules()),(0,t.A)(d()({controller:"schedules",action:"pcc_schedules_json"}),{credentials:"same-origin"}).then(O=>O.json()).then(O=>{T(A.addScheduleEntries(O.schedule_entries)),T(A.addScheduleTags(O.schedule_tags)),T(A.addSchedules(O.schedules))})),S.fetchNamedTagScopes=()=>T=>(T(A.requestNamedTagScopes()),(0,i.bQ)().then(i.QW).then(O=>{T(A.addNamedTagScopes(O))})),S.fetchNamedTagScopeTargetCounts=()=>T=>(0,i.ZV)().then(O=>{T(A.updateNamedTagScopesWithMerge(O))}),S.fetchPccUsers=()=>T=>(T(A.requestPccUsers()),(0,t.A)(d()({controller:"configure",action:"pcc_targetable_users_json"}),{credentials:"same-origin"}).then(O=>O.json()).then(O=>T(A.addPccUsers(O)))),S.fetchGeofenceTags=()=>T=>(T(A.requestGeofences()),(0,i.dm)().then(O=>{O.forEach(v=>{v.scope=E.dsj[v.scope]}),T(A.addGeofenceTags(O))})),S.fetchGeofences=()=>T=>(T(A.requestGeofenceTags()),(0,i.FP)().then(O=>{T(A.addGeofences(O))})),S.fetchGeofenceRegionsForGeofence=T=>O=>(O(A.requestGeofenceRegions()),(0,i.Yz)(T).then(v=>{O(A.updateGeofenceRegionsWithMerge(v))})),S.fetchTagsDashboardMessages=()=>T=>(0,i.P)("tags").then(O=>{T(A.updateLocals({dashMsgs:O}))});const p=(T,O,v,L,B)=>{const F={};O.type===E.k4v?F.devices_in_scope=B.length:O.type===E.R$s&&(F.users_in_scope=B.length),T(v||L?A.changeNamedTagScopes(O.id,{...F,scopedEntities:B}):A.updateNamedTagScopesWithMerge([{...F,id:O.id,scopedEntities:B}])),T(A.updateLocals({isFetchingNtsScopedEntities:!1}))},I=(T,O,v,L,B,F)=>{if(O.scopedEntities&&!v&&!L&&!B)return T(A.resetNamedTagScopesByIdAndField(O.id,"scopedEntities")),T(A.updateLocals({isFetchingNtsScopedEntities:!1})),!0;if(v&&v===E.K5Q||O.scope===E.K5Q)return p(T,O,v,L,[]),!0;if(v&&v===E.ZtW||O.scope===E.ZtW&&F)return p(T,O,v,L,F),!0},U=(T,O,v,L,B)=>{const F={id:O.id,created:O.created,scope:O.scopedEntities?v:O.scope,tags:O.scopedEntities?L:O.tags,type:B};return(0,i.SM)({params:F}).success(K=>{p(T,O,v,L,K)}).error(K=>{h()(JSON.parse(K.responseText)),p(T,O,v,L,[])})},D=(T,O,v,L,B)=>F=>{F(A.updateLocals({isFetchingNtsScopedEntities:!0})),I(F,T,O,v,L,B)||U(F,T,O,v,L)},u=T=>O=>(0,i.F9)(T).then(v=>{O(A.changeGeofenceTags(T.id,{scopedDevices:v}))}),o=T=>O=>{const v={};T.forEach(L=>{v[L]={deleted:!0,id:L}}),O(A.changeManyGeofenceTags(v))},M=l().extend({},A,S,{getNamedTagScopeScopedEntities:D,markGeofenceTagsForDeletion:o,getGeofenceTagScopedEntities:u}),m=r.actionTypes,P=()=>r.createStore()},243869:(ae,x,e)=>{e.d(x,{U1:()=>D,o1:()=>I});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(775113),_=e(38123),a=e.n(_),h=e(796273),s=e(50811),t=e.n(s);const n=["apiRequests"],E=(0,W.L)().withStoreName("DashboardApiStore").withModal().withModels(n).create(),i=E.actions,R=()=>o=>{const M={errors:[],isSaving:!1,saveSuccess:null,showModal:!1};o(i.updateModal(M))},r=o=>M=>{M(i.updateModal({isSaving:!0})),y().post(f()({controller:"organization",action:"update_api_access"}),{api_enabled:o}).done(m=>{M(i.updateModalWithErrors({isSaving:!1,saveSuccess:!0,showModal:!1},[])),M(i.updateLocals({apiAccessEnabled:m.api_enabled}))}).fail(m=>{M(i.updateModalWithErrors({isSaving:!1,saveSuccess:!1},JSON.parse(m.responseText).errors))})},A=(o,M)=>{o(i.updateLocals({newerReqUrl:M.nextPageUrl,olderReqUrl:M.prevPageUrl}))},S=o=>M=>(M(i.requestApiRequests()),(0,s.apiRequest)("GET",o).then(m=>{const P=m.data.map(T=>({...T,id:g().uniqueId()}));M(i.addApiRequests(P)),A(M,m),M(i.updateLocals({apiRequestsFetchErrors:[]}))}).catch(()=>{const m="An error has occurred. Please try again.";M(i.updateLocals({apiRequestsFetchErrors:[m]}))}).finally(()=>{M(i.doneRequestingApiRequests())})),p=(o={})=>{const M=a()().format("x"),m={...o,perPage:30,endingBefore:M};return(P,T)=>{const O=l.A.urlForApi({path:"organizations/:orgId/apiRequests",orgId:(0,h.Dg)(T()),...m});P(S(O))}},I=g().extend({},i,{resetModal:R,updateApiAccess:r,fetchInitialApiRequests:p,fetchApiRequests:S}),U=E.actionTypes,D=()=>E.createStore();var u=null},247742:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("NEW_STACK_MEMBERS_STORE"),f={fetch(_){return C().get(c()({controller:"configure",action:"new_stack_members_json"}),_).done(a=>{const h={id:_.id,newMembers:a};this.dispatch(d.constants.UPDATE,h)})}};function l(_){_.store("NewStackMembersStore")||(_.addStore("NewStackMembersStore",d),_.addActions({newStackMembers:f}))}},249891:(ae,x,e)=>{e.d(x,{U1:()=>m,o1:()=>o});var W=e(953746),C=e.n(W),g=e(14602),c=e.n(g),y=e(758928),d=e.n(y),f=e(967720),l=e(275735),_=e.n(l),a=e(869592),h=e.n(a),s=e(184988),t=e.n(s),n=e(652129),E=e(770680);const i=["uploadedAsset","missingAsset"],R=(0,n.L)().withStoreName("NassStore").withModels(i).withChanges().create(),r=({fileData:P,type:T})=>{const O=new Uint8Array(P),v=new FormData;return v.append("image",new Blob([O],{type:T})),(0,f.A)(h()({controller:"organization",action:"get_resized_image_md5"}),{method:"POST",body:v,credentials:"same-origin",headers:new Headers({"X-CSRF-Token":d().authenticity_token})}).then(L=>{if(L.ok)return L.json().then(B=>{if(B.errors){const F=Array.isArray(B.errors)?B.errors.join(", "):B.errors;return Promise.reject(`Error ${F}`)}else return B.md5});{const B=`Server error: ${L.status} ${L.statusText}`;return Promise.reject(B)}})},A=()=>(0,f.A)(h()({controller:"organization",action:"get_s3_asset_md5_hash_for_organization"}),{method:"GET",credentials:"same-origin",headers:new Headers({"X-CSRF-Token":d().authenticity_token})}).then(P=>P.json()).then(P=>P.s3_md5_hash),S=({fileData:P,type:T})=>{const O=new Uint8Array(P),v=new FormData;return v.append("u",new Blob([O],{type:T})),(0,f.A)(h()({controller:"organization",action:"custom_maps_image_upload"}),{method:"POST",body:v,credentials:"same-origin",headers:new Headers({"X-CSRF-Token":d().authenticity_token})}).then(L=>L.ok?L.text().then(B=>JSON.parse(B)).then(B=>B.error?Promise.reject(B.error):B):L.text().then(B=>Promise.reject(B)))},p=({fileData:P,type:T,md5:O})=>{const v=new Uint8Array(P),L=new FormData;return L.append("image_data",new Blob([v],{type:T})),L.append("image_md5",O),(0,f.A)(h()({controller:"organization",action:"resize_node_images_and_post_to_s3"}),{method:"POST",body:L,credentials:"same-origin",headers:new Headers({"X-CSRF-Token":d().authenticity_token})}).then(B=>B.ok?B.json().then(F=>F.errors?Promise.reject(F.errors):F):B.text().then(F=>Promise.reject(F)))},I=(P,T,O)=>{const v=new Uint8Array(T),L=new FormData;return L.append("file",new Blob([v],{type:O})),(0,f.A)(P,{method:"PUT",body:L,mode:"cors"}).then(B=>{B.text().then(F=>t()("S3 success",F))})},U=({path:P,fileData:T,type:O})=>{const v=new FormData;return v.append("s3_path",P),(0,f.A)(h()({controller:"organization",action:"get_s3_presigned_url_for_nass_bulk_upload"}),{method:"POST",body:v,credentials:"same-origin",headers:new Headers({"X-CSRF-Token":d().authenticity_token})}).then(L=>L.ok?L.json().then(B=>B.errors?Promise.reject(B.errors):B.presigned_s3_url).then(B=>I(B,T,O)):L.text().then(B=>Promise.reject(B)))},D=P=>_().ArrayBuffer.hash(P),u=/^(image\/jpeg|image\/pjpeg|image\/png|image\/x-png|image\/gif|application\/pdf)$/,o={...R.actions,addMd5ToObject(P,T,O){return(v,L)=>{const F={...L().models.uploadedAsset.byId[P].md5s||{},[O]:T};return v(o.updateUploadedAssetWithMerge([{id:P,md5s:F}])),Promise.resolve(F)}},setMd5s(P){return T=>u.test(P.type)?Promise.all([r(P).then(O=>T(o.addMd5ToObject(P.name,"resizedFloorplan",O))),T(o.addMd5ToObject(P.name,"original",D(P.fileData)))]):T(o.addMd5ToObject(P.name,"original",D(P.fileData)))},setDoneFetching(P){return o.updateUploadedAssetWithMerge([{id:P,fetched:!0,fetchError:null}])},setErrorFetching(P,T){return o.updateUploadedAssetWithMerge([{id:P,fetched:!0,fetchError:T}])},getMissingAssets(){return P=>{P(o.requestMissingAsset()),A().then(T=>{const O=Object.entries(T).map(([v,L])=>({id:v,pathsWithType:L}));P(o.addMissingAsset(O))})}},setUploaded(P){return o.updateUploadedAssetWithMerge([{id:P,uploaded:!0}])},setUploadError(P,T){const O=T.message?`${T.message}`:T;return o.updateUploadedAssetWithMerge([{id:P,uploaded:!1,uploadError:O}])},doBasicUpload(P){return T=>U(P).then(()=>(t()("Uploaded basic asset",P.id),T(o.setUploaded(P.id)))).catch(O=>T(o.setUploadError(P.id,O)))},doFloorplanUpload(P){return T=>S(P).then(()=>(t()("Uploaded floorplan image",P.id),T(o.setUploaded(P.id)))).catch(O=>T(o.setUploadError(P.id,O)))},doNodeImageUpload(P){return T=>p(P).then(()=>(t()("Uploaded node image",P.id),T(o.setUploaded(P.id)))).catch(O=>T(o.setUploadError(P.id,O)))},startUpload(){return(P,T)=>{const O=T().locals,v=(0,E.YR)(T()),L=(0,E.pI)(T()),B=(0,E.j$)(T());P(o.updateLocals({nass:{...O.nass,uploadStarted:!0,uploadCompleted:!1}})),t()("Uploading assets",v,L,B);const F=v.map(j=>P(o.doBasicUpload(j))),K=L.map(j=>P(o.doFloorplanUpload(j))),b=B.map(j=>P(o.doNodeImageUpload(j))),q=[...F,...K,...b];Promise.all(q).catch(j=>{t()("Upload error",j)}).then(()=>{t()("Upload complete"),P(o.finishUpload())})}},finishUpload(){return(P,T)=>{const O=T().locals;return P(o.updateLocals({nass:{...O.nass,uploadStarted:!1,uploadCompleted:!0}}))}},resetUploader(){return(P,T)=>{const O=T().locals;return P(o.clearUploadedAsset()),P(o.updateLocals({nass:{...O.nass,uploadStarted:!1,uploadCompleted:!1}}))}}},M=R.actionTypes,m=()=>R.createStore()},255217:(ae,x,e)=>{e.d(x,{Kf:()=>C,_B:()=>c,ks:()=>y});const W=null,C=["trunk","access"],g=null,c=["Alert only","Enforce"],y=["Open","Custom access policy"]},258037:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("PCC_ASM_GROUP_STORE",{idKey:"Identifier"}),f={fetch(){this.dispatch(d.constants.LOADING,!0);const _=c()({controller:"configure",action:"pcc_asm_groups"});return C().get(_).done(a=>{this.dispatch(d.constants.RESET,a.groups),this.dispatch(d.constants.LOADING,!1)})},reset(_){this.dispatch(d.constants.RESET,_)},deleteById(_){this.dispatch(d.constants.REMOVE,{id:_})},deleteAll(_){this.dispatch(d.constants.REMOVE,_)},update(_){this.dispatch(d.constants.UPDATE,_)}},l=_=>{_.store("PccAsmGroupStore")||(_.addStore("PccAsmGroupStore",d),_.addActions({pccAsmGroups:f}))}},262801:(ae,x,e)=>{e.d(x,{J_:()=>f,Wx:()=>a,_E:()=>_,n6:()=>d,qW:()=>l});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.kC.enhanceEndpoints({addTagTypes:["opportunisticPcap","opportunisticPcapLicense","opportunisticPcapFilters"]}).injectEndpoints({endpoints:h=>({fetchOpportunisticPcap:h.query({query:({orgId:s,networkIds:t})=>({url:`organizations/${s}/wireless/opportunisticPcap/byNetwork${(0,g.DK)({networkIds:t})}`}),providesTags:(s,t)=>[{type:"opportunisticPcap",id:"ALL"}]}),updateOpportunisticPcap:h.mutation({query:({networkId:s,body:t})=>({url:`networks/${s}/wireless/opportunisticPcap`,method:"PUT",body:t}),invalidatesTags:(s,t)=>[{type:"opportunisticPcap",id:"ALL"}]}),fetchOpportunisticPcapLicense:h.query({query:({orgId:s,networkIds:t})=>({url:`organizations/${s}/wireless/opportunisticPcap/license/byNetwork${(0,g.DK)({networkIds:t})}`}),providesTags:(s,t)=>[{type:"opportunisticPcapLicense",id:"ALL"}]}),fetchOpportunisticPcapFilters:h.query({query:({orgId:s,networkIds:t})=>({url:`organizations/${s}/wireless/opportunisticPcap/filters/byNetwork${(0,g.DK)({networkIds:t})}`}),providesTags:(s,t)=>[{type:"opportunisticPcapFilters",id:"ALL"}]}),updateOpportunisticPcapFilters:h.mutation({query:({networkId:s,body:t})=>({url:`networks/${s}/wireless/opportunisticPcap/filters`,method:"PUT",body:t}),invalidatesTags:(s,t)=>[{type:"opportunisticPcapFilters",id:"ALL"}]})}),overrideExisting:!1}),{useFetchOpportunisticPcapQuery:d,useUpdateOpportunisticPcapMutation:f,useFetchOpportunisticPcapLicenseQuery:l,useFetchOpportunisticPcapFiltersQuery:_,useUpdateOpportunisticPcapFiltersMutation:a}=y},263457:(ae,x,e)=>{e.d(x,{$:()=>W});const W=C=>{const g=C;return typeof g?.name=="string"&&typeof g?.vlanId=="string"}},264549:(ae,x,e)=>{e.d(x,{s:()=>h,z:()=>a});var W=e(995843),C=e.n(W),g=e(14602),c=e.n(g),y=e(310466),d=e(917157),f=e(50811),l=e.n(f);const _=y.kC.enhanceEndpoints({addTagTypes:["switchNetworks"]}).injectEndpoints({endpoints:s=>({fetchNetworks:s.query({query:({organizationId:t,perPage:n})=>({url:`organizations/${t}/networks${(0,d.DK)({productTypes:["switch"],perPage:n})}`}),providesTags:t=>[...(t??[]).map(({name:n})=>({type:"switchNetworks",id:n})),{type:"switchNetworks",name:"ALL"}]}),fetchNetworksPaginated:s.query({queryFn:async({organizationId:t,perPage:n=1e3,maxRequests:E=9999})=>{const i=[],R=[];return await(0,f.paginatedApiRequest)(i.push.bind(i),R.push.bind(R),{method:"GET",url:`/api/v1/organizations/${t}/networks${(0,d.DK)({productTypes:["switch"],perPage:n})}`},E),R.length>0?{error:{errors:R.flat()}}:{data:i.flat()}},providesTags:t=>[...(t??[]).map(({id:n})=>({type:"switchNetworks",id:n})),{type:"switchNetworks",id:"LIST"}]})}),overrideExisting:!1}),{useFetchNetworksQuery:a,useFetchNetworksPaginatedQuery:h}=_},279962:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("PCC_USER_STORE",{idKey:"email",indices:["id"]}),f={initialize(_){this.dispatch(d.constants.RESET,_)},deleteById(_){this.dispatch(d.constants.REMOVE,{id:_})},deleteByEmail(_){this.dispatch(d.constants.REMOVE,{email:_})},deleteAll(_){this.dispatch(d.constants.REMOVE,_)},update(_){this.dispatch(d.constants.UPDATE,_)},fetchTargetableUsers(){this.dispatch(d.constants.LOADING,!0),C().ajax({url:c()({controller:"configure",action:"pcc_targetable_users_json"}),context:this}).success(_=>{this.dispatch(d.constants.RESET,_)})}},l=_=>{_.store("PccUserStore")||(_.addStore("PccUserStore",d),_.addActions({pccUsers:f}))}},285231:(ae,x,e)=>{e.d(x,{o1:()=>l});var W=e(775113),C=e(50811),g=e.n(C),c=e(652129);const y=(0,c.L)().withStoreName("NodeClientsStore").withModels(["clientsOfNode"]).create(),d=y.actions,l={...d,fetchClientsOfNode:(s,t)=>{const n=W.A.urlForApi({path:"devices/:nodeSerial/clients",nodeSerial:s,t0:t});return E=>(E(d.requestClientsOfNode()),(0,C.apiRequest)("GET",n).then(i=>{E(d.addClientsOfNode(i.data))}).catch(()=>{E(d.failedRequestingClientsOfNode())}).finally(()=>{E(d.doneRequestingClientsOfNode())}))}},_=y.actionTypes,a=()=>y.createStore();var h=null},291956:(ae,x,e)=>{e.d(x,{OU:()=>d,Q7:()=>f,Yb:()=>l,if:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["poeBudget","poeOverride"]}).injectEndpoints({endpoints:_=>({fetchDefaultPoeBudget:_.query({query:({orgId:a,localeId:h})=>({url:`organizations/${a}/switch/industrial/power/byNetwork`,params:{networkIds:[h]}}),providesTags:["poeBudget"]}),fetchSwitchPoeOverride:_.query({query:({orgId:a,localeId:h})=>({url:`organizations/${a}/switch/industrial/power/overrides/byDevice`,params:{networkIds:[h]}}),providesTags:["poeOverride"]}),updateDefaultPoeBudget:_.mutation({query:({networkId:a,poeBudgetConfiguration:h})=>({url:`networks/${a}/switch/industrial/power`,method:"PUT",body:h}),invalidatesTags:["poeBudget"]}),updateSwitchPoeOverride:_.mutation({query:({orgId:a,items:h})=>({url:`organizations/${a}/switch/industrial/power/overrides/bulkUpdate`,method:"POST",body:{items:h}}),invalidatesTags:["poeOverride"]})})}),{useFetchDefaultPoeBudgetQuery:y,useUpdateDefaultPoeBudgetMutation:d,useFetchSwitchPoeOverrideQuery:f,useUpdateSwitchPoeOverrideMutation:l}=c},292310:(ae,x,e)=>{e.d(x,{Mk:()=>_,PD:()=>y,PV:()=>l,X1:()=>a,gP:()=>d,ht:()=>h,pt:()=>f});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466);const y=(0,g.L)().create().createStore(),d=c.kC.enhanceEndpoints({addTagTypes:["SUG","SUS"]}).injectEndpoints({endpoints:s=>({fetchSUG:s.query({query:({networkId:t,groupId:n})=>({url:`networks/${t}/firmwareUpgrades/staged/groups/${n}`}),providesTags:(t,n,E)=>[{type:"SUG",id:E.groupId}]}),fetchSUGIndex:s.query({query:({networkId:t})=>({url:`networks/${t}/firmwareUpgrades/staged/groups`}),providesTags:t=>t?[...t.map(({groupId:n})=>({type:"SUG",id:n})),{type:"SUG",id:"ALL"}]:[{type:"SUG",id:"ALL"}]}),createSUG:s.mutation({query:({networkId:t,sug:n})=>({url:`networks/${t}/firmwareUpgrades/staged/groups`,method:"POST",body:n}),invalidatesTags:(t,n,E)=>[{type:"SUG",id:"ALL"},{type:"SUS",id:E.networkId}]}),updateSUG:s.mutation({query:({networkId:t,sug:{groupId:n,...E}})=>({url:`networks/${t}/firmwareUpgrades/staged/groups/${n}`,method:"PUT",body:E}),invalidatesTags:(t,n,E)=>[{type:"SUG",id:E.sug.groupId},{type:"SUS",id:E.networkId}]}),deleteSUG:s.mutation({query:({networkId:t,groupId:n})=>({url:`networks/${t}/firmwareUpgrades/staged/groups/${n}`,method:"DELETE"}),invalidatesTags:(t,n,E)=>[{type:"SUG",id:E.groupId},{type:"SUS",id:E.networkId}]})}),overrideExisting:!1}),{useFetchSUGQuery:f,useFetchSUGIndexQuery:l,useCreateSUGMutation:_,useUpdateSUGMutation:a,useDeleteSUGMutation:h}=d},293732:(ae,x,e)=>{e.d(x,{U1:()=>Me,o1:()=>Te});var W=e(640173),C=e.n(W),g=e(14602),c=e.n(g),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(775113),s=e(652129),t=e(653806),n=e(603567),E=e(746725),i=e(758928),R=e.n(i),r=e(98442);const A=["policyObjectGroups","policyObjects"],S=(0,s.L)().withStoreName("NetworkObjectsStore").withModels(A).withPrefs().withFlexTables().withChanges().create(),p=S.actions,I=ge=>p.updateLocals({savedPolicyObjectId:ge?.id,savePolicyObjectSuccess:!0,savePolicyObjectErrors:[]}),U=ge=>p.updateLocals({savedPolicyObjectId:null,savePolicyObjectSuccess:!1,savePolicyObjectErrors:ge}),D=()=>p.updateLocals({savedPolicyObjectId:null,savePolicyObjectSuccess:!1,savePolicyObjectErrors:[]}),u=ge=>p.updateLocals({savedPolicyObjectGroupId:ge?.id,savePolicyObjectGroupSuccess:!0,savePolicyObjectGroupErrors:[]}),o=ge=>p.updateLocals({savePolicyObjectGroupSuccess:!1,savePolicyObjectGroupErrors:ge}),M=ge=>typeof ge.id!="string"?ge.id:ge.id.replace(/\D+/g,""),m=(ge,de=null)=>{const se={path:"organizations/:orgId/policyObjects/:policyObjId",orgId:R().org_id,policyObjId:null,version:"v1"};return de&&(se.startingAfter=de),ge&&(se.policyObjId=M(ge)),h.A.urlForApi(se)},P=(ge,de=null)=>{const se={path:"organizations/:orgId/policyObjects/groups/:policyObjGroupId",orgId:R().org_id,policyObjGroupId:null,version:"v1"};return ge&&(se.policyObjGroupId=ge.id),de&&(se.startingAfter=de),h.A.urlForApi(se)},T=(ge,de)=>de?ge.filter(se=>se.category!==de.filterCategory):ge,O=ge=>de=>{let se=0;const X=5;let Oe=[];function H($=0){const le=m(null,$);return(0,t.AT)("GET",le).then(({data:ce})=>{if(Oe=[...Oe,...ce],ce.length>0&&se<X)return se++,H(ce[ce.length-1].id)})}return de(p.requestPolicyObjects()),H().then(()=>{const $=T(Oe,ge);de(p.addPolicyObjects($))}).catch(()=>{de(p.failedRequestingPolicyObjects())}).finally(()=>{de(p.doneRequestingPolicyObjects())})},v=()=>ge=>{let de=0;const se=5;let X=[];function Oe(H=0){const $=P(null,H);return(0,t.AT)("GET",$).then(({data:le})=>{if(X=[...X,...le],le.length>0&&de<se)return de++,Oe(le[le.length-1].id)})}return ge(p.requestPolicyObjectGroups()),Oe().then(()=>{ge(p.addPolicyObjectGroups(X))}).catch(()=>{ge(p.failedRequestingPolicyObjectGroups())}).finally(()=>{ge(p.doneRequestingPolicyObjectGroups())})},L=()=>ge=>(ge(p.updateContext({isFetchingNetworkObjectContext:!0})),l().getJSON(a()({controller:"network_objects",action:"network_object_context_json"})).done(de=>{ge(p.updateContext({networkObjectContext:{...de},isFetchingNetworkObjectContext:!1}))})),B=()=>async ge=>{const{enabledNetworks:de}=await(0,r.px)({resource:`/organizations/${R().org_id}/adaptivePolicy/settings`,operation:"read"});return ge(p.updateLocals({adaptivePolicyEnabled:de.length>0}))},F=(ge,de)=>{if(ge<200||ge>=300){if(de)return de;const se=[];switch(ge){case 404:se.push("We can't find the page you are looking for.");break;case 500:se.push("Something went wrong. Please try again.");break;default:se.push("An error has occurred. Please try again.")}return se}return[]},K=ge=>{let de=[];try{const se=JSON.parse(ge.responseText);de=se.errors||[se.error]}catch{de.push("An error has occurred. Please try again.")}return{statusCode:ge.status,errors:de}},b=ge=>(de,se)=>{const{name:X,type:Oe,category:H}=ge,$=se(),le=(0,n.O1)($),ce=m(),ve=(0,E.$q)(ge),_e=(0,E.G$)(ge);return de(D()),(0,t.AT)("POST",ce,JSON.stringify({name:X,category:H,type:Oe,[_e]:ve})).then(({data:Ee})=>{le.push(Ee),de(p.replacePolicyObjects(le)),de(I(Ee))}).catch(({statusCode:Ee,errors:Se})=>{const k=F(Ee,Se);de(U(k))})},q=ge=>de=>{const se=m(ge),X=d().omit(ge,"category");return de(D()),(0,t.AT)("PUT",se,JSON.stringify({...X})).then(({data:Oe})=>{de(p.updatePolicyObjects([Oe])),de(I(Oe))}).catch(({statusCode:Oe,errors:H})=>{const $=F(Oe,H);de(U($))})},j=ge=>de=>{const se=m(ge);return de(D()),(0,t.AT)("DELETE",se).then(()=>{de(p.deletePolicyObjectsById([ge.id])),de(I()),ge.groupIds.length>0&&de(v())}).catch(({statusCode:X,errors:Oe})=>{const H=F(X,Oe);de(U(H))})},J=ge=>(de,se)=>{const X=se(),Oe=ge.netObjects.filter($=>!$.objectId),H=ge.netObjects.filter($=>$.objectId).map($=>$.objectId);de(p.updateLocals({savePolicyObjectGroupSuccess:!1,savePolicyObjectGroupErrors:[]})),l().ajax({url:a()({controller:"network_objects",action:"bulk_action"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({policyObjectGroup:{name:ge.name.trim(),objectIds:H,category:"NetworkObjectGroup"},newPolicyObjects:Oe})}).done($=>{const le=(0,n.O1)(X),ce=(0,n.tC)(X),ve=$.policyObjectGroup;de(p.addPolicyObjects([...le,...$.policyObjects])),de(p.addPolicyObjectGroups([...ce,ve])),de(u(ve))}).fail($=>{const{statusCode:le,errors:ce}=K($),ve=F(le,ce);de(o(ve))})},ee=ge=>{if(typeof ge!="string")return ge;const de=ge.match(/GRP\((\d+)\)/);return de.length>=2?de[1]:ge},V=ge=>(de,se)=>{const X=ge.netObjects.filter(H=>!H.objectId),Oe=ge.netObjects.filter(H=>H.objectId).map(H=>H.objectId);de(p.updateLocals({savePolicyObjectGroupSuccess:!1,savePolicyObjectGroupErrors:[]})),l().ajax({url:a()({controller:"network_objects",action:"bulk_action"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({policyObjectGroup:{...ge,id:ee(ge.id),name:ge.name.trim(),objectIds:Oe},newPolicyObjects:X})}).done(H=>{const $=(0,n.O1)(se()),le=H.policyObjectGroup;de(p.addPolicyObjects([...$,...H.policyObjects])),de(p.updatePolicyObjectGroups([le])),de(u(le))}).fail(H=>{const{statusCode:$,errors:le}=K(H),ce=F($,le);de(o(ce))})},N=ge=>de=>{const se=ee(ge.id),X=P({id:se});return de(p.updateLocals({savePolicyObjectGroupSuccess:!1})),(0,t.AT)("DELETE",X).then(()=>{de(p.deletePolicyObjectGroupsById([se])),de(u())}).catch(({statusCode:Oe,errors:H})=>{const $=F(Oe,H);de(o($))})},w=()=>ge=>{ge(p.updateLocals({savedPolicyObjectGroupId:null,savePolicyObjectGroupErrors:[]}))},z={groupModalShown:!1,pills:[],afterCreateCallBack:void 0},ne=(ge,de)=>(se,X)=>{const H={...X().locals.networkObjectGroupModal,pills:ge,afterCreateCallBack:de};se(p.updateLocals({networkObjectGroupModal:H}))},Y=()=>ge=>{ge(p.updateLocals({networkObjectGroupModal:z}))},te=()=>(ge,de)=>{const se=de(),X={...se.locals.networkObjectGroupModal,groupModalShown:!se.locals.networkObjectGroupModal.groupModalShown};ge(p.updateLocals({networkObjectGroupModal:X}))},Te=d().extend({},p,{addPolicyObjectGroup:J,addPolicyObject:b,deletePolicyObjectGroup:N,deletePolicyObject:j,fetchPolicyObjectGroups:v,filterPolicyObjects:T,fetchPolicyObjects:O,fetchWiredVpnContext:L,fetchAdaptivePolicyEnabled:B,initNetworkObjectGroupModal:ne,resetPolicyObjectGroupState:w,resetNetworkObjectGroupModal:Y,toggleNetworkObjectGroupModal:te,updatePolicyObjectGroup:V,updatePolicyObject:q}),me=S.actionTypes,Me=()=>S.createStore();var Ie=null},298030:(ae,x,e)=>{e.d(x,{OX:()=>r,U1:()=>z,o1:()=>V});var W=e(640173),C=e.n(W),g=e(14602),c=e.n(g),y=e(723665),d=e(652129),f=e(941669),l=e.n(f),_=e(775113),a=e(253320),h=e(758928),s=e.n(h),t=e(773697),n=e(653806),E=e(221335),i=e(136716);const R=["ssids","ssidSchedules","scheduleEntries"],r="schedule_entries_",A="organizations/:orgId/actionBatches",S="networks/:networkId/wireless/ssids",p="networks/:networkId/wireless/ssids/:number/schedules",I=a.A.buildId(s().locale_id,s().ng_id),U=s().org_id,D=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],u=60,o=3600,M=86400,m=(0,d.L)().withModels(R).withStoreName("SsidAvailabilityStore2").withChanges().withModal().withPrefs().withFlexTables().create(),P=m.actions,T=()=>_.A.urlForApi({version:"v1",path:S,networkId:I}),O=Y=>_.A.urlForApi({version:"v1",path:`${S}/${Y}`,networkId:I}),v=Y=>_.A.urlForApi({version:"v1",path:p,networkId:I,number:Y}),L=()=>_.A.urlForApi({version:"v1",path:A,orgId:U}),B=Y=>Y.replace("/api/v1",""),F=()=>Y=>{const te=T();Y(P.requestSsids()),l().ajax({url:te}).then(Te=>{Te.forEach(me=>{me.id=`${me.number}`}),Y(P.addSsids(Te)),Y(P.updateLocals({loadedSsids:!0}))})},K=Y=>{const te=parseInt(Y.split(":")[0],10)*o,Te=parseInt(Y.split(":")[1],10)*u;return te+Te},b=Y=>te=>{const Te=v(Y);te(P.requestSsidSchedules()),(0,n.AT)("GET",Te).then(({data:me})=>{te(P.addSsidSchedules([{...me,id:Y}]));const Me=[];me.ranges.forEach(Ie=>{const ge=D.indexOf(Ie.startDay),de=D.indexOf(Ie.endDay);ge===-1||de===-1||(Ie.startDay===Ie.endDay?Me.push({id:y.A.uniqueId(r),schedule_id:Y.toString(),weekday:ge,start_time:K(Ie.startTime),end_time:K(Ie.endTime)}):(Me.push({id:y.A.uniqueId(r),schedule_id:Y.toString(),weekday:ge,start_time:K(Ie.startTime),end_time:K("23:59")}),Me.push({id:y.A.uniqueId(r),schedule_id:Y.toString(),weekday:de,start_time:K("00:00"),end_time:K(Ie.endTime)})))}),te(P.addScheduleEntries(Me))}).finally(()=>{te(P.doneRequestingSsidSchedules())})},q=Y=>te=>{const Te=[],me=(0,t.zR)(te());if(!y.A.isEmpty(me)&&me[Y]){const Me={resource:B(O(Y)),operation:"update",body:me[Y]};Te.push(Me)}return Te},j=Y=>(Y+1)%7*M,J=Y=>te=>{const Te=[],me=(0,E.u3)(te()),Me=(0,i.VD)(te());if(!y.A.isEmpty(me)&&me[Y]||!y.A.isEmpty(Me)&&Me){const Ie={};me[Y]&&(Ie.enabled=me[Y].enabled),Me&&(Ie.rangesInSeconds=[],Object.values(Me).forEach(de=>{const se=j(de.weekday);se!==void 0&&de.start_time!==void 0&&de.end_time!==void 0&&!de.deleted&&Ie.rangesInSeconds.push({start:se+de.start_time,end:se+de.end_time})}));const ge={resource:B(v(Y)),operation:"update",body:Ie};Te.push(ge)}return Te},ee=Y=>async(te,Te)=>{te(P.updateLocals({isSaving:!0}));let me=!0,Me=[];const Ie=q(Y)(Te),ge=J(Y)(Te),de=[...Ie,...ge];if(!y.A.isEmpty(de))try{await l().ajax({type:"POST",url:L(),data:JSON.stringify({confirmed:!0,synchronous:!0,actions:de}),dataType:"json",contentType:"application/json"}).done(se=>{const{status:{completed:X,errors:Oe,failed:H}}=se;me=X&&!H,Me=Oe,me&&(y.A.isEmpty(Ie)||(te(P.resetSsidsChanges()),te(F())),y.A.isEmpty(ge)||(te(P.resetSsidSchedulesChanges()),te(P.resetScheduleEntriesChanges()),te(b(Y))))}),te(P.updateLocals({isSaving:!1,saveSuccess:me,errors:Me}))}catch(se){te(P.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(se.responseText).errors}))}},V=y.A.extend({},P,{fetchSsids:F,fetchSsidSchedules:b,submitChanges:ee}),N=m.actionTypes,w=m.selectors,z=()=>m.createStore();var ne=null},298723:(ae,x,e)=>{e.d(x,{U1:()=>P,o1:()=>M});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(646894),_=e.n(l),a=e(24510);const h=["nodes","deviceTypeDetails"],s=(0,W.L)().withStoreName("ClientStore").withLiveTools().withMaps().withModels(h).withModal().create(),t=s.actions,n=O=>{const v="currentClient";return(L,B)=>{const F=K=>{const b=B();if(g().any(K.data)){const q=g().isEmpty(b.liveTools.data[v])?[]:b.liveTools.data[v];L(t.updateLiveToolData(v,q.concat(K.data)))}};L(t.registerLiveToolSubscription(v,y().comet.client_subscribe2(O.edge(),O.mac,"ClientMapLocation",F)))}},E=O=>v=>{const L=B=>{B&&B.data&&B.data.clients&&v(t.updateLiveToolData(a.cB,B.data.clients))};v(t.registerLiveToolSubscription(a.cB,y().comet.node_group_subscribe("DBClients",L,{ng_type:O})))},i=({mac:O,vlan:v,node_id:L})=>B=>{const F=K=>{B(t.updateLocals({wakeOnLanInProgress:!1})),B(t.updateLiveToolData(a.yv,K.data))};B(t.updateLocals({wakeOnLanInProgress:!0})),B(t.registerLiveToolSubscription(a.yv,y().comet.command_subscribe({broker:"WakeOnLan",client:O,vlan:v},L,F)))},R=O=>v=>{const L=B=>{v(t.updateLiveToolData(a.nU,B.data))};v(t.registerLiveToolSubscription(a.nU,y().comet.client_subscribe2(O.edge(),O.mac,"Association2",L)))},r=O=>v=>(v(t.requestNodes()),y().ajax({url:`/node_groups/${O}/nodes`,type:"GET",data:{f:["id","name","mac","lat","lng","is_read_only","type","nouns"]}}).done(L=>{v(t.addNodes(L)),v(t.updateLocals({loadedNodes:!0}))})),A=O=>v=>(v(t.updateLocals({revokingClientSplash:!0,revokeSplashAuthSuccess:!1,revokeSplashAuthError:!1})),y().ajax({url:f()({controller:"usage",action:"revoke_splash_auth"}),type:"POST",data:O}).done(()=>{v(t.updateLocals({revokeSplashAuthSuccess:!0,revokeSplashAuthError:!1}))}).fail(()=>{v(t.updateLocals({revokeSplashAuthSuccess:!1,revokeSplashAuthError:!0}))}).always(()=>{v(t.updateLocals({revokingClientSplash:!1}))})),S=(O,v)=>(L,B)=>(L(t.updateLocals({isLoadingClientNotes:!0,clientNotesError:null})),y().ajax({url:f()({controller:"usage",action:"update_lcd"}),type:"POST",data:{id:O,notes:v}}).done(()=>{const F=_()(B().context.currentCli,{$merge:{notes:v}});L(t.updateContext({currentCli:F}))}).fail(F=>{L(t.updateLocals({clientNotesError:JSON.parse(F.responseText).error}))}).always(()=>{L(t.updateLocals({isLoadingClientNotes:!1}))})),p=O=>v=>(v(t.updateModal({isFlagging:!0})),y().ajax({url:f()({controller:"usage",action:"flag_device_type"}),type:"POST",data:O}).done(()=>{v(t.updateModal({isFlagging:!1}))}).fail(()=>{v(t.updateModal({flagDeviceError:"Unable to save device type"})),v(t.updateModal({isFlagging:!1}))})),I=O=>v=>(v(t.requestDeviceTypeDetails()),y().getJSON(f()({controller:"usage",action:"device_type_details"}),{key:O}).done(L=>{v(t.addDeviceTypeDetails([{...L,id:O}]))}).error(()=>{v(t.updateModal({fetchDeviceTypeDetailsError:"Error fetching device type details"})),v(t.doneRequestingDeviceTypeDetails())})),U=(O,v)=>(L,B)=>(L(t.updateModal({isUpdatingClientName:!0,clientNameError:null})),y().ajax({url:f()({controller:"usage",action:"update_lcd"}),type:"POST",data:{id:O,desc:v}}).done(()=>{const F=_()(B().context.currentCli,{$merge:{description:v}});L(t.updateContext({currentCli:F}))}).fail(F=>{L(t.updateModal({clientNameError:JSON.parse(F.responseText).error}))}).always(()=>{L(t.updateModal({isUpdatingClientName:!1}))})),D=O=>v=>(v(t.updateLocals({usageDataError:null,fetchingUsageData:!0})),y().ajax({url:f()({controller:"usage",action:"client_usage"}),data:O}).done(L=>{v(t.updateLocals({usage:L}))}).fail(()=>{v(t.updateLocals({usageDataError:"Unable to load usage data"}))}).always(()=>{v(t.updateLocals({fetchingUsageData:!1}))})),u=(O,v,L,B,F)=>!O||!v||!L||!B?()=>{}:D({id:O,ng:v,t0:L,t1:B,filter:F}),o=(O,v,L,B)=>!O||!v||!L?()=>{}:D({id:O,ng:v,timespan:L,filter:B}),M=g().extend({},t,{subscribe:n,subscribeToDBClients:E,subscribeToWakeOnLan:i,subscribeAssociation:R,fetchNodes:r,revokeSplashAuth:A,flagDevices:p,fetchDeviceTypeDetails:I,updateNotes:S,fetchUsageWithTimestamps:u,fetchUsage:o,updateClientName:U}),m=s.actionTypes,P=()=>s.createStore();var T=null},300096:(ae,x,e)=>{e.d(x,{U1:()=>n,o1:()=>h});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(652129);const d=["pskGroups","groupPolicies"],f=(0,y.L)().withStoreName("PskGroupsStore").withModels(d).withChanges().withModal().withPrefs().withFlexTables().create(),l=f.actions,h={...l,fetchPskGroups:i=>R=>(R(l.requestPskGroups()),C().get(c()({controller:"configure",action:"psk_groups_json",ssid:{number:i}})).done(r=>{R(l.addPskGroups(r))})),fetchGroupPolicies:()=>i=>(i(l.requestGroupPolicies()),C().get(c()({controller:"configure",action:"group_policies_json"})).done(R=>{R.forEach(r=>{r.group_number=r.id}),i(l.addGroupPolicies(R))}))},s=f.actionTypes,t=f.selectors,n=()=>f.createStore();var E=null},300860:(ae,x,e)=>{e.d(x,{U1:()=>O,o1:()=>T});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(417046),f=e(281034),l=e(835621);const _=["devices"],a=(0,y.L)().withStoreName("PccDevicesPageStore").withModels(_).withModal().withPrefs().create(),h=a.actions,s=a.actionTypes,t=B=>async(F,K)=>{F(h.requestDevices());try{const b=await(0,f.xL)(B);b.key=b.id,b.is_complete_record=!0,window.Mkijson.pccm.hash[b.id]=c().extend(Mkijson.pccm.hash[b.id]||{},b),window.node=b,b.best_lat&&b.best_lon&&(b.lat=parseFloat(b.best_lat),b.lng=parseFloat(b.best_lon));const q=await(0,f.Ie)(b.id),j=Object.values(q.data)[0];b.data_usage=j;const J=(0,d.$n)(K(),{id:[b.id]});return J&&c().extend(b,J),F(h.updateDevicesWithMerge([b])),F(h.doneRequestingDevices()),b}catch{F(h.failedRequestingDevices()),F(h.doneRequestingDevices())}},n=()=>B=>(B(h.requestDevices()),(0,f.uw)(["is_supervised"]).then(f.Ud).then(F=>{B(h.addDevices(F))})),E=()=>B=>{(0,f.KR)().then(F=>{B(h.updateLocals({totalDeviceCount:F.count}))})},i=B=>()=>{(0,f.Yi)().then(F=>{B(F)})},R=(B,F=!1)=>(K,b)=>(K(h.requestDevices()),(0,f.rS)(B).then(q=>{const j=b(),J={pagination:B?.pagination,fetchedAll:F};(q.count||q.count===0)&&(J.currentDeviceCount=q.count),K(h.updateLocals(J)),q.devices.forEach(ee=>{const V=(0,d.$n)(j,{id:[ee.pcc_machine_id]});V&&c().extend(ee,V),ee.pcc_viewable_machine_id=ee.id,ee.id=ee.pcc_machine_id,ee.key=ee.id}),B.updateWithMerge?K(h.updateDevicesWithMerge(q.devices)):K(h.addDevices(q.devices)),K(h.doneRequestingDevices())})),r=B=>F=>{F(h.updateLocals({fetchingEligibleDeviceIds:!0})),(0,f.rp)(B).then(K=>{F(h.updateLocals({eligibleDeviceIds:K.eligible_device_ids})),F(h.updateLocals({fetchingEligibleDeviceIds:!1}))})},A=(B,F)=>K=>{K(h.updateLocals({fetchingEligibleDeviceIds:!0})),(0,f.Jg)(B,F).then(b=>{K(h.updateLocals({eligibleDeviceIds:b.json.deviceIds})),K(h.updateLocals({eligibleDeviceTypesCount:b.json.deviceTypesCount})),K(h.updateLocals({eligibleAvailableUpdates:JSON.parse(b.json.availableUpdates)})),K(h.updateLocals({fetchingEligibleDeviceIds:!1}))})},S=B=>F=>{F(h.updateLocals({fetchingEligibleDeviceIds:!0})),(0,f.U9)(B).then(K=>{F(h.updateLocals({eligibleDeviceIds:K.eligible_device_ids})),F(h.updateLocals({fetchingEligibleDeviceIds:!1}))})},p=B=>F=>{F(h.updateLocals({fetchingEligibleDeviceIds:!0})),(0,f.vz)(B).then(K=>{F(h.updateLocals({eligibleDeviceIds:K.eligible_device_ids})),F(h.updateLocals({fetchingEligibleDeviceIds:!1}))})},I=B=>F=>{F(h.updateLocals({fetchingEligibleDeviceIds:!0})),(0,f.Q3)(B).then(K=>{F(h.updateLocals({eligibleDeviceIds:K.eligible_device_ids})),F(h.updateLocals({fetchingEligibleDeviceIds:!1}))})},U=(B,F,K)=>(b,q)=>{b(h.updateLocals({devices:{success:!1,saving:!0}}));const j={add_tags:F.addTags.join(" "),remove_tags:F.removeTags.join(" ")};(0,f.Kq)(B,j).done(J=>{if(J.error&&J.error.length>0)b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",J.error);else{const ee=[];B.forEach(V=>{const N=(0,d.$n)(q(),{id:V}),w=[...N.tags||[],...F.addTags].filter(ne=>!F.removeTags.includes(ne)),z=[...new Set(w)].sort();ee.push({...N,tags:z})}),b(h.updateDevicesWithMerge(ee)),b(h.updateLocals({devices:{success:!0,saving:!1}})),K("success",[])}}).fail(()=>{b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",["Unknown error."])})},D=(B,F,K,b,q)=>{const j=F.locals.fetchedAll,J=F.locals.totalDeviceCount-K.length;B(h.updateLocals({totalDeviceCount:J,currentDeviceCount:F.locals.currentDeviceCount-K.length,devices:{success:!0,saving:!1}})),j?(B(h.deleteDevicesById(K)),b(!1)):J<=l.Bw?b(!1):b(!0),q("success",[])},T={...h,fetchDevice:t,fetchDevices:n,fetchDeviceCount:E,fetchNetworkAlerts:i,fetchDevicesPage:R,addTagsToDevices:U,moveDevices:(B,F,K,b)=>(q,j)=>{q(h.updateLocals({devices:{success:!1,saving:!0}}));const J=j();(0,f.fu)(B,F).done(()=>{D(q,J,B,K,b)}).fail(ee=>{q(h.updateLocals({devices:{success:!1,saving:!1}})),ee.responseJSON&&ee.responseJSON.error?b("failure",[ee.responseJSON.error]):b("failure",["Unknown error."])})},deleteDevices:(B,F,K)=>(b,q)=>{b(h.updateLocals({devices:{success:!1,saving:!0}}));const j=q();(0,f.Kq)(B,{destroy:1}).done(J=>{if(J.nodes_networks){const ee=Object.values(J.nodes_networks).filter(V=>!V.removed);if(ee.length>0){const V=ee.map(N=>`${N.name}: ${N.reason}`)||J.error;K("failure",V)}else D(b,j,B,F,K)}else b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",["Unknown error."])}).fail(()=>{b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",["Unknown error."])})},sendDeviceCommand:(B,F,K)=>b=>{b(h.updateLocals({devices:{success:!1,saving:!0}})),(0,f.Kq)(B,F).done(q=>{q.error&&q.error.length>0?(b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",q.error)):(b(h.updateLocals({devices:{success:!0,saving:!1}})),K("success",[]))}).fail(()=>{b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",["Unknown error."])})},installOSUpdates:(B,F,K)=>b=>{b(h.updateLocals({devices:{success:!1,saving:!0}})),(0,f.LN)(B,F).done(q=>{q.error?(b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",[q.error])):(b(h.updateLocals({devices:{success:!0,saving:!1}})),K("success",[]))}).fail(q=>{const j=JSON.parse(q.responseText);b(h.updateLocals({devices:{success:!1,saving:!1}})),K("failure",[j.error])})},fetchUnenrollEligibleDeviceIds:r,fetchInstallOsUpdateEligibleDeviceIds:A,fetchClearActivationLockEligibleDeviceIds:S,fetchClearPasscodeEligibleDeviceIds:p,fetchEraseEligibleDeviceIds:I,resetAfwAccounts:(B,F)=>K=>{K(h.updateLocals({devices:{success:!1,saving:!0}})),(0,f.Y1)(B).done(b=>{b.error&&b.error.length>0?(K(h.updateLocals({devices:{success:!1,saving:!1}})),F("failure",b.errors)):(K(h.updateLocals({devices:{success:!0,saving:!1}})),b.successCount>0?b.failedPmIds&&b.failedPmIds.length>0?F("warning",[`Bulk AFW reset command sent successfully for ${b.successCount} device(s), but failed for: ${b.failedPmIds.join(", ")}`]):F("success",[`Bulk AFW reset command sent successfully for ${b.successCount} device(s).`]):b.failedPmIds&&b.failedPmIds.length>0&&F("failure",[`Failed to send AFW reset command for: ${b.failedPmIds.join(", ")}`]))}).fail(()=>{K(h.updateLocals({devices:{success:!1,saving:!1}})),F("failure",["Error sending Bulk AFW Reset command. Please try again."])})}},O=()=>a.createStore(),v=c().extend({},a,{configureStore:O,actions:T,actionTypes:s});var L=null},306669:(ae,x,e)=>{e.d(x,{Tp:()=>S,gE:()=>le,jJ:()=>ce,o1:()=>H});var W=e(14602),C=e.n(W),g=e(630789),c=e.n(g),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(775113),s=e(652129),t=e(653806),n=e(644200),E=e(661682);const i=["wirelessInsightNodes","ssids","connectionsPerformanceSummaries","nodeLatencyStats","nodeConnectionStats","clientLatencyStats","clientConnectionStats","ssidConnectionStats","channelUtilization","clientConnectionEvents","clientConnectivityTimeline","networkConfigurationChangeEvents","dataRates","signalQuality","usage","latencyTimeseries","clientCountHistory","onboardingHistory","onboardingAnomalyThresholds","onboardingAnomalyEvents","networksLikeYou","wifiSixApReadiness","ssidsPerAp","bandUsage"],R=(0,s.L)().withStoreName("WirelessInsightsStore").withModels(i).withContextOptions([n.RJ]).create(),r=R.actions,A=R.actionTypes,S=R.selectors,p=_e=>{const Ee={controller:"wireless_insights",action:"client_json"};_e&&(Ee.client=_e);const Se=a()(Ee);return k=>(k(r.requestWirelessInsightNodes()),k(r.requestSsids()),l().ajax(Se).done(G=>{k(r.addWirelessInsightNodes(G.nodes)),k(r.addSsids(G.ssids)),k(r.updateLocals({healthEarliestTs:G.health_earliest_ts}))}).fail(()=>{k(r.failedRequestingWirelessInsightNodes()),k(r.failedRequestingSsids())}).always(()=>{k(r.doneRequestingWirelessInsightNodes()),k(r.doneRequestingSsids())}))},I=(_e,Ee,Se,k)=>G=>(G(r.requestConnectionsPerformanceSummaries()),l().ajax({url:a()({controller:"wireless_insights",action:"summary_json"}),data:{t0:Ee,t1:Se,filters:k}}).done(ie=>{G(r.updateConnectionsPerformanceSummaries([{id:_e,...ie}]))}).always(()=>{G(r.doneRequestingConnectionsPerformanceSummaries())})),U=(_e,Ee,Se={})=>k=>(k(r.requestNodeLatencyStats()),k(r.requestClientLatencyStats()),l().ajax({url:a()({controller:"wireless_insights",action:"latency_stats"}),data:{t0:_e,t1:Ee,filters:d().extend({},Se)}}).done(G=>{k(r.addNodeLatencyStats(d().values(G.by_node))),k(r.addClientLatencyStats(d().values(G.by_client)))}).fail(()=>{k(r.failedRequestingNodeLatencyStats()),k(r.failedRequestingClientLatencyStats())}).always(()=>{k(r.doneRequestingNodeLatencyStats()),k(r.doneRequestingClientLatencyStats())})),D=(_e,Ee,Se,k={})=>U(Ee,Se,d().extend({},k,{client:_e})),u=(_e,Ee,Se,k={})=>U(Ee,Se,d().extend({},k,{node:_e})),o=(_e,Ee,Se,k={})=>G=>{G(r.requestNodeConnectionStats()),G(r.requestClientConnectionStats()),G(r.requestSsidConnectionStats());const ie=d().extend({},k,{client:_e}),fe=Se-Ee,De=Ee-fe,We=Ee,we=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_node"}}),Ve=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_client"}}),Pe=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_ssid"}}),Re=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:De,t1:We,filters:ie,group_by:"by_network"}});return Promise.all([we,Ve,Pe,Re]).then(([Ke,re,Ae,$e])=>{const Fe=re.by_client[_e]||{id:_e};Fe.past=d().values($e.by_network||$e.network)[0],G(r.addNodeConnectionStats(d().values(Ke.by_node))),G(r.addClientConnectionStats([Fe])),G(r.addSsidConnectionStats(d().values(Ae.by_ssid)))}).catch(()=>{G(r.failedRequestingNodeConnectionStats()),G(r.failedRequestingClientConnectionStats()),G(r.failedRequestingSsidConnectionStats())}).finally(()=>{G(r.doneRequestingNodeConnectionStats()),G(r.doneRequestingClientConnectionStats()),G(r.doneRequestingSsidConnectionStats())})},M=(_e,Ee,Se={})=>k=>(k(r.requestSsidConnectionStats()),l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:_e,t1:Ee,filters:Se,group_by:"by_ssid"}}).done(G=>{k(r.addSsidConnectionStats(d().values(G.by_ssid)))}).fail(()=>{k(r.failedRequestingSsidConnectionStats())}).always(()=>{k(r.doneRequestingSsidConnectionStats())})),m=(_e,Ee,Se,k={})=>G=>{G(r.requestNodeConnectionStats()),G(r.requestClientConnectionStats()),G(r.requestSsidConnectionStats());const ie=d().extend({},k,{node:_e}),fe=Se-Ee,De=Ee-fe,We=Ee,we=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_node"}}),Ve=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_client"}}),Pe=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:Ee,t1:Se,filters:ie,group_by:"by_ssid"}}),Re=l().ajax({url:a()({controller:"wireless_insights",action:"connections_stats_group_by"}),data:{t0:De,t1:We,filters:ie,group_by:"by_network"}});return Promise.all([we,Ve,Pe,Re]).then(([Ke,re,Ae,$e])=>{const Fe=Ke.by_node[_e]||{id:_e};Fe.past=d().values($e.by_network||$e.network)[0],G(r.addNodeConnectionStats([Fe])),G(r.addClientConnectionStats(d().values(re.by_client))),G(r.addSsidConnectionStats(d().values(Ae.by_ssid)))}).catch(()=>{G(r.failedRequestingNodeConnectionStats()),G(r.failedRequestingClientConnectionStats()),G(r.failedRequestingSsidConnectionStats())}).finally(()=>{G(r.doneRequestingNodeConnectionStats()),G(r.doneRequestingClientConnectionStats()),G(r.doneRequestingSsidConnectionStats())})},P=(_e,Ee,Se)=>I(_e,Ee,Se,{client:_e}),T=(_e,Ee,Se)=>I(_e,Ee,Se,{node:_e}),O=(_e,Ee,Se,k)=>G=>{G(r.requestWirelessInsightNodes());const ie=d().extend({},k,{node_id:_e},{max_events:2e3},{event_type_include:Se},{newer_than:Ee});return l().ajax({url:a()({controller:"dashboard",action:"event_data"}),data:ie}).done(fe=>{d().each(fe.events,We=>{We.type=fe.event_types[We.el_type]});const De=d().sortBy(fe.events,We=>We.time_f);G(r.updateWirelessInsightNodes([{id:_e,events:De}]))}).fail(()=>{G(r.failedRequestingWirelessInsightNodes())}).always(()=>{G(r.doneRequestingWirelessInsightNodes())})},v=(_e,Ee,Se,k)=>G=>{G(r.requestNetworkConfigurationChangeEvents());const ie=a()({controller:"dashboard",action:"event_data"}),fe={...k,max_events:1e4,event_type_include:Se,newer_than:Ee};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{De.events.forEach(we=>{we.type=De.event_types[we.el_type]});const We=De.events.sort(we=>we.time_f);G(r.updateNetworkConfigurationChangeEvents([{id:_e,events:We}]))}).catch(()=>{G(r.failedRequestingNetworkConfigurationChangeEvents())}).finally(()=>{G(r.doneRequestingNetworkConfigurationChangeEvents())})},L="networks/:ngId/wireless",B=(_e,Ee,Se,k)=>G=>{G(r.requestDataRates());const ie=h.A.urlForApi({version:"v1",path:`${L}/dataRateHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateDataRates([{id:We,...De}]))}).catch(()=>G(r.failedRequestingDataRates())).finally(()=>G(r.doneRequestingDataRates()))},F=(_e,Ee,Se,k)=>async G=>{G(r.requestDataRates());const ie=h.A.urlForApi({version:"v1",path:`${L}/dataRateHistory`,ngId:`N_${Se}`}),fe=k?.band?[k.band]:["2.4","5","6"],De=await Promise.all(fe.map(we=>{const Ve={t0:_e,t1:Ee,autoResolution:!0,band:we,...k};return(0,t.AT)("GET",ie,Ve).then(Pe=>({label:`${we} GHz`,data:Pe?.data})).catch(()=>G(r.failedRequestingDataRates()))})),We=k.clientId||k.deviceSerial;G(r.updateDataRates([{id:We,...De}])),G(r.doneRequestingDataRates())},K=(_e,Ee,Se,k)=>G=>{G(r.requestChannelUtilization());const ie=h.A.urlForApi({version:"v1",path:`${L}/channelUtilizationHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateChannelUtilization([{id:We,...De}]))}).catch(()=>G(r.failedRequestingChannelUtilization())).finally(()=>G(r.doneRequestingChannelUtilization()))},b=(_e,Ee,Se,k)=>async G=>{G(r.requestChannelUtilization());const ie=h.A.urlForApi({version:"v1",path:`${L}/channelUtilizationHistory`,ngId:`N_${Se}`}),fe=k?.band?[k.band]:["2.4","5","6"],De=await Promise.all(fe.map(we=>{const Ve={t0:_e,t1:Ee,autoResolution:!0,band:we,...k};return(0,t.AT)("GET",ie,Ve).then(Pe=>({label:`${we} GHz`,data:Pe?.data})).catch(()=>G(r.failedRequestingChannelUtilization()))})),We=k.clientId||k.deviceSerial;G(r.updateChannelUtilization([{id:We,...De}])),G(r.doneRequestingChannelUtilization())},q=(_e,Ee,Se,k)=>G=>{G(r.requestSignalQuality());const ie=h.A.urlForApi({version:"v1",path:`${L}/signalQualityHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateSignalQuality([{id:We,...De}]))}).catch(()=>G(r.failedRequestingSignalQuality())).finally(()=>G(r.doneRequestingSignalQuality()))},j=(_e,Ee,Se,k)=>async G=>{G(r.requestSignalQuality());const ie=h.A.urlForApi({version:"v1",path:`${L}/signalQualityHistory`,ngId:`N_${Se}`}),fe=k?.band?[k.band]:["2.4","5","6"],De=await Promise.all(fe.map(we=>{const Ve={t0:_e,t1:Ee,autoResolution:!0,band:we,...k};return(0,t.AT)("GET",ie,Ve).then(Pe=>({label:`${we} GHz`,data:Pe?.data})).catch(()=>G(r.failedRequestingSignalQuality()))})),We=k.clientId||k.deviceSerial;G(r.updateSignalQuality([{id:We,...De}])),G(r.doneRequestingSignalQuality())},J=(_e,Ee,Se,k)=>G=>{G(r.requestLatencyTimeseries());const ie=h.A.urlForApi({version:"v1",path:`${L}/latencyHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateLatencyTimeseries([{id:We,...De}]))}).catch(()=>G(r.failedRequestingLatencyTimeseries())).finally(()=>G(r.doneRequestingLatencyTimeseries()))},ee=(_e,Ee,Se,k)=>async G=>{G(r.requestLatencyTimeseries());const ie=h.A.urlForApi({version:"v1",path:`${L}/latencyHistory`,ngId:`N_${Se}`}),fe=k?.band?[k.band]:["2.4","5","6"],De=await Promise.all(fe.map(we=>{const Ve={t0:_e,t1:Ee,band:we,autoResolution:!0,...k};return(0,t.AT)("GET",ie,Ve).then(Pe=>({label:`${we} GHz`,data:Pe?.data})).catch(()=>G(r.failedRequestingLatencyTimeseries()))})),We=k.clientId||k.deviceSerial;G(r.updateLatencyTimeseries([{id:We,...De}])),G(r.doneRequestingLatencyTimeseries())},V=(_e,Ee,Se,k)=>G=>{G(r.requestUsage());const ie=h.A.urlForApi({version:"v1",path:`${L}/usageHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateUsage([{id:We,...De}]))}).catch(()=>G(r.failedRequestingUsage())).finally(()=>G(r.doneRequestingUsage()))},N=(_e,Ee,Se,k)=>async G=>{G(r.requestUsage());const ie=h.A.urlForApi({version:"v1",path:`${L}/usageHistory`,ngId:`N_${Se}`}),fe=k?.band?[k.band]:["2.4","5","6"],De=await Promise.all(fe.map(we=>{const Ve={t0:_e,t1:Ee,band:we,autoResolution:!0,...k};return(0,t.AT)("GET",ie,Ve).then(Pe=>({label:`${we} GHz`,data:Pe?.data})).catch(()=>G(r.failedRequestingUsage()))})),We=k.clientId||k.deviceSerial;G(r.updateUsage([{id:We,...De}])),G(r.doneRequestingUsage())},w=(_e,Ee,Se,k)=>G=>{G(r.requestClientCountHistory());const ie=h.A.urlForApi({version:"v1",path:`${L}/clientCountHistory`,ngId:`N_${Se}`}),fe={t0:_e,t1:Ee,autoResolution:!0,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{const We=k.clientId||k.deviceSerial;G(r.updateClientCountHistory([{id:We,...De}]))}).catch(()=>G(r.failedRequestingClientCountHistory())).finally(()=>G(r.doneRequestingClientCountHistory()))},z=(_e,Ee,Se,k)=>G=>{G(r.clearOnboardingHistory()),G(r.requestOnboardingHistory());const ie=h.A.urlForApi({version:"v1",path:`${L}/clients/onboardingHistory`,ngId:`N_${_e}`}),fe={t0:Ee,t1:Se,...k};return(0,t.AT)("GET",ie,fe).then(({data:De})=>{G(r.updateOnboardingHistory([{id:_e,...De}]))}).catch(()=>G(r.failedRequestingOnboardingHistory())).finally(()=>G(r.doneRequestingOnboardingHistory()))},ne=(_e,Ee,Se,k)=>G=>(G(r.clearOnboardingAnomalyThresholds()),G(r.requestOnboardingAnomalyThresholds()),l().ajax({url:a()({controller:"wireless_insights",action:"onboarding_anomaly_thresholds"}),data:{t0:Ee,t1:Se,...k}}).done(ie=>{G(r.updateOnboardingAnomalyThresholds([{id:_e,...ie}]))}).fail(()=>{G(r.failedRequestingOnboardingAnomalyThresholds())}).always(()=>{G(r.doneRequestingOnboardingAnomalyThresholds())})),Y=(_e,Ee,Se,k)=>G=>(G(r.clearOnboardingAnomalyEvents()),G(r.requestOnboardingAnomalyEvents()),l().ajax({url:a()({controller:"wireless_insights",action:"onboarding_anomaly_events"}),data:{t0:Ee,t1:Se,...k}}).done(ie=>{G(r.updateOnboardingAnomalyEvents([{id:_e,...ie}]))}).fail(()=>{G(r.failedRequestingOnboardingAnomalyEvents())}).always(()=>{G(r.doneRequestingOnboardingAnomalyEvents())})),te=(_e,Ee,Se,k)=>{const G=new URLSearchParams;return G.append("t0",_e),G.append("t1",Ee),G.append("sortOrder","descending"),d().isNumber(Se.ssid)&&G.append("ssidNumber",Se.ssid),Se.node&&G.append("deviceSerial",k[Se.node].serial),Se.band&&G.append("band",Se.band),Se.connectionEventType&&G.append("types[]",Se.connectionEventType),Se.connectionEventSeverity&&(G.append("includedSeverities[]",Se.connectionEventSeverity),Se.connectionEventSeverity==="good"&&G.append("includedSeverities[]","info")),G},Te=(_e,Ee)=>{const Se=new URLSearchParams(new URL(_e).search);Se.delete("startingAfter");const k=new URLSearchParams(Array.from(Ee.entries()).sort());return new URLSearchParams(Array.from(Se.entries()).sort()).toString()!==k.toString()},me=(_e,Ee,Se,k,G,ie,fe=null)=>(De,We)=>{fe===null&&(r.updateLocals({clientConnectionEventsNextPageUrl:null}),De(r.clearClientConnectionEvents()),De(r.requestClientConnectionEvents()));const we=`networks/N_${_e}/wireless/clients/${Ee}/connectivityEvents`,Ve=te(Se,k,G,ie),Pe=`${we}?${Ve.toString()}`;if(fe===null)De(r.updateLocals({lastClientConnectionBaseUrl:Pe}));else if(Te(fe,Ve))return;let Re=0;const Ke=3,re=fe||h.A.urlForApi({version:"v1",path:Pe}),Ae=($e,Fe)=>(0,t.AT)("GET",$e).then(Ye=>{const Be=Ye.data.reduce((ze,Xe)=>{const Ze=`${Xe.occurredAt}-${Xe.deviceSerial}-${Xe.ssidNumber}-${Xe.type}-${Xe.subtype}`;return ze[Ze]={...Xe,id:Ze},ze},{}),je=S.getLocals(We()).lastClientConnectionBaseUrl;if(Fe===je){if(De(r.updateClientConnectionEvents(Be)),Ye.nextPageUrl!==null&&Re<Ke)return Re++,Ae(Ye.nextPageUrl,Fe);De(r.updateLocals({clientConnectionEventsNextPageUrl:Ye.nextPageUrl}))}});return Ae(re,Pe).catch(()=>De(r.failedRequestingClientConnectionEvents())).finally(()=>{fe===null&&De(r.doneRequestingClientConnectionEvents())})},Me=(_e,Ee,Se)=>k=>(k(r.requestClientConnectivityTimeline()),l().ajax({url:a()({controller:"usage",action:"client_wireless_connections"}),data:{t0:_e,t1:Ee,id:Se}}).done(G=>{k(r.updateClientConnectivityTimeline([{id:Se,...G}]))}).fail(()=>{k(r.failedRequestingClientConnectivityTimeline())}).always(()=>{k(r.doneRequestingClientConnectivityTimeline())})),Ie=(_e,Ee,Se)=>k=>(k(r.clearClientConnectionEvents()),k(r.requestClientConnectionEvents()),l().ajax({url:a()({controller:"wireless_insights",action:"ap_timeline"}),data:{t0:_e,t1:Ee,filters:{node:Se}}}).done(G=>{const ie=G.reduce((fe,De)=>{const We=`${De.occurredAt}-${De.clientMac}-${De.ssidNumber}-${De.type}-${De.subtype}`;return fe[We]={...De,id:We},fe},{});k(r.updateClientConnectionEvents(ie))}).fail(()=>{k(r.failedRequestingClientConnectionEvents())}).always(()=>{k(r.doneRequestingClientConnectionEvents())})),ge=(_e,Ee,Se,k)=>G=>{G(r.updateLocals({loadedNetworkTimeline:!1})),G(r.updateLocals({loadingNetworkTimeline:!0})),G(r.clearClientConnectionEvents()),G(r.requestClientConnectionEvents());const ie=d().omit(k,E.YN);return l().ajax({url:a()({controller:"wireless_insights",action:"network_timeline"}),data:{t0:_e,t1:Ee,filters:d().extend({},Se,ie)}}).done(fe=>{const De=fe.reduce((We,we)=>{const Ve=`${we.occurredAt}-${we.clientMac}-${we.deviceSerial}-${we.ssidNumber}-${we.type}-${we.subtype}`;return We[Ve]={...we,id:Ve},We},{});G(r.updateClientConnectionEvents(De)),G(r.updateLocals({loadedNetworkTimeline:!0}))}).fail(()=>{G(r.failedRequestingClientConnectionEvents())}).always(()=>{G(r.doneRequestingClientConnectionEvents()),G(r.updateLocals({loadingNetworkTimeline:!1}))})},de=(_e,Ee,Se)=>k=>(k(r.requestNetworksLikeYou()),l().ajax({url:a()({controller:"networks_like_yours",action:"overview"}),data:{vertical:_e,size:Ee}}).done(G=>{k(r.updateNetworksLikeYou([{id:Se,overview:G}]))}).fail(()=>{k(r.failedRequestingNetworksLikeYou())}).always(()=>{k(r.doneRequestingNetworksLikeYou())})),se=(_e,Ee,Se)=>k=>(k(r.requestWifiSixApReadiness()),l().ajax({url:a()({controller:"networks_like_yours",action:"wifi_six_ap_readiness"}),data:{vertical:_e,size:Ee}}).done(G=>{k(r.updateWifiSixApReadiness([{id:Se,wifiSixApReadinessDrilldown:G}]))}).fail(()=>{k(r.failedRequestingWifiSixApReadiness())}).always(()=>{k(r.doneRequestingWifiSixApReadiness())})),X=(_e,Ee,Se)=>k=>(k(r.requestSsidsPerAp()),l().ajax({url:a()({controller:"networks_like_yours",action:"avg_broadcasting_ssids_per_ap"}),data:{vertical:_e,size:Ee}}).done(G=>{k(r.updateSsidsPerAp([{id:Se,ssidsPerApDrilldown:G}]))}).fail(()=>{k(r.failedRequestingSsidsPerAp())}).always(()=>{k(r.doneRequestingSsidsPerAp())})),Oe=(_e,Ee,Se)=>k=>(k(r.requestBandUsage()),l().ajax({url:a()({controller:"networks_like_yours",action:"band_usage"}),data:{vertical:_e,size:Ee}}).done(G=>{k(r.updateBandUsage([{id:Se,bandUsageDrilldown:G}]))}).fail(()=>{k(r.failedRequestingBandUsage())}).always(()=>{k(r.doneRequestingBandUsage())})),H=d().extend({},r,{addInitialProps:p,fetchClientConnectionsPerformanceSummary:P,fetchNodeConfigurationChangeEvents:O,fetchNetworkConfigurationChangeEvents:v,fetchClientLatencyStats:D,fetchNodeLatencyStats:u,fetchNodeConnectionsPerformanceSummary:T,fetchClientConnectivityTimelineEvents:Me,fetchClientConnectionStats:o,fetchNodeConnectionStats:m,fetchNetworkConnectionStats:M,fetchChannelUtilization:K,fetchMultiBandChannelUtilization:b,fetchClientCountHistory:w,fetchClientConnectionEvents:me,fetchDataRates:B,fetchMultiBandDataRates:F,fetchSignalQuality:q,fetchMultiBandSignalQuality:j,fetchLatencyTimeseries:J,fetchMultiBandLatencyTimeseries:ee,fetchUsage:V,fetchMultiBandUsage:N,fetchOnboardingHistory:z,fetchOnboardingAnomalyThresholds:ne,fetchOnboardingAnomalyEvents:Y,fetchApTimeline:Ie,fetchNetworkTimeline:ge,fetchNetworksLikeYouOverview:de,fetchWifiSixApReadinessDrilldown:se,fetchSsidsPerApDrilldown:X,fetchBandUsageDrilldown:Oe}),$=()=>R.createStore(),le=_e=>!_e.isFetching&&_e.fetchFailed!==!1,ce=_e=>!_e.isFetching&&_e.fetchFailed===!1;var ve=null},310466:(ae,x,e)=>{e.d(x,{DP:()=>D,J5:()=>U,NS:()=>T,Xz:()=>S,a1:()=>v,cP:()=>R,iK:()=>p,kC:()=>A,q9:()=>I,t5:()=>O});var W=e(14602),C=e.n(W),g=e(758928),c=e.n(g),y=e(50811),d=e.n(y),f=e(82960),l=e(760258),_=e(993020),a=e(551066),h=e(917157),s=e(967720),t=e(225980),n=e(389336);let i=!!1;const R=new Promise(L=>{if(i)return L();if(window.__msw)return i=!0,L();window.addEventListener("msw-ready",()=>{i=!0,L()})}),r=L=>{const B=new Headers(L);return B.set("Accept","application/json"),B.set("Content-Type","application/json"),B.set("X-CSRF-TOKEN",c().authenticity_token),B.set("X-Pageload-Request-Id",c().pageload_request_id),Promise.resolve(B)},A=(0,_.xP)({reducerPath:"apiV1",baseQuery:(0,y.fetchBaseQuery)({baseUrl:"/api/v1/",paramsSerializer:h.DK,pauseUntilResolved:()=>R,transformHeaders:r}),endpoints:()=>({})}),S=(0,_.xP)({reducerPath:"apiDashboardPreferences",baseQuery:(0,y.fetchBaseQuery)({baseUrl:"/dashboardPreferencesApi/",paramsSerializer:h.DK,pauseUntilResolved:()=>R,transformHeaders:r}),endpoints:()=>({})}),p=(0,_.xP)({reducerPath:"apiInternal",baseQuery:(0,y.fetchBaseQuery)({baseUrl:"/internalAPI/",paramsSerializer:h.DK,pauseUntilResolved:()=>R,transformHeaders:r}),endpoints:()=>({})}),I=(0,_.xP)({reducerPath:"apiLegacy",baseQuery:(0,a.fetchBaseQuery)({baseUrl:"/",fetchFn(...L){return R.then(()=>(0,s.A)(...L))}}),endpoints:()=>({})}),U=(0,_.xP)({reducerPath:"teApiLegacy",baseQuery:(0,a.fetchBaseQuery)({baseUrl:"/",fetchFn(...L){return R.then(()=>{var B;return(0,s.A)(L[0],{...L[1],headers:{...(B=L[1])===null||B===void 0?void 0:B.headers,Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":c().authenticity_token,"X-Pageload-Request-Id":c().pageload_request_id}})})}}),endpoints:()=>({})});function D(){return[[A.reducerPath,{actions:void 0,actionTypes:void 0,reducer:A.reducer}],[I.reducerPath,{actions:void 0,actionTypes:void 0,reducer:I.reducer}],[U.reducerPath,{actions:void 0,actionTypes:void 0,reducer:U.reducer}],[p.reducerPath,{actions:void 0,actionTypes:void 0,reducer:p.reducer}],[S.reducerPath,{actions:void 0,actionTypes:void 0,reducer:S.reducer}],[t.mM.reducerPath,{actions:void 0,actionTypes:void 0,reducer:t.mM.reducer}],[t.v1.reducerPath,{actions:void 0,actionTypes:void 0,reducer:t.v1.reducer}],[t.ur.reducerPath,{actions:void 0,actionTypes:void 0,reducer:t.ur.reducer}],[t.d7.reducerPath,{actions:void 0,actionTypes:void 0,reducer:t.d7.reducer}]]}const u=0,o=[],M=2,m=(L,B,F,K)=>{const b={};return Object.keys(L).forEach(q=>{const j=L[q];typeof j=="function"?b[q]=j:j&&Object.assign(b,{[q]:m(j,B+1,F.concat([q]),K)})}),K(b,B,F)},P=(L,B)=>{const F=B[0];if(!F||!L||typeof L=="function")return L;const K=L[F],b=[...B];return b.splice(0,1),P(K,b)};function T(L){const B=new n.Ay;return Object.entries(L).forEach(([F,K])=>{B.addPlugin(F,{reducer:m(K,u,o,f.combineReducers)})}),B}function O(L,B,F){return m(B??{},u,o,(K,b,q)=>{const j=P(L,q);return b>=M&&j&&typeof j!="function"&&F(j,K,q.join(".")),{...j,...K}})}const v=L=>{const B=(0,l.createSlice)(L),F=L.name.split(".");return{...B,withExtraReducerArgs:[F,B.reducer]}}},314695:(ae,x,e)=>{e.d(x,{Fx:()=>_,Yc:()=>h,ZS:()=>s,kD:()=>a});var W=e(967720),C=e(652129),g=e(310466);const c={quality:{goodQuality:!0,correctLabel:!0,internalReview:!1,noIssue:!1,alternativeStep:"",isCustomStep:!1,alternativeReason:"",isCustomReason:!1,internalReviewReasons:[],customInternalReviewReasons:[],comments:""},apAnomalies:{hasApAnomalies:!1,bugDescription:"",bugTracking:{knownBug:!1,caseNumber:""},comments:""},textualRepresentation:{pcapSummary:"",chainOfThought:"",rootCauseRemediation:""},clientAnomalies:{hasClientAnomalies:!1,anomaliesDescription:""},additionalData:{hasAdditionalData:!1,additionalDataSources:[],customAdditionalDataSources:[]},commentsAndObservations:"",parentFeedback:"",highlight:{},missingHighlightsComments:""};function y(t,n){const E={...t};for(const i in n)n[i]!==void 0&&(typeof n[i]=="object"&&!Array.isArray(n[i])?E[i]=y(E[i],n[i]):E[i]=n[i]);return E}function d(t){return y(c,t)}const f=(0,C.L)().create().createStore(),l=g.iK.enhanceEndpoints({addTagTypes:["sherlockFeedbacks"]}).injectEndpoints({endpoints:t=>({fetchSmeFeedbacks:t.query({query:({networkId:n})=>({url:`networks/${n}/wireless/sherlock/smeFeedbacks`}),providesTags:(n,E)=>[{type:"sherlockFeedbacks",id:"ALL"}]}),fetchSmeFeedbackS3Json:t.query({query:({networkId:n,feedbackId:E})=>({url:`networks/${n}/wireless/sherlock/smeFeedbacks/${E}/downloadUrl`}),transformResponse:async n=>{if(!n.downloadUrl)throw new Error("Download URL is missing");try{const E=await(0,W.A)(n.downloadUrl);if(!E.ok)throw new Error(`HTTP error! status: ${E.status}`);const i=await E.json();return d(i)}catch(E){throw E}},providesTags:(n,E,i)=>[{type:"sherlockFeedbacks",id:i.feedbackId}]}),uploadSmeFeedbackJson:t.mutation({query:({networkId:n,feedbackId:E,jsonData:i,parentFeedbackId:R})=>({url:`networks/${n}/wireless/sherlock/smeFeedbacks/${E}/upload`,method:"PUT",body:{jsonData:i,parentFeedbackId:R}})})}),overrideExisting:!1}),{useFetchSmeFeedbacksQuery:_,useFetchSmeFeedbackS3JsonQuery:a,useUploadSmeFeedbackJsonMutation:h,util:s}=l},317767:(ae,x,e)=>{e.d(x,{U1:()=>I,o1:()=>A});var W=e(941669),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129);const d=["sims","simFailover","simOrdering"],f=(0,y.L)().withModels(d).withChanges().create(),l=f.actions,_=D=>`/api/v1/devices/${D}/cellular/sims`,a=()=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!1,isSavingSimFailover:!1,saveSimsErrors:null,saveSimFailoverErrors:null}),h=D=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!1,isSavingSimFailover:!1,saveSimsErrors:D,saveSimFailoverErrors:null}),s=()=>l.updateLocals({isSavingSims:!0,isSavingPrimary:!1,isSavingSimFailover:!1,saveSimsErrors:null,saveSimFailoverErrors:null}),t=()=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!0,isSavingSimFailover:!1,saveSimsErrors:null,saveSimFailoverErrors:null}),n=()=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!1,isSavingSimFailover:!0,saveSimsErrors:null,saveSimFailoverErrors:null}),E=D=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!1,isSavingSimFailover:!1,saveSimsErrors:null,saveSimFailoverErrors:D}),i=()=>l.updateLocals({isSavingSims:!1,isSavingPrimary:!1,isSavingSimFailover:!1,saveSimsErrors:null,saveSimFailoverErrors:null}),R=D=>u=>{C().getJSON(_(D)).done(o=>{const M=o.sims.map(T=>({id:T.slot,...T}));u(l.addSims(M)),u(l.doneRequestingSims());const m=[{id:0,simOrdering:o.simOrdering||[]}];u(l.addSimOrdering(m)),u(l.doneRequestingSimOrdering());const P=[{id:0,...o.simFailover}];u(l.addSimFailover(P)),u(l.doneRequestingSimFailover())}),u(l.clearSims()),u(l.requestSims()),u(l.clearSimOrdering()),u(l.requestSimOrdering()),u(l.clearSimFailover()),u(l.requestSimFailover())},r=(D,u,o)=>M=>{if(u==="simSave")M(s());else if(u==="markPrimary")M(t());else if(u==="markSimFailover")M(n());else throw new Error("Unable to save SIMs - request type not recognized.");C().ajax({url:_(o),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(D)}).done(m=>{const P=m.sims.map(v=>({id:v.slot,...v}));M(l.updateSims(P));const T=[{id:0,...m.simFailover}];M(l.updateSimFailover(T));const O=[{id:0,simOrdering:m.simOrdering||[]}];M(l.updateSimOrdering(O)),M(a())}).fail(m=>{let P=[];try{const T=JSON.parse(m.responseText);P=T.errors||[T.error]}catch{switch(m.status){case 403:P.push("You do not have permissions to edit this page.");break;case 404:P.push("We can't find the page you are looking for.");break;case 500:P.push("Our server can't respond right now. Please try again later.");break;default:P.push("An error has occurred. Please try again.")}}M(u==="markSimFailover"?E(P):h(P))})},A=c().extend({},l,{fetchSims:R,submitChanges:r,markSimSaveSuccess:a,markSimSaveErrors:h,markErrorsAcknowledged:i}),S=f.actionTypes,p=f.selectors,I=()=>f.createStore();var U=null},319800:(ae,x,e)=>{e.d(x,{MI:()=>d,YK:()=>c});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.kC.injectEndpoints({endpoints:({query:l})=>({fetchDeviceIndex:l({query:({organizationId:_,...a})=>({url:`organizations/${_}/inventory/devices${(0,g.DK)(a)}`,method:"GET"})}),fetchSingleDeviceIndex:l({query:({organizationId:_,serial:a})=>({url:`organizations/${_}/inventory/devices/${a}`,method:"GET"})})})}),{useFetchDeviceIndexQuery:d,useFetchSingleDeviceIndexQuery:f}=y},322064:(ae,x,e)=>{e.d(x,{U1:()=>S,o1:()=>A});var W=e(14602),C=e.n(W),g=e(653806),c=e(522224),y=e.n(c),d=e(652129),f=e(758928),l=e.n(f),_=e(869592),a=e.n(_);const h=(0,d.L)().withStoreName("SensorAutomationsStore").withCustomKeyedModel("cameraTargets",({serial:p})=>p).addModel("switchportTargets").addModel("ssidTargets").withForm().withUser().create(),s=h.actions,t=["serial","mac","name","product_short_description","channel"],n=()=>p=>{var I;const U=l()===null||l()===void 0||(I=l().camera)===null||I===void 0?void 0:I.eid;if(!U)return p(s.updateLocals({hasCameraNetwork:!1}));const D=`/n/${U}/manage/vision/cameras`,u={fields:t.join(",")};p(s.requestCameraTargets()),(0,g.AT)("GET",D,u).then(o=>{const M=o.data.map(m=>{var P;return{name:m.name,mac:m.mac,serial:m.serial,model:m.product_short_description,snapshotUrl:(P=m.channel)===null||P===void 0?void 0:P.snapshot_url}});p(s.replaceCameraTargets(M))}).finally(()=>{p(s.doneRequestingCameraTargets())})},E=p=>I=>{const D=`/api/v1/organizations/${l()===null||l()===void 0?void 0:l().org_id}/devices`,u={serials:p};I(s.requestCameraTargets()),(0,g.AT)("GET",D,u).then(o=>{const M=o.data.map(m=>({name:m.name,mac:m.mac,serial:m.serial,model:m.model}));I(s.replaceCameraTargets(M))}).finally(()=>{I(s.doneRequestingCameraTargets())})},i=()=>p=>{const I=l()===null||l()===void 0?void 0:l().switch;if(!I)return p(s.updateLocals({hasSwitchGroup:!1}));const U=a()({controller:"nodes",action:"ports_json",node_group:I}),D={};return p(s.requestSwitchportTargets()),(0,g.AT)("GET",U,D).then(u=>{p(s.replaceSwitchportTargets(u.data))}).catch(u=>{p(s.replaceSwitchportTargets(u.errors)),p(s.failedRequestingSwitchportTargets())}).finally(()=>{p(s.doneRequestingSwitchportTargets())})},R=()=>async p=>{const I=l()===null||l()===void 0?void 0:l().wireless,U=l()===null||l()===void 0?void 0:l().wired;if(!I&&!U)return p(s.updateLocals({hasWirelessGroup:!1,hasWiredGroup:!1}));p(s.requestSsidTargets());try{const D=y().compact([I,U]).map(m=>{const P=a()({controller:"configure",action:"ssids_json",node_group:m});return(0,g.AT)("GET",P)}),[u,o]=await Promise.all(D),M=[...u?.data||[],...o?.data||[]];p(s.replaceSsidTargets(M))}catch(D){p(s.replaceSsidTargets(D?.errors)),p(s.failedRequestingSsidTargets())}finally{p(s.doneRequestingSsidTargets())}};var r=null;const A=y().extend({},h.actions,{fetchCameraTargetsWithSnapshotUrls:n,fetchCameraTargetsBySerials:E,fetchSwitchportTargets:i,fetchSsidTargets:R}),S=()=>h.createStore()},323330:(ae,x,e)=>{e.d(x,{U1:()=>M,o1:()=>u});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(869592),l=e.n(f),_=e(652129),a=e(281034),h=e(91979),s=e(644200);const t=["depProfiles","devices"],n=(0,_.L)().withStoreName("PccCloudEnrollmentPageStore").withModels(t).withCustomKeyedModel("pccUsers",m=>m.email).withContextOptions([s.RJ]).withChanges().withModal().withForm().create(),E=n.actions,i=()=>E.updateModal({saving:!1,saveSuccess:!0,saveErrors:null}),R=m=>E.updateModal({saving:!1,saveSuccess:!1,saveErrors:m}),r=m=>P=>(P(E.requestDepProfiles()),(0,a.cB)(m).then(T=>{T.default_profile_id&&P(E.updateLocals({defaultProfileId:T.default_profile_id})),P(E.addDepProfiles(T.profiles))})),A=()=>m=>{m(E.requestPccUsers()),m(E.updateLocals({isFetchingOwners:!0}));const P=v=>m(E.updatePccUsers(v)),T=v=>m(E.addPccUsers(v)),O=()=>{m(E.doneRequestingPccUsers()),m(E.updateLocals({isFetchingOwners:!1}))};return(0,a.r0)(T,P,O)},S=(m,P)=>(T,O)=>{T(E.updateModal({saving:!0}));const v=O().locals.currentDepAccountId,B={ids:c().map(O().locals.devices,F=>F.id),dep_aid:v};return m?B.profile=P:B.profile_id=P.id,d().ajax({url:l()({action:"assign_profile"}),type:"POST",data:B}).then(F=>{F.status==="success"?(F.profile&&T(E.updateDepProfiles({id:F.profile})),T(i())):F.message?T(R([F.message])):F.status_alert&&T(R([F.status_alert.short_desc]))})},p=(m,P)=>{Object.entries(m).forEach(([T,O])=>{T&&Mkijson.pccm.hash[T]&&(Mkijson.pccm.hash[T][P]=O[P])}),cloud_enrollment.search_filter.setData(Mkijson.pccm.hash)},u={...E,fetchDepProfiles:r,fetchPccUsers:A,assignProfileToDevices:S,editDeviceNames:(m,P,T)=>(O,v)=>{O(E.updateModal({saving:!0}));const L=v(),B=c().map(L.locals.devices,F=>F.id);return d().ajax({url:l()({controller:"pcc",action:"multiedit"}),type:"POST",data:{ids:B,name:m,options:{unique:P,base_unique_number:T},skip_in_network_check:!0}}).done(F=>{F.error?O(R([F.error])):(p(F.pcc,"name"),O(i()))}).fail(F=>{O(R([JSON.parse(F.responseText).error]))})},assignOwnerToDevices:()=>(m,P)=>{m(E.updateModal({saving:!0}));const T=P(),O=c().map(T.locals.devices,F=>F.id),v=T.form.owner,L=(0,h.pw)(T,{id:v}).id,B={ids:O,pcc_user_id:L};return d().ajax({url:l()({controller:"pcc",action:"multiedit",skip_in_network_check:!0}),type:"POST",data:B}).done(F=>{F.error?m(R([F.error])):(p(F.pcc,"pcc_user"),m(i()))}).fail(F=>{m(R([JSON.parse(F.responseText).error]))})},removeOwnerFromDevices:()=>(m,P)=>{m(E.updateModal({saving:!0}));const O={ids:c().map(P().locals.devices,v=>v.id),clear_pcc_user:!0,skip_in_network_check:!0};return d().ajax({url:l()({controller:"pcc",action:"multiedit"}),type:"POST",data:O}).done(v=>{v.error?m(R([v.error])):(p(v.pcc,"pcc_user"),m(i()))}).fail(v=>{m(R([JSON.parse(v.responseText).error]))})}},o=n.actionTypes,M=()=>n.createStore()},323498:(ae,x,e)=>{e.d(x,{A:()=>u});var W=e(640173),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(38123),l=e.n(f),_=e(758928),a=e.n(_),h=e(869592),s=e.n(h),t=e(184988),n=e.n(t),E=e(483794),i=e(4933),R=e(967720),r=e(310466),A=e(829344);const S=200,p={CameraConfigStore:(0,i.A)("CAMERA_CONFIG_STORE"),CameraFeatureFlagStore:(0,i.A)("CAMERA_FEATURE_FLAG_STORE"),MotionAlertConfigStore:(0,i.A)("MOTION_ALERT_CONFIG_STORE"),VideoLayoutStore:(0,i.A)("VIDEO_LAYOUT_STORE"),VideoFisheyeStore:(0,i.A)("VIDEO_FISHEYE_STORE"),VideoChannelStore:(0,i.A)("VIDEO_CHANNEL_STORE",{indices:["node_id"]}),VideoFileStatsStore:(0,i.A)("VideoFileStatsStore"),LocalLanStatusStore:(0,i.A)("LOCAL_LAN_STATUS_STORE"),CloudProxyStatusStore:(0,i.A)("CLOUD_PROXY_STATUS_STORE"),MotionFrequencyStore:(0,i.A)("MOTION_FREQUENCY_STORE"),HeatmapStore:(0,i.A)("HEATMAP_STORE"),LiveVideoSessionStore:(0,i.A)("LIVE_VIDEO_SESSION_STORE"),VideoFileStore:(0,i.A)("VIDEO_FILE_STORE"),VideoPlayerControlStore:(0,i.A)("VIDEO_PLAYER_CONTROL_STORE"),SynchronizedPlayerStatusStore:(0,i.A)("SYNCHRONIZED_PLAYER_STATUS_STORE"),SynchronizedPlayerTimeStore:(0,i.A)("SYNCHRONIZED_PLAYER_TIME_STORE"),VideoRangePermissionStore:(0,i.A)("VIDEO_RANGE_PERMISSION_STORE"),VideoRangeDeletionStore:(0,i.A)("VIDEO_RANGE_DELETION_STORE")},I=r.iK.injectEndpoints({endpoints:({query:o})=>({fetchCameraFeatureFlags:o({query:({serial:M})=>({url:`devices/${M}/camera/featureFlags`})})})});var U={};const D={videoRangeDeletion:{fetch(o={video_channel_ids:[]}){return d().ajax({url:s()({controller:"video",action:"video_range_deletions_json"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.VideoRangeDeletionStore.constants.UPDATE,M)})}},videoRangePermission:{fetch(o={video_channel_ids:[]}){return d().ajax({url:s()({controller:"video",action:"video_range_permissions_json"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.VideoRangePermissionStore.constants.UPDATE,M)})},delete(o={id:null}){return d().ajax({url:s()({controller:"video",action:"delete_video_range_permission"}),type:"DELETE",dataType:"json",data:o}).done(()=>{this.dispatch(p.VideoRangePermissionStore.constants.REMOVE,o)})}},synchronizedPlayerStatus:{update(o){this.dispatch(p.SynchronizedPlayerStatusStore.constants.UPDATE,o)},remove(o){this.dispatch(p.SynchronizedPlayerStatusStore.constants.REMOVE,o)}},synchronizedPlayerTime:{update(o){const M=p.VideoPlayerControlStore.get(o.id),m=p.SynchronizedPlayerTimeStore.get(o.id),P=M&&M.shouldNotTrackLive;if(M&&m&&o.syncTargetTime){const T=M.searchStartTime<=o.syncTargetTime&&o.syncTargetTime<=M.searchEndTime;if(!P&&!T&&M.searchTimeUpdatedAt<l()().subtract({seconds:5})){const O=M.searchEndTime.unix()-M.searchStartTime.unix(),v={id:o.id,searchStartTime:l()(o.syncTargetTime).subtract({seconds:O/2}),searchEndTime:l()(o.syncTargetTime).add({seconds:O/2})};this.dispatch(p.VideoPlayerControlStore.constants.UPDATE,v)}}this.dispatch(p.SynchronizedPlayerTimeStore.constants.UPDATE,o)},reset(o){this.dispatch(p.SynchronizedPlayerTimeStore.constants.RESET,o)}},videoPlayerControl:{reset(o){this.dispatch(p.VideoPlayerControlStore.constants.RESET,o)},update(o){if(o.playbackStartTime){const M=l()();o.playbackStartTimeUpdatedAt=M,o.live=o.playbackStartTime>=l()().subtract(10,"s"),D.synchronizedPlayerTime.update.bind(this)({id:o.id,syncTargetTime:o.playbackStartTime,playbackStartTimeUpdatedAt:M})}o.live&&(o.playbackRate=1),this.dispatch(p.VideoPlayerControlStore.constants.UPDATE,o)}},heatmap:{reset(o){this.dispatch(p.HeatmapStore.constants.RESET,o)},update(o){return d().ajax({url:s()({controller:"cameras",action:"heatmap_data"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.HeatmapStore.constants.RESET,M)})}},motionFrequency:{reset(o){this.dispatch(p.MotionFrequencyStore.constants.RESET,o)},update(o){return d().ajax({url:s()({controller:"cameras",action:"motion_frequency"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.MotionFrequencyStore.constants.UPDATE,M)})}},cameraConfig:{reset(o){this.dispatch(p.CameraConfigStore.constants.RESET,o)},update(o){return d().ajax({url:s()({controller:"cameras",action:"update_user_settings"}),type:"PUT",dataType:"json",data:o}).done(M=>{this.dispatch(p.CameraConfigStore.constants.UPDATE,M)})},updateAdmin(o){return d().ajax({url:s()({controller:"cameras",action:"update_admin_settings"}),type:"PUT",dataType:"json",data:o}).done(M=>{this.dispatch(p.CameraConfigStore.constants.UPDATE,M)})},fetch(){return(0,R.A)(s()({controller:"cameras",action:"camera_configs_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>{this.dispatch(p.CameraConfigStore.constants.RESET,o)})},merge(o){this.dispatch(p.CameraConfigStore.constants.UPDATE,o)}},motionAlertConfig:{reset(o){this.dispatch(p.MotionAlertConfigStore.constants.RESET,o)},update(o){return d().ajax({url:s()({controller:"cameras",action:"update_motion_alert_settings"}),type:"PUT",dataType:"json",data:o}).done(M=>{this.dispatch(p.MotionAlertConfigStore.constants.UPDATE,M)})},fetch(){return(0,R.A)(s()({controller:"cameras",action:"motion_alert_configs_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>{this.dispatch(p.MotionAlertConfigStore.constants.RESET,o)})}},video_layouts:{fetch(){return new Promise((M,m)=>d().ajax({url:s()({controller:"video",action:"video_layouts_json"}),type:"GET",dataType:"json"}).done(M).fail(m)).then(M=>this.dispatch(p.VideoLayoutStore.constants.RESET,M))},reset(o){this.dispatch(p.VideoLayoutStore.constants.RESET,o)},update(o){return new Promise(M=>d().ajax({url:s()({controller:"video",action:"update_video_layouts"}),type:"PUT",dataType:"json",data:o}).done(M)).then(M=>{this.dispatch(p.VideoLayoutStore.constants.RESET,M)})}},video_fisheye:{reset(o){this.dispatch(p.VideoFisheyeStore.constants.RESET,o)},update(o){this.dispatch(p.VideoFisheyeStore.constants.UPDATE,o)}},local_lan_status:{reset(o){this.dispatch(p.LocalLanStatusStore.constants.RESET,o)},update(o){this.dispatch(p.LocalLanStatusStore.constants.UPDATE,o)}},cloud_proxy_status:{reset(o){this.dispatch(p.CloudProxyStatusStore.constants.RESET,o)},update(o){this.dispatch(p.CloudProxyStatusStore.constants.UPDATE,o)}},cameraFeatureFlags:{reset(o){this.dispatch(p.CameraFeatureFlagStore.constants.RESET,o)},fetch(o){return I.useFetchCameraFeatureFlagsQuery(o)},update(o){this.dispatch(p.CameraFeatureFlagStore.constants.UPDATE,o)}},videoFileStats:{reset(o){this.dispatch(p.VideoFileStatsStore.constants.RESET,o)},fetch(o){return d().ajax({url:s()({controller:"video",action:"video_file_stats"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.VideoFileStatsStore.constants.UPDATE,M)})}},video_channels:{reset(o){this.dispatch(p.VideoChannelStore.constants.RESET,o)},updateMotionBasedRetentionRois(o){return d().ajax({url:s()({controller:"cameras",action:"update_motion_based_retention_rois"}),type:"PUT",dataType:"json",data:o}).done(M=>{this.dispatch(p.VideoChannelStore.constants.UPDATE,M)})},fetch(o){return d().ajax({url:s()({controller:"video",action:"video_channel"}),type:"GET",dataType:"json",data:o}).done(M=>{this.dispatch(p.VideoChannelStore.constants.UPDATE,M)})}},live_video_sessions:{reset(o){this.dispatch(p.LiveVideoSessionStore.constants.RESET,o)},set_active_streams_for_logs(o,M){d().ajax({url:s()({controller:"video",action:"manage_active_streams"}),type:"POST",data:JSON.stringify({streams:o}),dataType:"json",contentType:"application/json",success:M,error:M})},set_active_streams(o,M){var m=(T,O,v,L,B)=>{this.dispatch(p.LiveVideoSessionStore.constants.UPDATE,{id:E.A.buildSessionId(v,O),updating_session:!0}),d().ajax({url:`${v}/session/${L}`,type:"GET",xhrFields:{withCredentials:!0},success:F=>{this.dispatch(p.LiveVideoSessionStore.constants.UPDATE,{id:E.A.buildSessionId(v,O),stream_req_token:L,stream_req_token_expires:B,stream_endpoint:v,session_key:F.session_key,streams:O,stream_statuses:F.stream_statuses,updating_session:!1}),M({result:F})},error:F=>{n()(`error managing session: ${F}`),M({error:F})}})},P=c().groupBy(o,T=>T.channel.stream_endpoint);c().each(P,(T,O)=>{var v=E.A.buildSessionId(O,T),L=p.LiveVideoSessionStore.findWhere({id:v}),B=L?L.session_key:null;if(L&&L.stream_req_token&&l()(L.stream_req_token_expires)>l()())return m(B,T,O,L.stream_req_token,l()(L.stream_req_token_expires));var F=c().map(T,K=>({channel_id:K.channel.id,imager_id:K.channel.imager_id,format:K.format,quality:K.quality,playback_start_time:K.playbackStartTime}));this.dispatch(p.LiveVideoSessionStore.constants.UPDATE,{id:E.A.buildSessionId(O,T),updating_session_req:!0}),d().ajax({url:a().camera_external_stream?s()({controller:"/external_stream",action:"session_req"}):s()({controller:"video",action:"session_req"}),type:"POST",data:JSON.stringify({streams:F}),dataType:"json",contentType:"application/json",success:K=>{if(K.error||!K.token){n()(`failed to get session req token! ${K.error}`);return}var b=l()().add(20,"s");this.dispatch(p.LiveVideoSessionStore.constants.UPDATE,{id:E.A.buildSessionId(O,T),updating_session_req:!1}),m(B,T,O,K.token,b)},error:K=>{var b=JSON.parse(K.responseText).error_url;a().camera_external_stream&&b&&window.location.replace(b),n()(`error getting session request: ${K}`),M({error:K})}})})}},videoFiles:{getFileForTime(o){const{channelId:M,ts:m,localStreamAvailable:P,retryTransferring:T,sequential:O,imagerId:v}=o,L=v?`${M}-${v}`:M;var B=()=>{var K=[L,P].join("_"),b=[L,m,P].join("_");U[K]>1||A.A.isWaiting(b)||(d().ajax({url:s()({controller:"video",action:"video_json"}),type:"GET",data:{ts:+m,channel_id:L,local_lan_available:P},success:q=>{if(q.error||!q.file){n()(`ERROR - failed to to get video: ${q.error}`);return}var j=q.file;c().each(["start_time","end_time"],J=>{j[J]&&(j[J]=l()(j[J]))}),j.video_status==="no_video"&&(j.fakeFileGeneratedAt=l()()),j.s3_transfer_requested_at&&A.A.track(j),c().each(["start_time","end_time","expiry"],J=>{j.metadata[b]&&(j.metadata[b]=l()(j.metadata[J]))}),v&&(j.channel_id=L),this.dispatch(p.VideoFileStore.constants.UPDATE,j)},error:q=>{n()(`error getting video_file: ${q}`)}}).done(()=>U[K]--),U[K]=(U[K]||0)+1)},F=c()(p.VideoFileStore.where({channel_id:L})).find(K=>K.s3_transfer_requested_at&&T||!P&&K.local?!1:K.start_time&&m>=K.requested_ts-S&&m<K.end_time);return F?(!O&&m<F.start_time&&(F={id:`${L}-${+m}`,channel_id:L,video_status:"no_video",start_time:m,end_time:l()(m).add(10,"s"),requested_ts:+m,metadata:{},fakeFileGeneratedAt:l()()}),F.video_status==="no_video"?F.fakeFileGeneratedAt&&F.fakeFileGeneratedAt>l()().subtract(10,"s")?F:(B(),this.dispatch(p.VideoFileStore.constants.REMOVE,F),{id:["s","channel_id",m].join("_"),ts:m,video_status:"waiting",metadata:{}}):F.video_status==="waiting"||F.metadata.expiry>l()().add(3,"m")?F:F.metadata.expiry<=l()().add(3,"m")?(n()("file expiring soon, looking up again"),B(),F):(n()("file expired looking up again"),B(),{id:["s","channel_id",m].join("_"),ts:m,video_status:"waiting",metadata:{}})):(B(),{id:["s","channel_id",m].join("_"),ts:m,video_status:"waiting",metadata:{}})}}};function u(o){c().each(p,(M,m)=>{o.store(m)||o.addStore(m,M)}),o.actions.cameras||o.addActions({cameras:D})}},330695:(ae,x,e)=>{e.d(x,{m:()=>c});var W=e(310466);const C="PreferredGateways",g=W.kC.enhanceEndpoints({addTagTypes:[C]}).injectEndpoints({endpoints:({mutation:y})=>({updatePreferredGateways:y({query:({serial:d,body:f})=>({url:`devices/${d}/wireless/mesh/preferredGateways`,method:"PUT",body:f}),invalidatesTags:[C]})})}),{useUpdatePreferredGatewaysMutation:c}=g},331102:(ae,x,e)=>{e.d(x,{MU:()=>Ot,o1:()=>At,qY:()=>Ct});var W=e(14602),C=e.n(W),g=e(723665),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(967720),_=e(860712),a=e(158438),h=e(50811),s=e.n(h),t=e(776352),n=e(182197),E=e(758928),i=e.n(E),R=e(646894),r=e.n(R),A=e(843430),S=e(652129),p=e(574455),I=e(833257),U=e(793847),D=e(200489),u=e(634796),o=e(310466);const M=["histograms","aggregates","distributions","analyticsNodeGroups","trackedApps","dynamicWebAppThresholds","uplinkDetails","usage","perUplinkUsageSummary","perUplinkPerformanceSummary","perUplinkPerformance","potentialApps","counterSetRules","eventLog","servers","licenses","vlans","monitoredMediaServers","badApps","analyticsAlertConfigs","alertSettings","httpServers","alerts"],m=(0,U.A)("trackedApps"),P=(0,U.A)("counterSetRules"),T=(0,U.A)("clients"),O=(0,U.A)("servers"),v=(0,U.A)("analyticsNodeGroups"),L=(0,U.A)("perUplinkPerformance"),B=(0,U.A)("perUplinkPerformanceSummary"),F=(0,U.A)("perUplinkUsageSummary"),K=(0,U.A)("uplinkDetails"),b=(0,U.A)("monitoredMediaServers"),q=100,j=1e100,J=50,ee=4,V=(0,S.L)().withStoreName("AnalyticsStore").withModels(M).withLazyModels(["clients"]).withChanges().withMaps().withModal().withPrefs().withFlexTables().withLiveTools().create(),N=V.actions,w=(Z,oe,pe,Q,ue)=>{const he=oe();let Ce=(0,D.oV)(he)||{},Ue=(0,D.X7)(he)||{},xe=(0,D.OQ)(he)||{};Ue=Q.iMergeTimespanApp(Ue,{}),Ce=Q.iMergeTimespanApp(Ce,{}),xe=Q.iMergeTimespanApp(xe,{});const Ne=typeof pe=="string"?JSON.parse(pe||"{}"):pe||{};let be=Ne;g.A.isEmpty(Ne)&&Q.nodeGroup&&(be={[Q.nodeGroup]:{}}),g.A.each(be,({aggregates:Qe={},histogram:qe={},summary:tt={},distributions:ot={}},nt)=>{if(g.A.has(ue,nt)){const rt=Q.withNodeGroup(nt),ct=Qe.source_hashed_ip,ut=Qe.destination_ip,_t=Qe.full_domain,ye=Qe.destination_device,ke=qe,He=tt;let Ge={};g.A.isEmpty(He)||(Ge={count:He.count,latency:He.tcp_initial_rtt,downstreamLatency:He.tcp_downstream_rtt,inverseGoodput:He.inverse_goodput,upstreamLoss:He.upstream_loss,upstreamInverseGoodput:He.upstream_inverse_goodput,downstreamLoss:He.downstream_loss,downstreamInverseGoodput:He.downstream_inverse_goodput,responseDelay:He.response_delay,clients:ct,servers:ut,domains:_t,uplinks:ye});const Je=g.A.isEmpty(ot)?{inverse_goodput:(ct||{}).inverse_goodput_distro,response_delay:(ct||{}).response_delay_distro}:ot;xe=rt.iSetFullPath(xe,Je),Ue=rt.iSetFullPath(Ue,Ge),Ce=rt.iSetFullPath(Ce,ke)}}),Z(N.updateNestedHistograms(g.A.extend({},{histos:Ce},{id:p.A.AGGS_AND_HISTS_KEY}))),Z(N.updateNestedDistributions(g.A.extend({},{dists:xe},{id:p.A.AGGS_AND_HISTS_KEY}))),Z(N.updateNestedAggregates(g.A.extend({},{aggs:Ue},{id:p.A.AGGS_AND_HISTS_KEY})))},z=({dispatch:Z,getState:oe,queries:pe,t1:Q,withAggregates:ue=!1,withHistograms:he=!1,scope:Ce,allNetworks:Ue=!1})=>{const xe=oe();if(xe.models.histograms.isFetching||xe.models.distributions.isFetching||xe.models.aggregates.isFetching||!Q)return null;Z(N.requestHistograms()),Z(N.requestDistributions()),Z(N.requestAggregates());const Ne={controller:"app_analytics",action:"urls"};let be={};const Qe=(0,D.eF)(xe),qe=g.A.keys(Qe).join(",");if(Ue&&ue)throw new Error("Cannot fetch allNetworks and withAggregates at the same time, this will be a massive data fetch and will overload our servers.");Ce.nodeGroup===_.A.ALL||Ue?(Ne.organization={eid:i().org_eid},be=Qe):(Ne.node_group={eid:Ce.nodeGroup},be[Ce.nodeGroup]=!0);const tt=f()(Ne),ot=p.A.timespanOrDefault(Ce.timespan),nt=Q-ot,rt=Math.round(Math.max((Q-nt)/q-1,1)),[ct,ut]=ue?["all",p.A.MAX_N_RECORDS_TO_FETCH]:["distributions",0],_t=he;g.A.chain(p.A.grouped(pe,ee)).reduce((ye,ke)=>ye.then(()=>Promise.all(g.A.map(ke,He=>{const Ge={n_agg:ut,n_events:0,aggregates:ct,make_histograms:_t,query:JSON.stringify(n._Y.format(He.queryArgs,[n.x9])),order:"desc",t1:Q,t0:nt,dt:rt,reduce_scope:!1,useLB:!0};return!xe.locals.userCanReadOrg&&!g.A.isEmpty(qe)&&(Ge.networks=qe),p.A.ajaxWithRetries(tt,Ge,p.A.URLS_RETRY_NUM).then(Je=>w(Z,oe,Je,He.scope,be))}))),Promise.resolve()).value().then(()=>Z(N.doneRequestingHistograms())).then(()=>Z(N.doneRequestingDistributions())).then(()=>Z(N.doneRequestingAggregates()))},ne=({t1:Z,timespan:oe})=>pe=>{const Q=Z-oe,ue={t1:Z,t0:Q};return pe(N.requestBadApps()),y().get(f()({controller:"app_analytics",action:"apps",organization:{eid:i().org_eid}}).concat("/bad_apps"),ue).then(he=>{const Ce=g.A.extend({},he||{},{id:oe});pe(N.updateBadApps([Ce]))}).then(()=>pe(N.doneRequestingBadApps()))},Y=({apps:Z,t1:oe,withAggregates:pe=!1,withHistograms:Q=!1,scope:ue,allNetworks:he=!1})=>(Ce,Ue)=>{const xe=(Z||[]).reduce((Ne,be)=>{const Qe=`${be.counter_set_id}.${be.rule_id}`,qe=p.A.timespanOrDefault(ue.timespan),tt=ue.withApp(be.id).withTimespan(qe).withT1(oe),ot=g.A.extend({app_rule:Qe},tt.toQuery());return Ne.push({queryArgs:ot,scope:tt}),Ne},[]);z({dispatch:Ce,getState:Ue,queries:xe,t1:oe,withAggregates:pe,withHistograms:Q,scope:ue,allNetworks:he})},te=({baseScope:Z,scopes:oe,t1:pe,withAggregates:Q=!1,withHistograms:ue=!1,allNetworks:he=!1})=>(Ce,Ue)=>{const xe=Ue();if(xe.models.histograms.isFetching||xe.models.distributions.isFetching||xe.models.aggregates.isFetching||g.A.isEmpty(Z)||g.A.isEmpty(oe))return null;const Ne=(oe||[]).reduce((be,Qe)=>{const qe=Qe.toQuery();return be.push({queryArgs:qe,scope:Qe}),be},[]);z({dispatch:Ce,getState:Ue,queries:Ne,t1:pe,withAggregates:Q,scope:Z,allNetworks:he,withHistograms:ue})},Te=(Z,oe)=>{const pe=oe.map(ue=>ue.id);return Z.map(ue=>g.A.extend(ue,{insight_free_trial:pe.indexOf(ue.actualId)!==-1}))},me=(Z=!1)=>oe=>(oe(N.requestAnalyticsNodeGroups()),y().get(f()({scala_project:"nmr",controller:"app_analytics",action:"node_groups",organization:{eid:i().org_eid},insightScopeEnabled:Z})).then(pe=>{if(pe){const Q=g.A.map(pe,ue=>g.A.extend({},ue,{id:ue.eid,actualId:ue.id}));return y().get(`/internalAPI/organizations/${i().org_id}/licensing/coterm/insightFreeTrialNetworks`).then(ue=>{const he=Te(Q,ue);oe(N.updateAnalyticsNodeGroups(he)),oe(N.doneRequestingAnalyticsNodeGroups())},()=>{oe(N.updateAnalyticsNodeGroups(Q)),oe(N.doneRequestingAnalyticsNodeGroups())})}})),Me=Z=>oe=>(oe(N.requestAlerts()),y().get(f()({controller:"app_analytics/alerts",action:"index",organization:{eid:i().org_eid},alert_id:Z})).done(pe=>{const Q={...pe,alertType:pe.alert_type,canTroubleshoot:pe.can_troubleshoot};oe(N.updateLocals({analyticsAlert:Q}))}).always(()=>{oe(N.doneRequestingAlerts())})),Ie=Z=>oe=>(oe(N.requestUplinkDetails()),y().get(f()({controller:"app_analytics/wan",action:"uplinks_json",organization:{eid:i().org_eid}}),{ng_eid:Z,with_public_domains:!0}).done(pe=>{oe(N.updateUplinkDetails(pe))}).always(()=>{oe(N.doneRequestingUplinkDetails())})),ge=({t1:Z,ngId:oe,timespan:pe})=>(Q,ue)=>{const he=ue(),Ce=v.getAllObjects(he),Ue=Object.keys(Ce),xe=F.getAllObjects(he),Ne=g.A.isEmpty(oe?g.A.get(xe,oe):xe);let be=!0;if(Ne||(oe?be=g.A.isUndefined((xe[oe][pe]||{})[Z]):be=Object.values(xe).every(Qe=>!(Qe[pe]||{})[Z])),!g.A.isEmpty(Ce)&&!he.models.perUplinkUsageSummary.isFetching&&(Ne||be)){Q(N.requestPerUplinkUsageSummary());const Qe=Z-pe;return y().get(f()({scala_project:"nmr",controller:"wan_analytics",action:"uplink_usage",organization:{eid:i().org_eid}}),{t0:Qe,t1:Z,ng_eid:oe,time_buckets:A.IL}).done((qe,tt,ot)=>{if(ot.status!==200){const rt=(oe?[oe]:Ue).map(ct=>({id:ct,[pe]:{[Z]:{}}}));Q(N.updatePerUplinkUsageSummary(rt));return}let nt=xe;qe.forEach(rt=>{nt=g.A.set(nt,[rt.node_group_id,pe,Z,rt.uplink],rt)}),Q(N.updatePerUplinkUsageSummary(nt))}).always(()=>{Q(N.doneRequestingPerUplinkUsageSummary())})}},de=({t1:Z,ngId:oe,timespan:pe})=>(Q,ue)=>{const he=ue(),Ce=v.getAllObjects(he),Ue=Object.keys(Ce),xe=F.getAllObjects(he);Q(N.requestPerUplinkUsageSummary());const Ne=Z-pe;return y().get(f()({scala_project:"nmr",controller:"wan_analytics",action:"uplink_usage",organization:{eid:i().org_eid}}),{t0:Ne,t1:Z,ng_eid:oe,time_buckets:A.IL}).done((be,Qe,qe)=>{if(qe.status!==200){const ot=(oe?[oe]:Ue).map(nt=>({id:nt,[pe]:{[Z]:{}}}));Q(N.updatePerUplinkUsageSummary(ot));return}let tt=xe;be.forEach(ot=>{tt=g.A.set(tt,[ot.node_group_id,pe,Z,ot.uplink],ot)}),Q(N.updatePerUplinkUsageSummary(tt))}).always(()=>{Q(N.doneRequestingPerUplinkUsageSummary())})},se=({t1:Z,ngId:oe,timespan:pe,ips:Q=[],domains:ue=[]})=>(he,Ce)=>{const Ue=Ce(),xe=v.getAllObjects(Ue),Ne=Object.keys(xe),be=L.getAllObjects(Ue),Qe=g.A.isEmpty(oe?g.A.get(be,oe):be);let qe=!0;if(Qe||(oe?qe=g.A.isUndefined((be[oe][pe]||{})[Z]):qe=Ne.some(ot=>!((be[ot]||{})[pe]||{})[Z])),!g.A.isEmpty(xe)&&!Ue.models.perUplinkPerformance.isFetching&&(Qe||qe)){he(N.requestPerUplinkPerformance());const ot=[];if(g.A.isUndefined(oe))for(var tt=0;tt<Ne.length;tt+=50)ot.push(Ne.slice(tt,tt+50));else ot.push([oe]);const nt={},rt=ct=>{const _t={t0:Z-pe,t1:Z};return Q.length>0&&(_t.ips=Q.join(",")),ue.length>0&&(_t.domains=ue.join(",")),g.A.isUndefined(ct)||(_t.ng_eids=ct.join(",")),y().get(f()({scala_project:"nmr",controller:"wan_analytics",action:"uplink_performance_blocks",organization:{eid:i().org_eid}}),_t).done((ye,ke,He)=>{if(He.status===200){const Ge=L.getAllObjects(Ce());(oe?[oe]:ct||Ne).forEach(Je=>{nt[Je]={id:Je,...Ge[Je],[pe]:{[Z]:{...ye[Je]}}}})}else He.status===204&&(oe?[oe]:[].concat(ct)).forEach(Ge=>{nt[Ge]={id:Ge,[pe]:{[Z]:{}}}})})};return ot.length===0?rt().then(()=>(he(N.updatePerUplinkPerformance(Object.values(nt))),he(N.doneRequestingPerUplinkPerformance()))):Promise.all(ot.map(rt)).then(()=>(he(N.updatePerUplinkPerformance(Object.values(nt))),he(N.doneRequestingPerUplinkPerformance())))}},X=({t1:Z,ngId:oe,timespan:pe,ips:Q=[],domains:ue=[]})=>(he,Ce)=>{const Ue=Ce(),xe=v.getAllObjects(Ue),Ne=Object.keys(xe);he(N.requestPerUplinkPerformanceSummary());const be=[];if(g.A.isUndefined(oe))for(var Qe=0;Qe<Ne.length;Qe+=200)be.push(Ne.slice(Qe,Qe+200));else be.push([oe]);const qe=tt=>{const nt={t0:Z-pe,t1:Z,time_buckets:A.IL};return Q.length>0&&(nt.ips=Q.join(",")),ue.length>0&&(nt.domains=ue.join(",")),g.A.isUndefined(tt)||(nt.ng_eids=tt.join(",")),y().get(f()({scala_project:"nmr",controller:"wan_analytics",action:"uplink_performance",organization:{eid:i().org_eid}}),nt).done((rt,ct,ut)=>{const ye={...L.getAllObjects(Ce())};ut.status===200?(rt.forEach(ke=>{g.A.set(ye,[ke.node_group_id,pe,Z,ke.node_id,ke.ip,ke.uplink],ke),ye[ke.node_group_id].id=ke.node_group_id}),be.forEach(ke=>{g.A.get(ye,[ke,pe,Z])||g.A.set(ye,[ke,pe,Z],{})})):(oe?[oe]:[].concat(tt)).forEach(ke=>{g.A.set(ye,[ke,pe,Z],{}),ye[ke].id=ke}),he(N.updatePerUplinkPerformanceSummary(Object.values(ye)))})};return be.length===0?qe().then(()=>he(N.doneRequestingPerUplinkPerformanceSummary())):Promise.all(be.map(qe)).then(()=>he(N.doneRequestingPerUplinkPerformanceSummary()))},Oe=({t1:Z,ngId:oe,timespan:pe,ips:Q=[],domains:ue=[]})=>(he,Ce)=>{const Ue=Ce(),xe=v.getAllObjects(Ue),Ne=Object.keys(xe),be=B.getAllObjects(Ue),Qe=g.A.isEmpty(oe?g.A.get(be,oe):be);let qe=!0;if(Qe||(oe?qe=g.A.isUndefined((be[oe][pe]||{})[Z]):qe=Ne.some(ot=>!((be[ot]||{})[pe]||{})[Z])),!g.A.isEmpty(xe)&&!Ue.models.perUplinkPerformanceSummary.isFetching&&(Qe||qe)){he(N.requestPerUplinkPerformanceSummary());const ot=[];if(g.A.isUndefined(oe))for(var tt=0;tt<Ne.length;tt+=200)ot.push(Ne.slice(tt,tt+200));else ot.push([oe]);const nt=rt=>{const ut={t0:Z-pe,t1:Z,time_buckets:A.IL};return Q.length>0&&(ut.ips=Q.join(",")),ue.length>0&&(ut.domains=ue.join(",")),g.A.isUndefined(rt)||(ut.ng_eids=rt.join(",")),y().get(f()({scala_project:"nmr",controller:"wan_analytics",action:"uplink_performance",organization:{eid:i().org_eid}}),ut).done((_t,ye,ke)=>{const Ge={...L.getAllObjects(Ce())};ke.status===200?(_t.forEach(Je=>{g.A.set(Ge,[Je.node_group_id,pe,Z,Je.node_id,Je.ip,Je.uplink],Je),Ge[Je.node_group_id].id=Je.node_group_id}),ot.forEach(Je=>{g.A.get(Ge,[Je,pe,Z])||g.A.set(Ge,[Je,pe,Z],{})})):(oe?[oe]:[].concat(rt)).forEach(Je=>{g.A.set(Ge,[Je,pe,Z],{}),Ge[Je].id=Je}),he(N.updatePerUplinkPerformanceSummary(Object.values(Ge)))})};return ot.length===0?nt().then(()=>(he(N.updatePerUplinkPerformanceSummary(Object.values({}))),he(N.doneRequestingPerUplinkPerformanceSummary()))):Promise.all(ot.map(nt)).then(()=>he(N.doneRequestingPerUplinkPerformanceSummary()))}},H=Z=>(oe,pe)=>{if(g.A.isEmpty(Z.ips))return;oe(N.requestServers());let Q=0;const ue=g.A.groupBy(Z.ips,()=>(Q+=1,Math.floor((Q-1)/J))),he=Ce=>y().getJSON(f()({controller:"remote_sources"}),{ips:Ce}).then(Ue=>{const xe=g.A.chain(Ue).flatten().map(be=>[be.ip,be]).object().value(),Ne=O.getAllObjects(pe())||{};g.A.each(Z.ips,be=>{Ne[be]=xe[be]||{ip:be,host:be}}),oe(N.updateServers(Ne))});Promise.all(g.A.map(ue,he)).then(()=>{oe(N.doneRequestingServers())})},$=()=>(Z,oe)=>{const pe=oe(),Q=(0,D.xL)(pe)||{},ue=(0,u.CS)(pe)||{},he=Object.keys(ue),Ce={};for(let Ue=0;Ue<he.length;Ue++){const xe=he[Ue];for(let Ne=0;Ne<ue[xe].length;Ne++){const be=ue[xe][Ne];Q[xe]&&Q[xe].default?Ce[be]=Q[xe].default:Ce[be]=p.A.DEFAULT_PING_DESTINATION}}return Z(N.updateLocals({pingDestinations:Ce}))},le=()=>(Z,oe)=>{const pe=oe(),Q=v.getAllObjects(pe),ue=K.getAllObjects(pe);!g.A.isEmpty(Q)&&!g.A.isEmpty(ue)&&Z($())},ce=(Z,oe=!0)=>(pe,Q)=>{const ue=Q(),he=v.getAllObjects(ue),Ce=K.getAllObjects(ue),Ue=(xe,Ne,be)=>{if(xe)return g.A.isEmpty(be[xe]);{const Qe=Object.keys(Ne);return g.A.any(Qe,qe=>g.A.isEmpty(be[qe]))}};!g.A.isEmpty(he)&&Ue(Z,he,Ce)&&!ue.models.uplinkDetails.isFetching&&pe(Ie(Z)).then(()=>{oe&&pe(le())})},ve=()=>Z=>{Z(N.requestMonitoredMediaServers());const oe=`/api/v1/organizations/${i().org_id}/insight/monitoredMediaServers`;return y().get(f()({global:!0,controller:oe})).done(pe=>{const Q=pe.map(ue=>Object.assign({},ue,{providerId:ue.name}));Z(N.addMonitoredMediaServers(Q)),Z(N.updateLocals({hasFetchedMonitoredMediaServers:!0}))}).always(()=>{Z(N.doneRequestingMonitoredMediaServers())})},_e=()=>(Z,oe)=>{const pe=oe(),Q=b.getAllObjects(pe);g.A.isEmpty(Q)&&!pe.models.monitoredMediaServers.isFetching&&!pe.locals.hasFetchedMonitoredMediaServers&&Z(ve())},Ee=Z=>oe=>Promise.all([oe(ce(Z,!1)),oe(_e())]),Se=Z=>Object.entries(Z).filter(([oe,pe])=>!(oe.includes(I.jN)&&pe.deleted)).map(([oe,pe])=>oe.includes(I.jN)?{resource:`/organizations/${i().org_id}/insight/monitoredMediaServers`,operation:"create",body:pe}:pe.deleted?{resource:`/organizations/${i().org_id}/insight/monitoredMediaServers/${oe}`,operation:"delete"}:{resource:`/organizations/${i().org_id}/insight/monitoredMediaServers/${oe}`,operation:"update",body:pe}),k=()=>(Z,oe)=>{Z(N.updateLocals({isSavingMonitoredMediaServers:!0,monitoredMediaServersErrors:[]}));const pe=b.getReducedChanges(oe());if(g.A.isEmpty(pe))return Z(N.updateLocals({isSavingMonitoredMediaServers:!1})),Promise.resolve();const Q=Se(pe),he={synchronous:Q.length<=20};return(0,h.batchedApiRequest)(i().org_id,Q,{auth:{csrfToken:i().authenticity_token}},he).then(()=>(Z(N.updateLocals({isSavingMonitoredMediaServers:!1,monitoredMediaServersSaveSuccess:!0,monitoredMediaServersErrors:[]})),Z(ve()))).catch(Ce=>{const Ue=["Error saving configuration, please try again"],xe=(0,h.isApiError)(Ce)&&Ce.statusCode===201?Ce.errors:Ue;return Z(N.updateLocals({isSavingMonitoredMediaServers:!1,monitoredMediaServersSaveSuccess:!1,monitoredMediaServersErrors:xe}))})},G={completed:!1,results:[]},ie=(Z,oe,pe)=>Q=>{const ue=(0,I.Kk)(Z,oe,pe);Q(N.deleteSubscription(ue)),Q(N.updateLiveToolData(ue,G)),y().comet.unsubscribe_pattern(Z)},fe=(Z,oe,pe,Q,ue=!1)=>(he,Ce)=>{const Ue=(0,I.Kk)(Z,oe,pe),xe=be=>{const Qe=new t.c$(be),tt=new t.S6(Ce(),Ue).update(Qe);return he(N.updateLiveToolData(Ue,tt))},Ne=new t.J_(Q,pe,oe,Z,ue);return he(N.registerLiveToolSubscription(Ue,Ne.run(xe)))},De=Z=>g.A.map(Z.netuseblocks,oe=>{const[pe,Q,ue]=oe;return{time:pe,received:Q,sent:ue}}),We=Z=>oe=>{oe(N.requestUsage());const pe=Math.round(Z.t1),Q=pe-Z.timespan;return y().get(f()({controller:"usage",action:"network_useblocks",node_group:{eid:Z.ngEid}}),{t0:Q,t1:pe}).done(ue=>{oe(N.updateUsage([{id:Z.ngEid,[Z.timespan]:De(ue)}]))}).fail(()=>{oe(N.failedRequestingUsage())}).always(()=>{oe(N.doneRequestingUsage())})},we=Z=>(oe,pe)=>{const Q=T.getAllObjects(pe()),ue=g.A.difference(Z.clients,g.A.pluck(Q,"id"));if(g.A.isEmpty(ue))return;oe(N.requestClients());const he=f()({controller:"clients",action:"index",node_group:{eid:Z.ngEid}}),Ce=g.A.map(ue,xe=>xe.split(":")[1]),Ue=xe=>{const Ne=g.A.reduce(xe,(be,Qe)=>g.A.extend(be,{[Qe.hashed_ip]:Qe}),{});return be=>g.A.extend({},Ne[be]||{name:"unknown client"},{id:`${Z.ngEid}:${be}`})};return y().ajax({url:he,headers:{"Content-Type":"application/json"},method:"GET",dataType:"json",data:{client_hashed_ips:Ce}}).then(xe=>oe(N.updateClients(g.A.map(Ce,Ue(xe))))).then(()=>oe(N.doneRequestingClients()))},Ve=()=>Z=>{const oe={controller:"app_analytics/typeahead_emails",organization:{eid:i().org_eid}};return y().get(f()(oe)).done(pe=>{Z(N.updateLocals({typeaheadEmails:pe}))})},Pe=(Z={})=>oe=>{oe(N.requestCounterSetRules());const pe={controller:"app_analytics/counter_set_rules",organization:{eid:i().org_eid}};return Z.eid&&(pe.organization={eid:Z.eid}),y().get(f()(pe),{filter:"http"}).done(Q=>{const ue={};g.A.each(Q,he=>{ue[he.counter_set_id]||(ue[he.counter_set_id]={id:he.counter_set_id}),ue[he.counter_set_id][he.id]=he}),oe(N.updateCounterSetRules(ue))}).always(()=>{oe(N.doneRequestingCounterSetRules())})},Re=Z=>oe=>{oe(N.requestPotentialApps());const pe=Z.t1,ue={t0:pe-60*60*24,t1:pe};Z.ngs?ue.node_groups=Z.ngs:ue.insight_enabled_networks=!0,y().get(f()({controller:"usage",action:"ta2_json",node_group:{eid:i().network_eid}}),ue).done(he=>{const Ce=g.A.reduce(he,(Ue,xe)=>(g.A.each(xe,Ne=>{Ne.rule_id!==-1&&(Ue[Ne.rule_id]?Ue[Ne.rule_id].flows+=Ne.num_flows:Ue[Ne.rule_id]={id:Ne.rule_id,flows:Ne.num_flows,thresholds:{goodput:p.A.DEFAULT_GOODPUT_THRESHOLD,response_time:p.A.DEFAULT_RESPONSE_TIME_REF}})}),Ue),{});oe(N.updatePotentialApps(Ce))})},Ke=({ngId:Z})=>oe=>{if(!Z)throw new Error("Invalid arguments: fetchVlans called without an ngId!");oe(N.requestVlans());const pe=`/api/v1/networks/N_${Z}/appliance/vlans`;return y().get(f()({global:!0,controller:pe,action:"index"})).then(Q=>{oe(N.addVlans(Q)),oe(N.doneRequestingVlans())})},re=()=>Z=>{const oe=`/api/v1/organizations/${i().org_id}/alerts/settings`;return y().get(f()({global:!0,controller:oe})).then(({alerts:pe})=>{const Q=pe.find(Ue=>Ue.type==="insightAppOutage")||{},ue=g.A.get(Q,["alertDestinations","emails"])||[],he=!!g.A.get(Q,["alertDestinations","allAdmins"]),Ce=g.A.get(Q,["filters","appsToAlertFor"])||{};Z(N.updateLocals({alertSettings:Ce,alertRecipients:ue,allAdmins:he}))})},Ae=()=>Z=>{Z(N.requestHttpServers());const oe=`/api/v1/organizations/${i().org_id}/webhooks/httpServers`;return y().get(f()({global:!0,controller:oe})).then(pe=>{Z(N.addHttpServers(pe))}).always(()=>Z(N.doneRequestingHttpServers()))},$e=Z=>new Promise((oe,pe)=>{const Q=`/api/v1/organizations/${i().org_id}/webhooks/httpServers`,ue=f()({controller:Q,global:!0});return y().post(ue,Z).done(oe).fail(pe)}),Fe=Z=>new Promise((oe,pe)=>{const Q=`/api/v1/organizations/${i().org_id}/webhooks/httpServers/${Z.id}`,ue=f()({controller:Q,global:!0});return y().ajax({url:ue,type:"PUT",data:Z}).done(oe).fail(pe)}),Ye=Z=>new Promise((oe,pe)=>{const Q=`/api/v1/organizations/${i().org_id}/webhooks/httpServers/${Z.id}`,ue=f()({controller:Q,global:!0});return y().ajax({url:ue,type:"DELETE"}).done(oe).fail(pe)}),Le=Z=>[...Z.newServers.map(oe=>$e(oe)),...Z.updatedServers.map(oe=>Fe(oe)),...Z.deletedServers.map(oe=>Ye(oe))],Be=Z=>new Promise((oe,pe)=>{const ue=`/api/v1/organizations/${i().org_id}/alerts/settings`,he=f()({controller:ue,global:!0});return y().ajax({url:he,type:"PUT",data:Z}).done(oe).fail(pe)}),je=()=>(Z,oe)=>{Z(N.updateLocals({isSavingAlerts:!0}));const{alertSettings:pe,alertRecipients:Q,allAdmins:ue}=oe().locals,he=!g.A.isEmpty(pe),Ce=JSON.stringify({alerts:[{type:"insightAppOutage",enabled:he,alertDestinations:{emails:Q,allAdmins:ue},filters:{appsToAlertFor:pe}}]}),Ue=`/api/v1/organizations/${i().org_id}/alerts/settings`;return y().ajax(f()({global:!0,controller:Ue}),{type:"PUT",data:Ce,contentType:"application/json"}).done(()=>{Z(N.updateLocals({isSavingAlerts:!1,saveSuccessAlerts:!0,saveErrorsAlerts:[]}))}).error(xe=>{let Ne=[];try{Ne=JSON.parse(xe.responseText).errors}catch{}Ne.length===0&&Ne.push("Error saving alert settings, please try again"),Z(N.updateLocals({isSavingAlerts:!1,saveSuccessAlerts:!1,saveErrorsAlerts:Ne}))})},ze=()=>(Z,oe)=>{Z(N.updateLocals({isSaving:!0}));const pe=m.getReducedChanges(oe());return g.A.isEmpty(pe)?(Z(N.updateLocals({isSaving:!1,showModal:!1,thresholdModalApp:null})),Promise.resolve()):y().post(f()({controller:"app_analytics/apps",action:"bulk_update"}),{apps:pe}).done(Q=>{Q.error?Z(N.updateLocals({errors:[Q.error],saveSuccess:!1,isSaving:!1})):(Z(N.updateLocals({showModal:!1,thresholdModalApp:null})),Z(N.resetTrackedAppsChanges()),Z(N.addTrackedApps(Q)),Z(N.updateLocals({saveSuccess:!0,isSaving:!1})))})},Xe=(Z,oe)=>(pe,Q)=>(pe(N.updateLocals({isSaving:!0})),y().post(f()({controller:"app_analytics/apps",action:"autobaseline_update",organization:{eid:i().org_eid}}),{appId:Z,abEnabled:oe}).done(ue=>{if(ue.error)pe(N.updateLocals({errors:[ue.error],saveSuccess:!1,isSaving:!1}));else{const he={autobaselining_enabled:{$set:oe}},Ce=r()(m.getObjectById(Q(),{id:Z}),he);pe(N.updateTrackedApps([Ce])),pe(N.updateLocals({saveSuccess:null,isSaving:!1}))}})),Ze=(Z,oe="insight")=>(pe,Q)=>(pe(N.updateLocals({isSaving:!0})),g.A.isEmpty(Z)?(pe(N.updateLocals({isSaving:!1})),Promise.resolve()):y().post(f()({controller:"app_analytics/network_features",action:"bulk_create"}),{ngs:Z,feature_name:oe}).done(ue=>{pe(N.updateLocals({openModal:"",saveSuccess:!0,isSaving:!1}));const he=v.getAllObjects(Q());pe(N.updateAnalyticsNodeGroups(Z.map(Ce=>({...he[Ce],analytics_enabled:!0,network_feature:oe})))),pe(N.updateLocals({unlicensedNgTypes:ue.unlicensed}))}).fail(ue=>{let he=[];try{he=JSON.parse(ue.responseText).error}catch{he=["Error saving licenses"]}pe(N.updateLocals({errors:he,saveSuccess:!1,isSaving:!1}))})),lt=Z=>(oe,pe)=>(oe(N.updateLocals({isSaving:!0})),g.A.isEmpty(Z)?(oe(N.updateLocals({isSaving:!1})),Promise.resolve()):y().post(f()({controller:"app_analytics/network_features",action:"bulk_delete"}),{ngs:Z}).done(Q=>{oe(N.updateLocals({openModal:"",saveSuccess:!0,isSaving:!1}));const ue=v.getAllObjects(pe());oe(N.updateAnalyticsNodeGroups(Z.map(he=>({...ue[he],analytics_enabled:!1,network_feature:null})))),oe(N.updateLocals({unlicensedNgTypes:Q.unlicensed}))}).fail(Q=>{let ue=[];try{ue=JSON.parse(Q.responseText).error}catch{ue=["Error removing licenses"]}oe(N.updateLocals({errors:ue,saveSuccess:!1,isSaving:!1}))})),Et=()=>(Z,oe)=>{Z(N.updateLocals({isSaving:!0}));const pe=P.getReducedChanges(oe()),Q=g.A.keys(pe)[0],ue=g.A.values(g.A.omit(pe[Q],"id"))[0];return y().post(f()({controller:"app_analytics/counter_set_rules"}),{custom_counter_set_rule:ue,create_tracked_app:!0}).done(he=>{Z(N.updateLocals({csrToEditId:null,saveSuccess:!0})),Z(N.resetCounterSetRulesChanges()),Z(N.updateCounterSetRulesWithMerge([{id:he.counter_set_id,[he.id]:he}])),Z(N.updateTrackedApps([he.tracked_app])),Z(N.updateLocals({isSaving:!1}))}).fail(he=>{const Ce=JSON.parse(he.responseText);Z(N.updateLocals({errors:Ce.error,saveSuccess:!1,isSaving:!1}))})},ft=()=>(Z,oe)=>{Z(N.updateLocals({isSaving:!0}));const pe=P.getReducedChanges(oe()),Q=g.A.keys(pe)[0],ue=g.A.values(pe[Q])[0];return g.A.isEmpty(ue)?(Z(N.updateLocals({isSaving:!1,showCustomCsrPane:!1})),Promise.resolve()):y().ajax({url:f()({controller:"app_analytics/counter_set_rules",action:"update"}),type:"PUT",data:{custom_counter_set_rule:ue}}).done(he=>{Z(N.updateLocals({csrToEditId:null,saveSuccess:!0})),Z(N.resetCounterSetRulesChanges()),Z(N.updateCounterSetRulesWithMerge([{id:he.counter_set_id,[he.id]:he}])),Z(N.updateLocals({isSaving:!1}))}).fail(he=>{const Ce=JSON.parse(he.responseText);Z(N.updateLocals({errors:Ce.error,saveSuccess:!1,isSaving:!1}))})},vt=Z=>(oe,pe)=>{oe(N.updateLocals({isSaving:!0}));const Q=P.getAllObjects(pe()),ue=m.getAllObjects(pe()),he=m.getReducedChanges(pe());return g.A.isEmpty(Z)?(oe(N.updateLocals({isSaving:!1})),Promise.resolve()):y().ajax({url:f()({controller:"app_analytics/counter_set_rules",action:"destroy"}),type:"DELETE",data:{custom_counter_set_rule_id:Z}}).done(Ce=>{const Ue=g.A.findWhere(he,{rule_id:Ce.id});!g.A.isEmpty(he)&&!g.A.isUndefined(Ue)&&oe(N.resetTrackedAppsChangesById(Ue.id));const xe=g.A.findWhere(ue,{rule_id:Ce.id});g.A.isUndefined(xe)||oe(N.deleteTrackedAppsById([xe.id]));const Ne=g.A.omit(Q[Ce.counter_set_id],[Ce.id]),be=g.A.extend({},Q,{[Ne.id]:Ne});oe(N.updateCounterSetRules(be)),oe(N.updateLocals({saveSuccess:!0,isSaving:!1}))}).fail(Ce=>{const Ue=JSON.parse(Ce.responseText);oe(N.updateLocals({errors:Ue.error,saveSuccess:!1,isSaving:!1}))})},Mt=(Z={})=>oe=>{oe(N.requestTrackedApps());const pe={controller:"app_analytics/apps",organization:{eid:i().org_eid}};return Z.eid&&(pe.organization={eid:Z.eid}),y().get(f()(pe)).done(Q=>{oe(N.updateTrackedApps(Q))})},yt=(Z={})=>oe=>{oe(N.requestDynamicWebAppThresholds());const pe={controller:"app_analytics/dynamic_web_app_thresholds",organization:{eid:i().org_eid}};return Z.eid&&(pe.organization={eid:Z.eid}),y().get(f()(pe),{t1:Z.t1}).done(Q=>{oe(N.updateDynamicWebAppThresholds(Q))}).always(()=>{oe(N.doneRequestingDynamicWebAppThresholds())})},Lt=Z=>oe=>{oe(N.requestEventLog());const pe=f()({controller:"dashboard",action:"event_data_by_type",node_group:{eid:Z.ngEid}}),Q={event_type_include:Z.types,newer_than:Z.t0,older_than:Z.t1,max_events:1e4};return y().get(pe,Q).done(ue=>{const he=g.A.map(ue.events,Ce=>g.A.extend(Ce,{time_f:Ce.ts}));oe(N.updateEventLog([{id:Z.ngEid,data:he}]))}).fail(()=>{oe(N.failedRequestingEventLog())}).always(()=>{oe(N.doneRequestingEventLog())})},Dt=(Z,oe)=>()=>new Promise((pe,Q)=>{const[ue,he]=g.A.reduce(oe,(be,Qe)=>[Math.min(Qe.time_f,be[0]),Math.max(Qe.time_f,be[1])],[j,0]),Ce=g.A.map(oe,be=>JSON.stringify([be.ap_id,be.cli_ip,be.ts])),Ue=f()({controller:"dashboard",action:"event_data",node_group:{eid:Z}}),xe={events:Ce,newer_than:ue-.1,older_than:he+.1,max_events:1e4},Ne=be=>{const Qe=be.event_types||{};return g.A.map(be.events,qe=>g.A.extend(qe,{type:Qe[qe.el_type]}))};return y().get(Ue,xe).done(be=>pe(Ne(be))).error(Q)}),Rt=()=>Z=>{Promise.resolve(Z(N.updateLocals({userCanWriteOrg:i().can_write_org||i().can_enterprise_write_org,userCanReadOrg:i().can_read_org||i().can_enterprise_read_org})))},dt=(Z,oe)=>(pe,Q)=>{const ue=Q(),he=r()((0,D.GB)("pingDestinations")(ue),{[Z]:{$set:oe}});return pe(N.updateLocals({pingDestinations:he}))},et=()=>Z=>{Z(N.requestAnalyticsAlertConfigs());const oe=`/api/v1/organizations/${i().org_id}/alerts/profiles`;return(0,l.A)(f()({global:!0,controller:oe})).then(pe=>{if(!pe.ok)throw new Error(pe.statusText);return pe.json()}).then(pe=>{Z(N.addAnalyticsAlertConfigs(pe)),Z(N.updateLocals({hasFetchedAnalyticsAlertConfigs:!0}))}).catch(pe=>{a.Ay.error(pe,{team:"meraki-insight"}),Z(N.failedRequestingAnalyticsAlertConfigs())}).then(()=>Z(N.doneRequestingAnalyticsAlertConfigs()))},pt=Z=>oe=>{const pe=f()({controller:`/api/v1/organizations/${i().org_id}/alerts/profiles/${Z}`,global:!0});return oe(N.updateLocals({isSaving:!0})),g.A.isEmpty(Z)?(oe(N.updateLocals({isSaving:!1})),Promise.resolve()):y().ajax({url:pe,type:"DELETE"}).done(()=>{oe(N.deleteAnalyticsAlertConfigsById([Z])),oe(N.updateLocals({saveSuccess:!0,isSaving:!1}))}).fail(Q=>{const ue=JSON.parse(Q.responseText);oe(N.updateLocals({errors:ue.error,saveSuccess:!1,isSaving:!1}))})},ht=()=>{const Z=i().org_id;return oe=>{oe(N.requestAlertSettings());const pe=`/api/v1/organizations/${Z}/alerts/settings`;return y().get(f()({global:!0,controller:pe})).done(Q=>{const ue=Q;oe(N.addAlertSettings({[Z]:{id:Z,alertSettings:ue}})),oe(N.updateLocals({hasFetchedAlertSettings:!0}))}).always(()=>oe(N.doneRequestingAlertSettings()))}},gt=({httpServersObject:Z,defaultRecipients:oe})=>{const pe=[...Le(Z),Be(oe)];return()=>Promise.all(pe)},mt=f()({controller:"app_analytics",action:"thousandeyes",organization:{eid:i().org_eid}}),St=o.J5.injectEndpoints({endpoints:Z=>({fetchIsTELinked:Z.query({query:()=>({url:`${mt}/is_linked`})})})}),{useFetchIsTELinkedQuery:Ot}=St,At=g.A.extend({},N,{initializeUplinkLocals:$,updatePingDestinations:dt,fetchBadApps:ne,fetchAppsAggsAndHists:Y,fetchScopedAggsAndHists:te,fetchNodeGroups:me,fetchUsage:We,fetchUplinkUsage:ge,fetchUplinkUsagePhase2:de,fetchUplinkPerf:se,fetchUplinkPerfSummary:Oe,fetchUplinkPerfSummaryPhase2:X,initUplinks:ce,initVoip:Ee,fetchMonitoredMediaServers:ve,fetchClientData:we,fetchDynamicWebAppThresholds:yt,fetchTypeaheadEmails:Ve,fetchTrackedApps:Mt,fetchCounterSetRules:Pe,persistAppState:ze,persistLicenses:Ze,removeLicenses:lt,createCustomCounterSetRules:Et,updateCustomCounterSetRules:ft,deleteCustomCounterSetRulesById:vt,fetchPotentialApps:Re,fetchEventLog:Lt,fetchEventDetails:Dt,fetchServers:H,fetchVlans:Ke,fetchUserPermissions:Rt,fetchAlertSettings:re,persistAlertSettings:je,saveMonitoredMediaServers:k,subscribeToTracerouteLiveTool:fe,clearTracerouteLiveTool:ie,persistAutothresholdState:Xe,fetchAnalyticsAlertConfigs:et,deleteAnalyticsAlertConfig:pt,fetchOrgAlertSettings:ht,persistOrgAlertSettings:gt,fetchOrgHttpServers:Ae,fetchAlert:Me,fetchUplinkDetails:Ie}),Ct=()=>V.createStore();var Ut=null},331721:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(6464),C=e(941669),g=e.n(C),c=e(869592),y=e.n(c),d=e(758928),f=e.n(d);const l={SET_HAS_APNS:"SET_HAS_APNS",SET_APNS:"SET_APNS",SET_PCC_FIRMWARE:"SET_PCC_FIRMWARE"},_=W.A.createStore({initialize(){this.hasApnsCert=!1,this.bindActions(l.SET_HAS_APNS,this.onSetHasApns,l.SET_APNS,this.onSetApns,l.SET_PCC_FIRMWARE,this.onSetPccFirmware)},onSetHasApns(s){this.hasApnsCert=s,this.emit("change")},onSetApns(s){this.apnsCert=s,this.emit("change")},onSetPccFirmware(s){this.pccFirmware=s,this.emit("change")},getState(){return{hasApnsCert:this.hasApnsCert,apnsCert:this.apnsCert,pccFirmware:this.pccFirmware}}}),a={setHasApnsCert(s){this.dispatch(l.SET_HAS_APNS,s)},setPccFirmware(s){this.dispatch(l.SET_PCC_FIRMWARE,s)},getApnsCertDetails(){var s=`?id= ${f().org_id}`;g().ajax({type:"GET",contentType:!1,processData:!1,url:y()({controller:"organization",action:"get_apns_cert_json",organization:f().administered_orgs[f().org_id]})+s}).done(t=>{this.dispatch(l.SET_APNS,t)})},getPccFirmware(){g().ajax({type:"GET",contentType:!1,processData:!1,url:y()({controller:"configure",action:"get_pcc_firmware_version_json"})}).done(s=>{this.dispatch(l.SET_PCC_FIRMWARE,s)})}},h=s=>{s.store("PccSetupStore")||(s.addStore("PccSetupStore",new _),s.addActions({pccSetup:a}))}},332898:(ae,x,e)=>{e.d(x,{Tp:()=>A,o1:()=>S});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(653806),_=e(363149);const a=["sensorGatewayRoles"],h=(0,y.L)().withStoreName("SensorLivestreamStore").withModels(a).withCustomKeyedModel("sensorGatewayRolesByDevice",({device:U})=>U.serial).withCustomKeyedModel("assignableCameras",({serial:U})=>U).withCustomKeyedModel("snapshots",({cameraSerial:U,ts:D})=>`${U}-${D}`).withCustomKeyedModel("cameraNodes",({serial:U})=>U).withChanges().create(),s=h.actions,t=["id","network_id","has_cloud_archive","ip","is_demo","local_lan_address","mac","model","name","notes","position","serial","status","tags","type","channel","config"],n=U=>D=>{var u;const o=f()===null||f()===void 0||(u=f().camera)===null||u===void 0?void 0:u.eid;if(!o)return D(s.updateLocals({hasCameraNetwork:!1}));D(s.updateLocals({hasCameraNetwork:!0}));const M=`/n/${o}/manage/vision/cameras`,m={fields:t.join(","),serial:U};return D(s.requestAssignableCameras()),(0,l.AT)("GET",M,m).then(P=>{const T=P.data;D(s.updateAssignableCameras(T))}).catch(P=>{try{P.errors?D(s.updateLocals({errors:P.errors})):D(s.updateLocals({errors:["Failed to fetch cameras"]}))}catch{D(s.updateLocals({errors:["Failed to fetch cameras"]}))}}).finally(()=>{D(s.doneRequestingAssignableCameras())})},E=()=>U=>{var D;const u=f()===null||f()===void 0||(D=f().camera)===null||D===void 0?void 0:D.eid;if(!u)return U(s.updateLocals({hasCameraNetwork:!1}));U(s.updateLocals({hasCameraNetwork:!0}));const o=`/n/${u}/manage/vision/cameras`,M={fields:t.join(",")};return U(s.requestAssignableCameras()),(0,l.AT)("GET",o,M).then(m=>{U(s.replaceAssignableCameras(m.data))}).catch(m=>{try{m.errors?U(s.updateLocals({errors:m.errors})):U(s.updateLocals({errors:["Failed to fetch cameras"]}))}catch{U(s.updateLocals({errors:["Failed to fetch cameras"]}))}}).finally(()=>{U(s.doneRequestingAssignableCameras())})},i=(U,D)=>u=>{u(s.requestSnapshots());const o=`/api/v1/devices/${U}/camera/generateSnapshot`,M={};return D&&(M.timestamp=D),(0,l.AT)("POST",o,JSON.stringify(M)).then(m=>{const P={cameraSerial:U,ts:D,...m.data};u(s.updateSnapshots([P]))}).catch(m=>{try{m.errors?u(s.updateSnapshots([{cameraSerial:U,ts:D,fetchFailed:!0,errors:m.errors}])):u(s.updateSnapshots([{cameraSerial:U,ts:D,fetchFailed:!0,errors:["Failed to fetch snapshot"]}]))}catch{u(s.updateSnapshots([{cameraSerial:U,ts:D,fetchFailed:!0,errors:["Failed to fetch snapshot"]}]))}}).finally(()=>{u(s.doneRequestingSnapshots())})},R=()=>U=>{U(s.requestSensorGatewayRolesByDevice());const u=`/api/v1/networks/${f().locale_id?`L_${f().locale_id}`:`N_${f().ng_id}`}/sensor/relationships`,o={};return(0,l.AT)("GET",u,o).then(M=>{U(s.updateSensorGatewayRolesByDeviceWithMerge(M.data))}).catch(M=>{try{M.errors?U(s.updateLocals({errors:M.errors})):U(s.updateLocals({errors:["Failed to fetch sensor relationships by device"]}))}catch{U(s.updateLocals({errors:["Failed to fetch sensor relationships by device"]}))}}).finally(()=>{U(s.doneRequestingSensorGatewayRolesByDevice())})},r=U=>(D,u)=>{var o;D(s.updateLocals({isSaving:!0,saveErrors:[]}));const M=(o=(0,_.ZE)(u()))!==null&&o!==void 0?o:{},m=Object.entries(M).reduce((v,L)=>{const[B,{relatedDevices:F}]=L;return v[B]={relatedDevices:F.map(K=>({serial:K.serial}))},v},{}),P=U.map(v=>({resource:`/devices/${v}/sensor/relationships`,operation:"update",body:m})),O={synchronous:P.length<=20};return(0,l.jO)(f().org_id,P,O).then(()=>(D(s.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]})),Promise.all([R()(D)]))).catch(v=>{const L=["Error saving sensor roles, please try again"],B=v.batchFailedOrPending?v.errors:L;D(s.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:B}))})},A=h.selectors,S=c().extend({},h.actions,{fetchAssignableCameras:E,fetchCameraBySerial:n,fetchCameraSnapshot:i,fetchSensorGatewayRolesByDevice:R,submitSensorGatewayRolesByDevice:r}),p=()=>h.createStore();var I=null},333425:(ae,x,e)=>{e.d(x,{p5:()=>s});var W=e(652129),C=e(310466),g=e(222855),c=e(413144);const y=c.Ay.object({mac:g.$MH}),d=c.Ay.object({url:c.Ay.string().url(),name:c.Ay.string(),productType:c.Ay.string(),serial:c.Ay.string(),mac:g.$MH,lldp:c.Ay.undefined().or(c.Ay.null().or(c.Ay.object({portId:c.Ay.string()}))),clients:c.Ay.undefined().or(c.Ay.array(y))}),f=c.Ay.object({url:c.Ay.string().url(),name:c.Ay.string()}),l=c.Ay.object({id:c.Ay.string(),category:c.Ay.string(),type:c.Ay.string(),severity:c.Ay.enum(["error","info","warning","critical"]).or(c.Ay.null()),scope:c.Ay.object({devices:c.Ay.array(d),applications:c.Ay.array(f),peers:c.Ay.array(c.Ay.object({url:c.Ay.string().url(),network:c.Ay.object({name:c.Ay.string(),id:c.Ay.string()})}))})}),_=c.Ay.array(l),a=(0,W.L)().create().createStore(),h=C.kC.enhanceEndpoints({}).injectEndpoints({endpoints:({query:t})=>({fetchHealthAlerts:t({query:({networkId:n})=>({url:`networks/${n}/health/alerts`}),transformResponse:(n,E)=>{if(E?.ok){const i=_.safeParse(n);i.success||console.warn("networks/:networkId/health/alerts returned unexpected data",i.error)}return n}})})}),{useFetchHealthAlertsQuery:s}=h},333938:(ae,x,e)=>{e.d(x,{o1:()=>D});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(869592),l=e.n(f),_=e(652129);const a=["healthNodes","clients","ssids","vlans","networkConnectionStats","nodeConnectionStats","clientConnectionStats","networkLatencyStats","nodeLatencyStats","clientLatencyStats","healthConnections"],h=(0,_.L)().withStoreName("NetworkHealthStore").withPrefs().withModels(a).withChanges().create(),s=h.actions,t=h.actionTypes,n=M=>m=>{m(s.updateLocals({loadedHealthNodes:!1,loadedSsids:!1,loadedVlans:!1})),m(s.requestHealthNodes()),m(s.requestSsids()),m(s.requestVlans()),m(s.addHealthNodes(M.nodes)),m(s.addSsids(M.ssids)),m(s.addVlans(M.vlans)),m(s.updateLocals({loadedHealthNodes:!0,loadedSsids:!0,loadedVlans:!0,healthEarliestTs:M.health_earliest_ts,isAdminNodeGroup:M.isAdminNodeGroup,smartOnboardingAlertEnabled:M.smartOnboardingAlertEnabled,hasServerHealthRca:M.hasServerHealthRca,hasIntelAnalytics:M.hasIntelAnalytics,hasMrInsightNetworkLandingPage:M.hasMrInsightNetworkLandingPage,hasMrInsightRfHealthSection:M.hasMrInsightRfHealthSection,hasMrInsightNetworkLens:M.hasMrInsightNetworkLens,isMarsReadOnlyWirelessGroup:M.isMarsReadOnlyWirelessGroup}))},E=M=>{M(s.updateLocals({fetchFailed:!0}))},i=()=>M=>d().ajax(l()({controller:"network_health",action:"props_json"})).then(m=>{M(n(m))}),R=(M,m,P,T,O,v)=>{const L={controller:"network_health",action:"data_json",fetch:M,t0:m,t1:P,filters:T};return O&&(L.group_by=O),v&&(L.past_stats=v),l()(L)},r=(M,m,P,T)=>{const O={controller:"wireless_insights",action:"connections_stats_group_by",t0:M,t1:m,filters:P,group_by:T};return l()(O)},A=(M,m=null)=>({now:{id:"now",stats:M},past:{id:"past",stats:m}}),S=(M,m,P)=>T=>(T(s.updateLocals({loadedLatencyStats:!1})),T(s.clearNetworkLatencyStats()),T(s.clearNodeLatencyStats()),T(s.clearClientLatencyStats()),T(s.requestNetworkLatencyStats()),T(s.requestNodeLatencyStats()),T(s.requestClientLatencyStats()),d().ajax(R("latency_stats",M,m,P)).then(O=>{T(s.addNetworkLatencyStats(O.network)),T(s.addNodeLatencyStats(O.by_node)),T(s.addClientLatencyStats(O.by_client)),T(s.updateLocals({loadedLatencyStats:!0}))},c().partial(E,T))),p=(M,m,P)=>T=>(T(s.updateLocals({loadedClients:!1})),T(s.clearClients()),T(s.requestClients()),d().ajax(R("clients",M,m,P)).then(O=>{T(s.addClients(O)),T(s.updateLocals({loadedClients:!0}))},c().partial(E,T))),I=(M,m,P)=>T=>{T(s.updateLocals({loadedConnectionStats:!1})),T(s.clearNetworkConnectionStats()),T(s.clearNodeConnectionStats()),T(s.clearClientConnectionStats()),T(s.requestNetworkConnectionStats()),T(s.requestNodeConnectionStats()),T(s.requestClientConnectionStats());const O=c().extend({},P),v=d().ajax(r(M,m,O,"by_network")),L=d().ajax(r(M,m,O,"by_node")),B=d().ajax(r(M,m,O,"by_client")),F=m-M,K=M-F,b=M,q=d().ajax(r(K,b,O,"by_network"));return Promise.all([v,L,B,q]).then(([j,J,ee,V])=>{T(s.addNetworkConnectionStats(A(j.network,V.network))),T(s.addNodeConnectionStats(A(J.by_node))),T(s.addClientConnectionStats(A(ee.by_client))),T(s.updateLocals({loadedConnectionStats:!0}))}).catch(()=>{E(T)})},U=(M,m,P,T,O)=>v=>(O&&(v(s.updateLocals({loadedHealthConnections:!1})),v(s.clearHealthConnections())),v(s.requestHealthConnections()),d().ajax(l()({controller:"network_health",action:"raw_connections_json",t0:M,t1:m,filters:c().extend({},P,T)})).then(L=>{v(s.updateHealthConnections(L.connections)),v(s.updateLocals({loadedHealthConnections:!0,earliestLoadedConnection:Number(L.earliest_ts)}))},c().partial(E,v)).always(()=>{v(s.doneRequestingHealthConnections())})),D=c().extend({},s,{addInitialProps:n,fetchInitialProps:i,fetchClients:p,fetchConnectionStats:I,fetchLatencyStats:S,fetchConnections:U}),u=()=>h.createStore();var o=null},335577:(ae,x,e)=>{e.d(x,{VL:()=>h,o1:()=>i});var W=e(379432),C=e.n(W),g=e(175670),c=e.n(g),y=e(14602),d=e.n(y),f=e(941669),l=e.n(f),_=e(652129);const a="StackPower",h="stackPower",s=(0,_.L)().withStoreName("StackPower").withLiveTools().create(),t=s.actions,n=(A,S)=>({[A]:S}),i=Object.assign({},t,{subscribe:A=>(S,p)=>{const I=D=>{var u,o;if(!(D==null||(u=D.data)===null||u===void 0)&&u.port_statuses&&(!(D==null||(o=D.data)===null||o===void 0)&&o.switch_statuses))try{var M,m;const{port_statuses:T,switch_statuses:O}=D.data,v=T[A]||{},L=((M=p().models)===null||M===void 0||(m=M.nodes)===null||m===void 0?void 0:m.byId)||{},B={nodeId:A,powerStackMembers:[],powerConsumed:0,switchPowerBudget:0,stackPowerBudget:0},F=Object.fromEntries(Object.entries(O).map(([j,{device_mac:J}])=>{var ee;return[J,{id:j,name:(ee=L[j])===null||ee===void 0?void 0:ee.name}]})),K=new Set,b=[A];for(;b.length>0;){const j=b.shift();if(!K.has(j)){var P;const J=Object.values((P=T[j])!==null&&P!==void 0?P:{}).flatMap(({neighbor_mac:ee})=>{var V,N;return(V=(N=F[ee])===null||N===void 0?void 0:N.id)!==null&&V!==void 0?V:[]});K.add(j),b.push(...J)}}B.powerStackMembers=Array.from(K),B.powerStackMembers.forEach(j=>{const{power_budget_mw:J,power_consumption_mw:ee}=O[j];A===j&&(B.powerConsumed=ee/1e3,B.switchPowerBudget=J/1e3),B.stackPowerBudget+=J/1e3}),B.ports=Object.keys(v).map(j=>{var J,ee;const{state:V,neighbor_port:N,neighbor_mac:w}=v[j];return{portNumber:j,neighborMac:w,neighborPort:N,neighborName:(J=F[w])===null||J===void 0?void 0:J.name,neighborNodeId:(ee=F[w])===null||ee===void 0?void 0:ee.id,status:V}});const q=n(A,{loading:!1,portStatuses:T,switchStatuses:O,currentSwitch:B});S(t.updateLiveToolData(h,q))}catch(T){console.error(`error while updating live store for ${h}`,T)}},U=l().comet.node_subscribe(a,I,A);S(t.registerLiveToolSubscription(h,U)),S(t.updateLiveToolData(h,n(A,{loading:!0})))}}),R=()=>s.createStore();var r=null},335995:(ae,x,e)=>{e.d(x,{$:()=>g});var W=e(310466);const C=W.kC.injectEndpoints({endpoints:c=>({importAdpApps:c.mutation({query:({networkId:y})=>({url:`networks/${y}/sm/googleAma/importAdpApps`,method:"POST"})})})}),{useImportAdpAppsMutation:g}=C},338004:(ae,x,e)=>{e.d(x,{A:()=>n});var W=e(640173),C=e.n(W),g=e(522224),c=e.n(g),y=e(6464),d=e(755373),f=e.n(d);const l="TIME_STORE_",_={UPDATE:`${l}UPDATE`,UPDATE_LATEST:`${l}UPDATE_LATEST`},a=()=>{const E=window.location.search.replace(/^[?]/,"");return f().parse(E,{arrayFormat:"brackets"})},h=24*60*60,s=y.A.createStore({initialize(){this.time={};const E=a();this.onUpdate(E),this.bindActions(_.UPDATE,this.onUpdate,_.UPDATE_LATEST,this.onUpdateLatest)},onUpdate(E){const i=c().pick(E,"timespan","t0","t1","ts");let R=parseInt(E.t0,10),r=parseInt(E.t1,10),A=parseInt(E.timespan,10);const S=parseInt(E.ts,10);if(c().isEqual(this.payload,i)&&(R||r))return;this.payload=i;const p=new Date().getTime()/1e3;R>0&&r>0?A=r-R:A>0||S>0?A=A||S:R>0?A=p-R:A=h,r||(R>0?r=R+A:r=p),r=Math.min(r,p),R=r-A,this.time=c().extend({},this.time,{t0:R,timespan:A,t1:r}),this.emit("change")},onUpdateLatest(E){const{t1:i}=E;this.time.t1<i&&this.onUpdate(E)},getState(){return c().clone(this.time)}}),t={update(E){this.dispatch(_.UPDATE,E)},updateUsingQueryParams(){this.dispatch(_.UPDATE,a())},updateLatest(E){this.dispatch(_.UPDATE_LATEST,E)}};function n(E){E.store("TimeStore")||(E.addStore("TimeStore",new s),E.addActions({time:t}))}},340166:(ae,x,e)=>{e.d(x,{A:()=>t});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(6464),l=e(869592),_=e.n(l);const a={CREATE_ROW:"CREATE_ROW",DELETE_ROW:"DELETE_ROW",RESET_ROWS:"RESET_ROWS",NET_TAG_CHANGE:"NET_TAG_CHANGE",NODE_TAG_CHANGE:"NODE_TAG_CHANGE"},h=f.A.createStore({initialize(){this.report_tags={},this.change_hash={},this.has_fetched=!1,this.bindActions(a.CREATE_ROW,this.onCreateRow,a.DELETE_ROW,this.onDeleteRow,a.RESET_ROWS,this.onResetRows,a.NET_TAG_CHANGE,this.onNetTagChange,a.NODE_TAG_CHANGE,this.onNodeTagChange)},onCreateRow(){const n=this.guid(),E={id:n,net_tag:null,node_tags:[]};this.report_tags[n]=E,this.emit("change")},guid(){function n(){return Math.floor((1+Math.random())*65536).toString(16).substring(1)}return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},onDeleteRow(n){delete this.report_tags[n],this.emit("change")},onNetTagChange(n){var E=c().clone(this.report_tags[n.id]);E.net_tag=n.net_tag,E.node_tags=[],this.report_tags[n.id]=E,this.emit("change")},onNodeTagChange(n){var E=c().clone(this.report_tags[n.id]);E.node_tags=n.node_tags,this.report_tags[n.id]=E,this.emit("change")},onResetRows(n){this.has_fetched=!0,this.report_tags=n,this.emit("change")},getState(){return this.has_fetched?{rows:c().values(this.report_tags)}:{rows:null}}});var s={createRow(){this.dispatch(a.CREATE_ROW)},deleteRow(n){this.dispatch(a.DELETE_ROW,n)},handleNetTagChange(n){this.dispatch(a.NET_TAG_CHANGE,n)},handleNodeTagChange(n){this.dispatch(a.NODE_TAG_CHANGE,n)},fetch(){return d().getJSON(_()({controller:"organization",action:"report_tags_json"})).done(n=>{const E=c().indexBy(n,"id");this.dispatch(a.RESET_ROWS,E)})}};function t(n){n.store("ReportTagsStore")||(n.addStore("ReportTagsStore",new h),n.addActions({reportTags:s}))}},346279:(ae,x,e)=>{e.d(x,{V3:()=>i,o1:()=>E});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d);const l=["wiredVlans","wiredConfig","anyconnectVpnConfig"],_=(0,W.L)().withStoreName("VpnSettingsStore").withModels(l).withChanges().create(),a=_.actions,h=()=>r=>{r(a.requestWiredVlans()),y().getJSON(f()({controller:"local_networks",action:"wired_vlans"}),A=>{r(a.addWiredVlans(A)),r(a.doneRequestingWiredVlans())})},s=()=>r=>{r(a.requestWiredConfig()),y().getJSON(f()({controller:"local_networks",action:"wired_config"}),A=>{r(a.addWiredConfig(A)),r(a.doneRequestingWiredConfig())})},t=()=>r=>{r(a.requestAnyconnectVpnConfig()),y().getJSON(f()({controller:"local_networks",action:"anyconnect_vpn_config"}),A=>{r(a.addAnyconnectVpnConfig(A)),r(a.doneRequestingAnyconnectVpnConfig())})},n=()=>r=>{r(a.updateContext({isFetchingLocalNetworksDetails:!0})),y().getJSON(f()({controller:"local_networks",action:"flags"}),A=>{r(a.updateContext({isFetchingLocalNetworksDetails:!1,localNetworksDetails:A}))})},E=g().extend({},a,{fetchWiredVlans:h,fetchWiredConfig:s,fetchAnyconnectVpnConfig:t,fetchLocalNetworksDetails:n}),i=()=>_.createStore();var R=null},349454:(ae,x,e)=>{e.d(x,{A:()=>f});var W=e(522224),C=e.n(W),g=e(82960),c=e(689917);const y=(l={})=>l;class d extends c.A{constructor(){super(),this.plugins={}}addPlugin(_,a){return this.plugins[_]=a,this}addPlugins(_={}){return C().each(_,(a,h)=>{this.addPlugin(h,a)}),this}isEmpty(){return C().isEmpty(this.plugins)}create(){const _=C().reduce(this.plugins,(n,E,i)=>(n[i]=E instanceof c.A?E.create():E,n),{}),a=C().reduce(_,(n,E)=>(C().each(E.actions,(i,R)=>{n[R]=i}),n),{}),h=C().reduce(_,(n,E)=>(C().each(E.actionTypes,(i,R)=>{n[R]=i}),n),{}),s=C().reduce(_,(n,E,i)=>(n[i]=E.reducer,n),{});return{reducer:C().isEmpty(s)?y:(0,g.combineReducers)(s),actions:a,actionTypes:h}}}const f=d},354697:(ae,x,e)=>{e.d(x,{A:()=>E});var W=e(14602),C=e.n(W),g=e(6464),c=e(755373),y=e.n(c),d=e(941669),f=e.n(d),l=e(522224),_=e.n(l),a=e(869592),h=e.n(a);const s={FETCH_REMOTE_SOURCE_DETAILS:"FETCH_REMOTE_SOURCE_DETAILS",FETCH_COUNTRY_RULES:"FETCH_COUNTRY_RULES",FETCH_LAYER_3_RULE_BY_IP:"FETCH_LAYER_3_RULE_BY_IP",SET_COUNTRY_CODE_BLOCK:"SET_COUNTRY_CODE_BLOCK",SET_COUNTRY_CODE_UNBLOCK:"SET_COUNTRY_CODE_UNBLOCK",SET_LAYER_3_BLOCK:"SET_LAYER_3_BLOCK",MAX_QUERY_SIZE:50},t=g.A.createStore({initialize(i){this._urlFor=i.urlFor||h(),this._isOrgWide=i.isOrgWide||(()=>!1),this._sources={},this._promise_cache={},this._country_rules={},this._country_rules_initial_loaded=!1,this._errors={},this._layer3_rules={},this.userCanWrite=!1,this.bindActions(s.FETCH_REMOTE_SOURCE_DETAILS,this.onFetchRemoteSourceDetails,s.FETCH_COUNTRY_RULES,this.onFetchCountryRules,s.FETCH_LAYER_3_RULE_BY_IP,this.onFetchLayer3RuleByIP,s.SET_COUNTRY_CODE_BLOCK,this.onCountryCodeBlock,s.SET_COUNTRY_CODE_UNBLOCK,this.onCountryCodeUnblock,s.SET_LAYER_3_BLOCK,this.onLayer3Block)},getRemoteSourceDetails(i){const R=_().clone(this._sources),r=this._getRemoteSourcesNotLoaded(i);return _().any(r)&&(_().each(r,A=>{R[A]={ip:A,loading:!0}}),setTimeout(()=>this.flux.actions.remoteSources.fetchRemoteSourceDetails(r),0)),_().pick(R,i)},getCountryRules(){return this._country_rules},getLayer3Rules(){return this._layer3_rules},getError(i,R){return this._errors[i]||this._errors[R]},onFetchRemoteSourceDetails(i){const R=this._getRemoteSourcesNotLoaded(i.ips);if(_().any(R)){this._setRemoteSourcesLoading(R,!0);var r=0;_().each(_().groupBy(R,()=>(r+=1,Math.floor((r-1)/s.MAX_QUERY_SIZE))),A=>this._fetch(this._getUrl(A)).then(S=>{_().each(S,p=>{this._sources[p.ip]=_().extend(this._sources[p.ip],p,{loading:!1})}),this.emit("change")}).catch(()=>this._setRemoteSourcesLoading(R,!1)))}},onCountryCodeBlock(i){this._toggleCountryCodeBlock(i.countryCode,"POST")},onCountryCodeUnblock(i){this._toggleCountryCodeBlock(i.countryCode,"DELETE")},onFetchCountryRules(){if(this._isOrgWide())this._country_rules={},this.emit("change");else{const i=this._urlFor({controller:"firewall",action:"country_rules.json"});this._fetch(i).then(R=>{this._country_rules=R.rules,this.emit("change")})}},onFetchLayer3RuleByIP(i){if(this._isOrgWide())this._layer3_rules={},this.emit("change");else{const R=this._urlFor({controller:"firewall",action:"outbound_rules/dst_ip.json"});f().get(R,{dst_ip:i.dstIP},r=>{this._layer3_rules[i.dstIP]=r,this.emit("change")})}},onLayer3Block(i){f().ajax({type:"POST",url:this._urlFor({controller:"firewall",action:"outbound_rules/dst_ip.json"}),data:{policy:"deny",dst_ip:i.dstIP}}).fail(R=>{this._errors[i.dstIP]={code:R.status},R.status===409&&(this._errors[i.dstIP].msg="The firewall already has a matching rule.",this.onFetchLayer3RuleByIP(i)),this.emit("change")}).done(()=>{this._layer3_rules[i.dstIP]={policy:"deny"},this._errors[i.dstIP]=void 0,this.emit("change")})},_toggleCountryCodeBlock(i,R){f().ajax({type:R.toUpperCase(),url:this._urlFor({controller:"firewall",action:"country_rules.json"}),data:{mode:"blacklist",country_code:i}}).fail(r=>{r.status!==404&&r.status!==409&&(this._errors[i]={code:r.status}),this._fetchCountryRules(),this.emit("change")}).done(r=>{this._errors[i]=void 0,this._country_rules=r.rules,this.emit("change")})},_getUrl(i){const R=y().stringify({ips:i},{arrayFormat:"brackets"});return`${this._urlFor({controller:"remote_sources"})}?${R}`},_getRemoteSourcesNotLoaded(i){return _().difference(i,_().keys(this._sources))},_fetch(i){return _().has(this._promise_cache,i)||(this._promise_cache[i]=new Promise((R,r)=>{f().get(i,A=>R(A),"json").fail((A,S)=>r(S))})),this._promise_cache[i]},_setRemoteSourcesLoading(i,R){_().each(i,r=>{_().has(this._sources,r)||(this._sources[r]={ip:r}),this._sources[r].loading=R}),this.emit("change")},_fetchCountryRules(){const i=this._urlFor({controller:"firewall",action:"country_rules.json"});f().get(i).done(R=>{this._country_rules=R.rules,this.emit("change")})}}),n={fetchRemoteSourceDetails(i){this.dispatch(s.FETCH_REMOTE_SOURCE_DETAILS,{ips:i})},fetchCountryRules(){this.dispatch(s.FETCH_COUNTRY_RULES)},fetchLayer3RuleByIP(i){this.dispatch(s.FETCH_LAYER_3_RULE_BY_IP,{dstIP:i})},setCountryCodeBlock(i){this.dispatch(s.SET_COUNTRY_CODE_BLOCK,{countryCode:i})},setCountryCodeUnblock(i){this.dispatch(s.SET_COUNTRY_CODE_UNBLOCK,{countryCode:i})},setLayer3RuleBlock(i){this.dispatch(s.SET_LAYER_3_BLOCK,{dstIP:i})}},E=(i,R)=>{i.store("RemoteSourceStore")||(i.addStore("RemoteSourceStore",new t(R)),i.addActions({remoteSources:n}))}},366259:(ae,x,e)=>{e.d(x,{U:()=>n,o:()=>t});var W=e(652129),C=e(459324),g=e(281034);const c=["geofences","geofenceTags","geofenceRegions"],y=(0,W.L)().withStoreName("PccGeofencyPoliciesStore").withModels(c).withChanges().withPrefs().withFlexTables().withForm().withMaps().create(),d=y.actions,t={...d,fetchGeofences:()=>E=>(E(d.requestGeofences()),(0,g.FP)().then(i=>{E(d.addGeofences(i))})),fetchGeofenceRegionsForGeofence:E=>i=>(i(d.requestGeofenceRegions()),(0,g.Yz)(E).then(R=>{i(d.addGeofenceRegions(R))})),fetchGeofenceTags:()=>E=>(E(d.requestGeofenceTags()),(0,g.dm)().then(i=>{i.forEach(R=>{R.scope=C.dsj[R.scope]}),E(d.addGeofenceTags(i))})),markGeofencesForDeletion:E=>i=>{const R={};E.forEach(r=>{R[r]={deleted:!0,id:r}}),i(d.changeManyGeofences(R))},markGeofenceRegionsForDeletion:E=>i=>{const R={};E.forEach(r=>{R[r]={deleted:!0,id:r}}),i(d.changeManyGeofenceRegions(R))},fetchGeofencingDashboardMessages:E=>{const i=E?"beta_geofencing":"legacy_geofencing";return R=>(0,g.P)(i).then(r=>{R(d.updateLocals({dashMsgs:r}))})}},n=y.createStore},366587:(ae,x,e)=>{e.d(x,{Ay:()=>Se});var W=e(14602),C=e(522224),g=e.n(C),c=e(82960),y=e(901265),d=e(758928),f=e.n(d),l=e(804162),_=e(878821),a=e(644200),h=e(689917);class s extends h.A{modalActionTypes(){return{update:"UPDATE_MODAL",updateModalWithErrors:"UPDATE_MODAL_WITH_ERRORS",clear:"CLEAR_MODAL"}}buildModalActions(){const G=this.modalActionTypes();return{updateModal:ie=>({type:G.update,update:ie}),updateModalWithErrors:(ie,fe)=>({type:G.updateModalWithErrors,update:ie,errors:fe}),clearModal:()=>({type:G.clear})}}buildModalReducer(){const G=this.modalActionTypes();return(ie={errors:{}},fe)=>{switch(fe.type){case G.clear:return{};case G.update:return g().extend({},ie,fe.update);case G.updateModalWithErrors:{const De=g().pick(fe.errors,We=>!!We);return g().extend({},ie,fe.update,{errors:De})}default:return ie}}}create(){return{actions:this.buildModalActions(),actionTypes:this.modalActionTypes(),reducer:this.buildModalReducer()}}}const t=()=>new s,n=s,E=t().create().actions;var i=e(389336),R=e(349454),r=e(646894),A=e.n(r);function S(k){return k.charAt(0).toUpperCase()+k.slice(1)}const p=k=>k.id;class I extends h.A{constructor(G,ie={}){super(),this.modelName=G,this.getId=ie.getId||p}modelActionTypes(){const G=this.modelName.toUpperCase();return{requestDetailsFor:`REQUEST_DETAILS_${G}`,mergeDetailsFor:`MERGE_DETAILS_${G}`}}buildModelActions(){const G=S(this.modelName),ie=this.modelActionTypes();return{[`requestDetailsFor${G}`]:(fe,De)=>(g().isArray(fe)||console.error(`Must pass an array of IDs to requestDetailsFor${G}`),g().isArray(De)||console.error(`Must pass an array of fields to requestDetailsFor${G}`),{type:ie.requestDetailsFor,ids:fe,fields:De}),[`mergeDetailsFor${G}`]:(fe,De)=>({type:ie.mergeDetailsFor,objects:fe,fields:De})}}buildModelReducer(){const G=this.modelActionTypes();return(ie={isFetching:!1,isFetchingPartial:{}},fe)=>{switch(fe.type){case G.requestDetailsFor:{const De=fe.ids.reduce((We,we)=>{const Ve=g().union(fe.fields,ie.isFetchingPartial[we]);return g().extend(We,{[we]:Ve})},{});return A()(ie,{isFetchingPartial:{$merge:De}})}case G.mergeDetailsFor:{const De={toDelete:[]},We=fe.objects.reduce((Pe,Re)=>{const Ke=this.getId(Re),re=g().difference(ie.isFetchingPartial[Ke]||[],fe.fields);return g().isEmpty(re)?De.toDelete.push(Ke):De[Ke]=re,ie.byId[Ke]?Pe[Ke]={$merge:Re}:Pe[Ke]={$set:Re},Pe},{}),we=De.toDelete;delete De.toDelete;const Ve=A()(g().omit(ie.isFetchingPartial,we),{$merge:De});return A()(ie,{isFetchingPartial:{$set:Ve},byId:We})}default:return ie}}}create(){return{actions:this.buildModelActions(),actionTypes:this.modelActionTypes(),reducer:this.buildModelReducer()}}}const U=k=>new I(k),D=I;var u=e(72201),o=e(852845),M=e(770486);class m extends h.A{paginatedLicenseFetchActionTypes(){return{initFetchingPaginatedLicenses:"INIT_FETCHING_PAGINATED_LICENSES",updateFetchingPaginatedLicensesProgress:"UPDATE_FETCHING_PAGINATED_LICENSES_PROGRESS",setFetchingPaginatedLicensesError:"SET_FETCHING_LICENSES_ERROR",doneFetchingPaginatedLicenses:"DONE_FETCHING_PAGINATED_LICENSES"}}buildPaginatedLicenseFetchActions(){const G=this.paginatedLicenseFetchActionTypes();return{initFetchingPaginatedLicenses:()=>({type:G.initFetchingPaginatedLicenses}),updateFetchingPaginatedLicensesProgress:ie=>({type:G.updateFetchingPaginatedLicensesProgress,licensesFetched:ie}),setFetchingPaginatedLicensesError:ie=>({type:G.setFetchingPaginatedLicensesError,error:ie}),doneFetchingPaginatedLicenses:()=>({type:G.doneFetchingPaginatedLicenses})}}buildPaginatedLicenseFetchReducer(){const G=this.paginatedLicenseFetchActionTypes();return(ie={},fe)=>{switch(fe.type){case G.initFetchingPaginatedLicenses:return{isFetching:!0,pagesFetched:0,licensesFetched:0,error:null,isDone:!1};case G.updateFetchingPaginatedLicensesProgress:{const De=ie.pagesFetched+1,We=ie.licensesFetched+fe.licensesFetched;return g().extend({},ie,{pagesFetched:De,licensesFetched:We})}case G.setFetchingPaginatedLicensesError:return g().extend({},ie,{error:fe.error,isFetching:!1,isDone:!0});case G.doneFetchingPaginatedLicenses:return g().extend({},ie,{isFetching:!1,isDone:!0});default:return ie}}}create(){return{actions:this.buildPaginatedLicenseFetchActions(),actionTypes:this.paginatedLicenseFetchActionTypes(),reducer:this.buildPaginatedLicenseFetchReducer()}}}const P=()=>new m,T=null,O=P().create().actions;var v=e(74998),L=e(204207),B=e(540590),F=e(640173),K=e(941669),b=e.n(K),q=e(869592),j=e.n(q),J=e(184988),ee=e.n(J),V=e(617527),N=e(322792),w=e(459324),z=e(289840);const ne={updateSystemApps:"PCC_APP_SELECTOR_UPDATE_SYSTEM_APPS",updateManagedApps:"PCC_APP_SELECTOR_UPDATE_MANAGED_APPS",markInitialMetadataFetched:"PCC_APP_SELECTOR_INITIAL_DATA_FETCHED",mergeStoreApps:"PCC_APP_SELECTOR_MERGE_STORE_APPS",updateInUseApps:"PCC_APP_SELECTOR_UPDATE_IN_USE_APPS",addCustomApp:"PCC_APP_SELECTOR_ADD_CUSTOM_APP",startSearchingFor:"PCC_APP_SELECTOR_START_SEARCHING_FOR",doneSearchingFor:"PCC_APP_SELECTOR_DONE_SEARCHING_FOR",setNextSearch:"PCC_APP_SELECTOR_SET_NEXT_SEARCH",clearNextSearch:"PCC_APP_SELECTOR_CLEAR_NEXT_SEARCH",incrementUserRequesting:"PCC_APP_SELECTOR_USER_REQUESTING++",decrementUserRequesting:"PCC_APP_SELECTOR_USER_REQUESTING--"},Y=(k,G)=>{var ie=[];let fe=[],De=0;return k.forEach(We=>{De+We.length+1>G&&(ie.push(fe),fe=[],De=0),fe.push(We),De+=We.length+1}),fe.length>0&&ie.push(fe),ie},te={updateIosSystemApps:k=>({type:ne.updateSystemApps,platform:w.cII,apps:k}),updateIosManagedApps:k=>({type:ne.updateManagedApps,platform:w.cII,apps:k}),updateMacManagedApps:k=>({type:ne.updateManagedApps,platform:w.iQO,apps:k}),updateAndroidSystemApps:k=>({type:ne.updateSystemApps,platform:w.CYr,apps:k}),updateAndroidManagedApps:k=>({type:ne.updateManagedApps,platform:w.CYr,apps:k}),updateGoogleAmaManagedApps:k=>({type:ne.updateManagedApps,platform:w.WUC,apps:k}),updateChromeManagedApps:k=>({type:ne.updateManagedApps,platform:w.zws,apps:k}),updateTvosManagedApps:k=>({type:ne.updateManagedApps,platform:w.H9y,apps:k}),mergeStoreApps:(k,G,ie)=>({type:ne.mergeStoreApps,platform:k,searchTerm:G,apps:ie}),parseSearchResults:(k,G)=>{switch(G){case w.cII:case w.H9y:case w.iQO:return k.map(ie=>{const fe=ie.trackName,De=ie.trackId.toString(),We=ie.bundleId||De,we=ie.sellerName||ie.artistName,{description:Ve,price:Pe,artworkUrl60:Re,version:Ke,trackViewUrl:re,supported_devices:Ae}=ie;return g().pick({identifier:We,label:fe,description:Ve,price:Pe,icon:Re,vendor:we,version:Ke,storeId:De,itunes_url:re,supportedDevices:Ae},g().identity)});case w.CYr:return k.map(ie=>{const fe=ie.icon.replace(/-rw$/,""),De=/^\/\//.test(fe)?`https:${fe}`:fe,{description:We,name:we,package_name:Ve,price:Pe,resource_path:Re,vendor:Ke,itunes_url:re}=ie;return g().pick({identifier:Ve,label:we,description:We,price:Pe,icon:De,vendor:Ke,storeId:Re,itunes_url:re},g().identity)});case w.zws:return k.map(ie=>{const{identifier:fe,label:De,description:We,price:we,icon:Ve,vendor:Pe,storeId:Re,itunes_url:Ke}=ie;return g().pick({identifier:fe,label:De,description:We,price:we,icon:Ve,vendor:Pe,storeId:Re,itunes_url:Ke},g().identity)});default:return[]}},fetchSystemApps:()=>k=>new Promise((G,ie)=>{b().ajax({url:j()({controller:"configure",action:"pcc_apps_json"}),method:"GET"}).done(fe=>G(fe)).fail((fe,De)=>ie(`Failed to fetch system apps with error code ${De}.`))}).then(({ios_system_apps:G,ios_managed_apps:ie,mac_apps:fe,chrome_apps:De,android_system_apps:We,android_apps:we,google_ama_apps:Ve})=>{const Pe=Re=>({label:Re.label,identifier:Re.value,icon:Re.icon});return Promise.all([k(te.updateIosSystemApps(G.map(Pe))),k(te.updateIosManagedApps(ie.map(Pe))),k(te.updateMacManagedApps(fe.map(Pe))),k(te.updateAndroidSystemApps(We.map(Pe))),k(te.updateAndroidManagedApps(we.map(Pe))),k(te.updateChromeManagedApps(De.map(Pe))),k(te.updateGoogleAmaManagedApps(Ve.map(Pe)))])}),startSearchingFor:(k,G)=>({type:ne.startSearchingFor,platform:k,searchTerm:G}),doneSearchingFor:(k,G,ie=!0)=>({type:ne.doneSearchingFor,platform:k,searchTerm:G,markSearched:ie}),setNextSearch:(k,G,ie)=>({type:ne.setNextSearch,platform:k,searchTerm:G,options:ie}),clearNextSearch:k=>({type:ne.clearNextSearch,platform:k}),incrementUserRequesting:k=>({type:ne.incrementUserRequesting,platform:k}),decrementUserRequesting:k=>({type:ne.decrementUserRequesting,platform:k}),findApps:(k,G,ie,fe={})=>{if(Array.isArray(G))return Ke=>Promise.all(Y(G,2048).map(re=>Ke(te.findApps(k,re.join(","),ie,fe))));const De=G,{filter:We="all",country:we="us"}=fe,Ve=(0,z.M)(k),Pe=k===w.CYr&&!!fe.identifierOnly,Re=k===w.CYr?{platform:Ve,term:G,lookup_type:ie,filter:We}:{platform:Ve,term:G,lookup_type:ie,country:we};return(Ke,re)=>{if(G==="")return Promise.resolve();const Ae=new Set(re().pccAppSelector.searchedTerms[k]),$e=new Set(re().pccAppSelector.runningSearches[k]);return Ae.has(De)||$e.has(De)?Promise.resolve():Promise.resolve(Ke(te.startSearchingFor(k,De))).then(()=>(0,z._)(k,Re,Pe)).then(Fe=>Pe?[(0,w.mgQ)(Fe.product,k===w.WUC)]:te.parseSearchResults(Fe,k)).then(Fe=>Ke(te.mergeStoreApps(k,De,Fe))).then(()=>Ke(te.doneSearchingFor(k,De))).catch(Fe=>{Ke(te.doneSearchingFor(k,De,!1)),ee()(Fe)})}},findAppsById:(k,G,ie)=>{switch(k){case w.cII:case w.H9y:case w.iQO:{const fe="lookup-apple-appid";return te.findApps(k,G,fe,ie)}case w.CYr:{const fe="lookup-android-package";return De=>Promise.all(G.map(We=>De(te.findApps(k,We,fe,ie))))}case w.zws:{const fe="lookup-chrome-package";return De=>Promise.all(G.map(We=>De(te.findApps(k,We,fe,ie))))}default:return Promise.reject(`Unsupported platform ${k}`)}},markInitialMetadataFetched:k=>(G,ie)=>(G({type:ne.markInitialMetadataFetched,platform:k}),{[k]:(0,N.Wy)(ie(),{platform:k})}),getMissingIosMetadata:(k,G={})=>(ie,fe)=>{const De=(0,N.vl)(fe(),{omitGroupKey:k});return ie(te.findAppsById(w.cII,De,G)).then(()=>ie(te.markInitialMetadataFetched(w.cII)))},getMissingMacMetadata:(k,G={})=>(ie,fe)=>{const De=(0,N.RX)(fe(),{omitGroupKey:k});return ie(te.findAppsById(w.iQO,De,G)).then(()=>ie(te.markInitialMetadataFetched(w.iQO)))},getMissingAndroidMetadata:(k,G={})=>(ie,fe)=>{const De=(0,N.Zp)(fe(),{omitGroupKey:k});return ie(te.findAppsById(w.CYr,De,G)).then(()=>ie(te.markInitialMetadataFetched(w.CYr)))},getMissingChromeMetadata:(k,G={})=>(ie,fe)=>{const De=(0,N.iL)(fe(),{omitGroupKey:k});return ie(te.findAppsById(w.zws,De,G)).then(()=>ie(te.markInitialMetadataFetched(w.zws)))},getMissingTvosMetadata:(k,G={})=>(ie,fe)=>{const De=(0,N.iu)(fe(),{omitGroupKey:k});return ie(te.findAppsById(w.H9y,De,G)).then(()=>ie(te.markInitialMetadataFetched(w.H9y)))},setAppsInUse:(k,G,ie="global")=>({type:ne.updateInUseApps,platform:k,apps:G,forGroup:ie}),setIosAppsInUse:(k,G="global")=>ie=>(ie(te.setAppsInUse(w.cII,k,G)),ie(te.getMissingIosMetadata())),setMacAppsInUse:(k,G="global")=>ie=>(ie(te.setAppsInUse(w.iQO,k,G)),ie(te.getMissingMacMetadata())),setAndroidAppsInUse:(k,G="global")=>ie=>(ie(te.setAppsInUse(w.CYr,k,G)),ie(te.getMissingAndroidMetadata())),setChromeAppsInUse:(k,G="global")=>ie=>(ie(te.setAppsInUse(w.zws,k,G)),ie(te.getMissingChromeMetadata())),setTvosAppsInUse:(k,G="global")=>ie=>(ie(te.setAppsInUse(w.H9y,k,G)),ie(te.getMissingTvosMetadata())),addCustomIosApp:k=>({type:ne.addCustomApp,platform:w.cII,identifier:k}),addCustomAndroidApp:k=>({type:ne.addCustomApp,platform:w.CYr,identifier:k}),addCustomMacApp:k=>({type:ne.addCustomApp,platform:w.iQO,identifier:k}),addCustomChromeApp:k=>({type:ne.addCustomApp,platform:w.zws,identifier:k}),addCustomApp:(k,G)=>{switch(k){case w.cII:return te.addCustomIosApp(G);case w.iQO:return te.addCustomMacApp(G);case w.CYr:return te.addCustomAndroidApp(G);case w.zws:return te.addCustomChromeApp(G);default:return ee()(`Unsupported platform ${k}.`),null}},runNextSearch:k=>(G,ie)=>{const fe=ie().pccAppSelector,De=fe.nextSearch[k],We=fe.outstandingUserRequests[k];return De!==null&&We<=0?Promise.all([G(te.clearNextSearch(k)),G(te.searchApps(k,De.searchTerm,De.options))]):Promise.resolve()},searchApps:(k,G,ie)=>(fe,De)=>{if(De().pccAppSelector.outstandingUserRequests[k]>0)return Promise.resolve(fe(te.setNextSearch(k,G,ie)));{fe(te.incrementUserRequesting(k));const we=()=>Promise.all([fe(te.decrementUserRequesting(k)),fe(te.runNextSearch(k))]);return fe(te.findApps(k,G,"search",ie)).then(we,we)}},debouncedSearchApps:(()=>{const k=(0,V.A)((we,Ve)=>te.searchApps(w.cII,we,Ve),50),G=(0,V.A)((we,Ve)=>te.searchApps(w.iQO,we,Ve),50),ie=(0,V.A)((we,Ve)=>te.searchApps(w.CYr,we,Ve),50),fe=(0,V.A)((we,Ve)=>te.searchApps(w.zws,we,Ve),50),De=(0,V.A)((we,Ve)=>te.searchApps(w.H9y,we,Ve),50),We=(we,Ve,Pe)=>{switch(we){case w.cII:return k(Ve,Pe);case w.iQO:return G(Ve,Pe);case w.CYr:return ie(Ve,Pe);case w.zws:return fe(Ve,Pe);case w.H9y:return De(Ve,Pe);default:return ee()(`Unsupported platform ${we}.`),[null,Promise.reject()]}};return(we,Ve,Pe)=>Re=>{const[Ke,re]=We(we,Ve,Pe);return[Re(Ke),re.then(Ae=>Re(Ae),Ae=>Ae)]}})()};class Te extends h.A{buildInitialState(){return{systemApps:{[w.cII]:[],[w.CYr]:[]},managedApps:{[w.cII]:[],[w.iQO]:[],[w.CYr]:[],[w.zws]:[],[w.H9y]:[],[w.WUC]:[]},storeApps:{[w.cII]:[],[w.iQO]:[],[w.CYr]:[],[w.zws]:[],[w.H9y]:[],[w.WUC]:[]},appsInUse:{[w.cII]:{},[w.iQO]:{},[w.CYr]:{},[w.zws]:{},[w.H9y]:{},[w.WUC]:{}},customApps:{[w.cII]:[],[w.iQO]:[],[w.CYr]:[],[w.zws]:[],[w.WUC]:[]},initialDataFetched:{[w.cII]:!1,[w.iQO]:!1,[w.CYr]:!1,[w.zws]:!1,[w.H9y]:!1,[w.WUC]:!1},runningSearches:{[w.cII]:[],[w.iQO]:[],[w.CYr]:[],[w.zws]:[],[w.H9y]:[]},searchedTerms:{[w.cII]:[],[w.iQO]:[],[w.CYr]:[],[w.zws]:[],[w.H9y]:[]},nextSearch:{[w.cII]:null,[w.iQO]:null,[w.CYr]:null,[w.zws]:null,[w.H9y]:null},outstandingUserRequests:{[w.cII]:0,[w.iQO]:0,[w.CYr]:0,[w.zws]:0,[w.H9y]:0}}}buildSelectorActions(){return{pccAppSelector:te}}buildSelectorReducer(){const G=ne;return(ie=this.buildInitialState(),fe)=>{switch(fe.type){case G.updateSystemApps:switch(fe.platform){case w.cII:case w.CYr:return{...ie,systemApps:{...ie.systemApps,[fe.platform]:fe.apps}};default:return ie}case G.updateManagedApps:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.WUC:case w.CYr:return{...ie,managedApps:{...ie.managedApps,[fe.platform]:fe.apps}};default:return ie}case G.updateInUseApps:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:{const De=new Set(fe.apps);return{...ie,appsInUse:{...ie.appsInUse,[fe.platform]:{...ie.appsInUse[fe.platform],[fe.forGroup]:[...De]}}}}default:return ie}case G.mergeStoreApps:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.WUC:case w.CYr:{const De=ie.storeApps[fe.platform]||[],We=new Set(fe.apps.map(Re=>Re.identifier)),we=new Set(De.map(Re=>Re.identifier)),Ve=De.map(Re=>{if(We.has(Re.identifier)){const Ke=new Set([...Re.searchTerms,fe.searchTerm]);return{...Re,searchTerms:[...Ke]}}else return Re}),Pe=fe.apps.filter(Re=>!we.has(Re.identifier)).map(Re=>({...Re,searchTerms:[fe.searchTerm]}));return{...ie,storeApps:{...ie.storeApps,[fe.platform]:[...Ve,...Pe]}}}default:return ie}case G.markInitialMetadataFetched:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:return{...ie,initialDataFetched:{...ie.initialDataFetched,[fe.platform]:!0}};default:return ie}case G.addCustomApp:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:{const De=new Set([...ie.customApps[fe.platform],fe.identifier]);return{...ie,customApps:{...ie.customApps,[fe.platform]:[...De]}}}default:return ie}case G.startSearchingFor:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:{const De=new Set([...ie.runningSearches[fe.platform],fe.searchTerm]);return{...ie,runningSearches:{...ie.runningSearches,[fe.platform]:[...De]}}}default:return ie}case G.doneSearchingFor:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:{const De=new Set(ie.runningSearches[fe.platform]);De.delete(fe.searchTerm);const We=fe.markSearched?new Set([...ie.searchedTerms[fe.platform],fe.searchTerm]):ie.searchedTerms[fe.platform];return{...ie,runningSearches:{...ie.runningSearches,[fe.platform]:[...De]},searchedTerms:{...ie.searchedTerms,[fe.platform]:[...We]}}}default:return ie}case G.setNextSearch:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:return{...ie,nextSearch:{...ie.nextSearch,[fe.platform]:{searchTerm:fe.searchTerm,options:fe.options}}};default:return ie}case G.clearNextSearch:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:return{...ie,nextSearch:{...ie.nextSearch,[fe.platform]:null}};default:return ie}case G.incrementUserRequesting:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:return{...ie,outstandingUserRequests:{...ie.outstandingUserRequests,[fe.platform]:ie.outstandingUserRequests[fe.platform]+1}};default:return ie}case G.decrementUserRequesting:switch(fe.platform){case w.cII:case w.iQO:case w.zws:case w.H9y:case w.CYr:return{...ie,outstandingUserRequests:{...ie.outstandingUserRequests,[fe.platform]:ie.outstandingUserRequests[fe.platform]-1}};default:return ie}default:return ie}}}create(){return{actions:this.buildSelectorActions(),actionTypes:ne,reducer:this.buildSelectorReducer()}}}const me=()=>new Te().create(),Me=null;var Ie=e(703314);const ge={requestUser:"REQUEST_USER",clearUser:"CLEAR_USER",deleteUser:"DELETE_USER",updateUser:"UPDATE_USER",requestSession:"REQUEST_SESSION",clearSession:"CLEAR_SESSION",deleteSession:"DELETE_SESSION",updateSession:"UPDATE_SESSION"},de=(k,G)=>{const ie=window.flux||{},fe=/SESSION/g.test(k)?"session":"user";fe&&ie.actions&&ie.actions[fe].update(G)},se={requestUser:()=>({type:ge.requestUser}),clearUser:()=>({type:ge.clearUser}),deleteUser:k=>({type:ge.deleteUser,key:k}),updateUser:k=>G=>{G({type:ge.updateUser,update:k}),de(ge.updateUser,k)},requestSession:()=>({type:ge.requestSession}),clearSession:()=>({type:ge.clearSession}),deleteSession:k=>({type:ge.deleteSession,key:k}),updateSession:k=>G=>{G({type:ge.updateSession,update:k}),de(ge.updateSession,k)}},X={session:{}},Oe=(k=X,G)=>{switch(G.type){case ge.updateUser:return A()(k,{$merge:G.update});case ge.clearUser:return X;case ge.deleteUser:return A()(k,{$unset:[G.key]});case ge.updateSession:return A()(k,{session:{$merge:G.update}});case ge.clearSession:return A()(k,{session:{$set:{}}});case ge.deleteSession:return A()(k,{session:{$unset:[G.key]}});case ge.requestSession:return k.session;default:return k}},H=()=>({actions:se,reducer:Oe,actionTypes:ge});var $=e(986079),le=e(758047),ce=e(310466),ve=e(225980);class _e{constructor(G){this.instructions=G}buildModelsPlugin(){const G=new i.Ay;return g().each(this.instructions.models,(ie,fe)=>{G.addModel(fe,ie)}),g().isEmpty(this.instructions.customModelPlugins)||g().each(this.instructions.customModelPlugins,(ie,fe)=>{G.addPlugin(fe,ie)}),G}buildSelectors(G){const ie=De=>De.locals||{},fe=g().reduce(G,(De,We)=>(g().each(We.selectors,(we,Ve)=>{De[Ve]=we}),De),{});return{getLocals:ie,...fe}}create(){const G=new R.A;return G.addPlugin("models",this.buildModelsPlugin()),G.addPlugin("locals",new _.Ay),G.addPlugin("context",new a.Ay(this.instructions.contextOptions)),(0,ce.DP)().forEach(ie=>G.addPlugin(...ie)),this.instructions.hasChanges&&G.addPlugin("changes",(0,l.A)(Object.keys(this.instructions.models))),this.instructions.hasApiJobs&&G.addPlugin("apiJobs",(0,o.JL)()),this.instructions.hasModal&&G.addPlugin("modal",new n),this.instructions.hasPrefs&&G.addPlugin("prefs",(0,v.mG)()),this.instructions.hasMaps&&G.addPlugin("maps",(0,L.sj)()),this.instructions.hasLiveTools&&G.addPlugin("liveTools",new M.A),this.instructions.hasPaginatedLicenseFetching&&G.addPlugin("paginatedLicenseFetch",P()),this.instructions.hasPccAppSelector&&G.addPlugin("pccAppSelector",me()),this.instructions.hasFlexTables&&G.addPlugin("flexTable",(0,Ie.aF)()),this.instructions.hasUser&&G.addPlugin("user",H()),this.instructions.hasForm&&G.addPlugin("form",(0,$.j)()),this.instructions.hasCameraPlayer&&G.addPlugin("cameraPlayer",(0,le.O7)()),G.addPlugin("extraReducers",(0,ce.NS)(this.instructions.extraReducers)),{...G.create(),selectors:this.buildSelectors(G.plugins)}}}class Ee{constructor(){this.instructions={storeName:"UNNAMED_STORE",models:{},hasChanges:!1,contextOptions:[],customModelPlugins:{},extraReducers:{}},this.singletonStoreToEnhance=null}setSingletonStore(G){return this.singletonStoreToEnhance=G,this}addModel(G,ie={}){return this.instructions.models[G]=ie,this}withCustomKeyedModel(G,ie){return this.addModel(G,{getId:ie}),this}addCustomModelPlugin(G,ie){return this.instructions.customModelPlugins[G]=ie,this}addLazyModel(G){return this.addModel(G,{withFeatures:[D]}),this}addPaginatedModel(G){return this.addModel(G,{withFeatures:[u.Ay]}),this}addLazyPaginatedModel(G){return this.addModel(G,{withFeatures:[D,u.Ay]}),this}withModels(G){return G.map(ie=>this.addModel(ie)),this}withLazyModels(G){return G.map(ie=>this.addLazyModel(ie)),this}withPaginatedModels(G){return G.map(ie=>this.addPaginatedModel(ie)),this}withLazyPaginatedModels(G){return G.map(ie=>this.addLazyPaginatedModel(ie)),this}withContextOptions(G){return this.instructions.contextOptions=G,this}withChanges(){return this.instructions.hasChanges=!0,this}withApiJobs(){return this.instructions.hasApiJobs=!0,this}withLiveTools(){return this.instructions.hasLiveTools=!0,this}withPaginatedLicenseFetch(){return this.instructions.hasPaginatedLicenseFetching=!0,this}withModal(){return this.instructions.hasModal=!0,this}withPrefs(){return this.instructions.hasPrefs=!0,this}withMaps(){return this.instructions.hasMaps=!0,this}withUser(){return this.instructions.hasUser=!0,this}withForm(){return this.instructions.hasForm=!0,this}withPccAppSelector(){return this.instructions.hasPccAppSelector=!0,this}withFlexTables(){return this.instructions.hasFlexTables=!0,this}withCameraPlayer(){return this.instructions.hasCameraPlayer=!0,this}withStoreName(G){return this.instructions.storeName=G,this}withExtraReducer(G,ie){var fe,De;if(!Array.isArray(G)||G.length!==3)throw new Error(`${G} must be an array of length 3`);const[We,we,Ve]=G;if(!((fe=this.instructions.extraReducers[We])===null||fe===void 0||(De=fe[we])===null||De===void 0)&&De[Ve])throw new Error(`Reducer already exists at ${G.join(".")}`);return this.instructions.extraReducers[We]=this.instructions.extraReducers[We]||{},this.instructions.extraReducers[We][we]=this.instructions.extraReducers[We][we]||{},Object.assign(this.instructions.extraReducers[We][we],{[Ve]:ie}),this}initializeStoreObject(G){return this.instructions.hasPrefs&&G.dispatch(v.o1.resetPrefs(f().user_dashboard_prefs)),G}buildTemplate(){return new _e(this.instructions).create()}create(G={}){const ie=this.buildTemplate();let fe;if(G.distinctStore||!this.singletonStoreToEnhance){const We=(window.location.hostname||"").match(/((dev|rails)\.meraki\.com)|(\.(test|dev)\.ikarem\.io)|(^\/)/),we=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}),Ve=We&&we||c.compose;fe=()=>{const Pe=[y.A,ce.kC.middleware,ce.q9.middleware,ce.iK.middleware,ce.J5.middleware,ve.d7.middleware,ve.mM.middleware,ve.v1.middleware,ve.ur.middleware];return(0,c.createStore)(ie.reducer,{},Ve((0,c.applyMiddleware)(...Pe)))}}else this.singletonStoreToEnhance.enhanceStore(this.instructions),fe=()=>this.singletonStoreToEnhance.getStore();return{createStore:()=>{const We=fe();return this.initializeStoreObject(We),We},actions:ie.actions,actionTypes:ie.actionTypes,reducer:ie.reducer,selectors:ie.selectors}}}const Se=Ee},368121:(ae,x,e)=>{e.d(x,{U:()=>u,o:()=>D});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(172981),_=e(731912),a=e(703314),h=e(459324),s=e(967720);const t=["vppAccounts","depAccounts","pccOrgSettingsNodeGroups"],n=(0,f.L)().withStoreName("PccOrganizationSettingsPageStore").withModels(t).withChanges().withModal().withPrefs().withFlexTables().create(),E=n.actions,i=o=>(M,m)=>{const P=(0,l.oq)(m(),{ids:o}),[T,O]=c().partition(P,F=>F.created),v=c().pluck(T,"id"),L=c().pluck(O,"id");M(a.o1.uncheckItems(h.pli,v)),M(E.resetVppAccountsChangesById(v));const B={};L.forEach(F=>{B[F]={deleted:!0}}),M(E.changeManyVppAccounts(B))},R=o=>(M,m)=>{const P=(0,_.$r)(m(),{ids:o}),[T,O]=c().partition(P,F=>F.created),v=c().pluck(T,"id"),L=c().pluck(O,"id");M(a.o1.uncheckItems(h.atB,v)),M(E.resetDepAccountsChangesById(v));const B={};L.forEach(F=>{B[F]={deleted:!0}}),M(E.changeManyDepAccounts(B))},r={name:"",email:"",created:!0,parsed_token:{},allowed_administrators:"",device_assignment:"any"},D={...E,addVppAccount:()=>o=>{o(E.updateModal({vppAccount:{...r,id:c().uniqueId("new_")},showVppAccountModal:!0,errors:(0,h.K$I)(r)}))},editVppAccount:o=>M=>{const m=(0,h.K$I)(o);M(E.updateModalWithErrors({vppAccount:o,showVppAccountModal:!0},m))},markVppAccountsForDeletion:i,addDepAccount:()=>(o,M)=>{const m=(0,_.lr)(M()),P=c().findWhere(m,{access_token:null});if(!c().isUndefined(P))o(E.updateModal({depAccount:P,showDepAccountModal:!0,errors:(0,h.dtw)(P)}));else return(0,s.A)(d()({controller:"organization",action:"pcc_dep_new_cert"}),{credentials:"same-origin"}).then(T=>T.json()).then(T=>{const O=T.depAccount;return o(E.updateModal({depAccount:O,showDepAccountModal:!0,errors:(0,h.dtw)(O)})),T})},editDepAccount:o=>M=>{const m=(0,h.dtw)(o);M(E.updateModalWithErrors({depAccount:o,showDepAccountModal:!0},m))},markDepAccountsForDeletion:R,fetchDepAccounts:()=>o=>(o(E.requestDepAccounts()),(0,s.A)(d()({controller:"organization",action:"pcc_dep_accounts"}),{credentials:"same-origin"}).then(M=>M.json()).then(M=>(o(E.addDepAccounts(M)),M)))},u=()=>n.createStore()},369788:(ae,x,e)=>{e.d(x,{U1:()=>I,o1:()=>S});var W=e(758928),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(281034),_=e(967720);const a=["tags","schedules","scheduleEntries","doNotDisturbConfigs","bluetoothNodeConfigs","bluetoothNodeGroups"],h=(0,f.L)().withStoreName("PccSystemSettingsPageStore").withModels(a).withChanges().withApiJobs().create(),s=h.actions,t=()=>u=>(u(s.requestSchedules()),(0,_.A)(d()({controller:"schedules",action:"json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>{u(s.resetSchedules()),u(s.addSchedules(o))})),n=()=>u=>(u(s.requestScheduleEntries()),(0,_.A)(d()({controller:"schedules",action:"schedule_entries_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>{u(s.resetScheduleEntries()),u(s.addScheduleEntries(o))})),E=()=>u=>(u(s.requestDoNotDisturbConfigs()),(0,_.A)(d()({controller:"configure",action:"do_not_disturb_configs_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>u(s.addDoNotDisturbConfigs(o)))),i=()=>u=>(u(s.requestBluetoothNodeConfigs()),(0,_.A)(d()({controller:"configure",action:"pcc_bluetooth_node_configs_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>u(s.addBluetoothNodeConfigs(o)))),R=u=>o=>{o(s.replaceBluetoothNodeConfigs(u.bluetoothNodeConfigs)),o(s.replaceDoNotDisturbConfigs(u.doNotDisturbConfigs)),o(s.replaceSchedules(u.schedules)),o(s.replaceScheduleEntries(u.scheduleEntries)),o(s.resetAllChanges())},r=()=>u=>(u(s.requestTags()),(0,l._Y)().then(o=>{C().on_load_tags&&C().on_load_tags(o),u(s.addTags(o))})),A=()=>u=>(u(s.requestBluetoothNodeGroups()),(0,_.A)(d()({controller:"configure",action:"bluetooth_beacon_node_groups_json"}),{credentials:"same-origin"}).then(o=>o.json()).then(o=>u(s.addBluetoothNodeGroups(o)))),S=c().extend({},s,{fetchSchedules:t,fetchDoNotDisturbConfigs:E,fetchScheduleEntries:n,replaceAllData:R,fetchTags:r,fetchBluetoothNodeConfigs:i,fetchBluetoothNodeGroups:A}),p=h.actionTypes,I=()=>h.createStore(),U=c().extend({},h,{configureStore:I,actions:S,actionTypes:p});var D=null},371982:(ae,x,e)=>{e.d(x,{Tp:()=>d,U1:()=>f,o1:()=>c});var W=e(652129);const C=["featureDocumentation"],g=(0,W.L)().withStoreName("FeatureDocumentationStore").withModels(C).withChanges().withPrefs().withFlexTables().create(),c=g.actions,y=g.actionTypes,d=g.selectors,f=()=>g.createStore();var l=null},376944:(ae,x,e)=>{e.d(x,{u:()=>d});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c="SmCommands",y=C.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:f=>({updateDeviceAttestation:f.mutation({query:({organizationId:l,endpointId:_})=>({url:`organizations/${l}/sm/commands/refreshAttestation`,method:"POST",body:{endpointId:_}}),invalidatesTags:[c]})})}),{useUpdateDeviceAttestationMutation:d}=y},377034:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(6464),d=e(869592),f=e.n(d);const l={RESET_DHCP_CONF:"RESET_DHCP_CONF",RESET_CLIENT_DESCRIPTIONS:"RESET_CLIENT_DESCRIPTIONS"},_=y.A.createStore({initialize(){this.dhcpConf=void 0,this.clients=void 0,this.bindActions(l.RESET_CLIENT_DESCRIPTIONS,this.onResetClientDescriptions,l.RESET_DHCP_CONF,this.onResetDhcpConf)},onResetDhcpConf(s){this.dhcpConf=s,this.emit("change")},onResetClientDescriptions(s){this.clients=s.clients,this.emit("change")},getForNode(){return{dhcpConf:C().clone(this.dhcpConf),clients:C().clone(this.clients)}}});var a={fetchDhcpConf(s){return c().getJSON(f()({controller:"nodes",action:"dhcp_subnet_json",search:s})).done(t=>{this.dispatch(l.RESET_DHCP_CONF,t&&t.vlans)})},fetchClientDescriptions(){return c().getJSON(f()({controller:"usage",action:"client_descriptions"}),{t0:c().now()/1e3-60*60*24*7}).done(s=>{this.dispatch(l.RESET_CLIENT_DESCRIPTIONS,{clients:s})})}};function h(s){s.store("DhcpStore")||(s.addStore("DhcpStore",new _),s.addActions({dhcp:a}))}},388691:(ae,x,e)=>{e.d(x,{DA:()=>d,FF:()=>l,JO:()=>f});var W=e(551066),C=e(993020),g=e(113363);const c=(_,a)=>{const h=new Headers(a);return h.set("Accept","application/json"),h.set("Content-Type","application/json"),_&&h.set("authorization",`Bearer ${_}`),h},y=_=>async(h,s,t)=>{const n=g.Pu[_],E=s.getState().xdrAuth.region;if(!E)return{error:{status:400,statusText:"Bad Request",data:"No region information received"}};const i=g.Pu[_][E];return(0,W.fetchBaseQuery)({baseUrl:i,prepareHeaders:(r,{getState:A})=>c(A().xdrAuth.authToken,r)})(h,s,t)},d=(0,C.xP)({reducerPath:"xdrVisibilityApi",baseQuery:y("VISIBILITY_BASE_PATH"),endpoints:()=>({})}),f=(0,C.xP)({reducerPath:"xdrConureApi",baseQuery:y("CONURE_BASE_PATH"),endpoints:()=>({})}),l=(0,W.fetchBaseQuery)({baseUrl:"/"})},389336:(ae,x,e)=>{e.d(x,{Ay:()=>s});var W=e(522224),C=e.n(W),g=e(349454),c=e(155830),y=e(14602),d=e(689917);class f extends d.A{constructor(n=[]){super(),this.plugins=n}addPlugin(n){this.plugins=this.plugins.concat(n)}serializedReducers(n){const E=n.map(R=>R.reducer),i=C().extend({},...E.map(R=>R(void 0,{})));return(R=i,r)=>E.reduce((S,p)=>p(S,r),R)}mergedActions(n){const E=n.map(i=>i.actions);return C().extend({},...E)}mergedActionTypes(n){const E=n.map(i=>i.actionTypes);return C().extend({},...E)}create(){const n=this.plugins.map(E=>E.create());return{actions:this.mergedActions(n),actionTypes:this.mergedActionTypes(n),reducer:this.serializedReducers(n)}}}const l=t=>new f(t),_=f;class a extends g.A{addModel(n,E={}){const{withFeatures:i,...R}=E,r=C().isEmpty(i)?new c.Ay(n,R):new _([c.Ay].concat(i).map(A=>new A(n,R)));return this.addPlugin(n,r),this}addModels(n){return n.map(E=>this.addModel(E)),this}addAdditionalPlugins(n){return C().each(n,(E,i)=>this.addPlugin(i,E)),this}}const h=(t,n={})=>new a().addModels(t).addAdditionalPlugins(n).create(),s=a},391328:(ae,x,e)=>{e.d(x,{U1:()=>I,o1:()=>p});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(720506),l=e(652129),_=e(935019);const a=["policies","appliedPolicies"],h=["ssid","groupPolicy","umbrellaContext","legacyUiProps","adminContext","canWriteUmbrellaConfig"],s=(0,l.L)().withStoreName("UmbrellaIntegrationStore").withModels(a).withChanges().withContextOptions(h).withApiJobs().create(),t=s.actions,n=()=>D=>(D(t.requestPolicies()),D(t.updateLocals({isLoading:!0,loadingMsg:"Fetching Umbrella policies",errorMsgs:[]})),c().ajax({url:d()({controller:"configure",action:"umbrella_policies"}),type:"GET",dataType:"json"}).done(u=>{D(t.addPolicies(u.policies)),D(t.updateLocals({isLoading:!1,isPolicyListFetched:!0}))}).fail(u=>{D(t.updateLocals({isLoading:!1,errorMsgs:f.A.parseErrorsFromResponse(u),isPolicyListFetched:!0}))})),E=(D,u,o)=>(M,m)=>{M(t.updateLocals({isLoading:!0,loadingMsg:"Linking Cisco Umbrella account",errorMsgs:[]}));const P=m().context.ssid,T=m().context.groupPolicy,O=m().context.umbrellaContext,v=D?"connect_umbrella_new_account":"connect_umbrella";let L={entityType:P?"ssid":"group_policy",entityNumber:P?P.number:T.group_number};return L=D?{...L,apiKey:u,apiSecret:o}:L,c().ajax({url:d()({controller:"configure",action:v}),type:"POST",dataType:"json",data:L}).done(B=>{let F={...O,umbrellaOriginId:B.umbrellaOriginId};F=D?{...F,umbrellaOrganizationId:B.umbrellaOrganizationId}:F,M(t.updateContext({umbrellaContext:F})),M(t.updateLocals({isLoading:!1}))}).fail(B=>{M(t.updateLocals({isLoading:!1,errorMsgs:f.A.parseErrorsFromResponse(B)}))})},i=()=>(D,u)=>{D(t.updateLocals({isLoading:!0,loadingMsg:"Disconnecting from Cisco Umbrella",errorMsgs:[]}));const o=u().context.ssid,M=u().context.groupPolicy,m=u().context.umbrellaContext,P={entityType:o?"ssid":"group_policy",entityNumber:o?o.number:M.group_number};return c().ajax({url:d()({controller:"configure",action:"disconnect_umbrella"}),type:"POST",dataType:"json",data:P}).done(()=>{D(t.updateContext({umbrellaContext:{...m,umbrellaOriginId:null}})),D(t.updateLocals({isLoading:!1}))}).fail(T=>{D(t.updateLocals({isLoading:!1,errorMsgs:f.A.parseErrorsFromResponse(T)}))})},R=()=>(D,u)=>{D(t.updateLocals({isLoading:!0,loadingMsg:"Fetching Umbrella configuration",errorMsgs:[]}));const o=u().context.ssid,M=u().context.groupPolicy,m={entityType:o?"ssid":"group_policy",entityNumber:o?o.number:M.group_number},P=u().context.umbrellaContext;return c().ajax({url:d()({controller:"configure",action:"applied_umbrella_policies"}),type:"POST",dataType:"json",data:m}).done(T=>{D(t.addAppliedPolicies(T.appliedPolicies)),D(t.updateContext({umbrellaContext:{...P,umbrellaPolicyId:(0,_.rZ)(u()).id}})),D(t.updateLocals({isLoading:!1,isAppliedPolicyIdFetched:!0}))}).fail(T=>{D(t.updateLocals({isLoading:!1,errorMsgs:f.A.parseErrorsFromResponse(T),isAppliedPolicyIdFetched:!0}))})},r=D=>(u,o)=>u(t.updateContext({umbrellaContext:{...o().context.umbrellaContext,umbrellaPolicyId:D}})),A=()=>(D,u)=>{D(t.updateLocals({isLoading:!0,loadingMsg:"Starting provision jobs"})),D(t.updateContext({adminContext:{...u().context.adminContext,adminErrorMsgs:null}})),c().ajax({url:d()({controller:"organization",action:"admin_provision_umbrella_account"}),type:"POST",dataType:"json"}).done(o=>{D(t.updateLocals({isLoading:!1})),D(t.updateContext({adminContext:{...u().context.adminContext,triggeredJob:o.job_name}}))}).fail(o=>{D(t.updateLocals({isLoading:!1})),D(t.updateContext({adminContext:{...u().context.adminContext,adminErrorMsgs:f.A.parseErrorsFromResponse(o)}}))})},S=()=>(D,u)=>{c().ajax({url:d()({controller:"organization",action:"admin_org_lvl_umbrella_account"}),type:"GET",dataType:"json"}).done(o=>{D(t.updateContext({adminContext:{...u().context.adminContext,orgLvlAcct:{integration:o.integration,umbrellaOrganizationId:o.umbrella_organization_id,networkDeviceApiKey:o.network_device_api_key,reportsApiKey:o.reports_api_key}}}))})},p=C().extend({},t,{fetchPolicyList:n,connectUmbrella:E,disconnectUmbrella:i,selectPolicy:r,fetchAppliedPolicy:R,adminTriggerProvision:A,adminFetchOrgLvlUmbrellaAccount:S}),I=()=>s.createStore();var U=null},392835:(ae,x,e)=>{e.d(x,{M5:()=>f,Mt:()=>d,i4:()=>l});var W=e(310466),C=e(869592),g=e.n(C);const c=W.q9.enhanceEndpoints({addTagTypes:["CloudEnrollmentProfile"]}).injectEndpoints({endpoints:_=>({fetchCloudEnrollmentProfiles:_.query({query:({depAccountId:a})=>({url:`manage/configure/pcc_get_cloud_enrollment_profiles?account=${a}`}),providesTags:()=>[{type:"CloudEnrollmentProfile",id:"LIST"}]}),updateCloudEnrollmentProfile:_.mutation({query:({networkId:a,profile:{id:h,...s}})=>({url:`api/v1/networks/${a}/sm/apple/cloudEnrollment/profiles/${h}`,method:"PUT",body:s,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}}),invalidatesTags:["CloudEnrollmentProfile"]}),assignDevicesToCloudEnrollmentProfile:_.mutation({query:a=>({url:g()({controller:"configure",action:"assign_profile"}),method:"POST",body:a,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}})}),assignDevicesToNewCloudEnrollmentProfile:_.mutation({query:a=>({url:g()({controller:"configure",action:"assign_profile"}),method:"POST",body:a,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}})})}),overrideExisting:!1}),{useFetchCloudEnrollmentProfilesQuery:y,useUpdateCloudEnrollmentProfileMutation:d,useAssignDevicesToCloudEnrollmentProfileMutation:f,useAssignDevicesToNewCloudEnrollmentProfileMutation:l}=c},399833:(ae,x,e)=>{e.d(x,{F:()=>t,_:()=>n});var W=e(995843),C=e.n(W),g=e(14602),c=e.n(g),y=e(310466),d=e(917157),f=e(50811),l=e.n(f);const _=E=>{var i;const R=E.match(/^(.*) (\d+)\.(\d+)(?:\.(\d+))?(?:\.(\d+))?$/);return R&&{type:(i=R[1])!==null&&i!==void 0?i:"",major:parseInt(R[2]||"0",10),minor:parseInt(R[3]||"0",10),patch:R[4]?parseInt(R[4],10):0,hotfix:R[5]?parseInt(R[5],10):0}},a=E=>{var i;const R=(i=E.details.find(({name:A})=>A==="Running software version"))===null||i===void 0?void 0:i.value,r=R&&_(R);return r?{...E,version:r}:E},h=E=>{const i=new Set;return E.filter(A=>{const S=`${A.mac}:${A.serial}`;return i.has(S)?!1:(i.add(S),!0)}).map(a).filter(({model:A,version:S})=>!/^(MS290|MS390|C9)/.test(A)||S&&(S?.major>17||S.major===17&&S.minor>=15))},s=y.kC.enhanceEndpoints({addTagTypes:["switchDevices"]}).injectEndpoints({endpoints:E=>({fetchDevices:E.query({query:({organizationId:i,perPage:R,startingAfter:r,endingBefore:A})=>({url:`organizations/${i}/devices${(0,d.DK)({productTypes:["switch"],perPage:R,startingAfter:r,endingBefore:A})}`}),transformResponse:i=>h(i),providesTags:i=>[...(i??[]).map(({name:R})=>({type:"switchDevices",id:R})),{type:"switchDevices",name:"ALL"}]}),fetchDevicesPaginated:E.query({queryFn:async({organizationId:i,perPage:R=1e3,maxRequests:r=9999})=>{const A=[],S=[];if(await(0,f.paginatedApiRequest)(A.push.bind(A),S.push.bind(S),{method:"GET",url:`/api/v1/organizations/${i}/devices${(0,d.DK)({productTypes:["switch"],perPage:R})}`},r),S.length>0)return{error:{errors:S.flat()}};const p=A.flat();return{data:h(p)}},providesTags:i=>[...(i??[]).map(({serial:R})=>({type:"switchDevices",id:R})),{type:"switchDevices",id:"LIST"}]})}),overrideExisting:!1}),{useFetchDevicesQuery:t,useFetchDevicesPaginatedQuery:n}=s},410182:(ae,x,e)=>{e.d(x,{U:()=>s,o:()=>h});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129);const l=["ssids"],_=(0,f.L)().withStoreName("SsidsStore").withModels(l).create(),a=()=>t=>(t(_.actions.requestSsids()),c().ajax(d()({controller:"configure",action:"ssids_json"})).done(n=>{t(_.actions.addSsids(n))}).fail(()=>{t(_.actions.failedRequestingSsids())}).always(()=>{t(_.actions.doneRequestingSsids())})),h=C().extend({},_.actions,{fetchSsids:a}),s=()=>_.createStore()},412776:(ae,x,e)=>{e.d(x,{U1:()=>V,o1:()=>J});var W=e(640173),C=e.n(W),g=e(14602),c=e.n(g),y=e(967720),d=e(869592),f=e.n(d),l=e(941669),_=e.n(l),a=e(522224),h=e.n(a),s=e(652129),t=e(899075),n=e(720506),E=e(775113),i=e(644200),R=e(653806);const r=["radioSettings","rfProfiles","nodeDetails","interference","nodeGroupInfo"],A=(0,s.L)().withStoreName("RadioSettingStore").withModels(r).withModal().withChanges().withMaps().withApiJobs().withPrefs().withFlexTables().withUser().withContextOptions([i.RJ]).create(),S=A.actions,p=w=>{const z=w.map(ne=>({...ne,id:ne.id.length===0?`${ne.node_id}_${ne.interface_number}`:ne.id}));return S.addRadioSettings(z)},I=()=>w=>(w(S.requestRadioSettings()),(0,y.A)(f()({controller:"configure",action:"radio2_json"}),{credentials:"same-origin"}).then(z=>z.json()).then(z=>{w(p(z))})),U=()=>w=>(w(S.requestNodeGroupInfo()),(0,y.A)(f()({controller:"configure",action:"radio3_node_group_info_json"}),{credentials:"same-origin"}).then(z=>z.json()).then(z=>{w(S.addNodeGroupInfo(z))})),D=()=>w=>(w(S.requestRfProfiles()),(0,y.A)(f()({controller:"configure",action:"render_rf_profiles_json"}),{credentials:"same-origin"}).then(z=>z.json()).then(z=>{w(S.addRfProfiles(z.rf_profiles))})),u=()=>w=>(w(S.requestInterference()),(0,y.A)(f()({controller:"configure",action:"interference_json"}),{credentials:"same-origin"}).then(z=>z.json()).then(z=>{const ne=h().extend({},h().map(z.neighbor,(Y,te)=>({id:te,neighbor:Y})),h().map(z.rogue,(Y,te)=>({id:te,rogue:Y})));w(S.addInterference(ne))})),o=()=>w=>{w(S.requestNodeDetails());var z={f:["id","name","serial","mac","channels","tags","lat","lng","product_short_description","external_antennas","detected_antenna_types","device_type","status#","is_gateway","nouns","elevation","elevation_uncertainty","gps_antenna_cable_length"],allf:!0},ne=()=>_().ajax({url:f()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:z}).then(Y=>{w(S.addNodeDetails(h().values(Y.nodes)))});return ne()},M=()=>w=>{w(U()),w(I()),w(o()),w(u()),w(D())},m=()=>w=>{const z={showRadioBulkEditModal:!1,showTwoFourAutoChannelModal:!1,showFiveAutoChannelModal:!1,showSixAutoChannelModal:!1,showAssignRfProfileModal:!1,showCreateRfProfileModal:!1,showDefaultProfileModal:!1,errors:[],isSaving:!1,saveSuccess:null,defaultProfileType:null,currentDefaultProfileId:null,power:0,twoFourChannel:null,fiveChannel:null,sixChannel:null,twoFourAntenna:null,fiveAntenna:null,dualAntenna:null};w(S.updateModal(z))},P=w=>{const z=w();if(h().isEmpty((0,t.Om)(z))&&h().isEmpty((0,t.u2)(z)))return;const ne={};return ne.radio_changes=(0,t.Om)(z),ne.position_changes=(0,t.u2)(z),_().ajax({url:f()({controller:"configure",action:"update_radio3"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({changes:ne})})},T=()=>(w,z)=>{w(S.updateLocals({isSaving:!0})),P(z).done(ne=>{w(S.updateLocals({isSaving:!1,saveSuccess:h().isEmpty(ne.update_messages.errors),errors:ne.update_messages.errors})),h().isEmpty(ne.update_messages.errors)?(w(S.updateLocals({isSaving:!1,saveSuccess:null,errors:[]})),w(S.resetAllChanges()),w(p(ne.new_settings))):w(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:ne.update_messages.errors}))}).fail(ne=>{w(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(ne.responseText).update_messages.errors}))})},O=()=>(w,z)=>{h().isEmpty((0,t.Om)(z()))&&h().isEmpty((0,t.u2)(z()))||(w(S.updateModal({isSaving:!0})),P(z).done(ne=>{w(S.updateModalWithErrors({isSaving:!1,saveSuccess:h().isEmpty(ne.update_messages.errors)},ne.update_messages.errors)),h().isEmpty(ne.update_messages.errors)?setTimeout(()=>{w(S.updateModalWithErrors({showRadioBulkEditModal:!1,showAssignRfProfileModal:!1,isSaving:!1,saveSuccess:null},[])),w(S.updateLocals({selectedRadios:[],selectedRfProfile:null})),w(S.resetAllChanges()),w(D()),w(p(ne.new_settings)),w(o()),m()},3e3):w(S.updateModalWithErrors({isSaving:!1,saveSuccess:!1},ne.update_messages.errors))}).fail(ne=>{var Y;w(S.updateModalWithErrors({isSaving:!1,saveSuccess:!1},(Y=JSON.parse(ne.responseText).update_messages)===null||Y===void 0?void 0:Y.errors))}))},v=(w,z)=>ne=>{const Y={new_default_rf_profile:{rf_profile_id:w,type:z}};Y.new_default_rf_profile={rf_profile_id:w,type:z},ne(S.updateModal({isSaving:!0})),_().ajax({url:f()({controller:"configure",action:"update_default_rf_profile"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(Y)}).done(te=>{ne(S.updateModalWithErrors({isSaving:!1,saveSuccess:te.success},te.errors)),te.success&&setTimeout(()=>{ne(U()),ne(I()),ne(D()),ne(S.updateLocals({selectedRfProfile:null})),ne(S.updateModalWithErrors({showDefaultProfileModal:!1,isSaving:!1,saveSuccess:null},[]))},2e3)}).fail(te=>{ne(S.updateModalWithErrors({isSaving:!1,saveSuccess:!1},n.A.parseErrorsFromResponse(te)))})},L=w=>(z,ne)=>{const Y=ne();if(h().isEmpty((0,t.o4)(Y)))return;const te={};return te.profile_changes={id:w,...(0,t.o4)(Y)[w]},z(S.updateLocals({isSaving:!0})),_().ajax({url:f()({controller:"configure",action:"update_rf_profile"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({changes:te})}).done(Te=>{z(S.updateLocals({isSaving:!1,saveSuccess:h().isEmpty(Te.update_messages.errors),errors:Te.update_messages.errors})),h().isEmpty(Te.update_messages.errors)?(z(S.resetRfProfiles()),z(D()),z(I()),z(U()),setTimeout(()=>{z(S.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))},3e3)):z(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:h().values(Te.update_messages.errors)}))}).fail(Te=>{z(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(Te.responseText).update_messages.errors}))})},B=w=>z=>(z(S.updateLocals({isSaving:!0})),_().ajax({url:f()({controller:"configure",action:"delete_rf_profile"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify({rf_profile_id:w})}).done(ne=>{z(S.updateLocals({isSaving:!1,saveSuccess:h().isEmpty(ne.errors),errors:ne.errors})),h().isEmpty(ne.errors)?(z(U()),z(I()),z(S.resetRfProfiles()),z(D()),z(S.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))):z(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:ne.errors}))}).fail(ne=>{z(S.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(ne.responseText).errors}))})),F=Mkiconf.org_id,K=w=>E.A.urlForApi({version:"v1",path:`devices/${w}/wireless/radio/afc/position`}).replace("/api/v1",""),b=(w,z=!1)=>(ne,Y)=>{ne(S.updateLocals({elevationIsSaving:!0,elevationErrors:[]}));const te=Y();if(h().isEmpty((0,t.u2)(te)))return;const Te=(0,t.u2)(te);if(z&&Object.values(Te).some(Me=>h().isUndefined(Me.elevation)||h().isNaN(Me.elevation))){ne(S.updateLocals({elevationErrors:["Please enter a height."],elevationIsSaving:!1}));return}const me=Object.keys(Te).map(Me=>{const Ie=w.find(ge=>ge.id===Me).serial;return{resource:K(Ie),operation:"update",body:(({elevation:ge,elevation_uncertainty:de,gps_antenna_cable_length:se})=>({elevation:{height:ge,uncertainty:de},gps:{antenna:{cableLength:se}}}))(Te[Me])}});return(0,R.jO)(F,me,{synchronous:me.length<=10}).then(()=>{ne(S.resetNodeDetailsChanges()),ne(S.updateLocals({elevationIsSaving:!1,elevationSaveSuccess:!0})),z?setTimeout(()=>{ne(o()),ne(I()),ne(S.updateModal({showSetHeightModal:!1})),ne(S.updateLocals({elevationSaveSuccess:!1})),m()},1e3):ne(o())}).catch(Me=>{const Ie=["Error saving configuration, please try again"],ge=Me.batchFailedOrPending?Me.errors:Ie;return ne(S.updateLocals({elevationIsSaving:!1,elevationErrors:ge}))})},q=()=>w=>{w(S.updateModal({isSaving:!0})),_().ajax({url:f()({controller:"configure",action:"run_channel_assignment"}),type:"POST"}).done(()=>{w(S.updateModal({isSaving:!1,saveSuccess:!0}))}).fail(()=>{w(S.updateModal({isSaving:!1,saveSuccess:!1}))})},j=()=>w=>{w(S.updateModal({refreshSaving:!0})),_().ajax({url:f()({controller:"configure",action:"run_afc_refresh"}),type:"POST"}).done(()=>{w(S.updateModal({refreshSaving:!1,refreshSuccess:!0})),setTimeout(()=>{w(S.updateModal({refreshSuccess:!1,showAfcRefreshModal:!1}))},5e3)}).fail(z=>{w(S.updateModal({refreshSaving:!1,refreshSuccess:!1,refreshErrors:n.A.parseErrorsFromResponse(z)}))})},J=h().extend({},S,{initializeRadios:M,initializeModal:m,submitModal:O,submitRadio:T,submitProfile:L,setDefaultProfile:v,deleteProfile:B,updateAutoChannels:q,refreshAfc:j,fetchNodeGroupInfo:U,submitHeightForAps:b}),ee=A.actionTypes,V=()=>A.createStore();var N=null},419934:(ae,x,e)=>{e.d(x,{U1:()=>X,o1:()=>ge});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(941669),f=e.n(d),l=e(869592),_=e.n(l),a=e(894731),h=e(490167),s=e(657894),t=e(640593),n=e(269403),E=e(274061),i=e(523348),R=e(421132),r=e(395073),A=e(692301),S=e(994588),p=e(635968),I=e(801730),U=e(917157);const{getReducedNodeGroupsChanges:D}=(0,A.NN)("routerSettingsNodeGroups"),u=["routerSettingsNodeGroups","wiredConfig","vlans","groupPolicies","perPortVlanSettings","radiusServers","staticRoutes","sourceBasedStaticRoutes","singleLan","vlanModal","perPortVlanSettingsModal","staticRouteModal","lanModal","adaptivePolicyGroups","ipv6ComplianceSettings","wanPorts"],o="VLAN_MODAL",M="LAN_MODAL",m="STATIC_ROUTE_MODAL",P="PORT_VLANS_MODAL",T=(0,y.L)().withStoreName("RouterSettingsStore").withModels(u).withChanges().withPrefs().withFlexTables().withModal().create(),O=T.actions,v=H=>$=>{if($(O.resetAllChanges()),$(O.addRouterSettingsNodeGroups(H.nodeGroup)),$(O.addWiredConfig(H.wiredConfig)),$(O.addGroupPolicies(H.groupPolicies)),$(O.addPerPortVlanSettings(H.perPortVlanSettings)),$(O.addRadiusServers(H.radiusServers)),$(O.addStaticRoutes(H.staticRoutes)),$(O.addSourceBasedStaticRoutes(H.srcBasedStaticRoutes)),$(O.addAdaptivePolicyGroups(H.adaptivePolicyGroups)),$(O.addIpv6ComplianceSettings(H.ipv6ComplianceSettings)),H.locals&&H.locals.isIpv6Capable){const ce={},ve={};Object.entries(H.singleLan).forEach(([_e,Ee])=>{ce[_e]={...Ee,prefixConfigByOrigin:(0,S.A_)(Ee.prefix_configs)}}),Object.entries(H.vlans).forEach(([_e,Ee])=>{ve[_e]={...Ee,prefixConfigByOrigin:(0,S.A_)(Ee.prefix_configs)}}),$(O.addSingleLan(ce)),$(O.addVlans(ve))}else $(O.addSingleLan(H.singleLan)),$(O.addVlans(H.vlans));$(O.updateLocals({ipv6ComplianceSettings:H.ipv6ComplianceSettings})),H.defaultPrefixConfigs&&$(O.updateLocals({defaultPrefixConfigByOrigin:(0,S.A_)(H.defaultPrefixConfigs)})),H.delegatedPrefixConfigs&&$(O.updateLocals({delegatedPrefixConfigs:H.delegatedPrefixConfigs})),$(O.updateLocals({mxVrfs:H.mxVrfs||[]}));const le=c().any(H.vlans,ce=>c().any(c().values(ce.uplink_nat_settings),ve=>ve!==null));$(O.updateLocals(c().extend(H.locals,{vlanNatOverride:le})))},L=()=>(H,$)=>{const le=$(),ce=c().first(c().values((0,i.v8)(le))),ve=c().uniqueId(),_e={guid:ve,name:"Default",vlan_id:"1",default_group_policy_id:"",vpn_mode:"off",created:!0},Ee=c().extend(_e,c().pick(ce,"subnet","router_ip"));H(O.changeVlans(ve,Ee));const k=c().keys((0,t.UO)(le)).reduce((G,ie)=>(G[ie]={native_vlan_guid:ve},G),{});H(O.changeManyPerPortVlanSettings(k))},B=(H,$)=>{var le,ce;const ve=H==null||(le=H.locals)===null||le===void 0?void 0:le.hasNUplinksPortAbstractions,{organizationId:_e,serial:Ee}=(ce=H?.portAbstractions)!==null&&ce!==void 0?ce:{};if(ve&&_e&&Ee){const Se=(0,U.DK)({serials:[Ee]});$(O.requestPerPortVlanSettings()),f().getJSON(_()({controller:`api/v1/organizations/${_e}/appliance/devices/interfaces/ports/byDevice${Se}`,global:!0})).done(k=>{var G,ie;const fe=(0,p.oo)(k,(0,h.vO)(H.vlans),{hasMxSgtPortClassification:(G=H.locals)===null||G===void 0?void 0:G.hasMxSgtPortClassification,hasMxSgt:(ie=H.locals)===null||ie===void 0?void 0:ie.hasMxSgt});$(O.addPerPortVlanSettings(fe));const De=(0,p.Sk)(k);$(O.addWanPorts(De))})}},F=()=>H=>{f().getJSON(_()({controller:"configure",action:"router_settings_json"})).done($=>{H(v($)),B($,H)})},K=H=>$=>{c().has(H,"vlans")&&$(O.deleteVlansById(H.vlans)),c().has(H,"staticRoutes")&&$(O.deleteStaticRoutesById(H.staticRoutes)),c().has(H,"radiusServers")&&$(O.deleteRadiusServersById(H.radiusServers)),c().has(H,"srcBasedStaticRoutes")&&$(O.deleteSourceBasedStaticRoutesById(H.srcBasedStaticRoutes))},b=H=>$=>{$(O.resetVlanModal()),$(O.updateVlanModal([c().extend({id:o},H)]))},q=H=>$=>{$(O.changeVlanModal(o,H))},j=(H,$,le)=>(ce,ve)=>{const _e=ve().locals.ipv6ComplianceSettings;_e[le][$]=H,ce(O.updateLocals({ipv6ComplianceSettings:_e}))},J=()=>H=>{H(O.deleteVlanModalById([o]))},ee=H=>$=>{$(O.resetPerPortVlanSettingsModal()),$(O.updatePerPortVlanSettingsModal([c().extend({id:P},H)]))},V=H=>$=>{$(O.changePerPortVlanSettingsModal(P,H))},N=H=>$=>{$(O.resetStaticRouteModal()),$(O.updateStaticRouteModal([c().extend({id:m},H)]))},w=H=>$=>{$(O.changeStaticRouteModal(m,H))},z=()=>H=>{H(O.deleteStaticRouteModalById([m]))},ne=H=>$=>{$(O.resetLanModal()),$(O.updateLanModal([c().extend({id:M},H)]))},Y=H=>$=>{$(O.changeLanModal(M,H))},te=(H,$)=>{if(!$)return{};const le={};return Object.values($).forEach(ce=>{const ve=H[ce.default_group_policy_id];ve&&(le[ve.id]=ve)}),le},Te=H=>{const $={};return Object.keys(H).forEach(le=>{const{groupPolicyName:ce,inVpn:ve,prefixConfigByOrigin:_e,hasIPv6:Ee,enabledUplinks:Se,mxIPs:k,vrf_id:G,...ie}=H[le];$[le]={...ie},_e&&($[le].prefix_configs=(0,S.Lq)(_e)),"vrf_id"in H[le]&&($[le].vrf_id=G===""?null:G)}),$},me=(H,$,le,ce)=>{let ve=c().isEmpty(H.errors);ve&&!c().isEmpty(H.confirmations)&&(ve=null);const _e={isSaving:!1,saveSuccess:ve};if(ve)le(v(H.new_settings)),B(H.new_settings,le),le(K(H.deletions));else if(c().isNull(ve))_e.confirmations=H.confirmations;else{_e.errors=H.errors;const Ee=H.extra_error_data,Se=c().keys(Ee),k=c().reduce(c().compact(c().map(Se,De=>/(wired_vlans|wired_template_vlans)\[(.*)\]\[(.*)\]/.exec(De))),(De,We)=>(De[We[2]]={hasErrors:!0},De),{});$.vlans&&Object.keys($.vlans).forEach(De=>{k[De]||(k[De]={hasErrors:!1})}),le(O.changeManyVlans(k));const G=c().reduce(c().compact(c().map(Se,De=>/static_routes\[(.*)\]\[(.*)\]/.exec(De))),(De,We)=>(De[We[1]]={hasErrors:!0},De),{});le(O.changeManyStaticRoutes(G));const ie=c().chain(Se).map(De=>/source_based_routes\[(.*)\]\[(.*)\]/.exec(De)).compact().reduce((De,We)=>(De[We[1]]={hasErrors:!0},De),{}).value();le(O.changeManySourceBasedStaticRoutes(ie));const fe=c().chain(Se).map(De=>/per_port_vlans\[(.*)\]\[(.*)\]/.exec(De)).compact().reduce((De,We)=>(De[We[1]]={hasErrors:!0},De),{}).value();if(Ee.radius_servers){const De=c().reduce(c().pick((0,t.cF)(ce),We=>We.enabled==="true"&&We.is_trunk==="false"&&We.access_policy_type&&We.access_policy_type!=="open"),(We,we,Ve)=>(We[Ve]={hasErrors:!0},We),{});c().extend(fe,De)}le(O.changeManyPerPortVlanSettings(fe))}le(O.updateLocals(_e))},Me=(H,$,le,ce)=>{le(O.updateLocals({backgroundJobFetcherPoll:{id:H.enqueued.job.id,type:I._R.UpdateRouterSettings2Job,cb:(ve,_e)=>{if(_e){le(O.updateLocals({isSaving:!1,saveSuccess:!1,errors:_e}));return}const Se=JSON.parse(ve.jobs)[0],k=Se.job_data_json?JSON.parse(Se.job_data_json):null;return k?.message&&le(O.updateLocals({saveMessage:k.message})),Se.status===I.E$.complete?(me(k,$,le,ce),le(O.updateLocals({saveMessage:null,backgroundJobFetcherPoll:!1,errors:k.errors?k.errors:[]})),!1):Se.status===I.E$.failed?(le(O.updateLocals({errors:["There was an error submitting the request, please contact support"],saveMessage:null,isSaving:!1,backgroundJobFetcherPoll:!1})),!1):!0}}}))},Ie=H=>($,le)=>{$(O.updateLocals({isSaving:!0,confirmations:[],saveSuccess:null,errors:[]}));const ce=le(),ve={};if(c().isEmpty((0,a.zP)(ce))||(ve.wiredConfig=(0,a.zP)(ce)),c().isEmpty((0,t.CN)(ce))||(ve.perPortVlanSettings=(0,t.CN)(ce)),c().isEmpty((0,n.cl)(ce))||(ve.radiusServers=(0,n.cl)(ce)),c().isEmpty((0,E.q8)(ce))||(ve.staticRoutes=(0,E.q8)(ce)),c().isEmpty(D(ce))||(ve.nodeGroup=D(ce)),c().isEmpty((0,R.h)(ce))||(ve.srcBasedStaticRoutes=(0,R.h)(ce)),c().isEmpty((0,i.t7)(ce))||(ve.singleLan=Te((0,i.t7)(ce))),c().isEmpty((0,h.EB)(ce))||(ve.vlans=Te((0,h.EB)(ce))),!c().isEmpty((0,s.lE)(ce))){const Ee=(0,s.lE)(ce);ve.groupPolicies=te(Ee,ve.vlans)}c().isEmpty((0,r.Rh)(ce))||(ve.ipv6ComplianceSettings=(0,r.Rh)(ce));const _e={changes:ve};H&&(_e.confirm_changes_input=!0),f().ajax({url:_()({controller:"configure",action:"update_router_settings2"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(_e)}).done(Ee=>{Ee.job?($(O.updateLocals({errors:[`Already processing a request to save settings
            ${Ee.start_polling?"":"on a separate network"}, please wait a minute..`]})),Ee.start_polling&&setTimeout(()=>{Ee.enqueued={job:Ee.job},Me(Ee,ve,$,ce)},2e3)):Ee.enqueued?($(O.updateLocals({saveMessage:"This request can take a couple of minutes, please do not leave the page..."})),Me(Ee,ve,$,ce)):me(Ee,ve,$,ce)}).fail(Ee=>{$(O.updateLocals({isSaving:!1,saveSuccess:!1,errors:[Ee.responseText]}))})},ge=c().extend({},O,{fetchSettings:F,populateVlanModal:b,changeVlanModal:q,clearVlanModal:J,populatePerPortVlanSettingsModal:ee,changePerPortVlanSettingsModal:V,populateStaticRouteModal:N,changeStaticRouteModal:w,clearStaticRouteModal:z,populateLanModal:ne,changeLanModal:Y,submit:Ie,enableVlansFirstTime:L,changeIpv6ComplianceSettingsState:j}),de=c().extend({},ge,{initializeRouterSettings:v}),se=T.actionTypes,X=()=>T.createStore();var Oe=null},428659:(ae,x,e)=>{e.d(x,{LE:()=>h,Pp:()=>s,_U:()=>_,mw:()=>d,qe:()=>a,vt:()=>l});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466),y=e(986123);const d=(0,g.L)().create().createStore(),f=(t,n,E,i,R,r,A)=>{const S=`organizations/${t}/switch/ports/profiles/automations?`,p=[];return n&&p.push(`ids[]=${n}`),(0,y.Ed)(E)&&p.push(`searchQuery=${E}`),(0,y.Ed)(i)&&p.push(`perPage=${i}`),(0,y.Ed)(A)&&p.push(`networkId=${A}`),(0,y.Ed)(R)&&p.push(`startingAfter=${R}`),(0,y.Ed)(r)&&p.push(`endingBefore=${r}`),S+p.join("&")},l=c.kC.enhanceEndpoints({addTagTypes:["portProfileAutomation"]}).injectEndpoints({endpoints:t=>({fetchPortProfileAutomations:t.query({query:({organizationId:n,ids:E,search_query:i,per_page:R,starting_after:r,ending_before:A,networkId:S})=>({url:f(n,E,i,R,r,A,S)}),providesTags:n=>{var E;return[...((E=n?.items)!==null&&E!==void 0?E:[]).map(({id:i})=>({type:"portProfileAutomation",id:i})),{type:"portProfileAutomation",id:"ALL"}]}}),createPortProfileAutomation:t.mutation({query:({organizationId:n,automationDetail:E})=>({url:`organizations/${n}/switch/ports/profiles/automations`,method:"POST",body:E}),invalidatesTags:()=>[{type:"portProfileAutomation",id:"ALL"}]}),updatePortProfileAutomation:t.mutation({query:({organizationId:n,automationDetail:E})=>({url:`organizations/${n}/switch/ports/profiles/automations/${E.id}`,method:"PUT",body:E}),invalidatesTags:(n,E,i)=>[{type:"portProfileAutomation",id:i.automationDetail.id}]}),deletePortProfileAutomation:t.mutation({query:({organizationId:n,id:E})=>({url:`organizations/${n}/switch/ports/profiles/automations/${E}`,method:"DELETE"}),invalidatesTags:()=>[{type:"portProfileAutomation",id:"ALL"}]})}),overrideExisting:!1}),{useFetchPortProfileAutomationsQuery:_,useCreatePortProfileAutomationMutation:a,useUpdatePortProfileAutomationMutation:h,useDeletePortProfileAutomationMutation:s}=l},451984:(ae,x,e)=>{e.d(x,{U1:()=>y});var W=e(652129);const C=(0,W.L)().withStoreName("MerakiMapsStore").withMaps().withPrefs().create(),g=C.actions,c=C.actionTypes,y=()=>C.createStore();var d=null},452669:(ae,x,e)=>{e.d(x,{mv:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.injectEndpoints({endpoints:d=>({fetchNetwork:d.query({query:({networkId:f})=>({url:`networks/${f}`})})})}),{useFetchNetworkQuery:y}=c},457697:(ae,x,e)=>{e.d(x,{Af:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.injectEndpoints({endpoints:d=>({fetchWarmSpare:d.query({query:({networkId:f})=>({url:`networks/${f}/appliance/warmSpare`})})})}),{useFetchWarmSpareQuery:y}=c},460441:(ae,x,e)=>{e.d(x,{W2:()=>_});var W=e(995843),C=e.n(W),g=e(652129),c=e(310466),y=e(917157),d=e(222855);const f=(0,g.L)().create().createStore(),l=c.kC.injectEndpoints({endpoints:a=>({fetchClients:a.query({async queryFn({networkId:h,perPage:s,timespan:t,getInternalData:n}){const{data:E,errors:i}=await(0,d.LiY)({method:"GET",url:`/api/v1/networks/${h}/clients${(0,y.DK)({timespan:t,getInternalData:n,perPage:s||"1000"})}`});return i.length>0?{error:{errors:i.flat()}}:{data:E.flat()}}})})}),{useFetchClientsQuery:_}=l},462820:(ae,x,e)=>{e.d(x,{A:()=>c});var W=e(4933);const C=(0,W.A)("CYCLOPS_NETWORK_ADMINS_STORE",{idKey:"encrypted_id"}),g={reset(y){this.dispatch(C.constants.RESET,y)},update(y){this.dispatch(C.constants.UPDATE,y)},remove(y){this.dispatch(C.constants.REMOVE,{encrypted_id:y})}},c=y=>{y.addStore("CyclopsNetworkAdminsStore",C),y.addActions({cyclopsNetworkAdmins:g})}},463575:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("WIRED_VLAN_STORE",{idKey:"guid",indices:["name"]}),f={fetch(){return C().getJSON(c()({controller:"configure",action:"wired_vlans_config_hash"})).done(_=>{this.dispatch(d.constants.RESET,_)})},updateTemplateChildDhcp(_){return C().ajax({url:c()({controller:"configure",action:"update_template_child_dhcp"}),type:"POST",contentType:"application/json",data:JSON.stringify(_),dataType:"json"})}};function l(_){_.addStore("WiredVlanStore",d),_.addActions({wiredVlans:f})}},464827:(ae,x,e)=>{e.d(x,{U1:()=>y});var W=e(652129);const C=(0,W.L)().withStoreName("VideoWallStore").withCameraPlayer().create(),g=C.actions,c=C.selectors,y=()=>C.createStore();var d=null},465857:(ae,x,e)=>{e.d(x,{CC:()=>d,MB:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["switchMtu"]}).injectEndpoints({endpoints:f=>({fetchSwitchMtu:f.query({query:l=>({url:`networks/${l}/switch/mtu`}),providesTags:(l,_,a)=>[{type:"switchMtu",id:a}]}),updateSwitchMtu:f.mutation({query:({networkId:l,switchMtuConfiguration:_})=>({url:`networks/${l}/switch/mtu`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"switchMtu",id:a.networkId}]})}),overrideExisting:!1}),{useFetchSwitchMtuQuery:y,useUpdateSwitchMtuMutation:d}=c},466544:(ae,x,e)=>{e.d(x,{A:()=>S});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(6464),d=e(646894),f=e.n(d),l=e(758928),_=e.n(l),a=e(869592),h=e.n(a);const s="PREF_STORE_",t={RESET:`${s}RESET`,UPDATE:`${s}UPDATE`},n=y.A.createStore({initialize(){this.prefs={},this.bindActions(t.RESET,this.onReset,t.UPDATE,this.onUpdate)},onReset(p){this.prefs=p||{},this.emit("change")},onUpdate(p){C().each(p,(I,U)=>{C().isUndefined(this.prefs[U])&&(this.prefs=f()(this.prefs,{$set:{[U]:{}}}))}),this.prefs=f()(this.prefs,p),this.emit("change")},get(p){return C().clone(this.prefs[p])||{}}});var E=new Date,i=new Date;function R(){E=new Date,c().ajax({url:h()({controller:"dashboard",action:"quiet_update"}),type:"POST",contentType:"application/json",data:JSON.stringify({user_prefs:window.flux.store("PrefStore").prefs})})}var r=C().debounce(R,2e3),A={reset(p){this.dispatch(t.RESET,p)},update(p){this.dispatch(t.UPDATE,p),i=new Date,r.call(this)}};c()(window).one("beforeunload",()=>{i>E&&R()});function S(p){p.store("PrefStore")||(p.addStore("PrefStore",new n),p.addActions({prefs:A}),p.actions.prefs.reset(_().user_dashboard_prefs))}},468141:(ae,x,e)=>{e.d(x,{U1:()=>T,o1:()=>M});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(254391),_=e(11389);const a=["deployments","configurations"],h=(0,f.L)().withStoreName("CloudOnRamps").withModels(a).withChanges().create(),s=h.actions,t="An unexpected error has occurred. Please try again.",n={isLoading:!0},E={isLoading:!1},i=v=>({...v,...E}),R=(v={})=>{if(v.responseText)try{return JSON.parse(v.responseText).errors||[t]}catch{return[t]}const{status:L={}}=v;return L.failed?L.errors||[t]:[]},r=({clientId:v,clientSecret:L})=>B=>{B(s.changeConfigurations(_.B0,n));const F=c().ajax({url:d()({controller:"umbrella_org_config",action:"update"}),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({umbrella_org_config:{umbrella_management_api_key:v,umbrella_management_api_secret:L},api_key_name:"management"})});return B(s.updateLocals({errors:[]})),F.done(()=>{B(s.updateConfigurations([{id:_.B0,clientId:v,verified:!0,...E}]))}).fail(K=>B(s.updateLocals({errors:R(K)}))).always(()=>B(s.changeConfigurations(_.B0,E)))},A=v=>(L,B)=>{const F=v.provider;L(s.changeConfigurations(F,n));const K=c().ajax({url:d()({controller:"cloud_on_ramps",action:"deployments"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(v)}),b=B(),q=(0,l.e)(b);return K.done(j=>{const J=R(j);J&&L(s.updateLocals({errors:J})),q.push(i(j)),L(s.replaceDeployments(q))}).fail(j=>L(s.updateLocals({errors:R(j)}))).always(()=>L(s.changeConfigurations(F,E)))},S=()=>v=>(v(s.changeConfigurations(_.B0,n)),c().ajax({url:d()({controller:"umbrella_org_config",action:"default"}),type:"DELETE",contentType:"application/json"}).done(()=>{v(s.updateConfigurations([{id:_.B0,clientId:"",verified:!1,...E}]))}).fail(B=>v(s.updateLocals({errors:R(B)}))).always(()=>v(s.changeConfigurations(_.B0,E)))),p=v=>L=>(L(s.changeDeployments(v,n)),c().ajax({url:d()({controller:"cloud_on_ramps",action:`deployments/${v}`}),type:"DELETE"}).done(F=>{if(C().isEmpty(F))return L(s.deleteDeploymentsById([v]));const K=R(F);L(s.updateLocals({errors:K})),L(s.changeDeployments(v,E)),L(s.updateDeployments([F]))}).fail(F=>{L(s.updateLocals({errors:R(F)})),L(s.changeDeployments(v,E))})),I=()=>v=>{v(s.requestDeployments()),c().getJSON(d()({controller:"cloud_on_ramps",action:"deployments_list_json"})).done(B=>{const F=B.map(K=>i(K));v(s.addDeployments(F))})},U=()=>v=>{v(s.requestConfigurations()),c().getJSON(d()({controller:"cloud_on_ramps",action:"configurations_list_json"})).done(B=>{const F=B.map(K=>i(K));v(s.addConfigurations(F))})},u={fetchAvailableRegions:()=>v=>{v(s.updateLocals({isFetchingAvailableRegions:!0})),c().getJSON(d()({controller:"cloud_on_ramps",action:"available_regions"})).done(B=>{v(s.updateLocals({availableRegions:B})),v(s.updateLocals({isFetchingAvailableRegions:!1}))})},fetchDeployments:I,addDeployment:A,deleteDeployment:p,updateUmbrellaConfiguation:r,deleteUmbrellaConfiguation:S},o={fetchConfigurations:U},M=C().extend({},s,u,o),m=h.actionTypes,P=h.selectors,T=()=>h.createStore();var O=null},473508:(ae,x,e)=>{e.d(x,{U1:()=>h,o1:()=>s});var W=e(941669),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129);const d=["nodes"],f=(0,y.L)().withStoreName("MspPortalStore").withModels(d).withMaps().create(),l=f.actions,_=f.actionTypes,a=n=>E=>{E(l.requestNodes());const i=c().map(n,R=>({type:"POST",url:`${R.shard_url}get_msp_map_data_react`,data:{org_ids:R.org_ids,eid:Mkiconf.user_eid},xhrFields:{withCredentials:!0},success(r){E(l.updateNodesWithMerge(r.map(A=>{const S=Mkijson.ng.hash[A.network_id],p=c().extend({},A);return S&&(p.locale_id=S.locale_id),p})))}}));return C().multipleAjax(i).done(()=>{E(l.doneRequestingNodes())})},h=()=>f.createStore(),s=c().extend({},l,{fetchNodes:a});var t=null},475760:(ae,x,e)=>{e.d(x,{U1:()=>A,o1:()=>M});var W=e(869592),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(652129),l=e(862024),_=e(620185),a=e(106456),h=e(859854);const s=["portForwardingRules","oneToOneNatRules","oneToManyNatRules"],t=(0,f.L)().withStoreName("FirewallExceptionsStore").withModels(s).withChanges().create(),n=t.actions,E=n.updateLocals,i=m=>c().each(m,(P,T)=>{P.id=T.toString()}),R=()=>(m,P)=>(m(n.requestPortForwardingRules()),m(n.requestOneToOneNatRules()),m(n.requestOneToManyNatRules()),d().getJSON(C()({controller:"configure",action:"wired_config_json"}),{credentials:"same-origin"}).then(T=>{m(n.addPortForwardingRules(i(T.port_forwarding_exceptions))),c().each(T.one_to_one_nat_exceptions,v=>{i(v.allowed_inbound)}),m(n.addOneToOneNatRules(i(T.one_to_one_nat_exceptions))),c().each(T.one_to_many_nat_exceptions,v=>{i(v.port_rules)}),m(n.addOneToManyNatRules(i(T.one_to_many_nat_exceptions)));const O=(0,h.b)(P());m(E({outboundFirewallRules:i(T.outbound_firewall_rules),cellularFirewallRules:i(T.cellular_firewall_rules),isCellFirewallOnSecondaryUplinksEnabled:O.isCellFirewallOnSecondaryUplinksEnabled,done:!0}))})),r=t.actionTypes,A=()=>t.createStore(),S=(m,P)=>{const T=c().isEmpty(P)?(0,h.b)(m()).isCellFirewallOnSecondaryUplinksEnabled:m().locals.isCellFirewallOnSecondaryUplinksEnabled;return E({saving:!1,hasChanges:!c().isEmpty(P),firewallSaveSuccess:c().isEmpty(P),firewallSaveErrors:P,isCellFirewallOnSecondaryUplinksEnabled:T})},p=m=>S(m,null),I=(m,P)=>S(m,P),U=(m,P)=>{c().isArray(P.port_forwarding_rules)&&m(n.addPortForwardingRules(i(P.port_forwarding_rules))),c().isEmpty(P.one_to_one_nat_rules)||(c().each(P.one_to_one_nat_rules,T=>{i(T.allowed_inbound)}),m(n.updateOneToOneNatRules(i(P.one_to_one_nat_rules)))),c().isEmpty(P.one_to_many_nat_rules)||(c().each(P.one_to_many_nat_rules,T=>{i(T.port_rules)}),m(n.updateOneToManyNatRules(i(P.one_to_many_nat_rules))))},D=(m,P)=>{c().isEmpty(P.deleted_one_to_one_nat_rules)||m(n.deleteOneToOneNatRulesById(P.deleted_one_to_one_nat_rules)),c().isEmpty(P.deleted_one_to_many_nat_rules)||m(n.deleteOneToManyNatRulesById(P.deleted_one_to_many_nat_rules))},u=()=>(m,P)=>{m(E({saving:!0}));const T=(0,h.b)(P()),O={port_forwarding_settings:(0,l.Kd)(P()),one_to_one_nat_settings:(0,_.yR)(P()),one_to_many_nat_settings:(0,a.BQ)(P()),is_cell_firewall_on_secondary_uplinks_enabled:T.isCellFirewallOnSecondaryUplinksEnabled};return d().post(C()({controller:"configure",action:"update_template_child_firewall_rules"}),{changes:JSON.stringify(O)}).done(v=>{c().isEmpty(v.errors)?(c().isEmpty(v.updates)||U(m,v.updates),c().isEmpty(v.deleted)||D(m,v.deleted),m(p(P,null)),m(n.resetAllChanges())):m(I(P,v.errors))}).fail(()=>{m(I(P,["Failed to save."]))})};var o=null;const M=c().extend({},n,{fetchWiredConfig:R,markSaveSuccess:p,markSaveErrors:I,submitChanges:u})},476015:(ae,x,e)=>{e.d(x,{A:()=>a});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(4933);const l=(0,f.A)("DETECTED_SWITCH_STACKS_STORE"),_={fetch(){return c().get(d()({controller:"configure",action:"detected_switch_stacks_json"})).done(h=>{const s=C().map(h,(t,n)=>({id:n,stack_members:t}));this.dispatch(l.constants.RESET,s)})}};function a(h){h.store("DetectedSwitchStackStore")||(h.addStore("DetectedSwitchStackStore",l),h.addActions({detectedSwitchStacks:_}))}},493173:(ae,x,e)=>{e.d(x,{o1:()=>U});var W=e(758928),C=e.n(W),g=e(653806),c=e(869592),y=e.n(c),d=e(941669),f=e.n(d),l=e(522224),_=e.n(l),a=e(652129),h=e(483194);const s=["cameraWirelessProfiles"],t=(0,a.L)().withStoreName("CameraWirelessProfileStore").withModels(s).withModal().withChanges().withApiJobs().withPrefs().withFlexTables().create(),n=t.actions,E=(M,m)=>n.changeCameraWirelessProfiles(M,{name:m}),i=(M,m)=>(P,T)=>{const O=T(),v=(0,h.oC)(O)[M],L=_().property("ssid")(v);P(n.changeCameraWirelessProfiles(M,{ssid:{...L,...m}}))},R=(M,m)=>(P,T)=>{const O=T(),v=(0,h.oC)(O)[M],L=_().property("identity")(v);P(n.changeCameraWirelessProfiles(M,{identity:{...L,...m}}))},r=()=>M=>{M(n.requestCameraWirelessProfiles());const m=`/api/v1/networks/N_${C().ng_id}/camera/wirelessProfiles`;return(0,g.AT)("GET",m).then(P=>{M(n.addCameraWirelessProfiles(P.data))}).catch(()=>{M(n.failedRequestingCameraWirelessProfiles())}).finally(()=>{M(n.doneRequestingCameraWirelessProfiles())})},A=M=>(m,P)=>{const T=P();if(_().isEmpty((0,h.oC)(T)))return;const O=(0,h.oC)(T)[M];m(n.updateLocals({isSaving:!0}));const v=`/api/v1/networks/N_${C().ng_id}/camera/wirelessProfiles`;return f().ajax({url:y()({global:!0,controller:v}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(O)}).done(L=>{_().isEmpty(L.errors)&&(m(n.updateCameraWirelessProfilesWithMerge([L])),m(n.resetAllChanges())),m(n.updateLocals({isSaving:!1,saveSuccess:_().isEmpty(L.errors),errors:L.errors}))}).fail(L=>{var B;m(n.updateLocals({isSaving:!1,saveSuccess:!1,errors:((B=JSON.parse(L.responseText?L.responseText:"null"))===null||B===void 0?void 0:B.errors)||"An unexpected error occured."}))})},S=M=>(m,P)=>{const T=P();if(_().isEmpty((0,h.oC)(T)))return;const O=(0,h.oC)(T)[M];m(n.updateLocals({isSaving:!0}));const v=`/api/v1/networks/N_${C().ng_id}/camera/wirelessProfiles/${M}`;return f().ajax({url:y()({global:!0,controller:v}),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(O)}).done(L=>{_().isEmpty(L.errors)&&(m(n.updateCameraWirelessProfiles([L])),m(n.resetAllChanges())),m(n.updateLocals({isSaving:!1,saveSuccess:_().isEmpty(L.errors),errors:L.errors}))}).fail(L=>{var B;m(n.updateLocals({isSaving:!1,saveSuccess:!1,errors:((B=JSON.parse(L.responseText?L.responseText:"null"))===null||B===void 0?void 0:B.errors)||"An unexpected error occured."}))})},p=M=>m=>{m(n.updateLocals({isSaving:!0}));const P=`/api/v1/networks/N_${C().ng_id}/camera/wirelessProfiles/${M}`;return f().ajax({url:y()({global:!0,controller:P}),type:"DELETE",dataType:"json",contentType:"application/json"}).done(T=>{_().isEmpty(T)?(m(n.deleteCameraWirelessProfilesById([M])),m(n.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))):m(n.updateLocals({isSaving:!1,saveSuccess:!1,errors:T.errors}))}).fail(T=>{var O;m(n.updateLocals({isSaving:!1,saveSuccess:!1,errors:((O=JSON.parse(T.responseText?T.responseText:"null"))===null||O===void 0?void 0:O.errors)||"An unexpected error occured."}))})},I=()=>M=>{M(r())},U=_().extend({},n,{initializeWirelessProfiles:I,changeCameraWirelessProfilesName:E,changeCameraWirelessProfilesSsid:i,changeCameraWirelessProfilesIdentity:R,createWirelessProfiles:A,updateWirelessProfiles:S,deleteWirelessProfile:p}),D=t.actionTypes,u=()=>t.createStore();var o=null},503161:(ae,x,e)=>{e.d(x,{U1:()=>l,o1:()=>f});var W=e(652129);const C=[],g=(0,W.L)().withStoreName("GuidedConfigTestAppStore").withModels(C).create(),c=g.actions,y=g.actionTypes,d=g.selectors,f={...c};function l(){return g.createStore()}},503336:(ae,x,e)=>{e.d(x,{Eo:()=>a,Pu:()=>h,jJ:()=>_,w6:()=>l});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466);const y=(0,g.L)().create().createStore(),d="SmBulkAgentRegistration",f=c.kC.enhanceEndpoints({addTagTypes:[d]}).injectEndpoints({endpoints:s=>({createBulkToken:s.mutation({query:({organizationId:t,token:n})=>({url:`organizations/${t}/sm/bulkEnrollment/token`,method:"POST",body:n}),invalidatesTags:[{type:d,id:"LIST"}]}),updateBulkToken:s.mutation({query:({organizationId:t,token:{id:n,...E}})=>({url:`organizations/${t}/sm/bulkEnrollment/token/${n}`,method:"PUT",body:E}),invalidatesTags:(t,n,E)=>n?[]:[{type:d,id:"LIST"},{type:d,id:E.token.id}]}),fetchBulkTokens:s.query({query:({organizationId:t,networkIds:n})=>({url:`organizations/${t}/sm/bulkEnrollment/tokens`,params:{networkIds:n}}),providesTags:t=>t?[...t.map(({id:n})=>({type:d,id:n})),{type:d,id:"LIST"}]:[{type:d,id:"LIST"}]}),deleteBulkToken:s.mutation({query:({organizationId:t,networkId:n,tokenId:E})=>({url:`organizations/${t}/sm/bulkEnrollment/token/${E}`,method:"DELETE",params:{networkId:n}}),invalidatesTags:(t,n,E)=>n?[]:[{type:d,id:"LIST"},{type:d,id:E.tokenId}]})})}),{useCreateBulkTokenMutation:l,useUpdateBulkTokenMutation:_,useFetchBulkTokensQuery:a,useDeleteBulkTokenMutation:h}=f},508927:(ae,x,e)=>{e.d(x,{U1:()=>o,o1:()=>u});var W=e(967720),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d),l=e(652129),_=e(639367),a=e(720506);const h=["airMarshalConfig","configTemplateKnownRogueAps","knownRogueAps","nodes","foreignSsids","ssidSpoofs"],s=(0,l.L)().withStoreName("AirMarshalStore").withModels(h).withModal().withChanges().withMaps().create(),t={match_type:"keyword",match_value:"",containment_type:"is_contained"},n=s.actions,E=s.actionTypes,i=()=>m=>(m(n.requestAirMarshalConfig()),(0,W.A)(g()({controller:"dashboard",action:"load_air_marshal_config"}),{credentials:"same-origin"}).then(P=>P.json()).then(P=>m(n.addAirMarshalConfig(P))).then(()=>m(n.updateLocals({loadedAirMarshalConfig:!0})))),R=()=>m=>(m(n.requestAirMarshalConfig()),(0,W.A)(g()({controller:"dashboard",action:"load_air_marshal_containment"}),{credentials:"same-origin"}).then(P=>P.json()).then(P=>{m(n.addKnownRogueAps(f().omit(P,"template_parent_config"))),m(n.addConfigTemplateKnownRogueAps(P.template_parent_config||{}))}).then(()=>m(n.updateLocals({loadedKnownRogueAps:!0})))),r=()=>m=>(m(n.requestForeignSsids()),m(n.requestSsidSpoofs()),(0,W.A)(g()({controller:"dashboard",action:"foreign_ssids"}),{credentials:"same-origin"}).then(P=>P.json()).then(P=>{m(n.addForeignSsids(f().reduce(P.foreign_ssids,(T,O)=>{const v=O.ssid;return O.id=v,T[v]=O,T},{}))),m(n.addSsidSpoofs(f().reduce(P.ssid_spoofs,(T,O)=>{const v=`${O.ssid}-${O.bssid}`;return O.id=v,T[v]=O,T},{}))),m(n.updateLocals({rogueDataLimitHit:P.foreign_aps_limit_was_hit}))}).then(()=>m(n.updateLocals({loadedRogueData:!0})))),A=()=>m=>(m(n.requestNodes()),y().ajax({url:g()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:{f:["id","name","mac","lat","lng"]}}).done(P=>{m(n.addNodes(P.nodes)),m(n.updateLocals({loadedNodes:!0}))})),S=m=>f().extend({},t,m?{containment_type:m}:{},m==="is_known"?{match_type:"ssid"}:{}),p=(m=null)=>P=>{const T=f().uniqueId("new-");P(n.changeKnownRogueAps(T,f().extend({id:T,created:!0},m||t)))},I=()=>m=>{m(n.resetAllChanges())},U=()=>(m,P)=>{const T=P(),O={config_changes:(0,_.kt)(T),rogue_changes:(0,_.g6)(T)};return m(n.updateLocals({saving:!0,errors:[]})),y().ajax({url:g()({controller:"dashboard",action:"update_wips"}),type:"POST",data:O}).done(v=>{m(n.addAirMarshalConfig(v.config)),m(n.addKnownRogueAps(v.containment)),m(I()),m(n.updateLocals({saving:!1,success:!0}))}).fail(v=>{m(n.updateLocals({saving:!1,success:!1,errors:a.A.parseErrorsFromResponse(v)}))})},D=()=>m=>{m(n.updateLocals({saving:!1,success:!1,errors:[]}))},u=f().extend({},n,{fetchAirMarshalConfig:i,fetchKnownRogueAps:R,fetchRogueData:r,fetchNodes:A,getDefaultContainmentConfig:S,addNewKnownRogueAp:p,submitChanges:U,cancelChanges:I,clearSaveNotice:D}),o=()=>s.createStore();var M=null},509135:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("NETWORK_STORE",{indices:["organization_id"]}),f={update(_){this.dispatch(d.constants.UPDATE,_)},reset(_){this.dispatch(d.constants.RESET,_)},fetch(_={}){return C().ajax({url:c()({global:!0,controller:"node_groups",action:_.id||""}),method:"GET",data:{id:_.id,organization_id:_.organizationId,with:_.with}}).done(a=>{_.id?this.dispatch(d.constants.UPDATE,a):this.dispatch(d.constants.RESET,a)})}};function l(_){_.store("NetworkStore")||(_.addStore("NetworkStore",d),_.addActions({networks:f}))}},509967:(ae,x,e)=>{e.d(x,{E:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["accessPolicies"]}).injectEndpoints({endpoints:d=>({fetchAccessPolicies:d.query({query:f=>({url:`networks/${f}/switch/accessPolicies`}),providesTags:()=>[{type:"accessPolicies",id:"ALL"}]})}),overrideExisting:!1}),{useFetchAccessPoliciesQuery:y}=c},512420:(ae,x,e)=>{e.d(x,{Cl:()=>l,GE:()=>f,JH:()=>_,Nx:()=>a,tp:()=>d});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.kC.enhanceEndpoints({addTagTypes:["captureSchedule"]}).injectEndpoints({endpoints:s=>({fetchSchedulesInNetwork:s.query({query:({orgId:t,networkIds:n})=>({url:`organizations/${t}/devices/packetCapture/schedules${(0,g.DK)({networkIds:n})}`}),providesTags:(t,n)=>[{type:"captureSchedule",id:"ALL"}]}),deleteSchedulesById:s.mutation({query:({orgId:t,scheduleId:n})=>({url:`organizations/${t}/devices/packetCapture/schedules/${n}`,method:"DELETE"}),invalidatesTags:(t,n)=>[{type:"captureSchedule",id:"ALL"}]}),createSchedule:s.mutation({query:({orgId:t,schedule:n})=>({url:`organizations/${t}/devices/packetCapture/schedules`,method:"POST",body:n}),invalidatesTags:(t,n)=>[{type:"captureSchedule",id:"ALL"}]}),updateSchedule:s.mutation({query:({orgId:t,scheduleId:n,schedule:E})=>({url:`organizations/${t}/devices/packetCapture/schedules/${n}`,method:"PUT",body:E}),invalidatesTags:(t,n)=>[{type:"captureSchedule",id:"ALL"}]}),updateScheduleOrder:s.mutation({query:({orgId:t,order:n})=>({url:`organizations/${t}/devices/packetCapture/schedules/reorder`,method:"POST",body:{order:n}}),invalidatesTags:(t,n)=>[{type:"captureSchedule",id:"ALL"}]})}),overrideExisting:!1}),{useFetchSchedulesInNetworkQuery:d,useDeleteSchedulesByIdMutation:f,useCreateScheduleMutation:l,useUpdateScheduleMutation:_,useUpdateScheduleOrderMutation:a,util:h}=y},528196:(ae,x,e)=>{e.d(x,{CY:()=>_,Kk:()=>d,Pc:()=>f,Vm:()=>y,sT:()=>l});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["SUE"]}).injectEndpoints({endpoints:a=>({fetchSUE:a.query({query:({networkId:h})=>({url:`networks/${h}/firmwareUpgrades/staged/events`}),providesTags:(h,s,t)=>[{type:"SUE",id:t.networkId}]}),createSUE:a.mutation({query:({networkId:h,...s})=>({url:`networks/${h}/firmwareUpgrades/staged/events`,method:"POST",body:s})}),updateSUE:a.mutation({query:({networkId:h,...s})=>({url:`networks/${h}/firmwareUpgrades/staged/events`,method:"PUT",body:s}),invalidatesTags:(h,s,t)=>[{type:"SUE",id:t.networkId}]}),rollbackSUE:a.mutation({query:({networkId:h,...s})=>({url:`networks/${h}/firmwareUpgrades/staged/events/rollbacks`,method:"POST",body:s}),invalidatesTags:(h,s,t)=>[{type:"SUE",id:t.networkId}]}),deferSUE:a.mutation({query:({networkId:h})=>({url:`networks/${h}/firmwareUpgrades/staged/events/defer`,method:"POST"}),invalidatesTags:(h,s,t)=>h?[{type:"SUE",id:t.networkId}]:[]})}),overrideExisting:!1}),{useFetchSUEQuery:y,useCreateSUEMutation:d,useUpdateSUEMutation:f,useRollbackSUEMutation:l,useDeferSUEMutation:_}=c},533098:(ae,x,e)=>{e.d(x,{U1:()=>n,o1:()=>t});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(720506);const _=["kbArticleEmailContent"],a=(0,f.L)().withStoreName("EmailPreviewStore").withModels(_).withChanges().create(),h=a.actions,s=()=>(i,R)=>{i(h.updateLocals({isSaving:!0,saveSuccess:!1,fetchErrors:[]}));const A={articleId:R().locals.articleId};return c().ajax({type:"GET",url:d()({controller:"admin",action:"fetch_knowledge_base_email_article_preview"}),data:A}).done(S=>{i(h.addKbArticleEmailContent([S])),i(h.updateLocals({isSaving:!1,saveSuccess:!0}))}).fail(S=>{const p=l.A.parseErrorsFromResponse(S);i(h.updateLocals({isSaving:!1,saveSuccess:!1,fetchErrors:p}))})},t=C().extend({},h,{fetchKnowledgeBaseArticleEmailContent:s}),n=()=>a.createStore();var E=null},534338:(ae,x,e)=>{e.d(x,{A7:()=>a,Gv:()=>h,Pj:()=>_,W9:()=>d,Wo:()=>s,_m:()=>l,uE:()=>g});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.injectEndpoints({endpoints:t=>({fetchWebhookPayloadTemplates:t.query({query:({networkId:n})=>({url:`networks/${n}/webhooks/payloadTemplates`})}),createWebhookPayloadTemplate:t.mutation({query:({networkId:n,body:E,headers:i,name:R})=>({method:"POST",url:`networks/${n}/webhooks/payloadTemplates`,body:{body:E,headers:i,name:R}})}),updateWebhookPayloadTemplate:t.mutation({query:({networkId:n,templateId:E,body:i,headers:R,name:r})=>({method:"PUT",url:`networks/${n}/webhooks/payloadTemplates/${E}`,body:{body:i,headers:R,name:r}})}),deleteWebhookPayloadTemplates:t.mutation({query:({networkId:n,templateId:E})=>({method:"DELETE",url:`networks/${n}/webhooks/payloadTemplates/${E}`})}),previewWebhookPayloadTemplate:t.mutation({query:({networkId:n,templateId:E,body:i,headers:R,sharedSecret:r,alertTypeId:A})=>({method:"POST",url:`networks/${n}/webhooks/payloadTemplates/preview`,body:{templateId:E,sharedSecret:r,alertTypeId:A,body:i,headers:R}})}),fetchWebhookAlertTypes:t.query({query:({organizationId:n})=>({url:`organizations/${n}/webhooks/alertTypes`})}),sendWebhookTest:t.mutation({query:({networkId:n,url:E,sharedSecret:i,payloadTemplateId:R,alertTypeId:r,payloadTemplateName:A})=>({method:"POST",url:`networks/${n}/webhooks/webhookTests`,body:{url:E,sharedSecret:i,payloadTemplateId:R,payloadTemplateName:A,alertTypeId:r}})})})}),{useFetchWebhookPayloadTemplatesQuery:y,useLazyFetchWebhookPayloadTemplatesQuery:d,useDeleteWebhookPayloadTemplatesMutation:f,useCreateWebhookPayloadTemplateMutation:l,useUpdateWebhookPayloadTemplateMutation:_,usePreviewWebhookPayloadTemplateMutation:a,useFetchWebhookAlertTypesQuery:h,useSendWebhookTestMutation:s}=c},536481:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(6464),C=e(755373),g=e.n(C),c=e(493554),y={SET_CALLBACKS:"SET_CALLBACKS",SET_FILTER:"SET_FILTER",SET_ITEMS_PER_PAGE:"SET_ITEMS_PER_PAGE",NEXT_PAGE:"NEXT_PAGE",PREV_PAGE:"PREV_PAGE"},d=W.A.createStore({initialize(_){this.base_url="/manage/security/events.json",this.callbacks=_,this.bindActions(y.SET_CALLBACKS,this.onSetCallbacks,y.SET_FILTER,this.onSetFilter,y.SET_ITEMS_PER_PAGE,this.onSetItemsPerPage,y.NEXT_PAGE,this.onNextPage,y.PREV_PAGE,this.onPrevPage)},onSetCallbacks(_){this.callbacks=_.callbacks},onSetFilter(_){var a=`${this.base_url}?${g().stringify({t0:_.t0,timespan:_.timespan,filter:_.filter,limit:10},{arrayFormat:"brackets"})}`;this._url!==a&&(this._url=a,this.dataSource?this.dataSource.setHalEndpoint(a):(this.dataSource=new c.A(a,this.callbacks),this.dataSource.onChange=this.onDataSourceChange))},onSetItemsPerPage(_){this.dataSource.setItemsPerPage(_.pageSize)},onNextPage(){this.dataSource.nextPage()},onPrevPage(){this.dataSource.prevPage()},onDataSourceChange(){this.emit("change")},getState(){return{totalItems:this.dataSource.totalItems(),itemsPerPage:this.dataSource.itemsPerPage(),hasNext:this.dataSource.hasNext(),hasPrev:this.dataSource.hasPrev(),currentPage:this.dataSource.currentPage(),currentPageItems:this.dataSource.currentPageItems(),canGotoPage:this.dataSource.canGotoPage(),canSort:this.dataSource.canSort(),sortBy:this.dataSource.canSort()?this.dataSource.sortBy():"",loading:this.dataSource.getLoading()}}}),f={setCallbacks(_){this.dispatch(y.SET_CALLBACKS,{callbacks:_})},setFilter(_,a,h){this.dispatch(y.SET_FILTER,{t0:_,timespan:a,filter:h})},setItemsPerPage(_){this.dispatch(y.SET_ITEMS_PER_PAGE,{pageSize:_})},nextPage(){this.dispatch(y.NEXT_PAGE)},prevPage(){this.dispatch(y.PREV_PAGE)},sortBy(){this.dispatch(y.SORT_BY)}};const l=(_,a)=>{_.store("SecurityEventsStore")||(_.addStore("SecurityEventsStore",new d(a)),_.addActions({securityEvents:f}))}},539625:(ae,x,e)=>{e.d(x,{$9:()=>d,xN:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["switchStp"]}).injectEndpoints({endpoints:f=>({fetchSwitchStp:f.query({query:l=>({url:`networks/${l}/switch/stp`}),providesTags:(l,_,a)=>[{type:"switchStp",id:a}]}),updateSwitchStp:f.mutation({query:({networkId:l,switchStpConfiguration:_})=>({url:`networks/${l}/switch/stp`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"switchStp",id:a.networkId}]})}),overrideExisting:!1}),{useFetchSwitchStpQuery:y,useUpdateSwitchStpMutation:d}=c},542998:(ae,x,e)=>{e.d(x,{o1:()=>R});var W=e(522224),C=e.n(W),g=e(652129),c=e(653806),y=e(253320),d=e(758928),f=e.n(d);const l=["mqttBrokerConfigs"],_=(0,g.L)().withStoreName("SensorMqttStore").withModels(l).create(),a=_.actions,h=()=>A=>{const p=`/api/v1/networks/${y.A.buildId(f().locale_id,f().ng_id)}/mqttBrokers`;return A(a.requestMqttBrokerConfigs()),(0,c.AT)("GET",p).then(({data:I})=>{if(A(a.replaceMqttBrokerConfigs(I)),f().features.has_sensor_mqtt)return s()(A)}).finally(()=>{A(a.doneRequestingMqttBrokerConfigs())})},s=()=>A=>{const p=`/api/v1/networks/${y.A.buildId(f().locale_id,f().ng_id)}/sensor/mqttBrokers`;return(0,c.AT)("GET",p).then(({data:I})=>{I.forEach(U=>{U.id=U.mqttBrokerId,delete U.mqttBrokerId}),A(a.updateMqttBrokerConfigsWithMerge(I))})},t=()=>(A,S)=>{let I=`/api/v1/networks/${y.A.buildId(f().locale_id,f().ng_id)}/mqttBrokers`,U="POST";const D=S().locals.mqttBroker;return A(a.updateLocals({saving:!0,saveErrors:null})),D.id==="new"||(I+=`/${D.id}`,U="PUT"),(0,c.AT)(U,I,JSON.stringify(D)).then(({data:o})=>{A(a.updateLocals({saving:!1,showEditMqttBrokersConfig:!1})),A(a.updateMqttBrokerConfigsWithMerge([o]))}).catch(({statusCode:o,errors:M})=>{let m=[];switch(o){case 400:m=M;break;case 403:m.push("User is not authorized to modify this resource");break;default:m.push("Error saving MQTT broker configuration, please try again.");break}A(a.updateLocals({saving:!1,saveErrors:m}))})},n=()=>(A,S)=>{const p=y.A.buildId(f().locale_id,f().ng_id),I=S().locals.mqttBroker,U=`/api/v1/networks/${p}/sensor/mqttBrokers/${I.id}`;return A(a.updateLocals({saving:!0,saveErrors:null})),(0,c.AT)("PUT",U,JSON.stringify({enabled:!I.enabled})).then(()=>{if(A(a.updateLocals({saving:!1})),I.enabled)A(a.updateMqttBrokerConfigsWithMerge([{id:I.id,enabled:!I.enabled}]));else return h()(A)}).catch(({statusCode:D,errors:u})=>{let o=[];switch(D){case 400:o=u;break;case 403:o.push("User is not authorized to modify this resource");break;default:o.push("Error saving sensor MQTT broker configuration, please try again.");break}A(a.updateLocals({saving:!1,saveErrors:o}))})},E=A=>S=>{const I=`/api/v1/networks/${y.A.buildId(f().locale_id,f().ng_id)}/mqttBrokers/${A}`;return S(a.updateLocals({saving:!0})),(0,c.AT)("DELETE",I).then(()=>{S(a.deleteMqttBrokerConfigsById(A)),S(a.updateLocals({saving:!1}))}).catch(({statusCode:U,errors:D})=>{let u=[];switch(U){case 400:u=D;break;case 403:u.push("User is not authorized to modify this resource");break;default:u.push("Error deleting MQTT broker configuration, please try again.");break}S(a.updateLocals({saving:!1,saveSuccess:!1,saveErrors:u}))})};var i=null;const R=C().extend({},_.actions,{fetchMqttBrokerConfigs:h,saveMqttBrokerConfigToServer:t,toggleMqttBrokerEnabled:n,deleteMqttBroker:E}),r=()=>_.createStore()},544282:(ae,x,e)=>{e.d(x,{fL:()=>c,jk:()=>g});var W=e(310466);const C=W.kC.enhanceEndpoints({addTagTypes:["SUS","SUE"]}).injectEndpoints({endpoints:y=>({fetchSUS:y.query({query:({networkId:d})=>({url:`networks/${d}/firmwareUpgrades/staged/stages`}),providesTags:(d,f,l)=>[{type:"SUS",id:l.networkId}]}),updateSUS:y.mutation({query:({networkId:d,sus:f})=>({url:`networks/${d}/firmwareUpgrades/staged/stages`,method:"PUT",body:f}),invalidatesTags:(d,f,l)=>[{type:"SUS",id:l.networkId},{type:"SUE",id:"ALL"}]})}),overrideExisting:!1}),{useFetchSUSQuery:g,useUpdateSUSMutation:c}=C},545281:(ae,x,e)=>{e.d(x,{o1:()=>S});var W=e(652129),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d);const l=["externalStreamPermissions","externalStreamUsers"],_=(0,W.L)().withStoreName("ExternalStreamStore").withModels(l).withModal().withChanges().create(),a=_.actions,h=U=>D=>(D(a.requestExternalStreamPermissions()),y().get(g()({controller:"external_stream/users",action:"json_from_nodes",params:{ids:U}}),u=>{D(a.addExternalStreamPermissions(u.permissions)),D(a.addExternalStreamUsers(u.users))})),s=()=>U=>{const D={showStreamManagementModal:!0};U(a.updateLocals(D))},t=()=>U=>{const D={showStreamManagementModal:!1};U(a.updateLocals(D))},n=(U,D=null)=>u=>(u(a.clearModal()),new Promise((o,M)=>y().ajax({type:"POST",url:g()({controller:"external_stream/users"}),data:JSON.stringify(U),contentType:"application/json"}).done(m=>{if(!m.created)return o(m);D&&D.reset(),u(a.updateExternalStreamPermissions(m.permissions)),u(a.updateExternalStreamUsers(m.user));const P={alert:{style:"success",message:"Link email sent and new recipient added."}};u(a.updateModal(P)),o(m)}).fail(m=>{const P=y().parseJSON(m.responseText),T={alert:{style:"danger",message:P.error}};u(a.updateModal(T)),M(P)}))),E=(U,D,u)=>o=>new Promise((M,m)=>y().ajax({type:"POST",url:g()({controller:"external_stream/users",action:"add_permission"}),data:JSON.stringify({id:U,nodeId:D,imagerId:u}),contentType:"application/json"}).done(P=>{o(a.updateExternalStreamUsers(P.user)),o(a.updateExternalStreamPermissions(P.permissions)),o(a.updateModal({alert:{style:"success",message:"Link email sent. All streams shared to this email now share the same link and expiration."}})),M(P)}).fail(P=>{const T=y().parseJSON(P.responseText);o(a.updateModal({alert:{style:"danger",message:T.error}})),m(T)})),i=(U,D)=>u=>new Promise((o,M)=>y().ajax({type:"DELETE",url:g()({controller:"external_stream/users",action:"delete_permission"}),data:JSON.stringify({ids:U,nodeId:D}),contentType:"application/json"}).done(m=>{u(a.updateExternalStreamPermissions(m.permissions)),u(a.deleteExternalStreamUsersById(m.removed_users)),u(a.updateModal({alert:{style:"success",message:"The selected users were removed successfully"}})),o(m)}).fail(m=>{const P=y().parseJSON(m.responseText);u(a.updateModal({alert:{style:"danger",message:"Something went wrong when trying to delete the selected users. Please try again later."}})),M(P)})),R=U=>D=>{y().ajax({type:"POST",url:g()({controller:"external_stream/users",action:"extend_expiration"}),data:JSON.stringify({ids:U}),contentType:"application/json"}).done(u=>{D(a.updateExternalStreamUsers(u.users))})},r=U=>D=>{y().ajax({type:"POST",url:g()({controller:"external_stream/users",action:"disable"}),data:JSON.stringify({ids:U}),contentType:"application/json"}).done(u=>{D(a.updateExternalStreamUsers(u.users))})},A=U=>D=>{y().ajax({type:"POST",url:g()({controller:"external_stream/users",action:"enable"}),data:JSON.stringify({ids:U}),contentType:"application/json"}).done(u=>{D(a.updateExternalStreamUsers(u.users))})},S=f().extend({},a,{fetchCameraExternalStreamPermissions:h,showStreamManagementModal:s,closeStreamManagementModal:t,disableUsers:r,enableUsers:A,createUser:n,addPermission:E,deletePermissions:i,extendExpiration:R}),p=()=>_.createStore();var I=null},548254:(ae,x,e)=>{e.d(x,{U1:()=>y,o1:()=>g});var W=e(652129);const C=(0,W.L)().withStoreName("OrganizationOverviewStore").withPrefs().withMaps().create(),g=C.actions,c=C.actionTypes,y=()=>C.createStore();var d=null},548923:(ae,x,e)=>{e.d(x,{A:()=>n});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(6464),d=e(758928),f=e.n(d),l=e(869592),_=e.n(l),a=e(775113),h={RESET_USER:"RESET_USER",RESET_ADMINISTERED_ORGS:"RESET_ADMINISTERED_ORGS",RESET_ADMINISTERED_SSIDS:"RESET_ADMINISTERED_SSIDS",RESET_ADMINISTERED_SWITCHES:"RESET_ADMINISTERED_SWITCHES",RESET_ADMINISTERED_TAGS:"RESET_ADMINISTERED_TAGS",RESET_ACCESS_ROLE:"RESET_ACCESS_ROLE",UPDATE_USER:"UPDATE_USER"},s=y.A.createStore({initialize(){this.user={},this.bindActions(h.RESET_USER,this.onReset,h.RESET_ADMINISTERED_ORGS,this.onResetAdministeredOrgs,h.RESET_ADMINISTERED_SSIDS,this.onResetAdministeredSsids,h.RESET_ADMINISTERED_SWITCHES,this.onResetAdministeredSwitches,h.RESET_ADMINISTERED_TAGS,this.onResetAdministeredTags,h.RESET_ACCESS_ROLE,this.onResetAccessRole,h.UPDATE_USER,this.onUpdate)},onReset(E){this.user=E,this.emit("change")},onUpdate(E){this.user=C().extend({},this.user,E),this.emit("change")},onResetAdministeredOrgs(E){this.user.administered_orgs=E,this.emit("change")},onResetAdministeredSsids(E){this.user.administeredSsids=E,this.emit("change")},onResetAdministeredSwitches(E){this.user.administeredSwitches=E.map(i=>({label:i.name||i.mac,network_id:i.networkId,value:i.url.split("/").pop()})),this.emit("change")},onResetAdministeredTags(E){this.user.administeredTags=E,this.emit("change")},onResetAccessRole(E){this.user.accessRole=E,this.emit("change")},getState(){return C().clone(this.user)}}),t={reset(E){this.dispatch(h.RESET_USER,E)},update(E){this.dispatch(h.UPDATE_USER,E)},updateAdmOrgs(E){this.dispatch(h.RESET_ADMINISTERED_ORGS,E)},updateAdmSsids(E){this.dispatch(h.RESET_ADMINISTERED_SSIDS,E)},updateAdmTags(E){this.dispatch(h.RESET_ADMINISTERED_TAGS,E)},updateAccessRole(E){this.dispatch(h.RESET_ACCESS_ROLE,E)},updateAdmSwitches(E){this.dispatch(h.RESET_ADMINISTERED_SWITCHES,E)},fetchAdministeredOrgs(){return c().ajax({dataType:"json",url:_()({controller:"organization",action:"administered_orgs"}),xhrFields:{withCredentials:!0}}).done(E=>{this.dispatch(h.RESET_ADMINISTERED_ORGS,E)})},fetchAdministeredSsids(E){const i=E||f().administered_orgs[f().org_id]||{};return c().getJSON(_()({scala_project:"nmr",organization:i,controller:"reports",action:"administered_ssid_map"})).done(R=>{this.dispatch(h.RESET_ADMINISTERED_SSIDS,R)})},fetchAdministeredTags(E){const i=E||f().administered_orgs[f().org_id]||{};return c().getJSON(_()({scala_project:"nmr",organization:i,controller:"reports",action:"administered_tag_map"})).done(R=>{this.dispatch(h.RESET_ADMINISTERED_TAGS,R)})},fetchAccessRole(){return c().getJSON(_()({controller:"users",action:"access_role"})).done(E=>{this.dispatch(h.RESET_ACCESS_ROLE,E)})},fetchAdministeredSwitches(){const E=a.A.urlForApi({path:`organizations/${f().org_id}/devices`,productTypes:["switch"]});return c().getJSON(E).done(i=>{this.dispatch(h.RESET_ADMINISTERED_SWITCHES,i||[])}).fail(()=>{this.dispatch(h.RESET_ADMINISTERED_SWITCHES,[])})},fetchConfigHistoryAccess(E){return c().getJSON(a.A.urlForApi({version:"v1",path:`devices/${E}/switch/configs`})).done(()=>{this.dispatch(h.UPDATE_USER,{can_access_config_history:!0})}).fail(({status:i})=>{const R=i!==401;this.dispatch(h.UPDATE_USER,{can_access_config_history:R})})}};function n(E){E.store("CurrentUserStore")||(E.addStore("CurrentUserStore",new s),E.addActions({user:t}))}},550921:(ae,x,e)=>{e.d(x,{DW:()=>t,GG:()=>n,Ld:()=>A,Ol:()=>S,U1:()=>f,UY:()=>E,bm:()=>a,e4:()=>R,mg:()=>i,pO:()=>r});var W=e(652129),C=e(310466),g=e(869592),c=e.n(g),y=e(607672);const d=(0,W.L)().withStoreName("CloudIntegrationsStore").create(),f=()=>d.createStore(),l=c()({controller:"/manage/cloud_integrations",action:"cloud_provider_accounts"}),_=c()({controller:"/manage/cloud_integrations",action:"vmx_cloud_provider_configs"}),a=C.q9.enhanceEndpoints({addTagTypes:["CloudProviderAccount","VmxCloudProviderConfig"]}).injectEndpoints({endpoints:p=>({getCloudAccounts:p.query({query:()=>({url:l,method:"GET"}),providesTags:["CloudProviderAccount"]}),addCloudAccount:p.mutation({query:I=>({url:l,method:"POST",body:I,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}}),invalidatesTags:(I,U,D)=>U?[]:["CloudProviderAccount"]}),updateCloudAccount:p.mutation({query:({id:I,...U})=>({url:(0,y.Sb)(l,I),method:"PUT",body:U,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}}),invalidatesTags:(I,U,D)=>U?[]:["CloudProviderAccount"]}),deleteCloudAccount:p.mutation({query:I=>({url:(0,y.Sb)(l,I),method:"DELETE",headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}}),invalidatesTags:(I,U,D)=>U?[]:["CloudProviderAccount"]}),getVmxCloudProviderConfigs:p.query({query:()=>({url:_,method:"GET"}),providesTags:["VmxCloudProviderConfig"]}),deployVmx:p.mutation({query:I=>({url:_,method:"POST",body:I,headers:{"Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}}),invalidatesTags:(I,U,D)=>U?[]:["VmxCloudProviderConfig"]})})}),h=C.kC.injectEndpoints({endpoints:p=>({getAwsDeploymentOptions:p.query({query:({cloudProviderAccountId:I,awsRegion:U})=>({url:`organizations/${Mkiconf.org_id}/appliance/cloudControlCenter/aws/deployments/options?cloudProviderAccountId=${I}&awsRegion=${U}`,method:"GET"}),keepUnusedDataFor:1e3})})}),s=C.kC.injectEndpoints({endpoints:p=>({deleteVmx:p.mutation({query:I=>({url:`organizations/${Mkiconf.org_id}/appliance/vmx/cloud/deployments/${I}`,method:"DELETE"})})})}),{useGetCloudAccountsQuery:t,useAddCloudAccountMutation:n,useUpdateCloudAccountMutation:E,useDeleteCloudAccountMutation:i,useGetVmxCloudProviderConfigsQuery:R,useDeployVmxMutation:r}=a,{useDeleteVmxMutation:A}=s,{useLazyGetAwsDeploymentOptionsQuery:S}=h},553207:(ae,x,e)=>{e.d(x,{A:()=>t});var W=e(522224),C=e.n(W),g=e(6464),c=e(646894),y=e.n(c),d=e(869592),f=e.n(d),l=e(29402);const _="LIVE_TOOL_STORE_",a={ADD:`${_}ADD`,START:`${_}START`,REMOVE:`${_}REMOVE`,RESET:`${_}RESET`,UPDATE:`${_}UPDATE`,IMMUTABLE_UPDATE:`${_}IMMUTABLE_UPDATE`,FETCH_NETWORK_FEATURES:`${_}FETCH_NETWORK_FEATURES`},h=g.A.createStore({initialize(){this.tools=[],this.byId={},this.networkFeatures={},this.bindActions(a.ADD,this.onAdd,a.START,this.onStart,a.REMOVE,this.onRemove,a.RESET,this.onReset,a.UPDATE,this.onUpdate,a.IMMUTABLE_UPDATE,this.onImmutableUpdate,a.FETCH_NETWORK_FEATURES,this.onFetchNetworkFeatures)},get(n){return this.byId[n]},addTool(n){n.id=n.id||C().uniqueId(),this.byId[n.id]=n,n.state="ADDED",n.data=n.getInitialData(),this.tools.push(n)},onAdd(n){var E=this.byId[n.id];if(E){E.state==="RUNNING"?(this.tools=C().without(this.tools,E),this.tools.push(E),this.emit("change")):E.state==="COMPLETED"&&(this.tools=C().without(this.tools,E),this.tools.push(E),this.onStart({id:E.id,rerun:!0}),this.emit("change"));return}this.addTool(n),this.emit("change")},onStart(n){var E=this.byId[n.id];if(!E)this.addTool(n),E=n;else{if(E.state==="RUNNING")return;if(E.state==="COMPLETED")if(n.rerun)E.data=E.getInitialData();else return}E.runner=E.getRunner(E,this.flux),E.state="RUNNING",this.emit("change")},onRemove(n){var E=this.byId[n.id];E.runner&&E.runner.stop(),this.tools=C().without(this.tools,E),this.byId[n.id]=null,this.emit("change")},onReset(n){if(n&&n.where){var E=this.findToolsWhereParamsMatch(n.where),i=this.byId;C().each(E,R=>{R.runner&&R.runner.stop(),i[R.id]=null}),this.tools=C().difference(this.tools,E)}else this.resetAll();this.emit("change")},findToolsWhereParamsMatch(n){return C().filter(this.tools,E=>C().all(n,(i,R)=>E.params[R]==i))},resetAll(){C().each(this.tools,n=>{n.runner&&n.runner.stop()}),this.tools=[],this.byId={},this.networkFeatures={},this.emit("change")},onUpdate(n){const E=this.byId[n.id];n.state==="COMPLETED"&&E.runner&&E.runner.stop(),C().extend(E,n),this.emit("change")},onImmutableUpdate(n){const E=this.byId[n.id],i=C().omit(n,"id");if(C().isEmpty(i))return;const R=y()(E,i);this.byId[E.id]=R;const r=this.tools.indexOf(E);this.tools[r]=R,R.state==="COMPLETED"&&R.runner&&R.runner.stop(),this.emit("change")},getState(n){return n&&n.where?this.findToolsWhereParamsMatch(n.where):this.tools},onFetchNetworkFeatures(n){this.networkFeatures=n,this.emit("change")},getNetworkFeature(){return this.networkFeatures||{}}});var s={add(n){this.dispatch(a.ADD,n)},start(n){this.dispatch(a.START,n)},remove(n){this.dispatch(a.REMOVE,n)},reset(n){this.dispatch(a.RESET,n)},update(n){this.dispatch(a.UPDATE,n)},immutableUpdate(n){this.dispatch(a.IMMUTABLE_UPDATE,n)},async fetchNetworkFeatures(n){const E=`${f()({controller:"supported_features",action:"show"})}?features=${JSON.stringify(n)}`,i=await(0,l.A)(E);i&&this.dispatch(a.FETCH_NETWORK_FEATURES,i.response)}};function t(n){n.store("LiveToolStore")||(n.addStore("LiveToolStore",new h),n.addActions({liveTools:s}))}},555354:(ae,x,e)=>{e.d(x,{Qp:()=>s,U1:()=>d,aP:()=>_,aT:()=>l,z2:()=>h});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466);const y=(0,g.L)().withStoreName("AllowedCcdTransitionsStore").create(),d=()=>y.createStore(),f=c.q9.enhanceEndpoints({addTagTypes:["AllowedCcdTransitions"]}).injectEndpoints({endpoints:t=>({fetchAllowedCcdTransitions:t.query({query:()=>({url:"manage/allowed_ccd_transitions",headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token}}),providesTags:n=>n?[...n.map(({id:E})=>({type:"AllowedCcdTransitions",id:E})),{type:"AllowedCcdTransitions",id:"LIST"}]:[{type:"AllowedCcdTransitions",id:"LIST"}]}),createAllowedCcdTransition:t.mutation({query:n=>({url:"manage/allowed_ccd_transitions",headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token},method:"POST",body:n})}),fetchAllowedCcdTransition:t.query({query:n=>({url:`manage/allowed_ccd_transitions/${n}`,headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token}}),providesTags:(n,E,i)=>[{type:"AllowedCcdTransitions",id:i}]}),updateAllowedCcdTransition:t.mutation({query:({id:n,...E})=>({url:`manage/allowed_ccd_transitions/${n}`,headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token},method:"PUT",body:E})}),destroyAllowedCcdTransition:t.mutation({query:n=>({url:`manage/allowed_ccd_transitions/${n}`,headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token},method:"DELETE"})})})}),{useFetchAllowedCcdTransitionsQuery:l,useCreateAllowedCcdTransitionMutation:_,useFetchAllowedCcdTransitionQuery:a,useUpdateAllowedCcdTransitionMutation:h,useDestroyAllowedCcdTransitionMutation:s}=f},556331:(ae,x,e)=>{e.d(x,{r:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["qosRuleOrder"]}).injectEndpoints({endpoints:d=>({updateQosRuleOrder:d.mutation({query:({networkId:f,qosRuleOrder:{...l}})=>({url:`networks/${f}/switch/qosRules/order`,method:"PUT",body:l}),invalidatesTags:(f,l,_)=>[{type:"qosRuleOrder",id:_.networkId}]})}),overrideExisting:!1}),{useUpdateQosRuleOrderMutation:y}=c},561435:(ae,x,e)=>{e.d(x,{U1:()=>de,_$:()=>Me,o1:()=>Ie});var W=e(540590),C=e.n(W),g=e(14602),c=e.n(g),y=e(941669),d=e.n(y),f=e(758928),l=e.n(f),_=e(869592),a=e.n(_),h=e(184988),s=e.n(h),t=e(522224),n=e.n(t),E=e(652129),i=e(967720),R=e(163103),r=e(417046),A=e(703314),S=e(644200),p=e(459324),I=e(281034);const U=["apps","tags","devices","namedTagScopes","profiles","appInstalls","vppAccounts","vppLicensedItems"],D=["apps","devices"],u=(0,E.L)().withStoreName("PccAppsPageStore").withModels(U).withCustomKeyedModel("pccUsers",se=>se.email).withLazyModels(D).withContextOptions([S.RJ]).withChanges().withApiJobs().withPccAppSelector().withPrefs().withFlexTables().create(),o=u.actions,M=(se,X)=>{const Oe=(0,R.us)(X());Object.entries(Oe).forEach(([H,$])=>{const[le,ce]=H.split(",");se(o.pccAppSelector.setAppsInUse(le,$,`${p.Sdo}-${ce}`))})},m=se=>n().flatten(n().map(se||[],X=>n().map(X.install_details||{},(Oe,H)=>({...Oe,id:`${X.id}_${H}`})))),P=()=>se=>(se(o.requestProfiles()),(0,i.A)(a()({controller:"configure",action:"pcc_lite_profile_json"}),{credentials:"same-origin"}).then(X=>X.json()).then(X=>se(o.addProfiles(X)))),T=(se,X,Oe,H,$,le)=>{se(Oe||H||$?o.changeApps(X.id,{targetsInScope:le}):o.updateAppsWithMerge([{id:X.id,targetsInScope:le}])),se(o.updateLocals({fetchingScope:!1}))},O=(se,X,Oe,H,$,le)=>{if(X.targetsInScope&&!Oe&&!H&&!$)return se(o.resetAppsByIdAndField(X.id,"targetsInScope")),!0;if(!X.named_tag_scope_id){if(Oe&&Oe==="none"||X.scope==="none")return T(se,X,Oe,H,$,[]),!0;if(Oe&&Oe==="all"||X.scope==="all"&&le)return T(se,X,Oe,H,$,le),!0}},v=(se,X,Oe,H,$,le=!1)=>{const ce=le?"pcc_users_scoped_by_installable":"pcc_devices_scoped_by_installable",ve=a()({controller:"configure",action:ce}),_e={type:"app",installable_id:X.id};X.isNew&&(_e.is_new=!0,_e.system_type=X.system_type);const Ee=(0,p.MjC)(Oe,H,$,X.use_named_tag_scope);return se(o.updateLocals({fetchingScope:!0})),d().ajax({url:ve,type:"POST",data:{..._e,...Ee},context:void 0}).success(Se=>{T(se,X,Oe,H,$,Se)}).error(Se=>{s()(JSON.parse(Se.responseText)),T(se,X,Oe,H,$,[])})},L=(se,X,Oe,H,$,le)=>ce=>{O(ce,se,X,Oe,H,$)||v(ce,se,X,Oe,H,le)},B=()=>se=>(se(o.requestDevices()),(0,I.uw)(["pcc_user_email","is_visible"]).then(I.Ud).then(X=>{se(o.addDevices(X))})),F=()=>se=>(se(o.requestTags()),(0,I._Y)().then(X=>{se(o.addTags(X))})),K=()=>se=>(se(o.requestPccUsers()),(0,i.A)(a()({controller:"configure",action:"pcc_targetable_users_json"}),{credentials:"same-origin"}).then(X=>X.json()).then(X=>se(o.addPccUsers(X)))),b=(se,X,Oe,H={})=>{switch(X){case p.cII:return se(o.pccAppSelector.getMissingIosMetadata(Oe,H));case p.iQO:return se(o.pccAppSelector.getMissingMacMetadata(Oe,H));case p.CYr:return se(o.pccAppSelector.getMissingAndroidMetadata(Oe,H));case p.zws:return se(o.pccAppSelector.getMissingChromeMetadata(Oe,H));case p.H9y:return se(o.pccAppSelector.getMissingTvosMetadata(Oe,H));default:}},q=(se,X=p.Sdo,Oe={})=>H=>{const $=(0,R.gI)(se);return Promise.all(Object.entries($).map(([le,ce])=>{const ve=le.split(",")[0];return H(o.pccAppSelector.setAppsInUse(ve,ce,X)),b(H,ve,X,Oe)})).then(le=>le.reduce((ce,ve)=>(Object.keys(ve).forEach(_e=>{const Ee=ce[_e]||{};ce[_e]={...Ee,...ve[_e]}}),ce),{})).then(le=>se.reduce((ce,ve)=>{const _e=le[ve.source_type][ve.identifier];return _e&&(ce[ve.id]={...n().pick(_e,"label","icon","vendor","version","itunes_url"),itunes_description:_e.description}),ce},{}))},j=()=>se=>{se(o.requestApps()),(0,I.T$)().done(X=>{se(o.addApps(X))}).then(X=>{const Oe=m(X);se(o.addAppInstalls(Oe))}).then(()=>{p.AN.forEach(X=>{se(o.pccAppSelector.markInitialMetadataFetched(X))})}).then(()=>{se(M)})},J=se=>X=>{X(o.requestAppInstalls());const Oe=H=>{const $=H.map(le=>{const ce=le.pm_id;return delete le.pm_id,{...le,id:`${se}_${ce}`,appId:se,pccMachineId:ce}});X(o.addAppInstalls($))};(0,I.GQ)(se,Oe)},ee=()=>se=>(se(o.requestVppAccounts()),(0,I.Vg)({all:!1}).then(X=>{se(o.addVppAccounts(X))})),V=()=>se=>(se(o.requestVppLicensedItems()),(0,i.A)(a()({controller:"configure",action:"pcc_vpp_licensed_items_json"}),{credentials:"same-origin"}).then(X=>X.json()).then(X=>(se(o.updateVppLicensedItems(X)),se(o.doneRequestingVppLicensedItems(X)),X)).catch(()=>{se(o.doneRequestingVppLicensedItems())})),N=se=>X=>(X(o.requestVppLicensedItems()),X(o.changeVppAccounts(se,{isFetchingLicensedItems:!0})),(0,i.A)(a()({controller:"configure",action:"pcc_vpp_licensed_items_json",vpp_account_id:se}),{credentials:"same-origin"}).then(Oe=>Oe.json()).then(Oe=>(X(o.updateVppLicensedItems(Oe)),X(o.doneRequestingVppLicensedItems(Oe)),X(o.changeVppAccounts(se,{isFetchingLicensedItems:!1,hasFetchedLicensedItems:!0})),Oe)).catch(()=>{X(o.doneRequestingVppLicensedItems())})),w=se=>X=>(X(o.requestVppLicensedItems()),(0,i.A)(a()({controller:"configure",action:"pcc_vpp_licensed_items_json",adam_id:se}),{credentials:"same-origin"}).then(Oe=>Oe.json()).then(Oe=>(X(o.updateVppLicensedItems(Oe)),X(o.doneRequestingVppLicensedItems(Oe)),Oe)).catch(()=>{X(o.doneRequestingVppLicensedItems())})),z=()=>(se,X)=>{const Oe=Object.keys((0,R.gQ)(X()));return se(o.requestDetailsForApps(Oe,["num_targets_in_scope","num_targets_with_installed"])),(0,i.A)(a()({controller:"configure",action:"pcc_managed_apps_json",install_counts:"true"}),{credentials:"same-origin"}).then(H=>H.json()).then(H=>(se(o.mergeDetailsForApps(H,["num_targets_in_scope","num_targets_with_installed"])),H))},ne=(se,X)=>(Oe,H)=>(0,i.A)(a()({controller:"configure",action:"pcc_vpp_device_license_status"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":l().authenticity_token},method:"POST",body:JSON.stringify({app_id:se,device_ids:X||[]})}).then($=>$.json()).then($=>{const le=$.map(ce=>{const ve=(0,r.$n)(H(),{id:ce.id}).license_status;return{...ce,license_status:{...ve,...ce.license_status}}});return Oe(o.mergeDetailsForDevices(le,["license_status"])),$}),Y=()=>se=>(se(o.requestNamedTagScopes()),(0,I.bQ)().then(I.QW).then(X=>{se(o.addNamedTagScopes(X))})),te=()=>se=>(0,I.P)("apps").then(X=>{se(o.updateLocals({dashMsgs:X}))}),Te=se=>(X,Oe)=>{const H=(0,R.Kq)(Oe(),{ids:se}),[$,le]=n().partition(H,Ee=>Ee.isNew),ce=n().pluck($,"id"),ve=n().pluck(le,"id");X(A.o1.uncheckItems(p.URt,ce)),X(o.resetAppsChangesById(ce));const _e=n().object(n().map(ve,Ee=>[Ee,{deleted:!0}]));X(o.changeManyApps(_e))},me=se=>X=>{X(se?o.resetAppsChangesById(se):o.resetAllChanges()),X(M)},Me={getAppInstallsFromAppsArray:m},Ie={...o,fetchApps:j,fetchAppMetadata:q,fetchTags:F,fetchDevices:B,fetchPccUsers:K,fetchTargetsInScope:L,fetchProfiles:P,fetchAppInstallDetails:J,fetchVppAccounts:ee,fetchVppLicensedItems:V,fetchVppLicensedItemsByAccountId:N,fetchVppLicensedItemsByAdamId:w,fetchAppsNumInstalled:z,fetchDevicesLicenseState:ne,fetchNamedTagScopes:Y,markAppsForDeletion:Te,resetAppsPageChanges:me,updateSelectorInUseApps:M,fetchAppsDashboardMessages:te},ge=u.actionTypes,de=()=>u.createStore()},562322:(ae,x,e)=>{e.d(x,{A:()=>s});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(869592),l=e.n(f),_=e(4933);const a=(0,_.A)("SWITCHPORT_STORE",{indices:["switch_id"]}),h={fetch(t){const n=t.update||!1,E=c().extend({},c().omit(t,"update"),{aggregates:!1});return d().getJSON(l()({controller:"nodes",action:"ports_json"}),E).done(i=>{const R=c().values(i);n?this.dispatch(a.constants.UPDATE,R):this.dispatch(a.constants.RESET,R)})},reset(t){this.dispatch(a.constants.RESET,t)},update(t){console.warn(`Changes to portIds ${t} via flux were disregarded. This action is no longer supported. Use redux SwitchportStore actions to update & sync with flux.`)},syncUpdate(t){this.dispatch(a.constants.UPDATE,c().values(t))},fetchGraphs(t){if(!t.id)return console.warn("SwitchPortStore: actions.fetchGraphs called without 'id'");if(!t.t0)return console.warn("SwithcPortStore: actions.fetchGraphs called without 't0'");if(!t.t1)return console.warn("SwitchPortStore: actions.fetchGraphs called without 't1'");if(!t.port_key)return console.warn("SwitchPortStore: actions.fetchGraphs called without 'port_key'");const n=d().get(l()({controller:"nodes",action:"show_switchport_graph_data"}),t);return n.done(E=>{E.timespan=E.t1-E.t0,this.dispatch(a.constants.UPDATE,{id:t.port_key,series:E})}),n},checkVlanSettings(t){if(!t.id)return console.warn("SwitchPortStore: actions.checkVlanSettings called without 'id'");if(!t.port_key)return console.warn("SwitchPortStore: actions.checkVlanSettings called without 'port_key'");const n=d().get(l()({controller:"nodes",action:"check_switchport_vlan_settings"}),t);return n.done(E=>{this.dispatch(a.constants.UPDATE,{id:t.port_key,error:E.err,last_updated:E.last_updated,thisNode:E.this_node,connectedNode:E.connected_node})}),n},fetchPacketCounters(t){const n="SwitchPortStore: actions.fetchPacketCounters called without ";if(!t.id)return console.warn(`${n} id`);if(!t.port_key)return console.warn(`${n} port_key`);if(!t.timespan)return console.warn(`${n} timespan`);const E=d().get(l()({controller:"nodes",action:"show_switchport_packets_data"}),t);return E.done(i=>{this.dispatch(a.constants.UPDATE,{id:t.port_key,packetCounters:JSON.parse(i)})}),E}};function s(t){t.store("SwitchPortStore")||(t.addStore("SwitchPortStore",a),t.addActions({switchports:h}))}},564463:(ae,x,e)=>{e.d(x,{o1:()=>J});var W=e(14602),C=e.n(W),g=e(652129),c=e(644200),y=e(941669),d=e.n(y),f=e(251316),l=e(922076),_=e(869592),a=e.n(_),h=e(522224),s=e.n(h);const t=15e3,n=0,E=["dnsEvents","umbrellaCategories","umbrellaActions"],i=[c.OF],R={uri:"domains",remote_ip:"ip",client:"ip",umbrellaCategories:"categories",umbrellaActions:"verdict",t0:"to",from:"from"},r={0:l.Dp,1:l.Mz},A=(0,g.L)().withStoreName("SecurityEventsStore").withModels(E).withContextOptions(i).withChanges().withPrefs().withFlexTables().create(),S=A.actions,p=(ee,V)=>r[ee]?r[ee](V):ee,I=ee=>{if(ee==="0")return"blocked";if(ee==="1")return"allowed"},U=(ee,V,N={})=>{let w=s().isEmpty(N)?n:N.id;return ee.forEach(z=>{z.id=w,w++,z.verdict==="allowed"&&(z.policycategories=z.categories.filter(Y=>Y.type!=="application"));const ne=z.identities[0].label;try{if(ne.includes("_ssid_")){const[Y,te]=ne.split("_ssid_");z.network=V[Y].name,z.ssid=V[Y].ssids[te]}else if(ne.includes("_gp_")){const[Y]=ne.split("_gp_");z.network=V[Y].name,z.ssid=""}else{const[Y,te]=ne.split(/__(.+)/);z.network=te.split("_-_wireless")[0],z.ssid=Y}}catch{z.network=ne,z.ssid=""}}),ee},D=ee=>ee<n?n:ee,u=ee=>{try{const V=atob(ee.split(".")[1]);return JSON.parse(V).exp*1e3<=Date.now()}catch{return!0}},o=(ee={},V=!1)=>async(N,w)=>{try{N(S.requestDnsEvents());const z=w(),ne=await(0,f.Ay)(z.locals,"activity/dns",{overrideParams:ee});let Y=[];if(V)Y=U(ne,z.locals.umbrellaMapping),N(S.addDnsEvents(Y)),N(S.updateLocals({currentId:n}));else{const te=(0,l.oY)(z);Y=U(ne,z.locals.umbrellaMapping,te),N(S.updateDnsEvents(Y))}}catch{N(S.updateLocals({fetchUmbrellaDataError:!0}))}finally{N(S.doneRequestingDnsEvents())}},M=()=>async(ee,V)=>{const N=V(),w=N.locals,z=(0,l.k4)(N),ne=(0,l.oY)(N),Y=!1,te={to:ne.timestamp,limit:f.L8};w.currentId+w.itemsPerPage>z&&z<w.totalEvents&&await ee(o(te,Y))},m=()=>(ee,V)=>{const N=V().locals;let w=N.currentId-N.itemsPerPage;w=D(w),ee(S.updateLocals({currentId:w}))},P=()=>(ee,V)=>{const N=V().locals,w=N.itemsPerPage,z=N.currentId+w;ee(S.updateLocals({currentId:z})),ee(M())},T=ee=>(V,N)=>{const w=N().locals;V(S.updateLocals({itemsPerPage:ee}));const z=w.currentId||n,ne=Math.floor(z/ee)*ee;V(S.updateLocals({currentId:D(ne)})),V(M())},O=(ee={})=>async(V,N)=>{try{const w=await(0,f.Ay)(N().locals,"total-requests/dns",{overrideParams:ee});V(S.updateLocals({totalEvents:w.count,fetchUmbrellaDataError:!1}))}catch{V(S.updateLocals({fetchUmbrellaDataError:!0}))}},v=()=>async(ee,V)=>{try{const N=(0,f.Ay)(V().locals,"categories",{includeParams:!1});ee(S.addUmbrellaCategories(N)),ee(S.updateLocals({fetchUmbrellaDataError:!1}))}catch{ee(S.updateLocals({fetchUmbrellaDataError:!0}))}finally{ee(S.doneRequestingUmbrellaCategories())}},L=(ee="reporting")=>async(V,N)=>{const w=N().locals.umbrellaOauthToken;if(!u(w))return V(S.updateLocals({umbrellaOauthToken:w,fetchUmbrellaDataError:!1}));const z={type:"GET",url:a()({controller:"security",action:"umbrella_oauth2_token"}),data:{api_key_name:ee},timeout:t};try{const ne=await d().ajax(z);return V(S.updateLocals({umbrellaOauthToken:ne.token,fetchUmbrellaDataError:!1}))}catch{return V(S.updateLocals({fetchUmbrellaDataError:!0}))}},B=A.actionTypes,F=A.selectors,K=()=>A.createStore(),b=ee=>async(V,N)=>{const w=N(),z=w.locals.umbrellaFilters||{},ne=s().pick(ee,s().keys(R)),Y={};Object.entries(ne).forEach(([te,Te])=>{let me="";te==="umbrellaCategories"?me=Te.reduce((Me,Ie)=>{const ge=p(Ie,w);return ge&&Me.push(ge),Me},[]).toString():te==="umbrellaActions"?me=Te.reduce((Me,Ie)=>{const ge=I(Ie);return ge&&Me.push(ge),Me},[]).toString():me=Te,Y[R[te]]?Y[R[te]]+=`,${me}`:Y[R[te]]=me}),V(S.updateLocals({filters:ee,umbrellaFilters:Y})),s().isEqual(z,Y)||(await V(L()),V(S.requestDnsEvents()),V(O()),V(o({},!0)))},q=(ee,V,N)=>async w=>(w(S.updateLocals({umbrellaOrgId:ee,umbrellaMapping:N})),await w(L()),await w(v()),w(b(V)));var j=null;const J=s().extend({},S,{setEventsFilter:b,initializeUmbrella:q,nextPage:P,prevPage:m,setItemsPerPage:T})},564948:(ae,x,e)=>{e.d(x,{Cp:()=>t,IM:()=>A,QK:()=>p,U1:()=>_,bF:()=>S,fJ:()=>r,o1:()=>l,qL:()=>s,rZ:()=>R});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466),y=e(108414);const d=(0,g.L)().withStoreName("NextGenMxWirelessStore").create(),l={...d.actions},_=()=>d.createStore(),a=!0,s={name:"MX RF Profile",twoFourGhzSettings:{minBitrate:{twoFourGhzSettings:y.sQ[11],fiveGhzSettings:y.sQ[12]}.twoFourGhzSettings,axEnabled:a},fiveGhzSettings:{minBitrate:12,axEnabled:a},perSsidSettings:{1:{name:"SSID 1",bandOperationMode:"dual",bandSteeringEnabled:!0},2:{name:"SSID 2",bandOperationMode:"dual",bandSteeringEnabled:!0},3:{name:"SSID 3",bandOperationMode:"dual",bandSteeringEnabled:!0},4:{name:"SSID 4",bandOperationMode:"dual",bandSteeringEnabled:!0}}},t=I=>["1","2","3","4"].includes(I),n=(I,U)=>{if(U!==void 0)for(let D=0;D<U.length;D++){const u=U[D];if(u!==void 0&&u.number===I.number){U[D]=I;break}}},E=(I,U)=>{Object.assign(I,U)},i=c.kC.injectEndpoints({endpoints:I=>({getPageData:I.query({async queryFn({networkId:U,serial:D,routedMode:u,isTemplate:o},M,m,P){const T=o?Promise.resolve():P(`networks/${U}/appliance/rfProfiles`),O=P(`networks/${U}/appliance/singleLan`),v=P(`networks/${U}/appliance/vlans`),L=P(`networks/${U}/appliance/ssids`),B=o?Promise.resolve():P(`devices/${D}/appliance/radio/settings`),F=await Promise.all([T,O,v,L,B]),[K,b,q,j,J]=F;if(K?.error||J?.error||j.error&&u||q.error&&!b.data&&u||b.error&&!q.data&&u)return{error:"Error fetching data"};const V=K?.data;return{data:{rfProfile:V?.[0],singleLan:b.data,vlans:q.data,ssids:j.data,radioSettings:J?.data}}}}),updateSSID:I.mutation({query:({networkId:U,ssid:D,number:u})=>({url:`networks/${U}/appliance/ssids/${u}`,method:"PUT",body:D}),async onQueryStarted({pageCacheObjectKey:U},{dispatch:D,queryFulfilled:u}){try{const{data:o}=await u;D(i.util.updateQueryData("getPageData",U,M=>{n(o,M.ssids)}))}catch(o){console.error(o)}}}),createRFProfile:I.mutation({query:({networkId:U,profile:D})=>({url:`networks/${U}/appliance/rfProfiles`,method:"POST",body:D}),async onQueryStarted({pageCacheObjectKey:U},{dispatch:D,queryFulfilled:u}){try{const{data:o}=await u;D(i.util.updateQueryData("getPageData",U,M=>{M.rfProfile=o}))}catch(o){console.error(o)}}}),updateRFProfile:I.mutation({query:({networkId:U,profile:D})=>({url:`networks/${U}/appliance/rfProfiles/${D.id}`,method:"PUT",body:D}),async onQueryStarted({pageCacheObjectKey:U},{dispatch:D,queryFulfilled:u}){try{const{data:o}=await u;D(i.util.updateQueryData("getPageData",U,M=>{M.rfProfile=o}))}catch(o){console.error(o)}}}),updateRadioSettings:I.mutation({query:({serial:U,rfProfileId:D,radioSettings:{twoFourGhzSettings:u,fiveGhzSettings:o}})=>({url:`devices/${U}/appliance/radio/settings`,method:"PUT",body:{twoFourGhzSettings:u,fiveGhzSettings:o,rfProfileId:D}}),async onQueryStarted({pageCacheObjectKey:U},{dispatch:D,queryFulfilled:u}){try{const{data:o}=await u;D(i.util.updateQueryData("getPageData",U,M=>{const{radioSettings:m}=M;E(m,o)}))}catch(o){console.error(o)}}})})}),{useGetPageDataQuery:R,useUpdateSSIDMutation:r,useCreateRFProfileMutation:A,useUpdateRFProfileMutation:S,useUpdateRadioSettingsMutation:p}=i},570286:(ae,x,e)=>{e.d(x,{U1:()=>E,o1:()=>n});var W=e(652129),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d);const l=["l3Trees","l3Links"],_=(0,W.L)().withStoreName("L3TopologyStore").withModels(l).withLiveTools().create(),a=_.actions,h=r=>{r(a.requestL3Trees()),r(a.requestL3Links())},s=(r,A)=>{r(a.addL3Trees(A.l3_trees)),r(a.addL3Links(A.l3_links))},t=()=>r=>{h(r);const A=y().get(g()({controller:"l3_topology",action:"show"}));A.fail(S=>{r(a.updateLocals({errorResponseText:S.responseText}))}),A.done(S=>{s(r,S)})},n=f().extend({},a,{fetchL3TopologyData:t}),E=r=>_.createStore(r),i=_.actionTypes;var R=null},574854:(ae,x,e)=>{e.d(x,{U1:()=>A,o1:()=>r});var W=e(652129),C=e(590657),g=e(230084),c=e(1499),y=e(945788),d=e(880453),f=e(663338),l=e(175038);const _=(0,W.L)().withStoreName("StatusBarWidgetsStore").withModels(["healthSummaries","uplinks","uplinkDetails","perUplinkUsageSummary","perUplinkPerformanceSummary","warmSpareSettings","statusBarWidgetGroupStatuses"]).create(),a=_.actions,h=p=>I=>{I(a.requestWarmSpareSettings()),(0,C.s)(p).done(U=>{I(a.addWarmSpareSettings([{id:p,...U}]))}).fail(U=>{f.A.error(U,{feature:l.Gv.HEALTH_WIDGET.tag}),I(a.failedRequestingWarmSpareSettings())}).always(()=>I(a.doneRequestingWarmSpareSettings()))},s=(p,I)=>U=>(U(a.requestUplinks()),(0,g.D)(p,I).then(({data:D})=>{const u=D.map(o=>({...o,id:o.serial}));U(a.addUplinks(u))}).catch(D=>{f.A.error(D,{feature:l.Gv.HEALTH_WIDGET.tag}),U(a.failedRequestingUplinks())}).finally(()=>U(a.doneRequestingUplinks()))),t=(p,I,U)=>D=>p(`N_${U}`).then(u=>{D(a.updateHealthSummaries([{id:I,...u.data}]))}).catch(u=>f.A.error(u,{feature:l.Gv.HEALTH_WIDGET.tag})),r={...a,fetchWarmSpareSettings:h,fetchUplinks:s,fetchSwitchHealth:p=>I=>{I(t(c.H,"Switch",p))},fetchWirelessHealth:p=>I=>{I(t(y.Z,"WirelessNode",p))},fetchWiredHealth:p=>I=>{I(t(d.o,"WiredNode",p))},updateStatusBarWidgetGroupStatuses:p=>I=>{I(a.updateStatusBarWidgetGroupStatuses(p))}},A=()=>_.createStore();var S=null},574903:(ae,x,e)=>{e.d(x,{M:()=>y});var W=e(953746),C=e.n(W),g=e(310466);const c=g.kC.injectEndpoints({endpoints:d=>({uploadTargetedClasses:d.mutation({query:({organizationId:f,data:l})=>{const _=l.fileData;let a;if(_ instanceof ArrayBuffer){let s="";new Uint8Array(_).forEach(n=>{s+=String.fromCharCode(n)}),a=btoa(s)}const h={fileData:a};return{url:`organizations/${f}/sm/asm/uploadTargetedClasses`,method:"PUT",body:h}}})})}),{useUploadTargetedClassesMutation:y}=c},581658:(ae,x,e)=>{e.d(x,{U1:()=>t,o1:()=>s});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129);const l=["deprecatedHttpReceivers"],_=(0,f.L)().withStoreName("HttpReceiversDeprecationStore").withModels(l).create(),a=_.actions,h=()=>E=>(E(a.requestDeprecatedHttpReceivers()),c().getJSON(d()({controller:"organization",action:"deprecated_http_receivers"})).done(i=>{E(a.addDeprecatedHttpReceivers(i))}).always(()=>{E(a.doneRequestingDeprecatedHttpReceivers())})),s=C().extend({},a,{fetchDeprecatedHttpReceivers:h}),t=()=>_.createStore();var n=null},582030:(ae,x,e)=>{e.d(x,{A:()=>f});var W=e(522224),C=e.n(W),g=e(4933);const c=(0,g.A)("PROMISE_STORE");function y(l){if(l.promise){let _=l.promise.responseText;try{_=JSON.parse(_).error}catch{}const a=l.promise.state()!=="pending"?null:l.promise;return C().extend({},l,{state:l.promise.state(),message:_,promise:a})}return l}const d={add(l){l.promise&&l.promise.always(()=>{this.dispatch(c.constants.UPDATE,y(l))}),this.dispatch(c.constants.UPDATE,y(l))},update(l){this.dispatch(c.constants.UPDATE,y(l))},remove(l){this.dispatch(c.constants.REMOVE,l)}},f=l=>{l.store("PromiseStore")||(l.addStore("PromiseStore",c),l.addActions({promises:d}))}},588737:(ae,x,e)=>{e.d(x,{BQ:()=>t,JY:()=>n,LG:()=>h,OA:()=>s,U1:()=>D,XL:()=>E,ep:()=>i,f_:()=>a,o1:()=>p});var W=e(14602),C=e.n(W),g=e(652129),c=e(29402),y=e(869592),d=e.n(y),f=e(644200);const l=(0,g.L)().withStoreName("ContentFilteringStore").withContextOptions([f.RJ]).create(),_=l.actions,a="youtubeEduId",h="youtubeRestriction",s="searchFiltering",t="urlAllowList",n="urlBlockList",E="activeThreatCategories",i="activeContentCategories",R="categoryChecking",r={saving:!1,saveSuccess:!1,errors:[],confirmations:null},A={saving:!1,saveSuccess:!0,errors:[],confirmations:null},S={handleErrors:(o,M)=>async m=>{let P={...r,errors:o};M&&(P={[M]:P}),m(_.updateLocals(P))},handleConfirmations:o=>async M=>{const m={...r,confirmations:o};M(_.updateLocals(m))},saveContentFilteringPage:o=>async M=>{M(_.updateLocals({saving:!0}));const m=d()({controller:"configure",action:"update_content_filtering"}),{response:P,errors:T,confirmations:O}=await(0,c.A)(m,{fetchOptions:{method:"POST"},data:o,defaultError:"Error saving content filtering settings, please contact support"});if(T&&T.length)return M(S.handleErrors(T));if(O&&O.length)return M(S.handleConfirmations(O));const v={...P,categoryMigrations:[],disableBrightcloudCf:o.disableBrightcloudCf};M(_.updateLocals({...A,originals:{...v},latest:{...v}}))},fetchAvailableCategoriesForUrl:o=>async(M,m)=>{const P={...m().locals.categoryChecking};P.saving=!0,M(_.updateLocals({categoryChecking:P}));const T=d()({controller:"security",action:"url_category",url:o}),{response:O,errors:v}=await(0,c.A)(T,{defaultError:"Error fetching categories for url lookup, please contact support"});if(v)return M(S.handleErrors(v,R));M(_.updateLocals({categoryChecking:{...A,categories:O.categories}}))},addCategory:(o,M)=>async(m,P)=>{const T={...P().locals.latest},O=T[M];T[M]=[...O,o],m(_.updateLocals({latest:T}))},removeCategory:(o,M)=>async(m,P)=>{const T={...P().locals.latest},O=T[M];T[M]=O.filter(v=>v.name!==o),m(_.updateLocals({latest:T}))},updateFullListCfEnabled:o=>async(M,m)=>{const P={...m().locals.latest,fullListCfEnabled:o};M(_.updateLocals({latest:P}))}},p={..._,...S},I=l.actionTypes,U=l.selectors,D=()=>l.createStore();var u=null},589761:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(522224),C=e.n(W),g=e(942932),c=e.n(g),y=e(6464);const d="QUERY_JOB_RESULT_STORE",f={RESET:`${d}_RESET`,UPDATE:`${d}_UPDATE`},l=s=>{let t=[];if(C().any(s)){const n=C().max(C().pluck(s,"columns"),i=>i.length),E=C().flatten(c().toArrays(`${n}
`)).map(i=>i==="id"||i==="shard"?C().capitalize(i):i);C().each(s,i=>{const R=c().toArrays(i.rows).map((r,A)=>r.reduce((S,p,I)=>(S[E[I]]=p,S),{id:`${i.id}_${A}`,shard:`n${i.shard_id}`}));t=t.concat(R)})}return t},_=y.A.createStore({initialize(){this.queryResults={},this.bindActions.apply(this,[f.RESET,this.onReset,f.UPDATE,this.onUpdate])},getResultsForJob(s){return this.queryResults[s]||[]},onReset(s){const{jobKey:t,data:n}=s;this.queryResults[t]=n,this.emit("change")},onUpdate(s){const{jobKey:t,data:n,jobStatus:E}=s,i=l(n);if(E==="success"||E==="failure")this.queryResults[t]=i;else{const R=this.getResultsForJob(t);this.queryResults[t]=R.concat(i)}this.emit("change")}});_.constants=f;const a={reset(s,t){this.dispatch(_.constants.RESET,{jobKey:s,data:t})},update(s,t,n){return this.dispatch(_.constants.UPDATE,{jobKey:s,data:t,jobStatus:n})}};function h(s){return s.stores.QueryJobResultStore||(s.addStore("QueryJobResultStore",new _),s.addActions({queryJobResults:a})),_}},590854:(ae,x,e)=>{e.d(x,{A:()=>s});var W=e(6464),C=e(28291),g=e(755373),c=e.n(g),y=e(941669),d=e.n(y),f=e(522224),l=e.n(f);const _={SET_FILTER:"SET_FILTER"},a=W.A.createStore({initialize(){this.numRetries=3,this._baseUrl="/manage/security",this._data={total_events:0,retrospective_events:[],events_over_time:{interval:7200,data:{}},top_clients:[],top_oses:[],top_sources:[],top_threats:[]},this._remoteApis={baseSummary:{userErrorDescriptor:"",loading:!1,url:"base_summary.json"},histogramSummary:{userErrorDescriptor:"Events over time",loading:!1,url:"histogram_summary.json"},sourcesSummary:{userErrorDescriptor:"Top sources of threats",loading:!1,url:"sources_summary.json"},threatsSummary:{userErrorDescriptor:"Most prevalent threats",loading:!1,url:"threat_summary.json"},clientsSummary:{userErrorDescriptor:"Most prevalent clients",loading:!1,url:"clients_summary.json"}},this.bindActions(_.SET_FILTER,this.onSetFilter)},onSetFilter(t){const n=c().stringify({t0:t.t0,timespan:t.timespan,filter:t.filter},{arrayFormat:"brackets"});this._searchPath!==n&&(this._searchPath=n,this._fetchSummary(this._remoteApis.histogramSummary),this._fetchSummary(this._remoteApis.baseSummary),this._fetchSummary(this._remoteApis.threatsSummary),this._fetchSummary(this._remoteApis.sourcesSummary),this._fetchSummary(this._remoteApis.clientsSummary))},_fetchSummary(t){const n=t.xhr;n&&n.abort(),t.loading=!0,this.emit("change");const E={type:"GET",url:`${this._baseUrl}/${t.url}?${this._searchPath}`,dataType:"json",success:i=>{l().each(i,(R,r)=>{r==="retrospective_events"?this._data.retrospective_events=C.A.fromJsonEvents(R):this._data[r]=R},this)}};t.xhr=d().multipleAjax([E],{numRetries:this.numRetries}).fail((i,R,r)=>{if(R==="abort")return;t.userErrorDescriptor===""||t.userErrorDescriptor===void 0?d().top_status({content:`Error loading summary data: ${r}`,box_class:"bad"}):d().top_status({content:`Error loading summary data (${t.userErrorDescriptor}): ${r}`,box_class:"bad"})}).always(()=>{t.loading=!1,this.emit("change")})},getState(){return l().extend({loading:this._remoteApis.baseSummary.loading,histogramLoading:this._remoteApis.histogramSummary.loading,sourcesLoading:this._remoteApis.sourcesSummary.loading,threatsLoading:this._remoteApis.threatsSummary.loading,clientsLoading:this._remoteApis.clientsSummary.loading},this._data)}}),h={setFilter(t,n,E){this.dispatch(_.SET_FILTER,{t0:t,timespan:n,filter:E})}};function s(t){t.store("SecuritySummaryStore")||(t.addStore("SecuritySummaryStore",new a),t.addActions({securitySummary:h}))}},593171:(ae,x,e)=>{e.d(x,{s_:()=>u,zd:()=>B});var W=e(522224),C=e.n(W),g=e(967720),c=e(646894),y=e.n(c),d=e(901265),f=e(82960),l=e(709442),_=e(869592),a=e.n(_);const h="UPDATE_LOCALS",s="UPDATE_OBJECT",t="UPDATE_OBJECTS",n="RESET_CHANGES",E="RESET_OBJECT_FIELD",i=(F,K,b)=>({type:s,change:{objectId:K,modelName:F,newValue:b}}),R=(F,K)=>({type:t,changes:{modelName:F,newValues:K}}),r=(F,K,b)=>({type:E,changes:{objectId:K,modelName:F,fieldName:b}}),A=F=>({type:h,locals:F}),S=()=>({type:n}),p="REQUEST_FIREWALL_RULES",I="RECEIVE_FIREWALL_RULES",U=()=>({type:p}),D=F=>({type:I,firewallRules:F}),u=()=>F=>(F(U()),(0,g.A)(a()({controller:"support",action:"new_firewall_configuration_rules"}),{credentials:"same-origin"}).then(K=>K.json()).then(K=>F(D(K)))),o=(F={},K)=>{switch(K.type){case h:return C().extend({},F,K.locals);default:return F}},M={firewallRules:{}},m=(F=M,K)=>{switch(K.type){case s:return C().reduce(K.change.newValue,(b,q,j)=>(0,l.Oe)(b,[K.change.modelName,K.change.objectId,j],q),F);case t:return C().reduce(K.changes.newValues,(b,q,j)=>C().reduce(q,(J,ee,V)=>(0,l.Oe)(J,[K.changes.modelName,j,V],ee),b),F);case n:return M;default:return F}},P=(F=[],K)=>{switch(K.type){case I:return y()(F,{$set:K.firewallRules});default:return F}},T=(0,f.combineReducers)({firewallRules:P}),O=(0,f.combineReducers)({locals:o,changes:m,models:T}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__({trace:!0,traceLimit:25}),L=f.compose,B=F=>(0,f.createStore)(O,F,L((0,f.applyMiddleware)(d.A)))},600352:(ae,x,e)=>{e.d(x,{U1:()=>u,o1:()=>U});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(967720),_=e(281034),a=e(459324),h=e(417046),s=e(91979),t=e(692301);const n=["bluetoothNodeEvents","devices","geofencings","tags"],E=(0,f.L)().withStoreName("PccClientLocationStore").withModels(n).withCustomKeyedModel("pccUsers",m=>m.email).withChanges().create(),i=E.actions,R=m=>P=>(P(i.requestBluetoothNodeEvents()),(0,l.A)(d()({controller:"pcc",action:"pcc_bluetooth_node_events_json",id:m})).then(T=>T.json()).then(T=>P(i.addBluetoothNodeEvents(T)))),r=m=>P=>{P(i.requestGeofencings()),(0,_.yJ)(m).then(T=>{const O=[];T.applied_mobile_config_ids.forEach(v=>{const L=T.mobile_config_data[v];O.push(...L.geofencing_payloads)}),P(i.addGeofencings(O))})},A=()=>m=>(m(i.requestTags()),(0,_._Y)().then(P=>{m(i.addTags(P))})),U={...i,fetchBluetoothNodeEvents:R,fetchGeofencings:r,fetchTags:A,fetchPccUsers:()=>m=>{m(i.requestPccUsers()),m(i.updateLocals({isFetchingOwners:!0}));const P=v=>m(i.updatePccUsers(v)),T=v=>m(i.addPccUsers(v)),O=()=>{m(i.doneRequestingPccUsers()),m(i.updateLocals({isFetchingOwners:!1}))};return(0,_.r0)(T,P,O)},fetchDeviceDataUsage:m=>P=>(0,_.Ie)(m.id).then(T=>{const O=Object.values(T.data)[0],v=c().extend({data_usage:O},m);P(i.updateDevices([v]))}),updateDevice:(m,P)=>(T,O)=>{const v=O(),L=(0,h.$n)(v,{id:[m]}),B=(0,h.Ik)(v,{id:m}),F={...c().pick(B,"id","name","notes","tags"),...P};if(B.owner_email?F.pcc_user_id=(0,s.pw)(v,{id:B.owner_email}).id:L.owner_email&&(F.clear_pcc_user=!0),F.isolated=B.isolated?"1":"0",F.address=B.user_supplied_address,!c().isEmpty((0,s.p2)(v))){const q=(0,s.pw)(v,{id:B.owner_email});F.user=c().pick(q,"email","full_name","username")}const b=(0,t.Cd)(v,{id:B.node_group_id});F.network=b.eid,(0,_.dh)(m,F).done(q=>{if(T(i.updateLocals({isEditingDetails:!1,showOwnerForm:!1})),T(i.resetAllChanges()),L.node_group_id!==B.node_group_id)window.location=a.Sqy;else{const j=q.node;q.node.best_lat&&q.node.best_lon&&(j.lat=q.node.best_lat,j.lng=q.node.best_lon),L&&c().extend({},j,L),T(i.updateDevicesWithMerge([j])),q.node.pcc_user&&T(i.updatePccUsersWithMerge([q.node.pcc_user])),T(r(m)),T(A())}}).fail(q=>{let j=[];try{j=JSON.parse(q.responseText).errors}catch{j=["Error with request, please try again."]}T(i.updateLocals({errors:j}))})}},D=E.actionTypes,u=()=>E.createStore(),o=c().extend({},E,{configureStore:u,actions:U,actionTypes:D});var M=null},603053:(ae,x,e)=>{e.d(x,{M:()=>W});const W=[0,4096,8192,12288,16384,20480,24576,28672,32768,36864,40960,45056,49152,53248,57344,61440]},603690:(ae,x,e)=>{e.d(x,{c6:()=>l,u$:()=>_});var W=e(310466),C=e(652129),g=e(869592),c=e.n(g);const y=(0,C.L)().create().createStore(),d="SmIseProfilePccApps",f=W.q9.enhanceEndpoints({addTagTypes:[d]}).injectEndpoints({endpoints:a=>({fetchPccApps:a.query({query:()=>({url:c()({controller:"configure",action:"pcc_apps_json"}),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Mkiconf.authenticity_token}})}),fetchPccAppsSearch:a.query({query:({term:h,platform:s})=>({url:c()({controller:"configure",action:"pcc_app_store_search"}),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Mkiconf.authenticity_token},params:{term:h,platform:s,lookup_type:"search"}})})})}),{useFetchPccAppsQuery:l,useFetchPccAppsSearchQuery:_}=f},608696:(ae,x,e)=>{e.d(x,{A:()=>S});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(724983),l=e.n(f),_=e(4933);const a=(0,_.A)("BACKGROUND_JOB_STORE",{indicies:["type","status"]}),h={},s={};var t;function n(p,I,U,D,u,o,M,m){C().defer(()=>E.loadBatched(p,I,U,D,u,o,M,m))}const E={reset(){this.dispatch(a.constants.RESET)},track(p){t=this,this.dispatch(a.constants.UPDATE,[p]),C().defer(R)},fetch(p,I,U,D){t=this,r({job_action:"fetch",job_ids:[p],scope:I==="org"?"org":"ng",is_scala:U,full:D},u=>{t.dispatch(a.constants.UPDATE,u),C().defer(R)})},find(p,I,U){t=this,r({job_action:"find",job_class:p,requestFields:I,scope:U==="org"?"org":"ng"},D=>{t.dispatch(a.constants.UPDATE,D),C().defer(R)})},loadBatched(p,I,U,D,u,o,M,m){t=m||this,r({job_action:"find",job_class:U,request_fields:D,scope:u==="org"?"org":"ng",limit:o,offset:M,count_jobs:!0},P=>{t.dispatch(a.constants.UPDATE,P);const T=P&&P.length>0?P[0].__total_count:0,O=T>0?Math.round(((M||0)+P.length)/T*100):100;C().defer(I,O),o&&P.length===o?n(p,I,U,D,u,o,(M||0)+o,t):C().defer(p),C().defer(R)})},cancel(p,I){return c().ajax({url:d()({controller:"video_exports",action:"cancel_job"}),type:"POST",data:p}).done(I)},togglePauseProcessing(p,I){return c().ajax({url:d()({controller:"video_exports",action:"toggle_pause_processing_for_job"}),type:"POST",data:p}).done(I).done(({frozen:U})=>{t.dispatch(a.constants.UPDATE,{id:p.job_id,frozen:U})})},pause(p,I){return c().ajax({url:d()({controller:"video_exports",action:"pause_job"}),type:"POST",data:p}).done(I).done(({export_paused:U})=>{t.dispatch(a.constants.UPDATE,{id:p.job_id,export_paused:U})})},resume(p,I){return c().ajax({url:d()({controller:"video_exports",action:"resume_job"}),type:"POST",data:p}).done(I).done(({export_paused:U})=>{t.dispatch(a.constants.UPDATE,{id:p.job_id,export_paused:U})})},delete(p,I){return c().ajax({url:d()({controller:"video_exports",action:"delete_job"}),type:"POST",data:p}).done(I)}},i=C().throttle(A,5e3);function R(){var p=!1;C().chain(a.getState()).filter(l().is_active).each(I=>{p=!0;const U=I.job_type==="scala"?s:h,D=I.scope||I.organization_id?"org":"ng";U[I.id]={job_id:I.id,scope:D}}),p&&i()}function r(p,I){return c().ajax({url:d()({controller:"dashboard",action:"job_data"}),type:"GET",data:p}).done(I)}function A(){const p=C().chain(h).where({scope:"ng"}).pluck("job_id").value(),I=C().chain(h).where({scope:"org"}).pluck("job_id").value(),U=C().chain(s).where({scope:"ng"}).pluck("job_id").value(),D=C().chain(s).where({scope:"org"}).pluck("job_id").value(),u=[{job_ids:p,scope:"ng"},{job_ids:I,scope:"org"},{job_ids:U,scope:"ng",is_scala:!0},{job_ids:D,scope:"org",is_scala:!0}];C().each(u,o=>{C().isEmpty(o.job_ids)||r(C().extend(o,{job_action:"fetch"}),M=>{t.dispatch(a.constants.UPDATE,M),C().chain(M).filter(l().is_finished).each(m=>{const P=m.job_type==="scala"?s:h;delete P[m.job_id]}),C().any(M,l().is_active)&&C().defer(i)})})}function S(p){p.store("BackgroundJobStore")||(p.addStore("BackgroundJobStore",a),p.addActions({backgroundJobs:E}))}},612355:(ae,x,e)=>{e.d(x,{U1:()=>s,o1:()=>h});var W=e(522224),C=e.n(W),g=e(652129),c=e(758928),y=e.n(c),d=e(653806);const f=(0,g.L)().withStoreName("FloorplanStatusesStore").withCustomKeyedModel("floorplanStatuses",({floorPlanId:t})=>`${t}`).create(),l=f.actions,_=t=>n=>{n(l.requestFloorplanStatuses());const E=`/api/v1/organizations/${y().org_id}/floorPlans/autoLocate/statuses`;return(0,d.AT)("GET",E,t).then(i=>{const R=i.data.items;n(l.updateFloorplanStatuses(R))}).catch(()=>{n(l.failedRequestingFloorplanStatuses())}).finally(()=>{n(l.doneRequestingFloorplanStatuses())})};var a=null;const h=C().extend({},f.actions,{fetchFloorplanStatuses:_}),s=()=>f.createStore()},616435:(ae,x,e)=>{e.d(x,{o1:()=>D});var W=e(967720),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(758928),f=e.n(d),l=e(522224),_=e.n(l),a=e(652129),h=e(518568);const s=["cameraLicenses"],t=(0,a.L)().withStoreName("CameraLicensesStore").withModels(s).withModal().withChanges().withApiJobs().withPrefs().withFlexTables().create(),n=t.actions,E=()=>m=>{if(f().can_read)return m(n.requestCameraLicenses()),(0,W.A)(g()({controller:"cameras",action:"camera_licenses_json"}),{credentials:"same-origin"}).then(P=>P.json()).then(P=>{const T=[];if(f().in_subscription)for(let v=0;v<((O=P.licenses)===null||O===void 0?void 0:O.length);v++){var O;const L=P.licenses[v];for(let B=0;B<L.quantity;B++)T.push({...L,id:`${L.short_name}-${B}`,assigned_node_id:null})}m(n.addCameraLicenses(f().in_subscription?T:P.licenses))})},i=(m,P)=>{const O={...P().locals.licenseModal,...m};return n.updateLocals({licenseModal:O})},R=()=>m=>{const P={showAssignCameraLicenseModal:!1,errors:[],isSaving:!1,saveSuccess:null,id:null};m(n.updateLocals({licenseModal:P}))},r=()=>m=>{const P=m(E());return m(R()),P},A=()=>(m,P)=>{m(i({showAssignCameraLicenseModal:!0},P))},S=()=>(m,P)=>{m(i({showAssignCameraLicenseModal:!1},P))},p=(m,P,T,O)=>T.done(v=>{const L=_().isEmpty(v.errors);m(i({showAssignCameraLicenseModal:!1,isSaving:!1,saveSuccess:L,errors:v.errors},P)),m(E()),typeof O=="function"&&O()}).fail(v=>{typeof O=="function"&&O(v),m(i({isSaving:!1,saveSuccess:!1,errors:JSON.parse(v.responseText).errors},P))}),I=(m,P,T)=>(O,v)=>{const L=Object.values(P)[0].split(",")[0],B=(0,h.Zn)(v(),{id:L}),F={assigned_node_id:m};return f().in_subscription?(F.license_type=B?.camera_license_type,F.retention_period=B?.retention):F.id=L,O(i({isSaving:!0},v)),p(O,v,y().ajax({url:g()({controller:"cameras",action:"assign_camera_license"}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(F)}),T)},U=(m,P,T)=>(O,v)=>{const L={assigned_node_id:m};return f().in_subscription?(L.license_type=P.license_type,L.retention_period=P.retention_period):L.license_id=P.license_id,O(i({isSaving:!0},v)),p(O,v,y().ajax({url:g()({controller:"cameras",action:"remove_camera_license"}),type:"DELETE",dataType:"json",contentType:"application/json",data:JSON.stringify(L)}),T)},D=_().extend({},n,{initializeCameraLicense:r,initializeModal:R,showLicenseModal:A,hideLicenseModal:S,submitAssignmentsById:I,removeAssignmentById:U}),u=t.actionTypes,o=()=>t.createStore();var M=null},620232:(ae,x,e)=>{e.d(x,{p:()=>g});var W=e(310466);const C=W.kC.injectEndpoints({endpoints:c=>({fetchForceUpgradeStatus:c.query({query:({organizationId:y,networkId:d})=>({url:`/organizations/${y}/sm/agent/forceUpgradeStatus`,params:{networkId:d}})})})}),{useFetchForceUpgradeStatusQuery:g}=C},621421:(ae,x,e)=>{e.d(x,{U1:()=>a,o1:()=>s});var W=e(941669),C=e.n(W),g=e(652129),c=e(644200),y=e(967720),d=e(869592),f=e.n(d);const l=["nodes"],_=(0,g.L)().withStoreName("AnyConnectCerts").withModels(l).withContextOptions([c.RJ]).withModal().create(),a=()=>_.createStore();var h=null;const{actions:s}=_,t=i=>{const R=["Error submitting request"];let r=[];if(!i)return R;try{var A;const p=(A=JSON.parse(i).update_messages)===null||A===void 0?void 0:A.errors;p&&p.length&&(r=p)}catch{r=R}return r},n=async(i,R,r,A,S={})=>{try{var p;i(s.updateModal({errors:[]}));const U=await(await(0,y.A)(R,{method:"POST",body:r,headers:S})).json(),D=U==null||(p=U.update_messages)===null||p===void 0?void 0:p.errors;let u=!0,o=[];D&&D.length&&(u=!1,o=D),i(s.updateModal({isSaving:!1,saveSuccess:u,errors:o}))}catch({responseText:I}){i(s.updateModal({isSaving:!1,saveSuccess:!1,errors:t(I)}))}},E=(i,R)=>C().ajax({url:f()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:i}).done(r=>{R(s.updateNodesWithMerge(r.nodes))}).fail(()=>{R(s.failedRequestingNodes())});s.uploadCertificates=i=>async R=>{await n(R,f()({controller:"tbd",action:"tbd"}),i,{"Content-Type":"multipart/form-data"})},s.generateCsr=i=>async R=>{await n(R,f()({controller:"tbd",action:"tbd"}),i)},s.fetchNodes=()=>{const i={f:["default"]};return async R=>{await E(i,R)}}},629133:(ae,x,e)=>{e.d(x,{m:()=>a});var W=e(14602),C=e(296540),g=e(50811),c=e(310466);const y=c.kC.injectEndpoints({endpoints:h=>({getWirelessClients:h.query({queryFn:async({organizationId:s,networkId:t})=>{const n=`/api/v1/organizations/${s}/wireless/clients?networkIds[]=${t}&timespan=604800&perPage=500`,E=await(0,g.apiRequest)("GET",n);return{data:{data:E.data,nextPageUrl:E.nextPageUrl}}}}),getNextPage:h.query({queryFn:async({nextPageUrl:s})=>{const t=await(0,g.apiRequest)("GET",s);return{data:{data:t.data,nextPageUrl:t.nextPageUrl}}}})})}),{useGetWirelessClientsQuery:d,useLazyGetNextPageQuery:f}=y,l=10,_={isFetching:!1,isError:!1,data:{}},a=({organizationId:h,networkId:s,macsToCheck:t,skip:n=!1})=>{const[E,i]=(0,C.useState)([]),[R,r]=(0,C.useState)(null),[A,S]=(0,C.useState)(!1),[p,I]=(0,C.useState)(!1),[U,D]=(0,C.useState)(new Set),u=(0,C.useRef)(0),o=(0,C.useRef)(!1),{data:M,isFetching:m,isError:P}=d({organizationId:h,networkId:s},{skip:n}),[T,{isFetching:O,isError:v}]=f();(0,C.useEffect)(()=>{M&&(i(M.data),r(M.nextPageUrl),D(new Set(M.data.map(B=>B.mac))),u.current=0)},[M]),(0,C.useEffect)(()=>{const B=async()=>{if(o.current)return;o.current=!0;let F=[...E];const K=new Set(U);for(;R&&u.current<l;){S(!0);try{const b=await T({nextPageUrl:R}).unwrap();F=[...F,...b.data],i(F),r(b.nextPageUrl);const q=new Set(b.data.map(ee=>ee.mac)),j=K.size;if(q.forEach(ee=>K.add(ee)),D(K),K.size===j||t.filter(ee=>!K.has(ee)).length===0)break;u.current++}catch{I(!0);break}finally{S(!1)}}o.current=!1};!n&&t.some(F=>!U.has(F))&&B()},[R,t,E,T]);const L=(0,C.useMemo)(()=>E.reduce((B,F)=>(B[F.mac]=F,B),{}),[E]);return n?_:{isFetching:A||m||O,isError:p||P||v,data:L}}},630577:(ae,x,e)=>{e.d(x,{Hb:()=>d,hj:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["dscpToCosMapping"]}).injectEndpoints({endpoints:f=>({fetchDscpToCosMappings:f.query({query:l=>({url:`networks/${l}/switch/dscpToCosMappings`}),providesTags:(l,_,a)=>[{type:"dscpToCosMapping",id:a}]}),updateDscpToCosMappings:f.mutation({query:({networkId:l,dscpToCosMapping:{..._}})=>({url:`networks/${l}/switch/dscpToCosMappings/`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"dscpToCosMapping",id:a.networkId}]})}),overrideExisting:!1}),{useFetchDscpToCosMappingsQuery:y,useUpdateDscpToCosMappingsMutation:d}=c},631210:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(4933),c=e(869592),y=e.n(c);const d=(0,g.A)("CUSTOM_QUERY_STORE"),f={reset(_){this.dispatch(d.constants.RESET,_)},fetch(_){return C().get(y()({controller:"queries",action:"custom_queries_json"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},create(_){return C().post(y()({controller:"queries",action:"create_query"}),_).done(a=>{this.dispatch(d.constants.RESET,[a].concat(d.getState()))})},update(_){return C().post(y()({controller:"queries",action:"new_update"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},remove(_){return C().post(y()({controller:"queries",action:"delete_custom_queries"}),_).done(h=>{this.dispatch(d.constants.REMOVE,{ids:h.deleted})})}},l=_=>{_.store("CustomQueryStore")||(_.addStore("CustomQueryStore",d),_.addActions({customQueries:f}))}},643699:(ae,x,e)=>{e.d(x,{A:()=>E});var W=e(6464),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(758928),_=e.n(l);const a="LICENSE_STATE_STORE",h={RESET:`${a}_RESET`,UPDATE:`${a}_UPDATE`,REMOVE:`${a}_REMOVE`},s=W.A.createStore({initialize(){this.licenseState={},this.bindActions.apply(this,[h.RESET,this.onReset,h.UPDATE,this.onUpdate,h.REMOVE,this.onRemove])},constants:g().clone(h),onReset(i){this.licenseState=i,this.emit("change")},onUpdate(i){this.licenseState=g().extend({},this.licenseState,i),this.emit("change")},onRemove(i){this.licenseState=g().omit(this.licenseState,i),this.emit("change")},getState(){return this.licenseState}}),t={reset(i){this.dispatch(h.RESET,i)},update(i){this.dispatch(h.UPDATE,i)},remove(i){this.dispatch(h.REMOVE,i)},createSmTrial(i){const R={trial_lead_uuid:i};return y().post(f()({controller:"organization",action:"create_sm_trial"}),R).done(r=>{this.dispatch(h.RESET,r)})},fetchCotermLicenseOverview(){const i=`/api/v1/organizations/${_().org_id}/licensing/coterm/licenses`;return y().get(i).done(R=>{this.dispatch(h.UPDATE,R)})}},n=function(i){return i.stores.LicenseStateStore||(i.addStore("LicenseStateStore",new s),i.addActions({licenseState:t})),s};n.constants=g().clone(h);const E=n},644200:(ae,x,e)=>{e.d(x,{Ay:()=>M,OF:()=>E,RJ:()=>n,gC:()=>A,kn:()=>i,lt:()=>R});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(869592),d=e.n(y),f=e(941669),l=e.n(f),_=e(758928),a=e.n(_),h=e(689917),s=e(775113);function t(m){return m.charAt(0).toUpperCase()+m.slice(1)}const n="supportedFeatures",E="administeredOrgs",i="administeredTags",R="administeredSsids",r="administeredSwitches",A="accessRole",p=[n,E,i,R,r,A,"permissions"],I={tags:["tags","update"],network:["networks","update"],currentOrg:["currentOrg","update"],currentShard:["currentShard","update"],accessRole:["user","updateAccessRole"],administeredOrgs:["user","updateAdmOrgs"],administeredTags:["user","updateAdmTags"],administeredSsids:["user","updateAdmSsids"],administeredSwitches:["user","updateAdmSwitches"],promise:["promises","add"]},U=m=>{const P=window.flux||{};c().each(m,(T,O)=>{if(I[O]&&P.actions){const[v,L]=I[O];P.actions[v][L](T)}})},D=c().reduce(p,(m,P)=>{const T={[P]:{fetchActionName:`fetch${t(P)}`,initialState:{[P]:{},[`isFetching${t(P)}`]:!1}}};return c().extend({},m,T)},{});class u extends h.A{constructor(P){super(),this.subContextBranches=c().filter(P,T=>D[T]),this.initialState=c().reduce(this.subContextBranches,(T,O)=>c().extend({},T,D[O].initialState),{isFetching:!1})}actionTypes(){return{request:"REQUEST_CONTEXT",update:"UPDATE_CONTEXT",clear:"CLEAR_CONTEXT"}}actions(){const P=this.actionTypes(),T={requestContext:()=>({type:P.request}),updateContext:j=>J=>{J({type:P.update,update:j}),U(j)},clearContext:()=>({type:P.clear})},b={fetchSupportedFeatures:(j,J=!1)=>ee=>{ee(T.updateContext({isFetchingSupportedFeatures:!0}));let V;return J?V=`${d()({global:!0,controller:"/ssp/supported_features",action:"show"})}?features=${JSON.stringify(j)}`:V=`${d()({controller:"supported_features",action:"show"})}?features=${JSON.stringify(j)}`,l().getJSON(V).done(N=>{ee(T.updateContext({isFetchingSupportedFeatures:!1,supportedFeatures:N}))}).fail(()=>ee(T.updateContext({isFetchingSupportedFeatures:!1})))},fetchAdministeredOrgs:()=>j=>{j(T.updateContext({isFetchingAdministeredOrgs:!0}));const J=l().getJSON(d()({controller:"organization",action:"administered_orgs"})).done(ee=>{if(a().administered_orgs=ee,a().org_id){const V=a().administered_orgs[a().org_id];a().administered_networks=V?V.node_groups:{}}l()(a()).trigger("change:administered_orgs"),j(T.updateContext({isFetchingAdministeredOrgs:!1,administeredOrgs:ee}))}).fail(()=>{a().is_acting_admin&&l().top_status({box_class:"bad",content:"Failed to load organization data. Please try again later."}),j(T.updateContext({isFetchingAdministeredOrgs:!1}))});return U({promise:{id:"administeredOrgsXhr",promise:J}}),J},fetchAdministeredSsids:(j=null)=>(J,ee)=>{const V=j||ee().context.currentOrg||a().administered_orgs[a().org_id]||{};return J(T.updateContext({isFetchingAdministeredSsids:!0})),l().getJSON(d()({scala_project:"nmr",organization:V,controller:"reports",action:"administered_ssid_map"})).done(N=>{J(T.updateContext({isFetchingAdministeredSsids:!1,administeredSsids:N}))}).fail(()=>J(T.updateContext({isFetchingAdministeredSsids:!1})))},fetchAdministeredSwitches:()=>j=>{j(T.updateContext({isFetchingAdministeredSwitches:!0}));const J=s.A.urlForApi({path:`organizations/${a().org_id}/devices`});return l().getJSON(J).done(ee=>{j(T.updateContext({isFetchingAdministeredSwitches:!1,administeredSwitches:ee}))}).fail(()=>j(T.updateContext({isFetchingAdministeredSwitches:!1})))},fetchAdministeredTags:(j=null)=>(J,ee)=>{const V=j||ee().context.currentOrg||a().administered_orgs[a().org_id]||{};return J(T.updateContext({isFetchingAdministeredTags:!0})),l().getJSON(d()({scala_project:"nmr",organization:V,controller:"reports",action:"administered_tag_map"})).done(N=>{J(T.updateContext({isFetchingAdministeredTags:!1,administeredTags:N}))}).fail(()=>J(T.updateContext({isFetchingAdministeredTags:!1})))},fetchAccessRole:()=>j=>(j(T.updateContext({isFetchingAccessRole:!0})),l().getJSON(d()({controller:"users",action:"access_role"})).done(J=>{j(T.updateContext({isFetchingAccessRole:!1,accessRole:J}))}).fail(()=>j(T.updateContext({isFetchingAccessRole:!1}))))};return c().reduce(this.subContextBranches,(j,J)=>{const ee=D[J].fetchActionName;return c().extend({},j,{[ee]:b[ee]})},T)}reducer(){return(P=this.initialState,T)=>{const O=this.actionTypes();switch(T.type){case O.request:return c().extend({},P,{isFetching:!0});case O.update:{const v=c().extend(T.update,{isFetching:!1});return c().extend({},P,v)}case O.clear:return{};default:return P}}}create(){return{actionTypes:this.actionTypes(),actions:this.actions(),reducer:this.reducer()}}}const o=m=>new u(m),M=u},649927:(ae,x,e)=>{e.d(x,{s7:()=>f,xA:()=>a});var W=e(551066),C=e(961225),g=e(292310),c=e(310466),y=e(1455),d=e(697268);const f=c.kC.injectEndpoints({endpoints:h=>({fetchSwitchStackIndex:h.query({query:({networkId:s})=>({url:`networks/${s}/switch/stacks`})})})}),{useFetchSwitchStackIndexQuery:l,useLazyFetchSwitchStackIndexQuery:_}=f,a=({networkId:h,organizationId:s})=>(l(typeof h<"u"?{networkId:h}:W.skipToken),(0,y.r8)(typeof s<"u"&&typeof h<"u"?{organizationId:s,networkIds:[h]}:W.skipToken),(0,g.PV)(typeof h<"u"?{networkId:h}:W.skipToken),(0,C.useSelector)((0,d.ER)({networkId:h,organizationId:s})))},650553:(ae,x,e)=>{e.d(x,{o1:()=>m,wX:()=>u});var W=e(540590),C=e.n(W),g=e(522224),c=e.n(g),y=e(418562),d=e(775113),f=e(653806),l=e(652129),_=e(758928),a=e.n(_),h=e(990548),s=e(635968);const t=["delegatedPrefixes","vlanPrefixes","wanPorts"],n=(0,l.L)().withStoreName("IPv6PrefixesStore").withModels(t).withPrefs().withFlexTables().withChanges().create(),E=n.actions,i=v=>{const L={path:"/devices/:serial/appliance/prefixes/delegated",serial:v,version:"v1"};return d.A.urlForApi(L)},R=v=>{const L={path:"/devices/:serial/appliance/prefixes/delegated/vlanAssignments",serial:v,version:"v1"};return d.A.urlForApi(L)},r=v=>{const L={path:`/organizations/${a().org_id}/appliance/devices/interfaces/ports/byDevice`,serials:[v],version:"v1"};return d.A.urlForApi(L)},A=v=>L=>{const B=r(v);return(0,f.AT)("GET",B).then(({data:F})=>{const K=(0,s.Sk)(F);L(E.addWanPorts(K))})},S=v=>L=>{L(E.requestDelegatedPrefixes());const B=i(v),F=K=>K.staticDelegatedPrefixId?K.staticDelegatedPrefixId:(0,y.A)();return(0,f.AT)("GET",B).then(({data:K})=>{const b=K.map(q=>({id:F(q),description:q.description,expiresAt:q.expiresAt,freeCount:q.counts.available,method:q.method,prefix:q.prefix,staticDelegatedPrefixId:q.staticDelegatedPrefixId,originInterface:q.origin.interface,usedCount:q.counts.assigned}));L(E.addDelegatedPrefixes(b))}).catch(()=>{L(E.failedRequestingDelegatedPrefixes())}).finally(()=>{L(E.doneRequestingDelegatedPrefixes())})},p=v=>L=>{L(E.requestVlanPrefixes());const B=R(v);return(0,f.AT)("GET",B).then(({data:F})=>{const K=F.map(b=>({id:`${b.vlan.id}-${b.origin.interface}`,mxIp:b.ipv6.address,originPrefix:b.origin.prefix,originInterface:b.origin.interface,status:b.status,subnetPrefix:b.ipv6.prefix,vlanId:b.vlan.id,vlanName:b.vlan.name}));L(E.addVlanPrefixes(K))}).catch(()=>{L(E.failedRequestingVlanPrefixes())}).finally(()=>{L(E.doneRequestingVlanPrefixes())})},I=()=>({confirmed:!0,synchronous:!0}),U=()=>`/networks/N_${a().ng_id}/appliance/prefixes/delegated/statics`,D=v=>{const L=B=>B==="independent"?{type:B}:{type:"internet",interfaces:[B]};return v.map(B=>{const F=(0,h.N)(B),K=F?"create":"update";return{resource:F?U():`${U()}/${B.id}`,operation:K,body:{prefix:B.prefix,description:B.description,origin:L(B.originInterface)}}})},u=v=>{const L=["Something went wrong, please try again."];return v.batchFailedOrPending?v.errors:L},o=v=>()=>{const L=I(),B=D(v);return(0,f.jO)(a().org_id,B,L)},M=v=>()=>{const L=U(),B=I(),F=[];return v.forEach(K=>{F.push({resource:`${L}/${K.id}`,operation:"delete"})}),(0,f.jO)(a().org_id,F,B)},m=c().extend({},E,{fetchDelegatedPrefixes:S,fetchVlanPrefixes:p,fetchWanPorts:A,saveDelegatedPrefixes:o,deleteDelgatedPrefixes:M}),P=n.actionTypes,T=()=>n.createStore();var O=null},652129:(ae,x,e)=>{e.d(x,{L:()=>c});var W=e(366587),C=e(766789);class g extends W.Ay{constructor(){super(),window.MkiRedux||(window.MkiRedux=new C.A),this.setSingletonStore(window.MkiRedux)}}const c=()=>new g;var y=null},671572:(ae,x,e)=>{e.d(x,{o1:()=>b});var W=e(640173),C=e(14602),g=e(941669),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(869592),_=e.n(l);const a=95,h="Please supply a Concentrator to test.",s="Error communicating to Dashboard",t=_()({controller:"configure",action:"get_online_nodes"}),n=_()({controller:"nodes",action:"test_connectivity_to_concentrator"}),E=(V=null)=>c().getJSON(t,V?{template_child_ng:V}:{}),R=V=>{const N=Y=>(te,Te)=>{const{concentratorTestContext:me}=Te().context;te(V.updateContext({concentratorTestContext:{...me,...Y}}))},w=Y=>te=>{const Te=[];let me=0,Me=0;const Ie=/([A-Fa-f0-9]{2}:[A-Fa-f0-9]{2}:[A-Fa-f0-9]{2})$/,ge=Y.pool();ge.done.forEach(H=>{H.passed?me+=1:(Te.length<a&&H.mac.match(Ie)&&Te.push(H.mac),Me+=1)});const de=ge.waiting.length,se=!ge.waiting.length&&!ge.active.length;let X=100;ge.all.length&&(X=Math.round(100*(ge.done.length/ge.all.length))),te(N({failedMacs:Te,numPassedAps:me,numFailedAps:Me,waitingCount:de,testCompleted:se,progress:X}))},z=async(Y,te,Te,me,Me)=>{const{nodes:Ie,macs:ge}=await E(Te);Ie.up.forEach(Oe=>{Y.add({node:Oe,mac:ge[Oe],concentrator_id:te})});let de;if(Te&&me){const H=Object.values(f().administered_networks||{}).find($=>$.n===me);H&&(de=H.eid)}const se=Ie.up.length,X=Ie.down.length;Me(N({nodesFetched:!0,numOnlineAps:se,numOfflineAps:X,numTotalAps:se+X,childEid:de})),Y.run(3)};return(Y,te,Te)=>async me=>{if(me(N({error:""})),!(()=>{let ge;return Y?.trim()||(ge=h),ge?(me(N({error:ge,testCompleted:!0})),!1):!0})())return!1;const Ie=window.testflight((ge,de)=>{ge.xhr=c().ajax({type:"GET",url:n,data:{rap_id:ge.node,concentrator_id:ge.concentrator_id},success:se=>{ge.passed=se.passed,ge.failure_reason=se.failure_reason},error:se=>{ge.passed=!1,ge.failure_reason=se.responseText||s},complete:de.complete})},()=>{me(w(Ie))});return me(N({testStarted:!0})),z(Ie,Y,te,Te,me),!0}};var r=e(475408);const A=(0,y.L)().withModels([]).withStoreName("AccessControlStore").withChanges().withModal().withPrefs().withFlexTables().create(),S=A.actions,p=95,I=_()({controller:"configure",action:"do_radius_test"}),U=_()({controller:"configure",action:"do_ldap_test"}),D=_()({controller:"configure",action:"get_online_nodes"}),u=(V=null)=>c().getJSON(D,V?{template_child_ng:V}:{}),o=(V,N,w,z,ne)=>{const Y=N.up.length,te=N.down.length,Te=w==="auth",me=Te?/[auth|ldap|tls] failure/:/auth failure/;ne(z({nodesFetched:!0,numOnlineAps:Y,numOfflineAps:te,numTotalAps:Y+te})),V.run(1,1,()=>{const{passed:Me,failure_reason:Ie}=V.pool().done[0];!Me&&Ie.match(me)?(ne(z({testCompleted:!0,failedFirst:!0})),Te&&ne(z({failedLdap:Ie.match(/ldap failure/),failedTls:Ie.match(/tls failure/)}))):V.run(3)})},M=(V,N,w,z)=>(ne,Y)=>{const te=V.pool();let Te=!1,me=!1,Me="";const Ie=[];let ge=0,de=0;te.done.forEach($=>{w?(Te=$.passed||$.server_status==="ok"||$.failure_reason.includes("insecure"),me=$.passed,Me=$.failure_reason):$.passed?ge+=1:(Ie.length<p&&Ie.push($.mac),de+=1)});const{failedFirst:se}=Y().context[N],X=te.waiting.length,Oe=se||!te.waiting.length&&!te.active.length,H=Math.round(100*(te.done.length/te.all.length));ne(z({failedMacs:Ie,numPassedAps:ge,numFailedAps:de,waitingCount:X,testCompleted:Oe,progress:H,connectSuccess:Te,authSuccess:me,failureReason:Me}))},m=V=>(N,w)=>{const{authServerTesterContext:z}=w().context;N(S.updateContext({authServerTesterContext:{...z,...V}}))},P=(V,N)=>async(w,z)=>{w(m({error:""}));const{adDefaultPort:ne}=z().context,{host:Y,port:te}=V,{ssidNum:Te,username:me,password:Me,usingAd:Ie,adminUsername:ge,adminPassword:de,useLocalRadius:se=!1,ldapBaseDn:X,ldapCert:Oe,selectedNetwork:H}=N;let $;const le=()=>{let ve;return!me||!Me?ve="Please supply both username and password to test.":(!ge||!de)&&(ve="Please provide a valid admin and password."),se&&!Oe&&(ve="Please upload a certificate before testing"),ve?(w(m({error:ve})),!1):!0},ce=async ve=>{const{nodes:_e,macs:Ee}=await u(ve);_e.up.forEach(Se=>{$.add({node:Se,mac:Ee[Se],ssid:Te})}),o($,_e,"auth",m,w)};le()&&(w(m({testStarted:!0})),$=window.testflight((ve,_e)=>{ve.xhr=c().ajax({type:"POST",url:U,data:{node:ve.node,host:Y,port:Ie?ne:te,admin_dn:ge,admin_password:de,base_dn:X||"",cert:Oe||"",test_type:Ie?"active_directory":"ldap",username:me,password:Me,ssid_number:ve.ssid},success:Ee=>{ve.passed=Ee.success===!0,ve.failure_reason=Ee.failure_reason,w(m({failureMessage:Ee.failure_message}))},error:()=>{ve.passed=!1,ve.failure_reason="Error communicating to Dashboard",w(m({failureMessage:ve.failure_reason}))},complete:_e.complete})},()=>{w(M($,"authServerTesterContext",!1,m))}),ce(H))},T=V=>(N,w)=>{const{radiusTesterContext:z}=w().context;N(S.updateContext({radiusTesterContext:{...z,...V}}))},O=(V,N)=>async w=>{w(T({error:""}));const{host:z,port:ne,radsecEnabled:Y=!1,secret:te=r.T6,serverId:Te,server_index:me}=V,{isMacRadius:Me=!1,isSplash:Ie=!1,radiusProxyEnabled:ge,ssidNum:de,macAddress:se,username:X,password:Oe,selectedNetwork:H}=N,le=Ie?"splash":Me?"open_with_radius":"8021x";let ce;const ve=()=>{let Ee;return Me&&!se?Ee="Please supply a MAC address to test.":!Me&&(!X||!Oe)&&(Ee="Please supply both username and password to test."),se&&(se.toLowerCase().replace(/[-: .]/g,"").match(/^([0-9A-Fa-f]{2}){6}/)||(Ee="The MAC address you entered is not valid.")),Ee?(w(T({error:Ee})),!1):!0},_e=async Ee=>{const{nodes:Se,macs:k}=await u(Ee);Se.up.forEach(G=>{ce.add({node:G,mac:k[G],host:z,port:ne,secret:te,access_policy_number:null,ssid:de})}),o(ce,Se,"radius",T,w)};ve()&&(w(T({testStarted:!0})),ce=window.testflight((Ee,Se)=>{Ee.xhr=c().ajax({type:"POST",url:I,data:{node:Ee.node,host:Ee.host,port:Ee.port,secret:te,server_id:Te,username:X||se,password:Oe||se,test_type:le,proxy_enabled:ge,radsec_enabled:Y,ssid_number:de,access_policy_number:Ee.access_policy_number,server_index:me},success:k=>{Ee.passed=k.success===!0,Ee.failure_reason=k.failure_reason||k.reason,Ee.server_status=k.server_status},error:k=>{Ee.passed=!1,Ee.failure_reason=k.responseText||"Error communicating to Dashboard"},complete:Se.complete})},()=>{w(M(ce,"radiusTesterContext",ge||Ie,T))}),ge||Ie?(ce.add({host:z,port:ne,secret:te,ssid:de}),ce.run()):_e(H))},v=_()({controller:"configure",action:"l3rpinger"}),L=async(V,N)=>new Promise((w,z)=>{const ne=c().comet.command_subscribe(N,V,Y=>{Y||z({error:"An unknown error ocurred"}),ne.stop(),w(Y.data)})}),B=V=>(N,w)=>{const{l3TesterContext:z}=w().context;N(S.updateContext({l3TesterContext:{...z,...V}}))},F=()=>async(V,N)=>{c().comet.init("/cometd"),V(B({testStarted:!1}));const{ping_table:[w,z]}=await c().get(v),{nodesInfo:ne={}}=N().context;let Y=0,te=0,Te=0;const me={},Me={},Ie={};let ge=[];if(Object.entries(w).forEach(([H,$])=>{Y+=1,te+=$.length,$.length>0&&(me[H]=!1,Me[H]=[],Ie[H]=[],ge.push(L(H,{broker:"L3RPingerTest",dst_ips:$})))}),V(B({testStarted:!0,testCompleted:!1,numOfSubnets:Y,numOfConnections:te})),te===0)return;const de={};let se=await Promise.all(ge);se.forEach(H=>{H.valid_entry&&(de[H.node_id]=H.req_id)});const X=async()=>{ge=Object.entries(de).map(([H,$])=>L(H,{broker:"L3RPingerTestResults",request_id:$})),se=await Promise.all(ge),se.forEach(H=>{const{node_id:$,response_from_aps:le}=H;me[$]=!0;const ce=le.length-Y+1;le.forEach((ve,_e)=>{if(ve[1]===-1){Te+=1;const Ee=ne[z[ve[0]]].mac;_e<ce?Me[$].push(Ee):Ie[$].push(Ee)}})})},Oe=async()=>{c().comet.disconnect();const H=[],$=[];Object.keys(w).forEach(le=>{!me[le]&&ne[le]&&H.push(le)}),Object.keys(Me).forEach(le=>{ne[le]&&$.push({id:le,same:Me[le],other:Ie[le]})}),V(B({testCompleted:!0,numOfFailedConnections:Te,notRespondedNodes:H,failedNodes:$}))};te>0?setTimeout(async()=>{await Promise.race([X(),new Promise(H=>setTimeout(H,45e3))]),Oe()},5e3):Oe()},K=R(S),b={...S,loadRadiusServerTest:O,loadAuthServerTest:P,loadL3RoamingTest:F,updateL3Tester:B,loadConcentratorTest:K},q=A.actionTypes,j=A.selectors,J=()=>A.createStore(),ee=null},676367:(ae,x,e)=>{e.d(x,{U1:()=>T,o1:()=>M});var W=e(652129),C=e(869592),g=e.n(C),c=e(758928),y=e.n(c),d=e(184988),f=e.n(d),l=e(522224),_=e.n(l),a=e(644200),h=e(522034),s=e(967720),t=e(281034);const n={CONTEXT_OPT_ADMINISTERED_ORGS:a.OF},E=["vppAccounts","depAccounts"],i=(0,W.L)().withStoreName("PccOverviewStore").withLiveTools().withPrefs().withModels(E).withContextOptions(n).withApiJobs().create(),R=i.actions,r=()=>v=>v(R.updateContext({ngEid:y().ng_eid,hasSme:y().has_sme,canWriteNetwork:y().can_write,canWriteOrg:y().can_write_org})),A=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"enrollment_counts_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.enrollmentCounts=B,v(R.updateLiveToolData(F,K))}),S=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"overview_changelog_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.changelog=B,v(R.updateLiveToolData(F,K))}).catch(B=>{f()(B.message)}),p=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"sync_status_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.syncStatus=B,v(R.updateLiveToolData(F,K))}),I=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"security_compliance_counts_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.securityComplianceCounts=B,v(R.updateLiveToolData(F,K))}),U=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"checkin_counts_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.checkinCounts=B,v(R.updateLiveToolData(F,K))}),D=()=>(v,L)=>(0,s.A)(g()({controller:"pcc",action:"os_version_counts_json"})).then(B=>B.json()).then(B=>{const F=y().ng_eid,K=(0,h.NO)(L())[F]||{};K.osVersionCounts=B,v(R.updateLiveToolData(F,K))}),u=()=>v=>(v(R.requestVppAccounts()),(0,t.Vg)({all:!0}).then(L=>{v(R.addVppAccounts(L))})),o=()=>v=>(v(R.requestDepAccounts()),(0,t.CP)({all:!y().has_pcc_network_level_asm_users}).then(L=>{v(R.addDepAccounts(L))})),M=_().extend({},R,{getContext:r,getEnrollmentCounts:A,getChangelog:S,getSyncStatus:p,getSecurityComplianceCounts:I,getCheckinCounts:U,getOsVersions:D,fetchVppAccounts:u,fetchDepAccounts:o}),m=i.actionTypes,P=i.selectors,T=()=>i.createStore();var O=null},676466:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("SWITCH_PROFILE_STORE"),f={reset(_){this.dispatch(d.constants.RESET,_)},fetch(_){return C().get(c()({controller:"switch_profiles",action:"switch_profiles_json"}),_).done(a=>{this.dispatch(d.constants.RESET,a)})},remove(_){var a=C().post(c()({controller:"switch_profiles",action:"delete_switch_profiles"}),_);return this.dispatch(d.constants.REMOVE,{ids:_.profile_ids}),a},create(_){return C().post(c()({controller:"switch_profiles",action:"create_profile"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},update(_){return C().post(c()({controller:"switch_profiles",action:"update_profile"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})}},l=_=>{_.store("SwitchProfileStore")||(_.addStore("SwitchProfileStore",d),_.addActions({switchProfiles:f}))}},676613:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(6464),d=e(869592),f=e.n(d);const l={ADD_ANOMALY_DETAILS:"ADD_ANOMALY_DETAILS",RESET_REPORT:"RESET_REPORT",RESET_ANOMALIES:"RESET_ANOMALIES",RESET_ANOMALY_DETAILS:"RESET_ANOMALY_DETAILS",RESET_CLIENT_COUNTS:"RESET_CLIENT_COUNTS",RESET_ETHERNET_POWER:"RESET_ETHERNET_POWER",RESET_PERFORMANCE_SCORES:"RESET_PERFORMANCE_SCORES",RESET_PORT_UTILIZATION:"RESET_PORT_UTILIZATION",RESET_REPORT_SCOPE:"RESET_REPORT_SCOPE",RESET_SESSIONS:"RESET_SESSIONS",RESET_SPLASH_COUNTS:"RESET_SPLASH_COUNTS",RESET_TOP_AP_MODELS:"RESET_TOP_AP_MODELS",RESET_TOP_APPLICATIONS:"RESET_TOP_APPLICATIONS",RESET_TOP_APPLICATION_CATEGORIES:"RESET_TOP_APPLICATION_CATEGORIES",RESET_TOP_APS:"RESET_TOP_APS",RESET_TOP_BLOCKED_SITES_BY_CATEGORY:"RESET_TOP_BLOCKED_SITES_BY_CATEGORY",RESET_TOP_BLOCKED_SITES_BY_URL:"RESET_TOP_BLOCKED_SITES_BY_URL",RESET_TOP_CLIENTS:"RESET_TOP_CLIENTS",RESET_TOP_DEVICES:"RESET_TOP_DEVICES",RESET_TOP_UTILIZED_APPLIANCES:"RESET_TOP_UTILIZED_APPLIANCES",RESET_TOP_MFRS:"RESET_TOP_MFRS",RESET_TOP_OSS:"RESET_TOP_OSS",RESET_TOP_SECURITY_THREATS_BY_SIGNATURE:"RESET_TOP_SECURITY_THREATS_BY_SIGNATURE",RESET_TOP_SSIDS:"RESET_TOP_SSIDS",RESET_UPLINKS:"RESET_UPLINKS",RESET_USAGE:"RESET_USAGE",UPDATE_PAGINATION:"UPDATE_PAGINATION",UPDATE:"UPDATE"};var _=y.A.createStore({initialize(){this.report={},this.bindActions(l.ADD_ANOMALY_DETAILS,this.addAnomalyDetails,l.RESET_REPORT,this.reset,l.RESET_ANOMALIES,this.resetAnomalies,l.RESET_ANOMALY_DETAILS,this.resetAnomalyDetails,l.RESET_CLIENT_COUNTS,this.resetClientCounts,l.RESET_ETHERNET_POWER,this.resetEthernetPower,l.RESET_PERFORMANCE_SCORES,this.resetPerformanceScores,l.RESET_PORT_UTILIZATION,this.resetPortUtilization,l.RESET_REPORT_SCOPE,this.resetReportScope,l.RESET_SESSIONS,this.resetSessions,l.RESET_SPLASH_COUNTS,this.resetSplashCounts,l.RESET_TOP_AP_MODELS,this.resetTopAPModels,l.RESET_TOP_APPLICATION_CATEGORIES,this.resetTopApplicationCategories,l.RESET_TOP_APPLICATIONS,this.resetTopApplications,l.RESET_TOP_APS,this.resetTopAPs,l.RESET_TOP_BLOCKED_SITES_BY_CATEGORY,this.resetTopBlockedSitesByCategory,l.RESET_TOP_BLOCKED_SITES_BY_URL,this.resetTopBlockedSitesByUrl,l.RESET_TOP_CLIENTS,this.resetTopClients,l.RESET_TOP_DEVICES,this.resetTopDevices,l.RESET_TOP_UTILIZED_APPLIANCES,this.resetTopUtilizedAppliances,l.RESET_TOP_MFRS,this.resetTopMfrs,l.RESET_TOP_OSS,this.resetTopOSs,l.RESET_TOP_SECURITY_THREATS_BY_SIGNATURE,this.resetTopSecurityThreatsBySignature,l.RESET_TOP_SSIDS,this.resetTopSSIDs,l.RESET_UPLINKS,this.resetUplinks,l.RESET_USAGE,this.resetUsage,l.UPDATE_PAGINATION,this.updatePagination,l.UPDATE,this.onUpdate)},onUpdate(){this.emit("change")},reset(s){this.report=s,this.emit("change")},addAnomalyDetails(s){this.report.anomalyDetails=this.report.anomalyDetails||{},this.report.anomalyDetails[s.ts]=s,this.emit("change")},resetClientCounts(s){this.report.dailyAvgClientCount=s.day_count_avg,this.report.dailyClientCounts=s.day_client_counts,this.report.totalClientCount=s.count,this.report.avgClientsPerDay=s.avg_clients_per_day,this.report.avgUsagePerClient=s.avg_usage_per_client,this.emit("change")},resetAnomalies(s){this.report.anomalies=s,this.emit("change")},resetAnomalyDetails(){this.report.anomalyDetails={},this.emit("change")},resetEthernetPower(s){this.report.ethernetPowerWattage=s.over_time,this.report.ethernetPowerTimestamps=s.interval,this.report.ethernetPowerByNode=s.by_node,this.emit("change")},resetPerformanceScores(s){this.report.performanceScores=s,this.emit("change")},resetPortUtilization(s){this.report.portUtilization=s,this.emit("change")},resetReportScope(s){this.report.reportScope=s,this.emit("change")},resetSessions(s){this.report.dailySessionsCounts=s.daily_sessions_counts,this.emit("change")},resetSplashCounts(s){this.report.splashCounts=s,this.emit("change")},resetTopAPModels(s){this.report.topAPModels=s,this.emit("change")},resetTopApplicationCategories(s){this.report.topApplicationCategories=s,this.emit("change")},resetTopApplications(s){this.report.topApplications=s,this.emit("change")},resetTopAPs(s){this.report.topAPs=s,this.emit("change")},resetTopDevices(s){this.report.topDevices=s.top_results,this.report.topDeviceGraphPoints=s.top_results_graph_points,this.emit("change")},resetTopBlockedSitesByCategory(s){this.report.topBlockedSitesByCategory=s,this.emit("change")},resetTopBlockedSitesByUrl(s){this.report.topBlockedSitesByUrl=s,this.emit("change")},resetTopClients(s){this.report.topClients=s,this.emit("change")},resetTopMfrs(s){this.report.topMfrs=s,this.emit("change")},resetTopOSs(s){this.report.topOSs=s,this.emit("change")},resetTopUtilizedAppliances(s){this.report.topUtilizedAppliances=s,this.emit("change")},resetTopSecurityThreatsBySignature(s){this.report.topSecurityThreatsBySignature=s,this.emit("change")},resetTopSSIDs(s){this.report.topSSIDs=s.top_results,this.report.topSsidGraphPoints=s.top_results_graph_points,this.emit("change")},resetUplinks(s){this.report.uplinks=s,this.emit("change")},resetUsage(s){this.report.usage=s,this.emit("change")},updatePagination(s){this.report.paginate=s,this.emit("change")},getState(){return C().clone(this.report)}});const a={reset(s){this.dispatch(l.RESET_REPORT,s)},resetAnomalyDetails(){this.dispatch(l.RESET_ANOMALY_DETAILS)},updatePagination(s){this.dispatch(l.UPDATE_PAGINATION,s)},email(s,t){return c().post(f()({controller:"new_reports",action:"email",params:t}),{email:s}).done(n=>{this.dispatch(l.UPDATE,n)})},fetchAnomalies(s){return c().get(f()({controller:"new_reports",action:"anomalies"}),s).done(t=>{this.dispatch(l.RESET_ANOMALIES,{data:t})})},fetchAnomalyDetails(s){return c().get(f()({controller:"new_reports",action:"anomaly_details"}),s).done(t=>{this.dispatch(l.ADD_ANOMALY_DETAILS,C().extend({ts:s.t1},t))})},fetchClientCounts(s){return c().get(f()({controller:"reports",action:"scope_client_counts"}),s).done(t=>{this.dispatch(l.RESET_CLIENT_COUNTS,t)})},fetchEthernetPower(s){return c().get(f()({controller:"reports",action:"scope_ethernet_power"}),s).done(t=>{this.dispatch(l.RESET_ETHERNET_POWER,t)})},fetchPerformanceScores(s){return c().get(f()({controller:"new_reports",action:"performance_scores"}),s).done(t=>{this.dispatch(l.RESET_PERFORMANCE_SCORES,t)})},fetchPortUtilization(s){return c().get(f()({controller:"reports",action:"scope_port_utilization"}),s).done(t=>{this.dispatch(l.RESET_PORT_UTILIZATION,t)})},fetchReportScope(s){return c().get(f()({controller:"new_reports",action:"report_scope"}),s).done(t=>{this.dispatch(l.RESET_REPORT_SCOPE,t)})},fetchSessions(s){return c().get(f()({controller:"reports",action:"scope_sessions"}),s).done(t=>{this.dispatch(l.RESET_SESSIONS,t)})},fetchSplashCounts(s){return c().get(f()({controller:"reports",action:"scope_splash_counts"}),s).done(t=>{this.dispatch(l.RESET_SPLASH_COUNTS,t)})},fetchTopApplicationCategories(s){return c().get(f()({controller:"new_reports",action:"top_application_categories"}),s).done(t=>{this.dispatch(l.RESET_TOP_APPLICATION_CATEGORIES,t)})},fetchTopApplications(s){return c().get(f()({controller:"new_reports",action:"top_applications"}),s).done(t=>{this.dispatch(l.RESET_TOP_APPLICATIONS,t)})},fetchTopAPStats(s){return c().get(f()({controller:"reports",action:"scope_device_stats"}),s).done(t=>{this.dispatch(l.RESET_TOP_AP_MODELS,t.aps_by_model),this.dispatch(l.RESET_TOP_APS,t.top_aps_by_usage)})},fetchTopDevices(s){return c().get(f()({controller:"new_reports",action:"top_devices"}),s).done(t=>{this.dispatch(l.RESET_TOP_DEVICES,t)})},fetchTopBlockedSites(s){return c().get(f()({controller:"reports",action:"scope_top_blocked_sites"}),s).done(t=>{this.dispatch(l.RESET_TOP_BLOCKED_SITES_BY_CATEGORY,t.by_cat),this.dispatch(l.RESET_TOP_BLOCKED_SITES_BY_URL,t.by_url)})},fetchTopClients(s){return c().get(f()({controller:"reports",action:"scope_top_clients"}),s).done(t=>{this.dispatch(l.RESET_TOP_CLIENTS,t.by_usage)})},fetchTopUtilizedAppliances(s){return c().get(f()({controller:"new_reports",action:"top_utilized_appliances"}),s).done(t=>{this.dispatch(l.RESET_TOP_UTILIZED_APPLIANCES,t)})},fetchTopMfrOSs(s){return c().get(f()({controller:"reports",action:"scope_top_mfr_os"}),s).done(t=>{this.dispatch(l.RESET_TOP_OSS,t.by_os),this.dispatch(l.RESET_TOP_MFRS,t.by_mfr)})},fetchTopSecurityThreats(s){return c().get(f()({controller:"reports",action:"scope_top_threat_signatures"}),s).done(t=>{this.dispatch(l.RESET_TOP_SECURITY_THREATS_BY_SIGNATURE,t.by_signature)})},fetchTopSSIDs(s){return c().get(f()({controller:"new_reports",action:"top_ssids"}),s).done(t=>{this.dispatch(l.RESET_TOP_SSIDS,t)})},fetchUplinks(s){return c().get(f()({controller:"reports",action:"uplink_details"}),s).done(t=>{this.dispatch(l.RESET_UPLINKS,t)})},fetchUsage(s){return c().get(f()({controller:"reports",action:"usage_points"}),s).done(t=>{this.dispatch(l.RESET_USAGE,t)})}},h=s=>{s.store("ReportStore")||(s.addStore("ReportStore",new _),s.addActions({report:a}))}},684690:(ae,x,e)=>{e.d(x,{IU:()=>y,Tm:()=>_,_t:()=>g,r9:()=>c,ue:()=>C});var W=e(97132);const C={inProgress:!1,error:void 0,success:!1},g={inProgress:!0,error:void 0,success:!1},c={inProgress:!1,error:void 0,success:!0},y=a=>({inProgress:!1,error:a,success:!1}),d=a=>a.inProgress,f=a=>a.error,l=a=>a.success;function _(a){const h=(0,W.Mz)(a,d),s=(0,W.Mz)(a,f),t=(0,W.Mz)(a,l);return{getInProgress:h,getError:s,getSuccess:t,getTriggered:(0,W.Mz)(h,s,t,(n,E,i)=>n||!!E||i)}}},686084:(ae,x,e)=>{e.d(x,{A:()=>t});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(6464),l=e(869592),_=e.n(l);const a={SET_HEALTH_STATS:"SET_HEALTH_STATS",SET_LOCAL_UPLINK_COUNT:"SET_LOCAL_UPLINK_COUNT",SELECT_PERFORMANCE_CLASS:"SELECT_PERFORMANCE_CLASS",SELECT_PLOT_INDEX:"SELECT_PLOT_INDEX",SET_TIME_RANGE:"SET_TIME_RANGE"},h=f.A.createStore({initialize(){this.bindActions(a.SET_HEALTH_STATS,this.setHealthStats,a.SET_LOCAL_UPLINK_COUNT,this.setLocalUplinkCount,a.SELECT_PERFORMANCE_CLASS,this.selectPerformanceClass,a.SELECT_PLOT_INDEX,this.selectPlotIndex,a.SET_TIME_RANGE,this.setTimeRange),this.healthStats=[],this.loadingHealthStats=!0,this.localUplinks=0,this.selectedPerformanceClass={latency:null,jitter:null,loss:null},this.selectedPlotIndex=null,this.timeRange={start:null,duration:null}},setHealthStats(n){n.healthStats!==void 0&&(this.healthStats=n.healthStats,this.loadingHealthStats=!1,this.emit("change"))},setLocalUplinkCount(n){n.localUplinkCount!==void 0&&(this.localUplinkCount=n.localUplinkCount,this.emit("change"))},selectPerformanceClass(n){this.selectedPerformanceClass=n.performanceClass,this.emit("change")},selectPlotIndex(n){this.selectedPlotIndex=n.index,this.emit("change")},setTimeRange(n){this.timeRange=n.range,this.emit("change")},getState(){return{healthStats:this.healthStats,localUplinkCount:this.localUplinkCount,loadingHealthStats:this.loadingHealthStats,selectedPerformanceClass:this.selectedPerformanceClass,selectedPlotIndex:this.selectedPlotIndex,timeRange:this.timeRange}}}),s={fetchHealthStats(n,E,i){const R={remote_ng_eid:n};d().getJSON(_()({controller:"vpn",action:"vpn_health_stats"}),R).done(r=>{var A=[],S=new Set;const p=3;for(let I=0;I<i;I++)for(let U=0;U<i;U++){const D=r.filter(u=>u[0]===I&&u[1]===U);if(D.length>0){const u=E.map((o,M)=>D.map(m=>[Math.round(m[2]*1e3),m[p+M]]));A.push(c().object(E,u)),S.add(I)}else A.push(null)}this.dispatch(a.SET_HEALTH_STATS,{healthStats:A}),this.dispatch(a.SET_LOCAL_UPLINK_COUNT,{localUplinkCount:S.size})}).error(()=>{this.dispatch(a.SET_HEALTH_STATS,{healthStats:[]})})},setLocalUplinkCount(n){this.dispatch(a.SET_LOCAL_UPLINK_COUNT,{localUplinkCount:n})},selectPerformanceClass(n){this.dispatch(a.SELECT_PERFORMANCE_CLASS,{performanceClass:n})},selectPlotIndex(n){this.dispatch(a.SELECT_PLOT_INDEX,{index:n})},setTimeRange(n){this.dispatch(a.SET_TIME_RANGE,{range:n})}};function t(n){n.store("HealthStatsStore")||(n.addStore("HealthStatsStore",new h),n.addActions({healthStatsStore:s}))}},688346:(ae,x,e)=>{e.d(x,{Lo:()=>p,MJ:()=>S,jc:()=>R,mW:()=>I,s7:()=>U,wr:()=>D});var W=e(640173),C=e.n(W),g=e(14602),c=e.n(g),y=e(310466),d=e(869592),f=e.n(d),l=e(652129),_=e(459324),a=e(522224),h=e.n(a),s=e(50811),t=e.n(s),n=e(758928),E=e.n(n);const i=(0,l.L)().withStoreName("TrustedAccessStore").create(),R=()=>i.createStore(),r=y.q9.injectEndpoints({endpoints:u=>({fetchTrustedAccessConfigs:u.query({query:()=>({url:f()({controller:"configure",action:"trusted_access_configs"})})}),fetchTags:u.query({query:()=>({url:f()({controller:"configure",action:"pcc_tags_json"})}),transformResponse:o=>{var M;const m=new Set(o?.default_tags);return o==null||(M=o.tags)===null||M===void 0?void 0:M.map(({0:P,1:T,2:O,3:v})=>{const L=T&&_.tYK.some(B=>P.match(B));return{id:P,group:v,is_auto:T,display_name:(0,a.escape)(O),is_default:m.has(P),beta_tag:L}})}}),fetchTrustedAccessDevicesDashboardMessages:u.query({query:()=>({url:f()({controller:"configure",action:"sm_dashboard_messages",feature:"trusted_access_devices"})})})})}),A=y.kC.enhanceEndpoints({addTagTypes:["PccUserAccess"]}).injectEndpoints({endpoints:u=>({fetchUserAccessDevices:u.query({query:({networkId:o})=>({url:`networks/${o}/sm/userAccessDevices?perPage=1000`}),transformResponse:o=>o.map(M=>{const m=M.tags.map(P=>P.replace("auto:pccusertag_",""));return{...M,tags:m}}),providesTags:[{type:"PccUserAccess",id:"LIST"}]}),deleteTrustedAccessDevices:u.mutation({async queryFn({orgId:o,networkId:M,ids:m}){try{const{data:P}=await(0,s.batchedApiRequest)(o,m.map(T=>({resource:`/networks/${M}/sm/userAccessDevices/${T}`,operation:"destroy",body:{}})),{auth:{csrfToken:E().authenticity_token}},{synchronous:!0});return{data:P}}catch(P){return(0,s.isApiError)(P)?{error:P}:{error:{errors:[JSON.stringify(P,null," ")]}}}},invalidatesTags:(o,M)=>M?[]:[{type:"PccUserAccess",id:"LIST"}]})})}),{useFetchTrustedAccessConfigsQuery:S,useFetchTagsQuery:p,useFetchTrustedAccessDevicesDashboardMessagesQuery:I}=r,{useFetchUserAccessDevicesQuery:U,useDeleteTrustedAccessDevicesMutation:D}=A},689917:(ae,x,e)=>{e.d(x,{A:()=>c});var W=e(522224),C=e.n(W);class g{constructor(){if(this.constructor===g)throw new TypeError("Abstract class 'StorePlugin' cannot be instantiated directly.");if(C().isUndefined(this.create))throw new TypeError("Classes extending the StorePlugin abstract class must implement 'create'")}}const c=g},690053:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("TEMPORARY_PERMISSION_STORE"),f={fetch(){return C().post(c()({controller:"manage/temporary_permissions",action:"get_temporary_permissions",global:!0}),{org_id:window.Mkiconf.org_id},_=>this.dispatch(d.constants.RESET,_.temporary_permissions)).fail(()=>this.dispatch(d.constants.RESET,[]))}};function l(_){_.store("TemporaryPermissionStore")||(_.addStore("TemporaryPermissionStore",d),_.addActions({temporary_permissions:f}))}},697268:(ae,x,e)=>{e.d(x,{ER:()=>t,iH:()=>h,k6:()=>_,mT:()=>a});var W=e(14602),C=e.n(W),g=e(296540),c=e(97132),y=e(1455),d=e(292310),f=e(869188),l=e(649927);const _=n=>`STACK-${n}`,a=n=>`DEVICE-${n}`,h=(n,E)=>{const i=(0,f.v)(E,"serial");return[...n.map(({id:R,name:r,serials:A})=>({key:_(R),commonId:R,type:"stack",id:R,name:r,children:A.map(S=>{const p=i[S];return delete i[S],p?{...p,stackId:R,commonId:p.serial,type:"switch",key:a(p.serial)}:null}).filter(S=>!!S)})),...E.filter(R=>!!i[R.serial]).map(R=>({...R,type:R.productType,commonId:R.serial,key:a(R.serial)}))]},s=(n,E,i)=>{const R=h(n,E),r=i.reduce((A,S)=>(S.assignedDevices.devices.forEach(p=>{A[p.serial]=S}),S.assignedDevices.switchStacks.forEach(p=>{A[p.id]=S}),A),{});return R.map(A=>({...A,group:r[A.commonId]}))},t=({networkId:n="",organizationId:E=""})=>(0,g.useMemo)(()=>{const i=l.s7.endpoints.fetchSwitchStackIndex.select({networkId:n}),R=y.ni.endpoints.fetchDevicesIndex.select({networkIds:[n],organizationId:E}),r=d.gP.endpoints.fetchSUGIndex.select({networkId:n});return(0,c.Mz)(A=>i(A).data,A=>R(A).data,A=>r(A).data,(A,S,p)=>A&&S&&p?s(A,S,p):null)},[n,E])},703314:(ae,x,e)=>{e.d(x,{aF:()=>l,o1:()=>y});var W=e(14602),C=e.n(W),g=e(748911);const c={checkItems:"FLEX_TABLE_CHECK_ITEMS",uncheckItems:"FLEX_TABLE_UNCHECK_ITEMS",setCheckedItems:"FLEX_TABLE_SET_CHECKED_ITEMS",setSearchQuery:"FLEX_TABLE_SET_SEARCH_QUERY",clearSearchQuery:"FLEX_TABLE_CLEAR_SEARCH_QUERY",highlightItem:"FLEX_TABLE_HIGHLIGHT_ITEM"},y={checkItems(_,a){return{type:c.checkItems,tableKey:_,items:a}},uncheckItems(_,a){return{type:c.uncheckItems,tableKey:_,items:a}},setCheckedItems(_,a){return{type:c.setCheckedItems,tableKey:_,items:a}},setSearchQuery(_,a){return{type:c.setSearchQuery,tableKey:_,searchQuery:a}},clearSearchQuery(_){return{type:c.clearSearchQuery,tableKey:_}},highlightItem(_,a){return{type:c.highlightItem,tableKey:_,item:a}}},d=(_={})=>(a=_,h)=>{const{tableKey:s,type:t}=h;switch(t){case c.checkItems:{const{items:n}=h,E=a[s]&&a[s].checkedItems||[],i=new Set([...E,...n]);return{...a,[s]:{...a[s],checkedItems:[...i]}}}case c.uncheckItems:{const{items:n}=h,E=a[s]&&a[s].checkedItems||[],i=new Set(n),R=E.filter(r=>!i.has(r));return{...a,[s]:{...a[s],checkedItems:R}}}case c.setCheckedItems:{const{items:n}=h;return{...a,[s]:{...a[s],checkedItems:n}}}case c.setSearchQuery:{const{searchQuery:n}=h;return{...a,[s]:{...a[s],searchQuery:n}}}case c.clearSearchQuery:return{...a,[s]:{...a[s],searchQuery:null}};case c.highlightItem:{const{item:n}=h;return{...a,[s]:{...a[s],highlightedItem:n}}}default:return a}};class f extends g.A{constructor(){super("flexTable")}create(a={}){return{actions:{actionTable:y},actionTypes:c,reducer:d(a)}}}const l=()=>new f().create()},704200:(ae,x,e)=>{e.d(x,{o1:()=>n});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(653806);const _=(0,y.L)().withStoreName("SensorDigestStore").withCustomKeyedModel("alertStats",i=>`${i.sensorSerial}-${i.occurredAt}`).withCustomKeyedModel("totalAlertsBySensor",i=>`${i.serial}-${i.t0}-${i.t1}`).create(),a=_.actions,h=i=>R=>{R(a.requestAlertStats()),R(a.replaceAlertStats({}));const r=`/api/v1/networks/N_${f().ng_id}/environmental/events`;return(0,l.AT)("GET",r,{perPage:1e3,...i}).then(A=>{const S=A.data.map(p=>({...p,metric:i.metric}));R(a.updateAlertStats(S))}).catch(A=>{R(a.updateAlertStats(A.xhr.responseJSON)),R(a.failedRequestingAlertStats())}).finally(()=>{R(a.doneRequestingAlertStats())})},s=i=>R=>{R(a.requestTotalAlertsBySensor()),R(a.updateLocals({hasFetchedTotalAlertsBySensor:!1}));const r=`/api/v1/networks/N_${f().ng_id}/sensor/alerts/counts/bySensor`;return Promise.all(i.map(A=>(0,l.AT)("GET",r,{perPage:100,...A}).then(S=>S.data.map(I=>({...I,t0:A.t0,t1:A.t1}))))).then(A=>R(a.updateTotalAlertsBySensor(c().flatten(A,1)))).catch(A=>{R(a.updateTotalAlertsBySensor(A.xhr.responseJSON)),R(a.failedRequestingTotalAlertsBySensor())}).finally(()=>{R(a.doneRequestingTotalAlertsBySensor()),R(a.updateLocals({hasFetchedTotalAlertsBySensor:!0}))})};var t=null;const n=c().extend({},_.actions,{fetchAlertData:h,fetchMultipleTotalAlertsBySensor:s}),E=()=>_.createStore()},706606:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(4933);const d=(0,y.A)("DEVELOPER_STORE",{idKey:"username"}),f={fetch(){return C().get(c()({controller:"users",action:"current_developers"})).done(_=>{this.dispatch(d.constants.RESET,_)})},fetch_developer_history(_){return C().get(c()({controller:"shard_checkout",action:"developer_history"}),_).done(a=>{this.dispatch(d.constants.RESET,a)})}};function l(_){_.store("DeveloperStore")||(_.addStore("DeveloperStore",d),_.addActions({developers:f}))}},717279:(ae,x,e)=>{e.d(x,{c:()=>g,w:()=>c});var W=e(310466);const C=W.kC.injectEndpoints({endpoints:y=>({devicesAvailabilities:y.query({query:({orgId:d,serial:f})=>({url:`organizations/${d}/devices/availabilities?serials[]=${f}`})}),devicesBootsHistory:y.query({query:({orgId:d,serial:f})=>({url:`organizations/${d}/devices/boots/history?serials[]=${f}&perPage=3&timespan=63072000`}),transformResponse:d=>d.slice(0,2)})})}),{useDevicesAvailabilitiesQuery:g,useDevicesBootsHistoryQuery:c}=C},723423:(ae,x,e)=>{e.d(x,{lt:()=>S,o1:()=>r});var W=e(14602),C=e.n(W),g=e(941669),c=e.n(g),y=e(522224),d=e.n(y),f=e(652129),l=e(72201);const _=(0,f.L)().withStoreName("HardwareSerialsStore").withModels(["productSerialBatches"]).withPaginatedModels(["productSerialBatchSerials"]).withChanges().withModal().create(),a=_.actions,h=()=>(I,U)=>U().models.productSerialBatches.isFetching?Promise.resolve():new Promise(u=>(I(a.requestProductSerialBatches()),c().ajax({url:"/manage/serials/list.json",type:"GET"}).then(o=>{u(I(a.updateProductSerialBatches(o)))}))),s=1e3,t=(I,U)=>()=>new Promise(D=>{const u=I.batchId;c().ajax({url:`/manage/serials/${u}.json`,data:{offset:U,limit:s},type:"GET"}).then(o=>D(o))}),n=(I,U)=>()=>new Promise(D=>{const u=I.serials.map((M,m)=>({id:`${I.id}-${U+m}`,key:U+m,batchId:I.id,serial:M})),o=U+u.length;D([u,o])}),E=new l.GP("productSerialBatchSerials",a,t,n),i=I=>(U,D)=>{const u=D().models.productSerialBatches.byId[I],[o,M]=[u.sequence_start,u.sequence_end],m=M-o+1;return U(E.getPaginatedProductSerialBatchSerials({batchId:I},m,s))},R=I=>{const{partCode:U,size:D,notes:u}=I,o={part_code:U,size:D,notes:u};return M=>new Promise((m,P)=>{c().ajax({type:"POST",url:"/manage/serials",data:o}).then(T=>{T.errors?P(T.errors||"Unexpected response"):m(T)}).fail(()=>{P("Unknown error")})}).then(m=>new Promise(P=>{P(M(a.updateProductSerialBatches(m)))}).then(()=>new Promise(P=>{P(M(a.updateLocals({addErrors:[]})))}))).catch(m=>M(a.updateLocals({addErrors:d().isArray(m)?m:[m]})))},r=d().extend({},a,{fetchProductSerialBatches:h,fetchSerialsForBatch:i,addProductSerialBatch:R}),A=_.actionTypes,S=()=>_.createStore();var p=null},725268:(ae,x,e)=>{e.d(x,{A:()=>pe});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(6464),l=e(646894),_=e.n(l),a=e(967720),h=e(299967),s=e(869592),t=e.n(s),n=e(184988),E=e.n(n),i=e(459324),R=e(10469),r=e(957300),A=e(104332),S=e(721849),p=e(444439),I=e(327709),U=e(680558),D=e(643910),u=e(339522),o=e(416116),M=e(544116),m=e(990262),P=e(768976),T=e(360046),O=e(1091),v=e(226753),L=e(730524),B=e(775956),F=e(610379),K=e(214857),b=e(529974),q=e(32733),j=e(229747),J=e(683033),ee=e(549358),V=e(513451),N=e(443752),w=e(276690),z=e(715964),ne=e(19687),Y=e(426726),te=e(130198),Te=e(183471),me=e(448731),Me=e(521701),Ie=e(61069),ge=e(86889),de=e(418987),se=e(422088),X=e(357979),Oe=e(956044),H=e(331658),$=e(843508),le=e(170707),ce=e(743795),ve=e(843753),_e=e(444915),Ee=e(382437),Se=e(883308),k=e(222181),G=e(199245),ie=e(971150),fe=e(975082),De=e(659009),We=e(619293),we=e(603649),Ve=e(442286),Pe=e(230996),Re=e(64519),Ke=e(898535),re=e(625720),Ae=e(78108),$e=e(987400),Fe=e(95366),Ye=e(987990),Le=e(687549),Be=e(680212),je=e(275370),ze=e(74298),Xe=e(439087),Ze=e(749591),lt=e(244463),Et=e(464651),ft=e(915537),vt=e(200285),Mt=e(708576),yt=e(65719),Lt=e(677453),Dt=e(40522),Rt=e(251249);const dt="PCC_SETTINGS_STORE_",et={UPDATE:`${dt}UPDATE`,RESET:`${dt}RESET`,ERRORS:`${dt}ERRORS`,LOADING:`${dt}LOADING`,SAVING:`${dt}SAVING`,CREATE:`${dt}CREATE`,REMOVE:`${dt}REMOVE`,UPDATE_ORG_SETTINGS:`${dt}UPDATE_ORG_SETTINGS`,UPDATE_INSTALL_COUNTS:`${dt}UPDATE_INSTALL_COUNTS`,UPDATE_DASHBOARD_MESSAGES:`${dt}UPDATE_DASHBOARD_MESSAGES`,UPDATE_TARGETS_IN_SCOPE:`${dt}UPDATE_TARGETS_IN_SCOPE`},pt="profile",ht="profile",gt="ssids",mt=[R.A,A.A,T.A,I.A,u.A,r.A,o.A,me.A,S.A,P.A,K.A,Ie.A,O.A,F.Ay,p.A,D.A,U.A,B.A,Me.A,m.A,M.A,ge.A,q.A,b.A,L.A,de.A,se.A,H.A,$.A,X.A,Oe.A,le.A,ce.Ay,ve.A,_e.A,Ee.h,G.A,k.A,ie.A,fe.A,De.A,We.h,we.A,Ve.A,Pe.A,Re.A,Ke.h,re.A,Ae.Ay,v.A,J.A,ee.A,V.A,N.A,w.A,z.A,ne.A,Y.A,te.A,Te.Ay,$e.A,Fe.A,Ye.A,Le.A,Be.A,je.A,ze.A,Xe.A,Ze.A,lt.A,Et.A,ft.A,vt.A,Mt.A,yt.A,j.A,...Mkiconf.has_pcc_google_ama?[Lt.A,Dt.A]:[],...Mkiconf.has_pcc_ios_17_features?[Se.A]:[]],St=[Rt.A],Ot=f.A.createStore({setInitialEnables(){c().each(this.profiles,Q=>{var ue=c().filter(mt,Ue=>Ue.isSinglePayload),he=c().map(ue,Ue=>[`enable_${Ue.payloadKey}`,Q[`num_${Ue.payloadKey}`]>0]),Ce=c().map(St,Ue=>{const xe=Ue.enableKey||"enabled",Ne=Ue.enableValue||!0,be=(Q[Ue.payloadKey]||{})[xe]===Ne;return[`enable_${Ue.payloadKey}`,be?Ne:!1]});d().extend(Q,c().object(he.concat(Ce)))})},initialize(){this.profiles={},this.profileInstallCounts={},this.profileTargetsInScope={},this.dashMsgs=[],this.profilesLoading=!0,this.ssidsLoading=!1,this.saving=!1,this.payloadPlugins={},this.orgSettings={},c().each(mt,Q=>{this.payloadPlugins[Q.payloadKey]=Q},this),this.bindActions(et.RESET,this.onReset,et.LOADING,this.onLoading,et.SAVING,this.onSaving,et.ERRORS,this.setErrors,et.UPDATE,this.update,et.CREATE,this.create,et.REMOVE,this.remove,et.UPDATE_INSTALL_COUNTS,this.updateInstallCounts,et.UPDATE_DASHBOARD_MESSAGES,this.updateDashboardMessages,et.UPDATE_ORG_SETTINGS,this.updateOrgSettings,et.UPDATE_TARGETS_IN_SCOPE,this.updateTargetsInScope),this.changedItems={}},onReset(Q){var ue=this;this.profiles={},this.errors=[],this.to_delete=[],this.success=null,c().each(Q.profiles,he=>{ue.profiles[he.id]=he,c().chain(Object.keys(he)).select(Ce=>Array.isArray(he[Ce])).without("tags","_old_tags").each(Ce=>{he[Ce]=c().object(c().map(he[Ce],Ue=>[Ue.id,Ue]))})}),this.profileTargetsInScope=c().reduce(this.profileTargetsInScope,(he,Ce,Ue)=>{const xe=Ce.targetsInScope?Ce.targetsInScope:Ce.oldTargetsInScope;return he[Ue]={oldTargetsInScope:xe},he},{}),this.setInitialEnables(),this.changedItems={},this.emit("change")},setErrors(Q){this.errors=Q,this.emit("change")},getShowableErrors(){return this.profilesLoading?[]:this.errors},onLoading(Q){const{entity:ue,isLoading:he}=Q;ue===ht?this.profilesLoading=he:ue===gt&&(this.ssidsLoading=he),this.emit("change")},onSaving(Q){this.saving=Q,this.emit("change")},getState(){return{profiles:this.profiles,profileInstallCounts:this.profileInstallCounts,profileTargetsInScope:this.profileTargetsInScope,dashMsgs:this.dashMsgs,payloadPlugins:this.payloadPlugins,loading:this.profilesLoading,saving:this.saving,changed:!c().isEmpty(this.changedItems)}},getChangedItems(){return this.changedItems},getOrgSettings(){return this.orgSettings},getSsidsLoading(){return this.ssidsLoading},getProfile(Q){return this.profiles[Q]},getProfileInstallCount(Q){return this.profileInstallCounts[Q]},getProfileTargetsInScope(Q){return this.profileTargetsInScope[Q]},getPayload(Q,ue,he){const Ce=this.payloadPlugins[ue]||{},Ue=this.getProfile(Q)||{};return Ce.isSinglePayload&&he==="0"?Ue[Ce.payloadKey]:(Ue[Ce.payloadKey]||{})[he]},logChange(Q,ue,he,Ce){var Ue=he;c().isUndefined(Ue)&&(Ce===!0?Ue=!1:Ue="");var xe=`${Q}.${ue}`;if(Ce===this.changedItems[xe])delete this.changedItems[xe];else if(Ce===!1&&xe.indexOf(`${Q}.enable_`)===0){var Ne=/(?:^|\s)enable_(.*?)(?:\s|$)/g,be=Ne.exec(ue),Qe=be[1],qe=`${Q}.${Qe}`;c().chain(this.changedItems).keys().filter(tt=>tt.indexOf(qe)===0).each(tt=>{delete this.changedItems[tt]}),this.changedItems[xe]=Ue}else xe in this.changedItems||(this.changedItems[xe]=Ue)},getPayloadsInfo(Q){var ue=this.getProfile(Q),he=[];return!ue||ue.custom_profile_data?he:(he=c().map(this.payloadPlugins,Ce=>{var Ue;const xe=Ce.payloadKey;return Ce.isSinglePayload&&ue[`enable_${xe}`]?Ue=["0"]:Ce.isSinglePayload||(Ue=c().compact(c().map(ue[xe],(Ne,be)=>be==="to_delete"?void 0:Ne.id))),c().map(Ue,Ne=>({payloadKey:xe,plugin:Ce,payloadId:Ne}))}),c().compact(c().flatten(he)))},getPayloadPlugins(){return this.payloadPlugins},getEditor(Q){return this.payloadPlugins[Q]},logAddPayload(Q,ue,he){this.changedItems.added_payloads||(this.changedItems.added_payloads=[]);var Ce=`${Q}.${ue}.${he}`;this.changedItems.added_payloads.push(Ce)},logRemovePayload(Q,ue,he){var Ce=`${Q}.${ue}.${he}`,Ue=!1;this.changedItems.added_payloads&&(Ue=c().contains(this.changedItems.added_payloads,Ce),this.changedItems.added_payloads=c().without(this.changedItems.added_payloads,Ce),c().isEmpty(this.changedItems.added_payloads)&&delete this.changedItems.added_payloads),Ue||(this.changedItems.removed_payloads||(this.changedItems.removed_payloads=[]),this.changedItems.removed_payloads.push(Ce)),c().chain(this.changedItems).keys().filter(xe=>xe.indexOf(`${Q}.${ue}.${he}`)===0).each(xe=>{delete this.changedItems[xe]})},getField(Q,ue){var he=Q.payloadKey===pt,Ce=this.getProfile(Q.profileId);if(!Ce)return null;if(he)return Ce[ue];var Ue=Ce[Q.payloadKey]||{};return Q.singlePayload?Ue[ue]:(Ue[Q.payloadId]||{})[ue]},update(Q){var ue=Q.objectIdentifier,he=Q.settings,Ce=ue.payloadKey===pt,Ue=ue.profileId,xe={},Ne={};c().each(he,(Qe,qe)=>{if(!c().isUndefined(Qe)){var tt=this.getField(ue,qe);if(tt!==Qe){if(Ce){if(!this.profiles[Ue])return;this.profiles=_()(this.profiles,{[Ue]:{[qe]:{$set:Qe}}})}else c().isUndefined(this.getProfile(Ue))||(ue.singlePayload?(Ne=this.getProfile(Ue)[ue.payloadKey]||{},this.profiles=_()(this.profiles,{[Ue]:{[ue.payloadKey]:{$set:_()(Ne,{[qe]:{$set:Qe}})}}})):(Ne=this.getProfile(Ue)[ue.payloadKey][ue.payloadId]||{},this.profiles=_()(this.profiles,{[Ue]:{[ue.payloadKey]:{[ue.payloadId]:{$set:_()(Ne,{[qe]:{$set:Qe}})}}}})));xe[qe]={oldVal:tt,newVal:Qe}}}},this);var be=!1;c().each(xe,(Qe,qe)=>{if(Qe){var tt=`${ue.payloadKey}.${ue.payloadId}.${qe}`;this.logChange(ue.profileId,tt,Qe.oldVal,Qe.newVal),be=!0}},this),be&&this.emit("change")},create(Q){const ue=Q.forcePlugin||this.payloadPlugins[Q.payloadKey];if(Q.isProfile)this.profiles=_()(this.profiles,{[Q.id]:{$set:{id:Q.id,payload_display_name:"New profile",tags:[],scope:"all",named_tag_scope_id:null,is_new:!0}}}),this.changedItems.added||(this.changedItems.added=[]),this.changedItems.added.push(Q.id);else if(Q.singlePayload){const he=`enable_${ue.payloadKey}`,Ce=this.profiles[Q.profileId][he],Ue=this.profiles[Q.profileId][ue.payloadKey],xe=c().isEmpty(Ue)?ue.defaultSettings:Ue,Ne=Q.profileId;this.profiles=_()(this.profiles,{[Ne]:{[he]:{$set:!0},[ue.payloadKey]:{$set:xe}}}),this.logChange(Q.profileId,he,Ce,!0)}else{const he=Q.profileId;this.profiles[Q.profileId][ue.payloadKey]||(this.profiles=_()(this.profiles,{[he]:{[ue.payloadKey]:{$set:{}}}}));const Ce=c().extend({},ue.defaultSettings,{is_new:!0,id:Q.id});Q.generateUUID&&(Ce.PayloadUUID=h.A.generateUUID()),this.profiles=_()(this.profiles,{[he]:{[ue.payloadKey]:{[Q.id]:{$set:Ce}}}}),this.logAddPayload(Q.profileId,ue.payloadKey,Q.id)}this.emit("change")},remove(Q){var ue=Q.forcePlugin||this.payloadPlugins[Q.payloadKey];if(Q.isProfile){const Ce=String(Q.profileId),Ue=c().reduce(this.profiles[Ce]||{},(xe,Ne,be)=>(/^(enable_|num_)|^(updated_at|created_at|payload_identifier)$/.test(be)||(xe[be]=Ne),xe),{});this.to_delete.push(Ce),this.profiles=c().omit(this.profiles,Ce);var he=this.changedItems.added;he&&c().contains(he,Q.profileId)?(he=c().without(he,Q.profileId),c().isEmpty(he)&&delete this.changedItems.added):(this.changedItems.deleted||(this.changedItems.deleted={}),this.changedItems.deleted[Q.profileId]=Ue)}else if(Q.singlePayload){const Ce=String(Q.profileId),Ue=`enable_${ue.payloadKey}`,xe=this.profiles[Ce][Ue],Ne=c().isFunction(ue.removeWith)&&ue.removeWith()||{[Ue]:{$set:!1},[ue.payloadKey]:{$set:{}}};this.profiles=_()(this.profiles,{[Ce]:Ne}),this.logChange(Q.profileId,Ue,xe,!1)}else{const Ce=String(Q.profileId),Ue=this.profiles[Ce][ue.payloadKey];if(Ue[Q.payloadId]&&(this.profiles=_()(this.profiles,{[Ce]:{[ue.payloadKey]:{$set:c().omit(Ue,Q.payloadId)}}}),Q.payloadId>0)){const xe=(this.profiles[Ce][ue.payloadKey].to_delete||[]).concat(Q.payloadId);this.profiles=_()(this.profiles,{[Ce]:{[ue.payloadKey]:{to_delete:{$set:xe}}}})}this.logRemovePayload(Ce,ue.payloadKey,Q.payloadId)}this.emit("change")},updateInstallCounts(Q){this.profileInstallCounts={...this.profileInstallCounts,...Q},this.emit("change")},updateDashboardMessages(Q){this.dashMsgs=Q,this.emit("change")},updateOrgSettings(Q){const ue=this.orgSettings||{};c().each(Object.keys(Q),he=>{ue[he]=Q[he]}),this.orgSettings=ue,this.emit("change")},updateTargetsInScope(Q){const ue=this.profileTargetsInScope[Q.id]||{},he={};"isFetchingTargetsInScope"in Q&&(he.isFetchingTargetsInScope={$set:Q.isFetchingTargetsInScope}),Q.targetsInScope&&(he.targetsInScope={$set:Q.targetsInScope}),Q.oldTargetsInScope&&(he.oldTargetsInScope={$set:Q.oldTargetsInScope}),this.profileTargetsInScope[Q.id]=_()(ue,he),this.emit("change")},getWebClipIcons(){return c().chain(this.profiles).map(Q=>c().values(Q.web_clips)).flatten().inject((Q,ue)=>(ue.icon&&(Q[ue.url]=ue.icon),Q),{}).value()},dump(){var Q=c().chain(this.changedItems).keys().inject((he,Ce)=>Ce==="added_payloads"||Ce==="removed_payloads"?he.concat(this.changedItems[Ce]):(he.push(Ce),he),[]).map(he=>he.split(".")[0]).uniq().value(),ue=d().extend({},c().pick(this.profiles,Q),{to_delete:(this.to_delete||[]).join()});return{profiles:ue,changes:this.changedItems}},toJson(){const Q={managed_settings:!0,traffic_filter_amp:!0,dns_proxy_odns:!0},ue=(xe,Ne)=>c().isNumber(Ne)||c().isBoolean(Ne)?Ne.toString():Ne,{profiles:he,changes:Ce}=this.dump(),Ue=Object.entries(he).reduce((xe,[Ne,be])=>(c().isObject(be)?xe[Ne]=Object.entries(be).reduce((Qe,[qe,tt])=>(Q[qe]?Qe[qe]=tt:Qe[qe]=JSON.parse(JSON.stringify(tt,ue)),Qe),{}):xe[Ne]=be,xe),{});return JSON.stringify({profiles:Ue,changes:Ce})}}),At=(Q,ue,he,Ce,Ue,xe)=>{const Ne={id:ue.id,isFetchingTargetsInScope:!1};he||Ce||Ue?Ne.targetsInScope=xe:Ne.oldTargetsInScope=xe,Q(et.UPDATE_TARGETS_IN_SCOPE,Ne)},Ct=(Q,ue,he,Ce,Ue,xe)=>{if(ue.oldTargetsInScope&&!he&&!Ce&&!Ue){const Ne={id:ue.id,targetsInScope:ue.oldTargetsInScope,isFetchingTargetsInScope:!1};return Q(et.UPDATE_TARGETS_IN_SCOPE,Ne),!0}if(!Ue){if(he&&he==="none"||ue.scope==="none")return At(Q,ue,he,Ce,null,[]),!0;if(he&&he==="all"||ue.scope==="all"&&xe)return At(Q,ue,he,Ce,null,xe),!0}},Ut=(Q,ue,he,Ce,Ue,xe=!1)=>{const Ne=xe?"pcc_users_scoped_by_installable":"pcc_devices_scoped_by_installable",be=t()({controller:"configure",action:Ne}),Qe={type:"profile",installable_id:ue.id};ue.is_new&&(Qe.is_new=!0);const qe=(0,i.MjC)(he,Ce,Ue,ue.use_named_tag_scope);return Q(et.UPDATE_TARGETS_IN_SCOPE,{id:ue.id,isFetchingTargetsInScope:!0}),d().ajax({url:be,type:"POST",data:{...Qe,...qe}}).success(tt=>{At(Q,ue,he,Ce,Ue,tt)}).error(tt=>{E()(JSON.parse(tt.responseText)),At(Q,ue,he,Ce,Ue,[])})},Z=(Q,ue,he)=>d().ajax({url:t()({controller:"configure",action:"pcc_settings_install_counts_json"}),method:"GET",data:{limit:Q,offset:ue}}).done(Ce=>{const Ue=Ce.is_complete;delete Ce.is_complete,setTimeout(()=>{he(Ce)},0),Ue||Z(Q,ue+Q,he)});var oe={reset(Q){this.dispatch(et.RESET,Q)},errors(Q){this.dispatch(et.ERRORS,Q)},loading(Q){setTimeout(()=>{this.dispatch(et.LOADING,Q)},0)},saving(Q){setTimeout(()=>{this.dispatch(et.SAVING,Q)},0)},fetch(){setTimeout(()=>{this.dispatch(et.LOADING,{isLoading:!0,entity:ht})},0),d().ajax({url:t()({controller:"configure",action:"pcc_settings_json"}),method:"GET",context:this,data:{}}).then(Q=>(c().each(Q.profiles,ue=>{ue._old_tags=c().clone(ue.tags),ue._old_scope=c().clone(ue.scope),ue._old_named_tag_scope_id=c().clone(ue.named_tag_scope_id)}),Q)).done(Q=>{this.dispatch(et.RESET,{profiles:Q.profiles})}).always(()=>{setTimeout(()=>{this.dispatch(et.LOADING,{isLoading:!1,entity:ht})},0)})},fetchTargetsInScope(Q,ue,he,Ce,Ue,xe){if(!Ct(this.dispatch,Q,ue,he,Ce,Ue))return Ut(this.dispatch,Q,ue,he,Ce,xe)},fetchVpnInfos(){d().ajax({url:t()({controller:"configure",action:"pcc_settings_vpn_infos"}),method:"GET",data:{},context:this}).done(Q=>{setTimeout(()=>{this.dispatch(et.UPDATE_ORG_SETTINGS,Q)},0)})},fetchWifiInfos(){d().ajax({url:t()({controller:"configure",action:"pcc_settings_wifi_infos"}),method:"GET",data:{},context:this}).done(Q=>{setTimeout(()=>{this.dispatch(et.UPDATE_ORG_SETTINGS,Q)},0)})},fetchSsidsForNetwork(Q){setTimeout(()=>{this.dispatch(et.LOADING,{isLoading:!0,entity:gt})},0),d().ajax({url:t()({controller:"configure",action:"pcc_settings_ssids",node_group_id:Q}),method:"GET",data:{},context:this}).done(ue=>{setTimeout(()=>{this.dispatch(et.UPDATE_ORG_SETTINGS,ue)},0)}).always(()=>{setTimeout(()=>{this.dispatch(et.LOADING,{isLoading:!1,entity:gt})},0)})},fetchTemplates(){d().ajax({url:t()({controller:"configure",action:"pcc_settings_template_mcs"}),method:"GET",data:{},context:this}).done(Q=>{setTimeout(()=>{this.dispatch(et.UPDATE_ORG_SETTINGS,Q)},0)})},fetchInstallCounts(Q={}){const ue=Q.limit||100,he=Q.offset||0;Z(ue,he,Ue=>this.dispatch(et.UPDATE_INSTALL_COUNTS,Ue))},fetchDashboardMessages(){d().ajax({url:t()({controller:"configure",action:"sm_dashboard_messages",feature:"settings"}),method:"GET",data:{},context:this}).done(Q=>{setTimeout(()=>{this.dispatch(et.UPDATE_DASHBOARD_MESSAGES,Q)},0)})},incrementVersion(Q){const ue={profileIds:[Q]};(0,a.A)(`/api/v1/organizations/${Mkiconf.org_id}/sm/profiles/incrementVersion`,{method:"put",body:JSON.stringify(ue),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":Mkiconf.authenticity_token}})},profiles:{create(Q){this.dispatch(et.CREATE,{isProfile:!0,id:Q})},remove(Q){this.dispatch(et.REMOVE,c().extend({},{isProfile:!0,profileId:Q}))},update(Q,ue){this.dispatch(et.UPDATE,{objectIdentifier:{profileId:Q,payloadKey:pt},settings:ue})},createNewCiscoApp(Q,ue){const he={custom_profile_type:null,apple_payload_scope:i.Tdb,copy:!1,scope:i.K5Q};let Ce,Ue;if(Q===i.zcM||Q===i.$rc?(Ce=F.Ay,Ue=(0,i.CiE)(Q)):Q===i.qaP||Q===i.gYf?(Ce=F.Ay,Ue=(0,i.jSX)(Q)):Q===i.fRn?(Ce=o.A,Ue=i.Lrl):Q===i.tZC?(Ce=F.Ay,Ue=i.ACU):i.pQX&&(Ce=F.Ay,Ue=i.KWO),this.dispatch(et.CREATE,{isProfile:!0,id:ue}),this.dispatch(et.UPDATE,{objectIdentifier:{profileId:ue,payloadKey:pt},settings:he}),Ce){const xe=Ce.isSinglePayload?"0":c().uniqueId("-"),{isSinglePayload:Ne,payloadKey:be}=Ce;this.dispatch(et.CREATE,{profileId:ue,isPayload:!0,singlePayload:Ne,payloadKey:be,id:xe}),this.dispatch(et.UPDATE,{objectIdentifier:{profileId:ue,payloadKey:be,payloadId:xe},settings:Ue})}}},settings:{create(Q,ue,he,Ce,Ue,xe){this.dispatch(et.CREATE,{profileId:Q,isPayload:!0,singlePayload:Ce,payloadKey:he,id:ue,forcePlugin:Ue,generateUUID:xe})},remove(Q){this.dispatch(et.REMOVE,Q)},update(Q,ue){this.dispatch(et.UPDATE,{objectIdentifier:Q,settings:ue})}}};const pe=Q=>{Q.store("PccSettingsStore")||(Q.addStore("PccSettingsStore",new Ot),Q.addActions({pccSettings:oe}))}},737793:(ae,x,e)=>{e.d(x,{U1:()=>r,o1:()=>A});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(447359),d=e.n(y),f=e(869592),l=e.n(f),_=e(652129);const a=["historicalClientLocations","recentClientLocations"],h=(0,_.L)().withStoreName("LocationHeatmapstore").withModels(a).create(),s=h.actions,t=(p,I)=>{const U=p.hasRelativeRssiLocalization,D=p.hasBleLocalizationV3;return{type:"GET",url:l()({scala_project:"nmr",controller:U?"locations_v3":"locations"}),data:Object.assign({clientsType:D?"all":"wifiOnly"},I)}},n=p=>p.filter(D=>C().isNumber(D.location.lat)&&C().isNumber(D.location.long)).map(D=>({...D,id:D.mac,location:{lat:D.location.lat,lng:D.location.long}})),E=(p,I)=>{const U=d()();return C().reduce(C().range(1,I+1),(D,u)=>{const o=p.clone().subtract(u,"hours");return o>U?D:D.concat({startTime:o.startOf("hour").unix(),endTime:o.endOf("hour").unix()})},[])},i=(p,I)=>(U,D)=>{U(s.requestHistoricalClientLocations());const u=E(p,I),o=D().models.historicalClientLocations.byId,M=C().reduce(u,(m,P)=>{if(o[P.startTime])return m;{const T=t(D().locals,P),O=Object.assign({},T,{success(v){const L=n(v);U(s.updateHistoricalClientLocations([{id:P.startTime,data:L}]))}});return m.concat(O)}},[]);return c().multipleAjax(M,{numRetries:2,maxSimultaneous:4}).always(()=>{U(s.doneRequestingHistoricalClientLocations()),U(s.updateLocals({animationBlocked:!1}))})},R=()=>(p,I)=>{p(s.requestRecentClientLocations());const U=t(I().locals,{}),D=Object.assign({},U,{success(u){const o=n(u);p(s.addRecentClientLocations(o))}});c().ajax(D).always(()=>{p(s.doneRequestingRecentClientLocations())})},r=()=>h.createStore(),A=Object.assign({},s,{fetchHistoricalClientLocations:i,fetchRecentClientLocations:R});var S=null},739239:(ae,x,e)=>{e.d(x,{z:()=>d});var W=e(14602),C=e.n(W),g=e(310466);const c="SmTargetGroups",y=g.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:f=>({fetchTargetGroups:f.query({query:({networkId:l})=>({url:`networks/${l}/sm/targetGroups`}),providesTags:l=>l?[...l.map(({id:_})=>({type:c,id:_})),{type:c,id:"LIST"}]:[{type:c,id:"LIST"}]})})}),{useFetchTargetGroupsQuery:d}=y},739923:(ae,x,e)=>{e.d(x,{A:()=>c});var W=e(4933);const C=(0,W.A)("CURRENT_SSID_STORE"),g={reset(y){this.dispatch(C.constants.RESET,[y])},update(y){this.dispatch(C.constants.UPDATE,[y])}},c=y=>{y.store("CurrentSSIDStore")||(y.addStore("CurrentSSIDStore",C),y.addActions({current_ssid:g}))}},743767:(ae,x,e)=>{e.d(x,{A:()=>D});var W=e(540590),C=e.n(W),g=e(640173),c=e.n(g),y=e(14602),d=e.n(y),f=e(522224),l=e.n(f),_=e(941669),a=e.n(_),h=e(6464),s=e(869592),t=e.n(s),n=e(184988),E=e.n(n),i=e(459324),R=e(289840);const r="PCC_APPS_STORE_",A={FETCH_SYSTEM_APPS:`${r}FETCH_SYSTEM_APPS`,SEED_IN_USE_APPS:`${r}SEED`,CREATE:`${r}CREATE`,FIND_APPS:`${r}FIND_APPS`},S=(u,o)=>{var M;return u===i.CYr||u===i.z1X?M=l().map(o,m=>{const P=m.icon.replace(/-rw$/,""),T=/^\/\//.test(P)?`https:${P}`:P;return{value:m.package_name,label:m.name,price:m.price,icon:T,itunes_id:m.resource_path,vendor:m.vendor,itunes_description:m.description}}):u===i.zws?M=o.map(m=>{const{identifier:P,label:T,description:O,price:v,icon:L,vendor:B,storeId:F}=m;return l().pick({value:P,label:T,description:O,price:v,icon:L,vendor:B,storeId:F},l().identity)}):(u===i.cII||u===i.iQO||u===i.H9y)&&(M=l().map(o,m=>({value:m.bundleId,label:m.trackName,itunes_description:m.description,price:m.price,icon:m.artworkUrl60,itunes_id:m.trackId,vendor:m.artistName,version:m.version,itunes_url:m.trackViewUrl,supported_devices:m.supported_devices}))),M},p=h.A.createStore({initialize(){this.iosSystemApps=[],this.iosManagedApps=[],this.androidSystemApps=[],this.androidManagedApps=[],this.macManagedApps=[],this.appletvManagedApps=[],this.chromeManagedApps=[],this.googleAmaManagedApps=[],this.iosStoreApps={},this.androidStoreApps={},this.macStoreApps={},this.appletvStoreApps={},this.chromeStoreApps={},this.userDefinedApps=new Set,this.iosAppsInUse={},this.androidAppsInUse={},this.macAppsInUse={},this.appletvAppsInUse={},this.chromeAppsInUse={},this.currentSearch={},this.pendingSearches=new Set,this.timers={},this.searchedTerms=new Set,this.initialIosMetadataFetch=!1,this.initialAndroidMetadataFetch=!1,this.initialMacMetadataFetch=!1,this.initialAppletvMetadataFetch=!1,this.initialChromeMetadataFetch=!1,this.noMoreThan=3e3,this.bindActions("PCC_SETTINGS_STORE_LOADING",this.onRefresh,A.FETCH_SYSTEM_APPS,this.onFetchSystemApps,A.SEED_IN_USE_APPS,this.onSetAppsInUse,A.CREATE,this.onCreate,A.FIND_APPS,this.onFindApps)},onRefresh(){this.emit("change")},onFetchSystemApps(){a().ajax({url:t()({controller:"configure",action:"pcc_apps_json"}),method:"GET",context:this}).done(u=>{this.updateSystemApps(u)})},updateSystemApps(u){this.iosSystemApps=u.ios_system_apps,this.androidSystemApps=u.android_system_apps,this.androidManagedApps=u.android_apps,this.googleAmaManagedApps=u.google_ama_apps,this.iosManagedApps=u.ios_managed_apps,this.macManagedApps=u.mac_apps,this.appletvManagedApps=u.tvos_apps,this.chromeManagedApps=u.chrome_apps,this.emit("change")},onSetAppsInUse(u){if(!(u&&u.platform===i.WUC)){if(u){const o=u.apps||new Set,M=u.platform;this[`${M}AppsInUse`][u.group]=new Set([...o])}else{const o=l().difference(this.getAppsInUseList(i.cII),l().pluck(this.iosSystemApps,"value"));l().isEmpty(o)||this.doExternalSearchById(i.cII,o,!0);const M=l().difference(this.getAppsInUseList(i.iQO),l().pluck(this.macManagedApps,"value"));l().isEmpty(M)||this.doExternalSearchById(i.iQO,M,!0);const m=l().difference(this.getAppsInUseList(i.H9y),l().pluck(this.tvosManagedApps,"value"));l().isEmpty(m)||this.doExternalSearchById(i.H9y,m,!0),l().each(l().difference(this.getAppsInUseList(i.CYr),l().pluck(this.androidManagedApps,"value")),P=>{this.doExternalSearchById(i.CYr,[P],!0)})}this.emit("change")}},onCreate(u){this.userDefinedApps.add(u.createOption),this.emit("change")},onError(u,o){this.pendingSearches.delete(o),this.searchedTerms.delete(o),this.emit("change")},onFindApps(u){const o=u.callerId,M=u.search;if(this.currentSearch[o]=M,!this.timers[o]){this.executeCurrentSearch(o);const m=(P=>()=>{delete this.timers[o],this.executeCurrentSearch(P)})(o);this.timers[o]=setTimeout(m,this.noMoreThan)}},executeCurrentSearch(u){this.doExternalSearch(this.currentSearch[u])},makeExternalSearchPromise(u){return new Promise((o,M)=>{a().ajax({url:t()({controller:"configure",action:"pcc_app_store_search"}),method:"GET",context:this,data:u}).done(m=>{if(m.error)M(m.error,u.term);else{var P=S(u.platform,m);this.mergeStoreApps(u.platform,P,u.term),o()}}).fail((m,P,T)=>{M(T,u.term)})})},doExternalSearch(u,o){const M=(0,R.M)(u.platform);if(!this.hasSearched(u.term)){this.searchedTerms.add(u.term),this.pendingSearches.add(u.term),this.emit("change");var m=[],P=u.term;if(P.length>2048){const T=[];for(;P.length>2048;){const O=P.lastIndexOf(",",2048);T.push(P.slice(0,O)),P=P.slice(O+1)}T.push(P),m=T.map(O=>this.makeExternalSearchPromise({...u,term:O,platform:M}))}else m=[this.makeExternalSearchPromise({...u,platform:M})];Promise.all(m).then(()=>{if(o){switch(M){case i.z1X:case i.CYr:this.initialAndroidMetadataFetch=!0;break;case i.cII:this.initialIosMetadataFetch=!0;break;case i.iQO:this.initialMacMetadataFetch=!0;break;case i.H9y:this.initialAppletvMetadataFetch=!0;break;case i.zws:this.initialChromeMetadataFetch=!0;break;default:E()("Platform not supported.")}this.emit("change")}}).catch((T,O)=>{this.onError(T,O)})}},doExternalSearchById(u,o,M,m){var P=o.join(",");const T={platform:(0,R.M)(u),term:P,country:m||"us",lookup_type:u===i.CYr?"lookup-android-package":"lookup-apple-appid"};this.doExternalSearch(T,M)},mergeStoreApps(u,o,M){switch(u){case i.z1X:case i.CYr:this.androidStoreApps[M]=l().map(o,m=>l().extend({},m,{searchTerm:M}));break;case i.cII:this.iosStoreApps[M]=l().map(o,m=>l().extend({},m,{searchTerm:M}));break;case i.iQO:this.macStoreApps[M]=l().map(o,m=>l().extend({},m,{searchTerm:M}));break;case i.H9y:this.appletvStoreApps[M]=l().map(o,m=>l().extend({},m,{searchTerm:M}));break;case i.zws:this.chromeStoreApps[M]=l().map(o,m=>l().extend({},m,{searchTerm:M}));break;default:E()("Platform not supported.")}this.pendingSearches.delete(M),this.emit("change")},isLoading(){return this.pendingSearches.size>0||!l().isEmpty(this.timers)},hasSearched(u){return this.searchedTerms.has(u)},uniqueByValue(u){return l().uniq(u,!1,o=>o.value)},getCustomApps(){return l().map(Array.from(this.userDefinedApps),u=>({value:u,label:u}))},getInitialMetadataFetch(u){switch(u){case i.CYr:return this.initialAndroidMetadataFetch;case i.cII:return this.initialIosMetadataFetch;case i.iQO:return this.initialMacMetadataFetch;case i.H9y:return this.initialAppletvMetadataFetch;case i.zws:return this.initialChromeMetadataFetch;default:E()("Platform not supported.")}},getDefaultApps(u,o,M){var m;switch(u){case i.CYr:m=l().union(this.androidSystemApps,this.androidManagedApps,this.googleAmaManagedApps);break;case i.WUC:m=this.googleAmaManagedApps;break;case i.cII:m=l().union(this.iosSystemApps,this.iosManagedApps);break;case i.iQO:m=this.macManagedApps;break;case i.H9y:m=this.appletvManagedApps;break;case i.zws:m=this.chromeManagedApps;break;default:E()("Platform not supported.")}if(o&&(m=l().union(this.getCustomApps(),m)),Array.isArray(M)){const P=new Set(M);m=m.filter(T=>!P.has(T.value))}return this.uniqueByValue(m)},getStoreApps(u){var o;switch(u){case i.CYr:o=this.androidStoreApps;break;case i.cII:o=this.iosStoreApps;break;case i.iQO:o=this.macStoreApps;break;case i.H9y:o=this.appletvStoreApps;break;case i.zws:o=this.chromeStoreApps;break;default:E()("Platform not supported.")}return l().chain(o).values().flatten().uniq().value()},getAppsInUse(u){switch(u){case i.CYr:return this.androidAppsInUse;case i.cII:return this.iosAppsInUse;case i.iQO:return this.macAppsInUse;case i.H9y:return this.appletvAppsInUse;case i.zws:return this.chromeAppsInUse;default:E()("Platform not supported.")}},getAppsInUseList(u){return l().chain(this.getAppsInUse(u)).values().map(o=>Array.from(o)).flatten().value()},getAppPairsInUse(u){return l().map(this.getAppsInUseList(u),o=>({value:o,label:o}))},getApps(u){var o;switch(u){case i.CYr:o=l().union(this.getCustomApps(),this.androidManagedApps,this.androidSystemApps,this.googleAmaManagedApps,this.getStoreApps(i.CYr));break;case i.cII:o=l().union(this.getCustomApps(),this.iosManagedApps,this.iosSystemApps,this.getStoreApps(i.cII));break;case i.iQO:o=l().union(this.getCustomApps(),this.macManagedApps,this.getStoreApps(i.iQO));break;case i.H9y:o=l().union(this.getCustomApps(),this.appletvManagedApps,this.getStoreApps(i.H9y));break;case i.zws:o=l().union(this.getCustomApps(),this.chromeManagedApps,this.getStoreApps(i.zws));break;default:E()("Platform not supported.")}const M=new Set(l().pluck(o,"value")),m=this.getAppPairsInUse(u||i.cII).filter(P=>!M.has(P.value));return o=l().union(o,m),l().uniq(o,!1,P=>`${P.searchTerm}:${P.value}`)},getCachedApps(u,o,M,m){if(u===i.WUC)return[];var P=this.getApps(u),T=this.getAppsInUse(u);if(o&&T[o]){const O=new Set(M);P=l().reject(P,v=>!O.has(v.value)&&T[o].has(v.value),this)}if(!l().isEmpty(m)){const O=new Set(m);P=l().reject(P,v=>O.has(v.value))}return P},getAvailableSystemApps(u,o){const M=Array.from(this[`${u}AppsInUse`][o]||{}),m=l().map(M,P=>({label:P,value:P}));return l().union(m,this.getDefaultApps(u),this.getCustomApps())}}),I=l().debounce((u,o,M)=>{u.dispatch(o,M)},50),U={fetchInitialAppMetadata(){I(this,A.SEED_IN_USE_APPS)},fetchSystemApps(){this.dispatch(A.FETCH_SYSTEM_APPS)},setAppsInUse(u,o,M){this.dispatch(A.SEED_IN_USE_APPS,{platform:u,group:o,apps:M})},addCustomApp(u){this.dispatch(A.CREATE,{createOption:u})},findApps(u,o,M,m){var P=m.trim(),T=this.flux.stores.PccAppsStore;if(l().isEmpty(P))return T.getDefaultApps(u);if(T.hasSearched(P))return T.getCachedApps(u);{const O={platform:u,term:P,country:M||"us",lookup_type:"search",filter:"all"};return this.dispatch(A.FIND_APPS,{search:O,callerId:o}),null}}},D=u=>{u.store("PccAppsStore")||(u.addStore("PccAppsStore",new p),u.addActions({pccApps:U}))}},744045:(ae,x,e)=>{e.d(x,{U1:()=>m,o1:()=>o});var W=e(14602),C=e.n(W),g=e(399752),c=e(967720),y=e(869592),d=e.n(y),f=e(758928),l=e.n(f),_=e(941669),a=e.n(_),h=e(522224),s=e.n(h),t=e(652129),n=e(537730),E=e(174168);const i=["qrProfiles"],R=(0,t.L)().withStoreName("QualityRetentionProfilesStore").withModels(i).withModal().withChanges().create(),r=R.actions,A=()=>T=>{T(r.requestQrProfiles());const O=`/api/v1/networks/N_${l().ng_id}/camera/qualityRetentionProfiles`;return(0,c.A)(d()({global:!0,controller:O}),{credentials:"same-origin"}).then(v=>v.json()).then(v=>{T(r.addQrProfiles(v))})},o={...r,initializeQrProfiles:()=>T=>{T(A())},createProfile:T=>(O,v)=>{const L=v();if(s().isEmpty((0,n.FT)(L)))return;const B={id:T,...(0,n.FT)(L)[T]};O(r.updateLocals({isSaving:!0}));const F=`/api/v1/networks/N_${l().ng_id}/camera/qualityRetentionProfiles`;return a().ajax({url:d()({global:!0,controller:F}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(B)}).done(K=>{O(r.updateLocals({isSaving:!1,saveSuccess:s().isEmpty(K.errors),errors:K.errors})),s().isEmpty(K.errors)?(O(r.updateQrProfilesWithMerge([K])),O(r.resetAllChanges()),O(r.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))):O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:s().values(K.errors)}))}).fail(K=>{O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(K.responseText).errors}))})},updateProfile:T=>(O,v)=>{const L=v();if(s().isEmpty((0,n.FT)(L)))return;const B={id:T,...(0,n.FT)(L)[T]};O(r.updateLocals({isSaving:!0}));const F=`/api/v1/networks/N_${l().ng_id}/camera/qualityRetentionProfiles/${T}`;return a().ajax({url:d()({global:!0,controller:F}),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify(B)}).done(K=>{O(r.updateLocals({isSaving:!1,saveSuccess:s().isEmpty(K.errors),errors:K.errors})),s().isEmpty(K.errors)?(O(r.updateQrProfilesWithMerge([K])),O(r.resetAllChanges()),O(r.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))):O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:s().values(K.errors)}))}).fail(K=>{O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(K.responseText).errors}))})},deleteProfile:T=>O=>{O(r.updateLocals({isSaving:!0}));const v=`/api/v1/networks/N_${l().ng_id}/camera/qualityRetentionProfiles/${T}`;return a().ajax({url:d()({global:!0,controller:v}),type:"DELETE",dataType:"json",contentType:"application/json"}).done(L=>{s().isEmpty(L)?(O(A()),O(r.updateLocals({isSaving:!1,saveSuccess:null,errors:[]}))):O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:L.errors}))}).fail(L=>{O(r.updateLocals({isSaving:!1,saveSuccess:!1,errors:JSON.parse(L.responseText).errors}))})},updateCameraWithProfile:(T,O)=>v=>{const L={nodeIds:T,profileId:O};return(0,c.A)(d()({controller:"cameras",action:"update_quality_retention_profile"}),{redirect:"manual",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":l().authenticity_token},method:"PUT",body:JSON.stringify(L)}).then(B=>B.json()).then(B=>{if(B.status.failed)return Promise.reject(B.status.error)}).then(()=>v(E.o1.fetchCameraConfigs()).then(B=>g.A.actions.cameras.cameraConfig.merge(B)))},fetchCameraDetails:()=>T=>{T(E.o1.fetchCameraConfigs()).then(O=>g.A.actions.cameras.cameraConfig.merge(O))}},M=R.actionTypes,m=()=>R.createStore();var P=null},744965:(ae,x,e)=>{e.d(x,{U1:()=>R,o1:()=>E});var W=e(522224),C=e.n(W),g=e(50811),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(312602);const _=["clientByMac","clientsCounts","clients","clientGroups","clientGroupById","shortClients","ssids","networks"],a=(0,y.L)().withModels(_).withChanges().create(),h=a.actions,s=r=>async A=>{A(h.requestClients());const S=(0,l.qC)(r),p=`/api/v1/organizations/${f().org_id}/nac/clients?${S}`,I=await(0,g.apiRequest)("GET",p);return A(h.addClientsCounts([{id:"counts",filteredCount:I.data.meta.filteredCount,totalCount:I.data.meta.totalCount}])),A(h.addClients(I.data.items))},t=()=>async r=>{r(h.requestClientGroups());const A=`/api/v1/organizations/${f().org_id}/nac/clients/groups`,S=await(0,g.apiRequest)("GET",A);return r(h.addClientGroups(S.data))},n=()=>async r=>{const A=`/api/v1/organizations/${f().org_id}/nac/dictionaries/urn:networkaccess/attributes`;r(h.requestSsids()),r(h.requestNetworks());const S=await(0,g.apiRequest)("GET",A),p=S.data.find(u=>u.attributeId==="urn:networkaccess:ssidname"),I=S.data.find(u=>u.attributeId==="urn:networkaccess:networkname"),U=p.enum.map(u=>({id:u,name:u})),D=I.enum.map(u=>({id:u,name:u}));r(h.addSsids(U)),r(h.addNetworks(D))},E=C().extend({},h,{fetchClients:s,fetchClientGroups:t,fetchSsidsAndNetworks:n}),i=a.actionTypes,R=r=>a.createStore(r)},748911:(ae,x,e)=>{e.d(x,{A:()=>f});var W=e(522224),C=e.n(W),g=e(689917),c=e(646894),y=e.n(c);function d(l){return l.charAt(0).toUpperCase()+l.slice(1)}class f extends g.A{constructor(_){super(),this.alias=_||C().uniqueId("plugin_")}actionTypes(){const _=this.alias.toUpperCase();return{update:`UPDATE_${_}`,clear:`CLEAR_${_}`,delete:`DELETE_${_}`}}actions(){const _=d(this.alias),a=this.actionTypes();return{[`update${_}`]:h=>({type:a.update,update:h}),[`clear${_}`]:()=>({type:a.clear}),[`delete${_}`]:h=>({type:a.delete,key:h})}}reducer(_={}){return(a=_,h)=>{const s=this.actionTypes();switch(h.type){case s.update:return y()(a,{$merge:h.update||{}});case s.clear:return{};case s.delete:return y()(a,{$set:C().omit(a,h.key)});default:return a}}}create(_={}){return{actionTypes:this.actionTypes(),actions:this.actions(),reducer:this.reducer(_)}}}},758047:(ae,x,e)=>{e.d(x,{o1:()=>ct,O7:()=>_t,Tp:()=>ut});var W=e(82960),C=e(14602),g=e(941669),c=e.n(g),y=e(758928),d=e.n(y),f=e(97132),l=e(869592),_=e.n(l);const a="TIMELINE_SET_RANGE",h="TIMELINE_CENTER_ON",s="TIMELINE_UPDATE_SETTINGS",t="TIMELINE_FOCUS_EXIT",n="TIMELINE_FOCUS_SET_RANGE",E="TIMELINE_FOCUS_SET_MAX_DURATION",i={TIMELINE_SET_RANGE:a,TIMELINE_CENTER_ON:h,TIMELINE_UPDATE_SETTINGS:s,TIMELINE_FOCUS_EXIT:t,TIMELINE_FOCUS_SET_RANGE:n,TIMELINE_FOCUS_SET_MAX_DURATION:E},R=1e3*60,r=1e3*60*60*24*14,A=1e3*60*60,S=1e3*5,p={hasFocus:!1,startTs:null,endTs:null,maxDuration:null},I=(()=>{const ye=Date.now();return{startTs:ye-A/2,endTs:ye+A/2,focus:p}})(),U=ye=>ye.startTs,D=ye=>ye.endTs,u=ye=>ye.focus,o=(0,f.Mz)(u,ye=>ye.hasFocus),M=(0,f.Mz)(u,ye=>ye.maxDuration),m=(0,f.Mz)(u,ye=>ye.startTs),P=(0,f.Mz)(u,ye=>ye.endTs),T=(0,f.Mz)(U,D,(ye,ke)=>ke-ye),O=(0,f.Mz)(T,ye=>ye>R),v=(0,f.Mz)(T,ye=>ye<r),L={getStartTs:U,getEndTs:D,getRangeDuration:T,getCanZoomIn:O,getCanZoomOut:v,getHasFocus:o,getFocusStartTs:m,getFocusEndTs:P,getFocusMaxDuration:M},B=(ye,ke,He)=>({type:a,payload:{startTs:+ye,endTs:+ke,noopOnOverflow:He}}),F=ye=>(ke,He)=>{const{cameraPlayer:{timeline:Ge}}=He();let Je=D(Ge);if(ye>Je){const st=T(Ge);Je=ye+st}ke(B(ye,Je))},K=ye=>(ke,He)=>{const{cameraPlayer:{timeline:Ge}}=He();let Je=U(Ge);if(ye<Je){const st=T(Ge);Je=ye-st}ke(B(Je,ye))},b=ye=>({type:h,payload:{ts:ye}}),q=(ye,ke,He)=>(Ge,Je)=>{const{cameraPlayer:{timeline:st}}=Je(),it=U(st),at=D(st);if(Ge({type:n,payload:{startTs:+ye,endTs:+ke}}),He&&(ye<it||ye>at||ke<it||ke>at)){const Pt=.5*(ye+ke);Ge(b(Pt))}},z={setRange:B,setStart:F,setEnd:K,centerOn:b,setFocusRange:q,setFocusStart:(ye,ke)=>(He,Ge)=>{const{cameraPlayer:{timeline:Je}}=Ge(),st=M(Je);let it=P(Je),at=+ye;const Pt=Date.now();at>Pt-S&&(at=Pt-S);const Tt=it-at;st&&Tt>st?it=at+st:Tt<S&&(it=at+S),He(q(at,it,ke))},setFocusEnd:(ye,ke)=>(He,Ge)=>{const{cameraPlayer:{timeline:Je}}=Ge(),st=M(Je);let it=m(Je),at=+ye;const Pt=Date.now();at>Pt&&(at=Pt);const Tt=at-it;st&&Tt>st?it=at-st:Tt<S&&(it=at-S),He(q(it,at,ke))},snapFocusToTimelineCenter:()=>(ye,ke)=>{const{cameraPlayer:{timeline:He}}=ke(),Ge=U(He),Je=D(He),st=(Je-Ge)/4,it=Math.min(Ge+st,Date.now()-S),at=Math.min(Je-st,Date.now());ye(q(it,at))},snapFocusToTimelineCenterKeepRange:()=>(ye,ke)=>{const{cameraPlayer:{timeline:He}}=ke();if(o(He)){const Je=(U(He)+D(He))/2,st=(P(He)-m(He))/2,it=Je-st,at=Je+st;ye(q(it,at))}},setMaxFocusDuration:ye=>({type:E,payload:{maxDuration:ye}}),exitFocus:()=>({type:t})};function ne(ye,ke,He,Ge){const Je=ke-ye;return Je<R||Je>r?[He,Ge]:[ye,ke]}function Y(ye,ke){let He=ye,Ge=ke;const Je=Ge-He,st=ye+Je/2;return Je>r?(He=st-r/2,Ge=st+r/2):Je<R&&(He=st-R/2,Ge=st+R/2),[He,Ge]}const te=(ye,ke)=>{const{startTs:He,endTs:Ge,noopOnOverflow:Je}=ke;let st,it;return Je?[st,it]=ne(He,Ge,U(ye),D(ye)):[st,it]=Y(He,Ge),{...ye,startTs:st,endTs:it}},Te=(ye,ke)=>{const{type:He,payload:Ge}=ke;switch(He){case n:return{...ye,hasFocus:!0,startTs:Ge.startTs,endTs:Ge.endTs};case E:{const{maxDuration:Je}=Ge;return{...ye,maxDuration:Je<S?S:Je}}case t:return p;default:return ye}},me=(ye=I,ke)=>{const{type:He,payload:Ge}=ke;switch(He){case a:return te(ye,Ge);case h:{const{ts:Je}=Ge,st=T(ye),it=Je-st/2,at=Je+st/2;return{...ye,startTs:it,endTs:at}}case t:case n:case E:return{...ye,focus:Te(ye.focus,ke)};default:return ye}};var Me=e(418562);const Ie={name:"meraki-dashboard",appVersion:"628407-R-4d48a94168c6"};class ge{static REPORT_INTERVAL=3e5;static events=[];static reportTimer=null;static log(...ke){window.MOTION_SEARCH_TELEMETRY_DEBUG&&console.log("[MV Video Reporter] ",...ke)}static addEvent(ke){ge.reportTimer||(ge.reportTimer=window.setTimeout(ge.report,ge.REPORT_INTERVAL)),ge.events.push(ke)}static async report(){try{const ke={clientApp:Ie,telemetryEvents:ge.events},He=new Blob([JSON.stringify(ke)],{type:"application/json"}),Ge=navigator.sendBeacon(_()({controller:"video",action:"motion_search_telemetry"}),He);ge.log("Successfully reported events",Ge,ke),ge.events=[]}catch(ke){window.MOTION_SEARCH_TELEMETRY_DEBUG&&ge.log("[MV Memory Reporter] ",ke)}ge.reportTimer&&(clearTimeout(ge.reportTimer),ge.reportTimer=null)}}const de=ge,se="MOTION_SEARCH_ENTER",X="MOTION_SEARCH_EXIT",Oe="MOTION_SEARCH_BEGIN",H="MOTION_SEARCH_FETCH_INITIAL_DONE",$="MOTION_SEARCH_FETCH_DONE",le="MOTION_SEARCH_END",ce="MOTION_SEARCH_CLEAR",ve="MOTION_SEARCH_SET_FILTER",_e="MOTION_SEARCH_RESET_FILTERS",Ee="MOTION_SEARCH_SET_EVENT",Se={MOTION_SEARCH_ENTER:se,MOTION_SEARCH_EXIT:X,MOTION_SEARCH_BEGIN:Oe,MOTION_SEARCH_FETCH_INITIAL_DONE:H,MOTION_SEARCH_FETCH_DONE:$,MOTION_SEARCH_END:le,MOTION_SEARCH_CLEAR:ce,MOTION_SEARCH_SET_FILTER:ve,MOTION_SEARCH_RESET_FILTERS:_e,MOTION_SEARCH_SET_EVENT:Ee},k=100,G=35e3,fe={sensitivity:k,minEventLength:0,onlyPeople:!1},De={isActive:!1,isFetching:null,isInProgressiveMotionSearch:!1,events:[],progress:null,activeEventTs:null,hoverEventTs:null,filters:fe},We=ye=>ye.isActive,we=ye=>!!ye.isFetching,Ve=ye=>ye.isInProgressiveMotionSearch,Pe=ye=>ye.events,Re=ye=>ye.progress,Ke=ye=>ye.activeEventTs,re=ye=>ye.hoverEventTs,Ae=ye=>ye.filters,$e=(0,f.Mz)(Pe,Ae,(ye,ke)=>ye.filter(He=>He.intensity_roi>(k-ke.sensitivity)/k&&He.duration_ms>=ke.minEventLength&&(!ke.onlyPeople||He.has_people))),Fe=(0,f.Mz)($e,ye=>new Set(ye.map(ke=>ke.ts))),Ye={getIsActive:We,getIsFetching:we,getEvents:Pe,getProgress:Re,getIsInProgressiveMotionSearch:Ve,getActiveEventTs:Ke,getHoverEventTs:re,getFilters:Ae,getFilteredEvents:$e,getFilteredEventsAsSet:Fe},Le=()=>({type:se}),Be=()=>({type:X}),je=()=>(ye,ke)=>{const{cameraPlayer:{timeline:He}}=ke();let Ge=L.getStartTs(He),Je=L.getEndTs(He);const st=(Je-Ge)/4;Ge+=st,Je-=st,ye(z.setFocusRange(Ge,Je)),ye(Le())},ze=()=>ye=>{ye(z.exitFocus()),ye(Be())},Xe=60*60*6*1e3,Ze=60*60*24*2*1e3;let lt;const Et=(ye,ke,He,Ge,{withImages:Je,withPeople:st,unconsolidateMotion:it}={},at=!1,Pt=null,Tt=Xe,xt)=>It=>{at||(lt=Date.now(),xt=lt,Pt=ke);const Ft=at?$:H,Bt=Math.min(+He,+ke+Tt);Tt=Math.min(Tt*2,Ze);const Nt=Math.round(100*(Bt-Pt)/(He-Pt)),jt=new Date().getTime(),Wt=new Promise((Kt,wt)=>c().ajax({url:_()({controller:"cameras",action:"motion_search"}),type:"GET",dataType:"json",data:{version:2,id:ye,roi:Ge,start:+ke,end:Bt,with_images:Je,with_people:st,unconsolidate_motion:it,verbose_subevents:!0}}).done(Kt).fail(wt)).then(Kt=>{if(xt===lt)if(It({type:Ft,payload:{events:Kt,fetchPromise:Wt,progress:Nt}}),Bt<+He)setTimeout(()=>{It(Et(ye,Bt,He,Ge,{withImages:Je,withPeople:st,unconsolidateMotion:it},!0,Pt,Tt,xt))},0);else{const wt=d().ng_id,bt=new Date().getTime()-jt;de.addEvent({id:ye,networkId:wt,searchDuration:bt,resultsCount:Kt.length,withPeople:st,withVehicles:!0,feature:"motion_search",eventId:(0,Me.A)(),startTime:ke,endTime:He}),It({type:le})}}).catch(()=>It({type:$,payload:{events:[],fetchPromise:Wt}}));return at||It({type:Oe,payload:Wt}),Wt},Dt={setActive:Le,setInactive:Be,enterSearch:je,exitSearch:ze,fetchEvents:Et,clearEvents:()=>({type:ce}),setFilter:(ye,ke)=>({type:ve,payload:{[ye]:ke}}),resetFilters:()=>({type:_e}),setActiveEventTs:ye=>({type:Ee,payload:{activeEventTs:ye}}),setHoverEventTs:ye=>({type:Ee,payload:{hoverEventTs:ye}})},Rt=(ye=De,ke)=>{const{type:He,payload:Ge}=ke;switch(He){case Ee:return{...ye,...Ge};case se:return{...ye,isActive:!0};case X:return De;case Oe:return{...ye,isFetching:Ge,isInProgressiveMotionSearch:!0};case H:return ye.isFetching!==Ge.fetchPromise?ye:{...ye,isFetching:null,events:Ge.events,progress:Ge.progress};case $:return{...ye,isFetching:null,events:ye.events.concat(Ge.events),progress:Ge.progress};case le:return{...ye,isInProgressiveMotionSearch:!1};case ce:return{...ye,events:[]};case ve:return{...ye,filters:{...Ae(ye),...Ge}};case _e:return{...ye,filters:fe};default:return ye}};var dt=e(653806);const et="SENSOR_SEARCH_SHOW_SENSOR_EVENTS",pt="SENSOR_SEARCH_FETCH_RELATED_SENSORS_DONE",ht="SENSOR_SEARCH_FETCHING_EVENT_SNAPSHOT",gt="SENSOR_SEARCH_FETCH_EVENT_SNAPSHOT",mt="SENSOR_SEARCH_SET_SELECTED_EVENTS",St="SENSOR_SEARCH_SET_SELECTED_EVENT_INDEX",Ot="SENSOR_SEARCH_CLEAR_EVENTS",At={SENSOR_SEARCH_SHOW_SENSOR_EVENTS:et,SENSOR_SEARCH_FETCH_RELATED_SENSORS_DONE:pt,SENSOR_SEARCH_FETCH_EVENT_SNAPSHOT:gt,SENSOR_SEARCH_SET_SELECTED_EVENTS:mt,SENSOR_SEARCH_SET_SELECTED_EVENT_INDEX:St,SENSOR_SEARCH_CLEAR_SELECTED_EVENTS:Ot},Ct={cameraSerial:"",showSensorEvents:!0,sensors:[],showSensorModal:!1,selectedEvents:[],selectedEventIndex:0,snapshot:null,isFetchingSnapshot:!1},Ue={getRelatedSensors:ye=>ye?.sensors,getShowSensorEvents:ye=>ye?.showSensorEvents,getShowSensorModal:ye=>ye?.showSensorModal,getCameraSerial:ye=>ye?.cameraSerial,getSnapshot:ye=>ye?.snapshot,getIsFetchingSnapshot:ye=>ye?.isFetchingSnapshot,getSelectedEvents:ye=>ye?.selectedEvents,getSelectedEventIndex:ye=>ye?.selectedEventIndex},ot={toggleShowSensorEvents:()=>({type:et}),fetchRelatedSensors:ye=>ke=>(0,dt.AT)("GET",_()({controller:`/api/v1/devices/${ye}/sensor/relationships`,global:!0})).then(He=>{ke({type:pt,payload:{sensors:He.data.livestream.relatedDevices.map(Ge=>Ge.serial),cameraSerial:ye}})}).catch(()=>ke({type:pt,payload:{sensors:[],cameraSerial:ye}})),fetchEventSnapshot:(ye,ke)=>He=>(He({type:ht}),(0,dt.AT)("POST",_()({controller:`/api/v1/devices/${ke}/camera/generateSnapshot`,global:!0}),JSON.stringify({timestamp:ye})).then(Ge=>{He({type:gt,payload:{snapshot:Ge.data}})}).catch(Ge=>{He({type:gt,payload:{snapshot:Ge}})})),setSelectedEvents:(ye,ke)=>({type:mt,payload:{selectedEvents:ye,i:ke}}),setSelectedEventIndex:ye=>({type:St,payload:{i:ye}}),clearSelectedEvents:()=>({type:Ot})},nt=(ye=Ct,ke)=>{const{type:He,payload:Ge}=ke;switch(He){case pt:return{...ye,sensors:Ge.sensors,cameraSerial:Ge.cameraSerial};case gt:return{...ye,snapshot:Ge.snapshot,isFetchingSnapshot:!1};case ht:return{...ye,isFetchingSnapshot:!0};case et:return{...ye,showSensorEvents:!ye.showSensorEvents};case mt:return{...ye,showSensorModal:!0,selectedEvents:Ge.selectedEvents,selectedEventIndex:Ge.i&&Ge.i>0?Ge.i:0};case St:return{...ye,selectedEventIndex:Ge.i&&Ge.i>0?Ge.i:0};case Ot:return{...ye,showSensorModal:!1,selectedEvents:[],selectedEventsIndex:0};default:return ye}},rt={motionSearch:Se,timeline:i,sensorSearch:At},ct={motionSearch:Dt,timeline:z,sensorSearch:ot},ut={motionSearch:Ye,timeline:L,sensorSearch:Ue};function _t(){const ye=(0,W.combineReducers)({motionSearch:Rt,timeline:me,sensorSearch:nt});return{actions:ct,actionTypes:rt,selectors:ut,reducer:ye}}},760684:(ae,x,e)=>{e.d(x,{Jc:()=>h,QD:()=>_,RZ:()=>t,_0:()=>y,fX:()=>s,mU:()=>a,nV:()=>l});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466);const y=(0,g.L)().create().createStore(),d="SmScripts",f=c.kC.enhanceEndpoints({addTagTypes:[d]}).injectEndpoints({endpoints:n=>({fetchScript:n.query({query:({networkId:E,scriptId:i})=>({url:`networks/${E}/sm/scripts/${i}`}),providesTags:(E,i,R)=>[{type:d,id:R.scriptId}]}),updateScript:n.mutation({query:({networkId:E,script:{scriptId:i,...R}})=>({url:`networks/${E}/sm/scripts/${i}`,method:"PUT",body:R}),invalidatesTags:(E,i,R)=>i?[]:[{type:d,id:"LIST"},{type:d,id:R.script.scriptId}]}),deleteScript:n.mutation({query:({networkId:E,scriptId:i})=>({url:`networks/${E}/sm/scripts/${i}`,method:"DELETE"}),invalidatesTags:(E,i,R)=>i?[]:[{type:d,id:"LIST"},{type:d,id:R.scriptId}]}),fetchScripts:n.query({query:({networkId:E})=>({url:`networks/${E}/sm/scripts`}),providesTags:E=>E?[...E.map(({scriptId:i})=>({type:d,id:i})),{type:d,id:"LIST"}]:[{type:d,id:"LIST"}]}),createScript:n.mutation({query:({networkId:E,script:i})=>({url:`networks/${E}/sm/scripts`,method:"POST",body:i}),invalidatesTags:[{type:d,id:"LIST"}]}),createScriptUpload:n.mutation({query:({networkId:E,upload:i})=>({url:`networks/${E}/sm/scripts/uploads`,method:"POST",body:i})})})}),{useFetchScriptQuery:l,useFetchScriptsQuery:_,useCreateScriptMutation:a,useCreateScriptUploadMutation:h,useUpdateScriptMutation:s,useDeleteScriptMutation:t}=f},763125:(ae,x,e)=>{e.d(x,{o1:()=>v,U1:()=>L});var W=e(652129),C=e(758928),g=e.n(C),c=e(522224),y=e.n(c),d=e(399752),f=e(548923),l=e(582030),_=e(6464);const a={RESET_TAGS:"RESET_TAGS",UPDATE_TAGS:"UPDATE_TAGS"},h=_.A.createStore({initialize(){this.tags=[],this.bindActions(a.RESET_TAGS,this.onReset,a.UPDATE_TAGS,this.onUpdate)},onReset(F){this.tags=[].concat(F),this.emit("change")},onUpdate(F){this.tags=this.tags.concat(F),this.emit("change")},getState(){return y().clone(this.tags)}}),s={reset(F){this.dispatch(a.RESET_TAGS,F)},update(F){this.dispatch(a.UPDATE_TAGS,F)}};function t(F){F.store("TagStore")||(F.addStore("TagStore",new h),F.addActions({tags:s}))}var n=e(509135);const E={RESET_CURRENT_SHARD:"RESET_CURRENT_SHARD",UPDATE_CURRENT_SHARD:"UPDATE_CURRENT_SHARD"},i=_.A.createStore({initialize(){this.currentShard={},this.bindActions(E.RESET_CURRENT_SHARD,this.onReset,E.UPDATE_CURRENT_SHARD,this.onUpdate)},onReset(F){this.currentShard=F,this.emit("change")},onUpdate(F){this.currentShard=y().extend({},this.currentShard,F),this.emit("change")},getState(){return y().clone(this.currentShard)}}),R={reset(F){this.dispatch(E.RESET_CURRENT_SHARD,F)},update(F){this.dispatch(E.UPDATE_CURRENT_SHARD,F)}};function r(F){F.store("CurrentShardStore")||(F.addStore("CurrentShardStore",new i),F.addActions({currentShard:R}))}var A=e(19804);const S={RESET_SESSION:"RESET_SESSION",UPDATE_SESSION:"UPDATE_SESSION"},p=_.A.createStore({initialize(){this.sessions={},this.bindActions(S.RESET_SESSION,this.onReset,S.UPDATE_SESSION,this.onUpdate)},onReset(F){this.sessions=F,this.emit("change")},onUpdate(F){this.sessions=y().extend({},this.sessions,F),this.emit("change")},getState(){return y().clone(this.sessions)}}),I={reset(F){this.dispatch(S.RESET_SESSION,F)},update(F){this.dispatch(S.UPDATE_SESSION,F)}};function U(F){F.store("SessionStore")||(F.addStore("SessionStore",new p),F.addActions({session:I}))}var D=e(644200);(0,f.A)(d.A),(0,l.A)(d.A),t(d.A),(0,n.A)(d.A),r(d.A),(0,A.A)(d.A),U(d.A);const u=[D.OF,D.kn,D.lt,D.gC],o=["promises","nodeGroups"],M=(0,W.L)().withStoreName("NavigationStore").withModels(o).withContextOptions(u).withUser().create(),m=M.actions,P=F=>(K,b)=>{const q=F?F.id:b().context.currentOrg.id||g().org_id;return K(m.fetchAdministeredOrgs()).done(j=>{const ee=(j[q]||{}).node_groups,V={};y().forEach(ee,N=>{V[N.id]=y().extend(N,{name:N.n||N.t,tags:N.network_tags||""})}),K(m.updateNodeGroups(V))})},T=F=>K=>{K(P(F)),K(m.fetchAccessRole())},O=M.actionTypes,v={...m,fetchData:T,fetchAdmOrgs:P},L=()=>M.createStore(),B=null},765837:(ae,x,e)=>{e.d(x,{Cs:()=>R,Il:()=>s,U1:()=>h,VO:()=>r,hP:()=>i,o1:()=>l});var W=e(652129),C=e(644200),g=e(310466),c=e(869592),y=e.n(c);const d=(0,W.L)().withStoreName("FipsValidationStore").withContextOptions([C.RJ]).create(),l={...d.actions},_=d.actionTypes,a=d.selectors,h=()=>d.createStore(),s="enable-fips",t=g.kC.injectEndpoints({endpoints:A=>({enableFipsMode:A.mutation({query:({networkId:S,data:p})=>({url:`networks/${S}/settings`,method:"PUT",body:p})})})}),n=g.q9.injectEndpoints({endpoints:A=>({fetchFipsValidationErrors:A.query({query:()=>({url:y()({controller:"fips",action:"check_network_fips_compliance"}),method:"GET"})})})}),E=g.q9.injectEndpoints({endpoints:A=>({fetchFipsDevicesList:A.query({query:()=>({url:y()({controller:"fips",action:"check_device_fips_compliance"}),method:"GET"})})})}),{useEnableFipsModeMutation:i}=t,{useFetchFipsValidationErrorsQuery:R}=n,{useFetchFipsDevicesListQuery:r}=E},766789:(ae,x,e)=>{e.d(x,{A:()=>h});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(646894),d=e.n(y),f=e(366587),l=e(310466),_=e(175038),a=e(158438);class h{constructor(){this.storeFactory=new f.Ay,this.storeTemplate=this.storeFactory.create({distinctStore:!0}),this.store=this.storeTemplate.createStore(),this.storeInitOrder=[]}getFactory(){return this.storeFactory}getTemplate(){return this.storeTemplate}getStore(){return this.store}getReducer(){return this.storeTemplate.reducer}getStoreInitOrder(){return this.storeInitOrder.map(({storeName:t})=>t)}rebuildTemplate(){this.storeTemplate=this.storeFactory.buildTemplate()}safeDispatchActionCreator(t,...n){var E,i,R;const r=(E=this.storeTemplate)===null||E===void 0||(i=E.actions)===null||i===void 0||(R=i[t])===null||R===void 0?void 0:R.call(i,...n);return r?(this.getStore().dispatch(r),!0):(a.Ay.error(`MkiRedux action creator not found: ${t}`,{feature:_.Gv.REDUX.tag}),!1)}errorOnDuplicateModels(t){const n=t.reduce((E,i)=>{let R=E;return E?.[i]||(R=d()(R,{$merge:{[i]:[]}})),this.storeInitOrder.forEach(({storeName:r,models:A})=>{A.includes(i)&&(R=d()(R,{[i]:{$push:[r]}}))}),R},{});Object.keys(n).forEach(E=>{console.warn(`The ${E.toUpperCase()} model is being duplicated by the following stores:
 ${n[E].join(", ")}
 consider renaming or see if you merge the models into one store.`)})}checkForDuplicateEnhancementKeys(t,n,E){const i=Object.keys(n);c().filter(i,r=>!!t[r]).length>0}enhanceStore(t){const{storeName:n,...E}=t;this.storeInitOrder=d()(this.storeInitOrder,{$push:[{storeName:n,models:E?.models?Object.keys(E.models):[]}]}),c().each(E,(R,r)=>{const A=this.storeFactory.instructions[r];if(c().isArray(R)){const S=c().uniq(A.concat(R));this.storeFactory=d()(this.storeFactory,{instructions:{[r]:{$set:S}}})}else if(c().isBoolean(R)){const S=A||R;this.storeFactory=d()(this.storeFactory,{instructions:{[r]:{$set:S}}})}else if(c().isObject(R)&&!c().isFunction(R)&&r==="extraReducers"){const S=(0,l.t5)(A,R,this.checkForDuplicateEnhancementKeys);this.storeFactory=d()(this.storeFactory,{instructions:{[r]:{$merge:S}}})}else c().isObject(R)&&!c().isFunction(R)?(this.checkForDuplicateEnhancementKeys(A,R,r),this.storeFactory=d()(this.storeFactory,{instructions:{[r]:{$merge:R}}})):console.warn(`The ReduxStoreFactory property ${r} is not compatible with SingletonReduxStore`)}),this.rebuildTemplate();const i=this.getReducer();this.store.replaceReducer(i)}resetStoreForTesting(){this.store=this.storeFactory.create({distinctStore:!0}).createStore()}}},770486:(ae,x,e)=>{e.d(x,{A:()=>y,o:()=>c});var W=e(349454),C=e(748911);const g={subs:new C.A("ltSubs").create(),data:new C.A("ltData").create()},c={registerSubscription:(d,f)=>g.subs.actions.updateLtSubs({[d]:f}),updateData:(d,f)=>g.data.actions.updateLtData({[d]:f}),deleteSubscription:d=>g.subs.actions.deleteLtSubs(d)};class y extends W.A{constructor(){super(),this.addPlugins(g)}create(){const f=super.create();return f.actions={registerLiveToolSubscription:c.registerSubscription,updateLiveToolData:c.updateData,deleteSubscription:c.deleteSubscription},f}}},772033:(ae,x,e)=>{e.d(x,{PU:()=>f,jb:()=>h,kE:()=>_,mK:()=>l,mj:()=>d,tp:()=>a});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c="ptpConfiguration",y=C.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:s=>({fetchSwitchPtpConfig:s.query({query:({orgId:t,networkId:n})=>({url:`organizations/${t}/switch/time/ptp/byNetwork?networkIds[]=${n}`}),providesTags:(t,n,{networkId:E})=>[{type:c,id:E}]}),updateSwitchPtp:s.mutation({query:({networkId:t,enabled:n})=>({url:`networks/${t}/switch/time/ptp`,method:"PUT",body:{enabled:n}}),invalidatesTags:(t,n,E)=>[{type:c,id:E.networkId}]}),fetchPtpOverrides:s.query({query:({orgId:t,networkId:n})=>({url:`organizations/${t}/switch/time/ptp/overrides?networkIds[]=${n}`}),providesTags:(t,n,{orgId:E})=>[{type:c,id:`overrides-${E}`}]}),createPtpOverrides:s.mutation({query:({orgId:t,resource:n})=>({url:`organizations/${t}/switch/time/ptp/overrides`,method:"POST",body:{resource:n}}),invalidatesTags:(t,n,E)=>[{type:c,id:`overrides-${E.orgId}`}]}),updatePtpOverrides:s.mutation({query:({orgId:t,overrideId:n,resource:E})=>({url:`organizations/${t}/switch/time/ptp/overrides/${n}`,method:"PUT",body:{resource:E}}),invalidatesTags:(t,n,E)=>[{type:c,id:`overrides-${E.orgId}`}]}),deletePtpOverrides:s.mutation({query:({orgId:t,overrideId:n})=>({url:`organizations/${t}/switch/time/ptp/overrides/${n}`,method:"DELETE"}),invalidatesTags:(t,n,E)=>[{type:c,id:`overrides-${E.orgId}`}]})}),overrideExisting:!1}),{useFetchSwitchPtpConfigQuery:d,useFetchPtpOverridesQuery:f,useUpdateSwitchPtpMutation:l,useCreatePtpOverridesMutation:_,useUpdatePtpOverridesMutation:a,useDeletePtpOverridesMutation:h}=y},773489:(ae,x,e)=>{e.d(x,{U1:()=>ee,o1:()=>J});var W=e(652129),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d),l=e(720506),_=e(653806),a=e(274061),h=e(485709),s=e(776886),t=e(24313),n=e(579267),E=e(644200);const i=["switches","l3Interfaces","staticRoutes","ospfAreas","ospfV3Areas","rendezvousPoints","amiSettings"],R=(0,W.L)().withStoreName("SwitchL3Store").withModels(i).withChanges().withContextOptions([E.RJ]).create(),r=R.actions,A=w=>{w(r.requestSwitches()),w(r.requestL3Interfaces()),w(r.requestStaticRoutes()),w(r.requestOspfAreas()),w(r.requestOspfV3Areas()),w(r.requestRendezvousPoints())},S=(w,z)=>({...w,ospf_enabled:!!(z.network_ospf_enabled&&w.ospf_area_id),ospf_v3_enabled:!!(z.network_ospf_v3_enabled&&w.ospf_v3_area_id)}),p=(w,z)=>{var ne;Object.keys((ne=z.l3_interfaces)!==null&&ne!==void 0?ne:{}).forEach(Y=>{z.l3_interfaces[Y]=S(z.l3_interfaces[Y],z)}),w(r.addSwitches(z.switches)),w(r.addL3Interfaces(z.l3_interfaces)),w(r.addStaticRoutes(z.static_routes)),w(r.addOspfAreas(z.ospf_areas)),w(r.addOspfV3Areas(z.ospf_v3_areas)),w(r.addRendezvousPoints(z.rendezvous_pts))},I=w=>(z,ne)=>{A(z);const Y=w==="Default"?{}:{vrf:w},te=y().get(g()({controller:"switch_l3",action:"show",...Y}));te.fail(()=>{z(r.updateLocals({errors:["An error occurred while loading the page"]}))}),te.done(Te=>{var me;p(z,Te),z(r.updateContext({network:{...(me=ne().context)===null||me===void 0?void 0:me.network,dhcp_ips:Te.dhcp_ips_in_network}}))})},U=w=>z=>{z(r.requestAmiSettings());const ne=`/api/v1/networks/${w}/switch/alternateManagementInterface`;return(0,_.AT)("GET",ne).then(Y=>{const te={[w]:{id:w,...Y.data}};z(r.addAmiSettings(te))})},D=w=>{const z=[],ne=[];return f().each(w,Y=>{Y.node_id&&!(0,n.se)(Y.node_id)?z.push(Y.node_id):ne.push(Y.switch_stack_id)}),{switch_ids:f().uniq(z),stack_ids:f().uniq(ne)}},u=(w,z)=>y().ajax({url:g()({controller:"switch_l3",action:z}),type:"POST",dataType:"json",contentType:"application/json",data:JSON.stringify(w)}),o=(w,z)=>{const ne=z(),Y=(0,a.A6)(ne),te=f().pick((0,a.mk)(ne),Y),Te=(0,a.q8)(ne),me=f().mapObject(Te,(ge,de)=>{const se=te[de];return ge.node_id=se.node_id,ge.switch_stack_id=se.switch_stack_id,ge.id=de,ge}),Me=D(me);let Ie;return f().isEmpty(me)?Ie={}:Ie={static_route_changes:f().toArray(me),switch_ids:Me.switch_ids,stack_ids:Me.stack_ids},Ie},M=w=>{const z=f().all(w.static_route_changes,Y=>Y.created),ne=f().all(w.static_route_changes,Y=>Y.deleted);return z?"create_static_routes":ne?"delete_static_routes":"update_static_routes"},m=w=>(z,ne)=>{z(r.updateLocals({isSavingStaticRouteChanges:!0}));const Y=o(z,ne);if(f().isEmpty(Y)){z(r.clearLocals());return}const te=M(Y);u(Y,te).done(me=>{te==="delete_static_routes"?(z(r.clearLocals()),p(z,me),z(r.resetAllChanges())):(te==="create_static_routes"||te==="update_static_routes")&&(z(r.clearLocals()),p(z,me),z(r.resetAllChanges()),f().isFunction(w)&&w())}).fail(me=>{const Me=l.A.parseErrorsFromResponse(me);z(r.updateLocals({isSavingStaticRouteChanges:!1,errors:Me}))})},P=(w,z)=>{const ne=z(),Y=(0,s.zU)(ne),te=f().pick((0,s.BY)(ne),Y),Te=(0,s.G5)(ne),me=f().mapObject(Te,(ge,de)=>{const se=te[de];return f().extend(f().clone(ge),f().pick(se,"node_id","switch_stack_id","id"))}),Me=D(me);let Ie;if(f().isEmpty(me))Ie={};else return Ie={l3_interfaces:f().toArray(me),switch_ids:Me.switch_ids,stack_ids:Me.stack_ids},Ie},T=w=>{const z=f().all(w.l3_interfaces,Y=>Y.created),ne=f().all(w.l3_interfaces,Y=>Y.deleted);return z?"create_l3_interfaces":ne?"delete_l3_interfaces":"update_l3_interfaces"},O=w=>(z,ne)=>{z(r.updateLocals({isSavingL3InterfaceChanges:!0}));const Y=P(z,ne);if(f().isEmpty(Y)){z(r.clearLocals());return}const te=T(Y);u(Y,te).done(me=>{te==="delete_l3_interfaces"&&z(r.resetAllChanges()),z(r.clearLocals()),p(z,me),(te==="create_l3_interfaces"||te==="update_l3_interfaces")&&z(r.resetAllChanges()),f().isFunction(w)&&w()}).fail(me=>{const Me=l.A.parseErrorsFromResponse(me);te==="delete_l3_interfaces"&&z(r.resetAllChanges()),z(r.updateLocals({isSavingL3InterfaceChanges:!1,errors:Me}))})},v=w=>z=>{const ne=(0,n.Sm)(w);z(r.changeManyL3Interfaces(ne)),z(O())},L=(w,z)=>{const ne=z(),Y=f().first((0,h.Wx)(ne)),te=(0,h.HW)(ne,{id:Y}),Te=D({[te.id]:te});let me;return f().isEmpty(te)?me={}:me=f().extend({rendezvous_point:te},Te),me},B=w=>(z,ne)=>{z(r.updateLocals({isSavingRendezvousPointChanges:!0}));const Y=L(z,ne);if(f().isEmpty(Y)){z(r.clearLocals());return}const te=Y.rendezvous_point.created?"create_rendezvous_point":"update_rendezvous_point";u(Y,te).done(me=>{p(z,me),z(r.clearLocals()),z(r.resetAllChanges()),f().isFunction(w)&&w()}).fail(me=>{const Me=l.A.parseErrorsFromResponse(me);z(r.updateLocals({isSavingRendezvousPointChanges:!1,errors:Me}))})},F=(w,z)=>{const ne=z(),Y=(0,h.Wx)(ne),te=(0,h.ay)(ne,{ids:Y}),Te=f().where(te,{deleted:!0}),me=D(te),Me={rendezvous_point_ids:f().pluck(Te,"id")};return f().extend(Me,me)},K=()=>(w,z)=>{w(r.updateLocals({isSavingRendezvousPointChanges:!0}));const ne=F(w,z);if(f().isEmpty(ne)){w(r.clearLocals());return}u(ne,"delete_rendezvous_points").done(te=>{w(r.resetRendezvousPoints()),w(r.resetAllChanges()),p(w,te),w(r.clearLocals())}).fail(te=>{const Te=l.A.parseErrorsFromResponse(te);w(r.updateLocals({isSavingRendezvousPointChanges:!1,errors:Te}))})},b=w=>{const z=w(),ne=f().map((0,s.G5)(z),(de,se)=>f().extend(f().clone(de),{id:se})),Y=f().partition(ne,de=>(0,n.LJ)(de,(0,t.Eq)(z))),te=f().pluck(Y[0],"id"),Te=f().pluck(Y[1],"id"),me=(0,a.A6)(z),Me=(0,s.G5)(z),Ie=D(f().isEmpty(Me)?(0,a.q8)(z):Me),ge={l3_interface_ids:Te,static_route_ids:me,l2_dhcp_relay_ids:te};return f().extend(ge,Ie)},q=()=>(w,z)=>{w(r.updateLocals({isSavingMoveL3Settings:!0}));const ne=b(z);if(f().isEmpty(ne)){w(r.clearLocals());return}u(ne,"move_l3_settings").done(te=>{w(r.clearLocals()),p(w,te),w(r.resetAllChanges())}).fail(te=>{const Te=l.A.parseErrorsFromResponse(te);w(r.updateLocals({isSavingMoveL3Settings:!1,errors:Te}))})},j=w=>z=>{z(r.updateLocals({filter:w}))},J=f().extend({},r,{fetchL3DataForAllModels:I,fetchAmiSettings:U,submitUpdatedStaticRoutes:m,submitUpdatedRendezvousPoint:B,submitDeletedRendezvousPoints:K,updateFilter:j,submitUpdatedL3Interfaces:O,submitMovedL3Settings:q,deleteL3Interfaces:v}),ee=()=>R.createStore(),V=R.actionTypes;var N=null},777237:(ae,x,e)=>{e.d(x,{A:()=>s});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(869592),l=e.n(f),_=e(4933);const a=(0,_.A)("MX_PORT_CONFIG",{indices:["node_id"]}),h={fetch(t){return d().getJSON(l()({controller:"nodes",action:"mx_ports_json"}),t).done(n=>{this.dispatch(a.constants.RESET,c().values(n))})},reset(t){this.dispatch(a.constants.RESET,t)}};function s(t){t.store("MxPortConfigurationStore")||(t.addStore("MxPortConfigurationStore",a),t.addActions({mxportconfig:h}))}},781098:(ae,x,e)=>{e.d(x,{C6:()=>d,_f:()=>g,eV:()=>f});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c="SmAllowedPlatforms",y=C.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:l=>({fetchAllowedPlatforms:l.query({query:({networkId:_,organizationId:a})=>({url:`organizations/${a}/sm/enrollmentSettings/allowedPlatforms`,params:{"networkIds[]":_}})}),updateAllowedPlatforms:l.mutation({query:({networkId:_,organizationId:a,allowedPlatforms:h})=>({url:`organizations/${a}/sm/enrollmentSettings/allowedPlatforms`,method:"PUT",body:{items:[{networkId:_,allowedPlatforms:h}]}})})})}),{useFetchAllowedPlatformsQuery:d,useUpdateAllowedPlatformsMutation:f}=y},782403:(ae,x,e)=>{e.d(x,{U1:()=>i,o1:()=>E});var W=e(941669),C=e.n(W),g=e(869592),c=e.n(g),y=e(652129),d=e(757539);const f=["httpsInspectionStates"],l=(0,y.L)().withStoreName("HttpsInspectionStore").withModels(f).withPrefs().withFlexTables().create();var _=null;const a={FETCH_HTTPS_INSPECTION_STATES:"FETCH_HTTPS_INSPECTION_STATES"},h=(R,r)=>l.actions.updateLocals({httpsInspectionSaving:!1,httpsInspectionUpdated:R.map(A=>A.id),httpsInspectionFailed:r.map(A=>A.id),httpsInspectionErrors:null}),s=R=>l.actions.updateLocals({httpsInspectionSaving:!1,httpsInspectionUpdated:null,httpsInspectionFailed:null,httpsInspectionErrors:R}),t=()=>R=>(R(l.actions.requestHttpsInspectionStates()),C().get(c()({controller:"organization",action:"get_https_inspection_state"})).done(r=>{R(l.actions.updateHttpsInspectionStates(r))}).fail(()=>{R(s("Error loading HTTPS inspection state"))}).always(()=>{R(l.actions.doneRequestingHttpsInspectionStates())})),n=(R,r)=>(A,S)=>{A(l.actions.updateLocals({httpsInspectionSaving:!0}));const I={ids:(0,d.X1)(S(),{sectionKey:r}),certificate_contents:R};C().post(c()({controller:"configure",action:"save_https_inspection_cert"}),I).done(U=>{const{successful:D,unsuccessful:u}=U.reduce((o,M)=>(M.has_cert?o.successful.push(M):o.unsuccessful.push(M),o),{successful:[],unsuccessful:[]});A(l.actions.updateHttpsInspectionStates(D)),A(h(D,u))}).fail(U=>{A(s(JSON.parse(U.responseText).error||"Error saving certificate."))})},E=Object.assign({},l.actions,{uploadCertificate:n,fetchHttpsInspectionStates:t}),i=()=>l.createStore()},783382:(ae,x,e)=>{e.d(x,{U1:()=>t,o1:()=>s});var W=e(652129),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c);const d=["streams"],f=(0,W.L)().withStoreName("ExternalStreamPageStore").withModels(d).withChanges().create(),l=f.actionsTypes,_=f.selectors,a=f.actions,s={...a,fetchStreams:(E={})=>i=>(i(a.requestStreams()),y().ajax({data:E,url:g()({controller:"/external_stream",action:"json"}),type:"GET",dataType:"json"}).done(R=>{i(f.actions.addStreams(R))}))},t=()=>f.createStore();var n=null},792273:(ae,x,e)=>{e.d(x,{WJ:()=>i,VC:()=>R,OX:()=>r});var W=e(14602),C=e(388691),g=e(191328),c=e(813989),y=e(899921),d=e(113363);const f=(A,S,p,I)=>({url:d.Pu.PRIVATE_INTEL_PROXY.ROUTES.INCIDENT_SEARCH,params:{query:A,sort_by:I,offset:Math.max(p.page-1,0)*p.limit,limit:p.limit,...S}}),l=A=>A&&A.length>1?`(${A})`:A,_=A=>{const S=A?.map(p=>`status:"${p}"`).join(" OR ");return l(S)},a=A=>{if(A?.length===2)return;const S=d.Pu.PRIVATE_INTEL_PROXY.QUERIES,p=A?.map(I=>S[I.toUpperCase()]).join(" OR ");return l(p)},h=A=>A,s=A=>{const S=_(Object.values(A.statuses)),p=a(Object.values(A.assignments)),I=h(A.search);return[d.Wl,S,p,I].filter(Boolean).join(" AND ")},t=A=>{const S=Object.entries(A||{});return S.length?S.map(([p,I])=>`${p}:${I}`).join(","):"scores.global:desc,created:desc"},n=({search:A,statuses:S,assignments:p,page:I,limit:U,range:D,sort:u})=>{const o=s({search:A,statuses:S,assignments:p});return f(o,D,{page:I,limit:U},t(u))},E=C.DA.injectEndpoints({endpoints:A=>({getIncidentCounts:A.query({async queryFn({range:S},p,I,U){let D=await Promise.all([U((0,y.Gn)(S)),U((0,y.B2)(S)),U((0,y.r5)(S)),U((0,y.QH)(S))]);const u=D.find(T=>{var O;return(T==null||(O=T.error)===null||O===void 0?void 0:O.status)===429});if(u)return p.dispatch(c.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,y.PE)(u?.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}};if(p.dispatch(c.o1.toggleRateLimitReached({reached:!1,retryAfter:0})),D.find(T=>{var O;return(T==null||(O=T.error)===null||O===void 0?void 0:O.status)===401})){const O=(await(0,C.FF)(g.VF,p,I)).data;O&&(p.dispatch(c.o1.updateAuthToken(O.access_token)),D=await Promise.all([U((0,y.Gn)(S)),U((0,y.B2)(S)),U((0,y.r5)(S)),U((0,y.QH)(S))]))}if(D.find(T=>T?.error))return{error:{status:"FETCH_ERROR",error:"Error fetching incident counts data"}};const[o,M,m,P]=D;return{data:{all:(0,y.NS)(o.meta),new:(0,y.NS)(M.meta),open:(0,y.NS)(m.meta),unassigned:(0,y.NS)(P.meta)}}}}),getIncidents:A.query({async queryFn({params:S},p,I,U){var D,u,o,M,m;let T=await U(n(S));if(((D=T)===null||D===void 0||(u=D.error)===null||u===void 0?void 0:u.status)===429){var O;return p.dispatch(c.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,y.PE)((O=T)===null||O===void 0?void 0:O.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}}}else p.dispatch(c.o1.toggleRateLimitReached({reached:!1,retryAfter:0}));if(((o=T)===null||o===void 0||(M=o.error)===null||M===void 0?void 0:M.status)===401){const L=(await(0,C.FF)(g.VF,p,I)).data;L&&(p.dispatch(c.o1.updateAuthToken(L.access_token)),T=await U(n(S)))}return!((m=T)===null||m===void 0)&&m.error?{error:{status:"FETCH_ERROR",error:"Error fetching incidents data"}}:{data:{incidents:T.data,count:(0,y.NS)(T.meta)}}}})})}),{useGetIncidentCountsQuery:i,useGetIncidentsQuery:R,util:r}=E},794076:(ae,x,e)=>{e.d(x,{I:()=>d,U:()=>c});var W=e(652129),C=e(310466);const g=(0,W.L)().withStoreName("ChannelInfosStore").create(),c=()=>g.createStore(),y=C.q9.enhanceEndpoints({addTagTypes:["ChannelInfos"]}).injectEndpoints({endpoints:f=>({fetchChannelsForModel:f.query({query:l=>({url:`manage/channel_details/${l}`,headers:{Accept:"application/json","X-CSRF-TOKEN":Mkiconf.authenticity_token}}),providesTags:(l,_,a)=>[{type:"ChannelInfos",id:a}]})})}),{useFetchChannelsForModelQuery:d}=y},794908:(ae,x,e)=>{e.d(x,{U1:()=>_,o1:()=>i});var W=e(652129),C=e(653806),g=e(522224),c=e.n(g),y=e(405015);const d=(0,W.L)().withStoreName("EventLogStore").withCustomKeyedModel("events",({occurredAt:r,type:A,networkId:S})=>`${r}-${A}-${S}`).withCustomKeyedModel("devices",({serial:r})=>r).create(),{actions:f,actionTypes:l,createStore:_}=d,a=r=>{const A=`/api/v1/networks/${r}/devices`;return S=>(S(f.requestDevices()),(0,C.AT)("GET",A).then(p=>{S(f.addDevices(p.data))}).catch(p=>{try{p.errors?S(f.updateLocals({errors:p.errors})):S(f.updateLocals({errors:["Failed to fetch devices"]}))}catch{S(f.updateLocals({errors:["Failed to fetch devices"]}))}}).finally(()=>{S(f.doneRequestingDevices())}))},h=r=>(A,S)=>{const p=S(),I=(0,y.gA)(p),U={...c().omit(I,"startingAfter","endingBefore"),...r};A(f.updateLocals({filters:U}))},s=(r,A={})=>S=>(S(f.requestEvents()),S(f.updateLocals({errors:[]})),(0,C.AT)("GET",r,A).then(p=>{S(f.replaceEvents(p.data));const I=p.nextPageUrl,U=p.prevPageUrl,D=decodeURIComponent(I.match(/[?&]startingAfter=([^&]*)/)[1]),u=decodeURIComponent(U.match(/[?&]endingBefore=([^&]*)/)[1]),o=D;S(f.updateLocals({startingAfter:D,endingBefore:u,selectedTs:o}))}).catch(p=>{try{p.errors?S(f.updateLocals({errors:p.errors})):S(f.updateLocals({errors:["Failed to fetch events"]}))}catch{S(f.updateLocals({errors:["Failed to fetch events"]}))}}).finally(()=>{S(f.doneRequestingEvents())})),t=15,i={...f,fetchDevices:a,fetchEnvironmentalEvents:(r,A={})=>{const S=c().omit(A,o=>c().isEmpty(o)),{includedEventType:p,excludedEventType:I,...U}=S,D={verbose:!0,perPage:t,...U};p&&(D.includedEventTypes=[p]),I&&(D.excludedEventTypes=[I]);const u=`/api/v1/networks/${r}/environmental/events`;return o=>o(s(u,D))},fetchEnvironmentalEventTypes:r=>{const A=`/api/v1/networks/${r}/environmental/events/eventTypes`;return S=>(S(f.updateLocals({isFetchingEventTypes:!0})),(0,C.AT)("GET",A).then(p=>{S(f.updateLocals({eventTypes:p.data}))}).catch(p=>{try{p.errors?S(f.updateLocals({errors:p.errors})):S(f.updateLocals({errors:["Failed to fetch event types"]}))}catch{S(f.updateLocals({errors:["Failed to fetch events types"]}))}}).finally(()=>{S(f.updateLocals({isFetchingEventTypes:!1}))}))},updatePaginationFilters:h};var R=null},796897:(ae,x,e)=>{e.d(x,{dg:()=>g,px:()=>d,re:()=>y});var W=e(652129),C=e(310466);const g=(0,W.L)().create().createStore(),c=C.kC.enhanceEndpoints({addTagTypes:["switchSettings"]}).injectEndpoints({endpoints:f=>({fetchSwitchSettings:f.query({query:l=>({url:`networks/${l}/switch/settings`}),providesTags:(l,_,a)=>[{type:"switchSettings",id:a}]}),updateSwitchSettings:f.mutation({query:({networkId:l,switchSettings:_})=>({url:`networks/${l}/switch/settings`,method:"PUT",body:_}),invalidatesTags:(l,_,a)=>[{type:"switchSettings",id:a.networkId}]})}),overrideExisting:!1}),{useFetchSwitchSettingsQuery:y,useUpdateSwitchSettingsMutation:d}=c},804162:(ae,x,e)=>{e.d(x,{A:()=>h,h:()=>_});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(689917),d=e(349454),f=e(709442);function l(s){return s.charAt(0).toUpperCase()+s.slice(1)}class _ extends y.A{constructor(t){super(),this.modelName=t}actionTypes(){const t=this.modelName.toUpperCase();return{change:`CHANGE_${t}`,changeMany:`CHANGE_MANY_${t}`,resetModelChanges:`RESET_${t}_CHANGES`,resetObjectChanges:`RESET_${t}_OBJECT_CHANGES`,resetFieldChanges:`RESET_${t}_FIELD_CHANGES`,resetAllChanges:"RESET_ALL_CHANGES"}}actions(){const t=this.actionTypes(),n=l(this.modelName),E={[`change${n}`]:(i,R)=>({type:t.change,change:{objectId:i,newValue:R}}),[`changeMany${n}`]:i=>({type:t.changeMany,changes:{modelName:n,newValues:i}}),[`reset${n}Changes`]:()=>({type:t.resetModelChanges}),[`reset${n}ChangesById`]:i=>({type:t.resetObjectChanges,changes:{objectId:i}}),[`reset${n}ChangesByIdAndField`]:(i,R)=>({type:t.resetFieldChanges,changes:{fieldName:R,objectId:i}}),resetAllChanges:()=>({type:t.resetAllChanges})};return c().extend(E,{[`reset${n}`]:E[`reset${n}Changes`],[`reset${n}ById`]:E[`reset${n}ChangesById`],[`reset${n}ByIdAndField`]:E[`reset${n}ChangesByIdAndField`]})}reducer(){const t=this.actionTypes();return(n={},E)=>{switch(E.type){case t.change:return c().reduce(E.change.newValue,(i,R,r)=>(0,f.Oe)(i,[String(E.change.objectId),String(r)],R),n);case t.changeMany:return c().reduce(E.changes.newValues,(i,R,r)=>c().reduce(R,(A,S,p)=>(0,f.Oe)(A,[String(r),String(p)],S),i),n);case t.resetFieldChanges:{const{objectId:i,fieldName:R}=E.changes;return Array.isArray(i)?c().reduce(i,(r,A)=>(0,f.VO)(r,[String(A),String(R)]),n):(0,f.VO)(n,[String(i),String(R)])}case t.resetObjectChanges:{const{objectId:i}=E.changes;return Array.isArray(i)?c().omit(n,...i):c().omit(n,i)}case t.resetModelChanges:case t.resetAllChanges:return{};default:return n}}}create(){return{actions:this.actions(),actionTypes:this.actionTypes(),reducer:this.reducer()}}}const h=s=>{var t=new d.A;return c().each(s,n=>{t.addPlugin(n,new _(n))}),t}},813989:(ae,x,e)=>{e.d(x,{U1:()=>p,o1:()=>I});var W=e(760258),C=e(38123),g=e.n(C),c=e(388691),y=e(551066),d=e(602257),f=e(197635),l=e(310466),_=e(522224),a=e.n(_),h=e(758928),s=e.n(h);const t=(0,W.createAction)("RESET_ALL"),n={latest:{rateLimit:{reached:!1,retryAfter:0},summary:{selected:"all",loading:!0,error:!1,counts:{}},incidents:{loading:!0,error:!1,data:[],count:0},global:{search:"",statuses:{},assignments:{},sort:{},range:{from:g()().utc().subtract(f.MR.ago.amount,f.MR.ago.unit).toISOString()},page:1,limit:d.yQ},update:{},drawer:{details:{incidentId:""},assignment:{incidentId:"",assignees:[]}}}},E=(0,W.createSlice)({name:"xdrIncidents",initialState:n,extraReducers:D=>D.addCase(t,()=>n),reducers:{updateSummaryLoadingState:(D,u)=>{D.latest.summary.loading=u.payload},updateSummaryErrorState:(D,u)=>{D.latest.summary.error=u.payload},updateSummaryCounts:(D,u)=>{D.latest.summary.counts=u.payload},updateSelectedSummaryCategory:(D,u)=>{D.latest.global.statuses={},D.latest.global.assignments={};const o=u.payload;o!=="all"&&o!=="unassigned"&&(D.latest.global.statuses=d.I0[o]),o==="unassigned"&&(D.latest.global.assignments[o]="Unassigned"),D.latest.summary.selected=u.payload,D.latest.global.page=1},updateGlobalState:(D,u)=>{const o=u.payload;let M=!1;Object.keys(o).forEach(m=>{a().isEqual(D.latest.global[m],o[m])||(M=!0)}),M&&o.page===void 0&&o.sort===void 0&&(D.latest.global.page=1),D.latest.global={...D.latest.global,...u.payload}},updateIncidentsLoadingState:(D,u)=>{D.latest.incidents.loading=u.payload},updateIncidentsErrorState:(D,u)=>{D.latest.incidents.error=u.payload},updateIncidents:(D,u)=>{D.latest.incidents.data=u.payload.data,D.latest.incidents.count=u.payload.count},toggleUpdateStatus:(D,u)=>{D.latest.update=u.payload},toggleDrawerVisibility:(D,u)=>{D.latest.drawer[u.payload.drawerType].incidentId=u.payload.incidentId;const o=u.payload.assignees;u.payload.drawerType==="assignment"&&o&&(D.latest.drawer.assignment.assignees=o)},toggleRateLimitReached:(D,u)=>{D.latest.rateLimit=u.payload}}}),i={latest:{users:{loading:!0,error:!1,data:{}}}},R=(0,W.createSlice)({name:"xdrUsers",initialState:i,extraReducers:D=>D.addCase(t,()=>i),reducers:{updateUsersLoadingState:(D,u)=>{D.latest.users.loading=u.payload},updateUsersErrorState:(D,u)=>{D.latest.users.error=u.payload},updateUsers:(D,u)=>{D.latest.users.data=u.payload}}}),r={loading:!0,error:!1,authToken:"",region:"NA"},A=(0,W.createSlice)({name:"xdrAuth",initialState:r,extraReducers:D=>D.addCase(t,()=>r),reducers:{updateAuthLoadingState:(D,u)=>{D.loading=u.payload},updateAuthErrorState:(D,u)=>{D.error=u.payload},updateAuthToken:(D,u)=>{D.authToken=u.payload},updateRegion:(D,u)=>{D.region=u.payload}}}),S=()=>(0,W.createSlice)({name:"dashUser",initialState:{canWriteOrg:s().can_write_org},reducers:{}}),p=()=>{const D=(0,W.configureStore)({reducer:{[c.DA.reducerPath]:c.DA.reducer,[c.JO.reducerPath]:c.JO.reducer,dashUser:S().reducer,xdrIncidents:E.reducer,xdrUsers:R.reducer,xdrAuth:A.reducer,[l.q9.reducerPath]:l.q9.reducer},middleware:u=>u().concat(c.DA.middleware,c.JO.middleware,l.q9.middleware)});return(0,y.setupListeners)(D.dispatch),D},I={...E.actions,...R.actions,...A.actions},U={xdrIncidents:E.reducer,xdrUsers:R.reducer,xdrAuthentication:A.reducer}},818107:(ae,x,e)=>{e.d(x,{pN:()=>y,rs:()=>c});var W=e(310466);const C="WirelessSettings",g=W.kC.enhanceEndpoints({addTagTypes:[C]}).injectEndpoints({endpoints:({query:d,mutation:f})=>({fetchWirelessSettings:d({query:({networkId:l})=>({url:`networks/${l}/wireless/settings`}),providesTags:[C]}),updateWirelessSettings:f({query:({networkId:l,body:_})=>({url:`networks/${l}/wireless/settings`,method:"PUT",body:_}),invalidatesTags:[C]})})}),{useFetchWirelessSettingsQuery:c,useUpdateWirelessSettingsMutation:y}=g},818613:(ae,x,e)=>{e.d(x,{r:()=>g});var W=e(310466);const C=W.kC.enhanceEndpoints({addTagTypes:["ports"]}).injectEndpoints({endpoints:c=>({fetchPortList:c.query({query:({deviceId:y,...d})=>({url:`devices/${y}/switch/ports`,params:d}),providesTags:(y,d,{deviceId:f})=>[{type:"ports",id:f}]})}),overrideExisting:!1}),{useLazyFetchPortListQuery:g}=C},818827:(ae,x,e)=>{e.d(x,{Tp:()=>L,jM:()=>B,o1:()=>O});var W=e(522224),C=e.n(W),g=e(967720),c=e(941669),y=e.n(c),d=e(869592),f=e.n(d),l=e(775113),_=e(50811),a=e.n(_),h=e(253320),s=e(758928),t=e.n(s),n=e(334599),E=e(652129);const i=["settings","networks","clients","ssids","users","httpServers","globalRecipients","smTags","snmpConfig","smSecurityAlerts","smSecurityReports","smSecurityPolicies","webhookTests","webhookTemplates"],R=(0,E.L)().withStoreName("AlertsStore").withModels(i).withChanges().create(),r=R.actions;function A(K){if(K.status>=200&&K.status<300)return K;var b=new Error(K.statusText);throw b.response=K,b}const S=(K,b)=>{K(r.addGlobalRecipients(b.globalRecipients)),K(r.addSettings(b.alertSettings)),K(r.addNetworks(b.networks)),K(r.addClients(b.clients)),K(r.addSmTags(b.smTags)),K(r.addHttpServers(b.httpServers)),K(r.addSnmpConfig(b.snmpTrap)),K(r.addSmSecurityAlerts(b.smSecurityAlerts)),K(r.addSmSecurityReports(b.smSecurityReports)),K(r.addSmSecurityPolicies(b.smSecurityPolicies))},p=()=>(K,b)=>{K(r.updateLocals({isSaving:!0}));const q={};return q.alertSettings=(0,n.vO)(b()),q.globalRecipients=(0,n.LL)(b()),q.clients=(0,n.IG)(b()),q.httpServers=(0,n.Sp)(b()),q.snmp=(0,n.a_)(b()),q.smSecurityAlerts=(0,n.bW)(b()),q.smSecurityReports=(0,n.fz)(b()),y().post(f()({controller:"alerts"}),{changes:JSON.stringify(q)}).done(j=>{K(r.resetAllChanges()),S(K,j)}).then(()=>K(r.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]}))).fail(j=>{K(r.updateLocals({isSaving:!1,saveSuccess:!1}));let J=[];try{J=JSON.parse(j.responseText).error||[]}finally{J=C().isArray(J)?J:[J]}K(r.updateLocals({saveErrors:J}))})},I=()=>K=>(K(r.requestSettings()),(0,g.A)(f()({controller:"alerts",action:"show"}),{credentials:"same-origin"}).then(A).then(b=>b.json()).then(b=>S(K,b))),U=()=>K=>{const q=`/api/v1/networks/${h.A.buildId(t().locale_id,t().ng_id)}/webhooks/payloadTemplates`;return K(r.requestWebhookTemplates()),(0,_.apiRequest)("GET",q).then(j=>{const J=j.data.map(ee=>({id:ee.payloadTemplateId,...ee}));K(r.addWebhookTemplates(J))}).catch(()=>K(r.failedRequestingWebhookTemplates())).finally(()=>K(r.doneRequestingWebhookTemplates()))},D=()=>K=>(K(r.requestClients()),(0,g.A)(f()({controller:"alerts",action:"possible_clients"}),{credentials:"same-origin"}).then(A).then(b=>b.json()).then(b=>K(r.updateLocals({possibleClients:b})))),u=()=>K=>(K(r.requestSsids()),(0,g.A)(f()({controller:"alerts",action:"ssids"}),{credentials:"same-origin"}).then(A).then(b=>b.json()).then(b=>K(r.updateLocals({ssids:b})))),o=()=>K=>(K(r.requestUsers()),(0,g.A)(f()({controller:"alerts",action:"typeahead_emails"}),{credentials:"same-origin"}).then(A).then(b=>b.json()).then(b=>K(r.addUsers(b))));let M;const m=(K,b)=>{const{id:q,status:j}=b.test;j==="processing"||j==="enqueued"||j==="retrying"?setTimeout(()=>K(M(b,q)),5e3):(j==="delivered"||j==="abandoned"||j==="failed")&&setTimeout(()=>K(r.changeHttpServers(b.id,{test:null})),1e4)},P=(K,b,q)=>{const j=C().extend({},b,{test:q});K(r.changeHttpServers(j.id,j)),m(K,j)};M=(K,b)=>q=>{const j=l.A.urlForApi({version:"v1",path:"networks/:mnetId/webhooks/webhookTests/:webhookTestId",mnetId:h.A.buildId(t().locale_id,t().ng_id),webhookTestId:b});return(0,g.A)(j,{credentials:"same-origin"}).then(A).then(J=>J.json()).then(C().partial(P,q,K))};const T=K=>b=>{const q=l.A.urlForApi({path:"networks/:mnetId/webhooks/webhookTests",mnetId:h.A.buildId(t().locale_id,t().ng_id)}),j={url:K.url,sharedSecret:K.sharedSecret,payloadTemplateName:K.payloadTemplate},J=C().partial(P,b,K),ee=V=>{let N;try{N=JSON.parse(V.responseText).errors}catch{N=[]}J({id:`FAIL${C().uniqueId()}`,status:"failed",errors:N})};return y().post(q,j).then(J,ee)},O=C().extend({},r,{fetchUsers:o,fetchClients:D,fetchSsids:u,createWebhookTest:T,fetchWebhookTest:M,fetchWebhookTemplates:U,fetchSettings:I,submitSettings:p}),v=R.actionTypes,L=R.selectors,B=()=>R.createStore();var F=null},820097:(ae,x,e)=>{e.d(x,{EO:()=>s,S0:()=>h,Tf:()=>t,U1:()=>E,kN:()=>_,rd:()=>a});var W=e(758928),C=e.n(W),g=e(796273),c=e(652129),y=e(644200),d=e(967720);const f=(0,c.L)().withModels(["roles","permissionScopes","rolePermissions"]).withPrefs().withFlexTables().withContextOptions([y.OF]).create(),l=f.actions,_=()=>(R,r)=>{R(l.requestRoles());const A=(0,g.wA)(r());return(0,d.A)(`/api/v1/organizations/${A.id}/camera/roles`).then(S=>S.json()).then(S=>{R(l.updateRoles(S)),R(l.doneRequestingRoles())})},a=R=>(r,A)=>{const S=(0,g.wA)(A());return(0,d.A)(`/api/v1/organizations/${S.id}/camera/roles`,{method:"post",body:JSON.stringify(R),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":C().authenticity_token}}).then(p=>p.ok?p.json():p.json().then(I=>Promise.reject(I.errors))).then(p=>(r(l.updateRoles([p])),p))},h=(R,r)=>(A,S)=>{const p=(0,g.wA)(S());return(0,d.A)(`/api/v1/organizations/${p.id}/camera/roles/${R}`,{method:"put",body:JSON.stringify(r),credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":C().authenticity_token}}).then(I=>I.ok?I.json():I.json().then(U=>Promise.reject(U.errors))).then(I=>(A(l.updateRoles([I])),I))},s=R=>(r,A)=>{const S=(0,g.wA)(A());return(0,d.A)(`/api/v1/organizations/${S.id}/camera/roles/${R}`,{method:"delete",credentials:"include",headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-Token":C().authenticity_token}}).then(()=>{r(l.deleteRolesById(R))})},t=()=>(R,r)=>{R(l.requestPermissionScopes());const A=(0,g.wA)(r());return(0,d.A)(`/api/v1/organizations/${A.id}/camera/permissions`).then(S=>S.json()).then(S=>{R(l.updatePermissionScopes(S)),R(l.doneRequestingPermissionScopes())})},n={...l,fetchRoles:_,createRole:a,updateRole:h,deleteRole:s,fetchPermissionScopes:t},E=()=>f.createStore();var i=null},821589:(ae,x,e)=>{e.d(x,{U:()=>l,o:()=>f});var W=e(652129),C=e(281034);const g=["vppAccounts"],c=(0,W.L)().withStoreName("PccVppPageStore").withModels(g).withApiJobs().withPrefs().create(),y=c.actions,f={...y,fetchVppAccounts:()=>_=>(_(y.requestVppAccounts()),(0,C.Vg)({all:!0}).then(a=>{_(y.addVppAccounts(a))}))},l=()=>c.createStore()},824079:(ae,x,e)=>{e.d(x,{Et:()=>l,ly:()=>a,nW:()=>_,uM:()=>f});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466);const y=(0,g.L)().create().createStore(),d=c.kC.enhanceEndpoints({addTagTypes:["qosRule"]}).injectEndpoints({endpoints:h=>({fetchQosRules:h.query({query:s=>({url:`networks/${s}/switch/qosRules`}),providesTags:s=>[...(s??[]).map(({id:t})=>({type:"qosRule",id:t})),{type:"qosRule",id:"ALL"}]}),createQosRule:h.mutation({query:({networkId:s,qosRule:t})=>({url:`networks/${s}/switch/qosRules`,method:"POST",body:t}),invalidatesTags:(s,t)=>[{type:"qosRule",id:"ALL"}]}),updateQosRule:h.mutation({query:({networkId:s,qosRule:{id:t,...n}})=>({url:`networks/${s}/switch/qosRules/${t}`,method:"PUT",body:n}),invalidatesTags:(s,t,n)=>[{type:"qosRule",id:n.networkId}]}),deleteQosRule:h.mutation({query:({networkId:s,qosRuleId:t})=>({url:`networks/${s}/switch/qosRules/${t}`,method:"DELETE"}),invalidatesTags:(s,t,n)=>[{type:"qosRule",id:n.networkId}]})}),overrideExisting:!1}),{useFetchQosRulesQuery:f,useCreateQosRuleMutation:l,useUpdateQosRuleMutation:_,useDeleteQosRuleMutation:a}=d},827996:(ae,x,e)=>{e.d(x,{Z:()=>y,l:()=>c});var W=e(310466),C=e(917157);const g=W.kC.injectEndpoints({endpoints:d=>({fetchModemFirmwareByNetworkId:d.query({query:f=>({url:`organizations/${Mkiconf.org_id}/devices/modemFirmware/details${(0,C.DK)({networkIds:[`N_${f}`]})}`})}),fetchModemFirmwareBySerials:d.query({query:f=>({url:`organizations/${Mkiconf.org_id}/devices/modemFirmware/details${(0,C.DK)({serials:f})}`})})})}),{useFetchModemFirmwareByNetworkIdQuery:c,useLazyFetchModemFirmwareBySerialsQuery:y}=g},828666:(ae,x,e)=>{e.d(x,{Ay:()=>S});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(758928),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(319411),s=e(180038),t=e(4933),n=e(459324);const E=(0,t.A)("PCC_MACHINE_STORE",{indices:["system_type"]}),i=["tags","friendly_system_model","system_type","serial_number","cached_auto_tags","config_versions_v2","formatted_os_name"],R={pccConnectionLog:"conn_log",pccIosRestrictions:"ios_restrictions",pccIosProfiles:"ios_profiles",pccAppList:"ios_sw_inventory",pccEventLog:"event_log",pccActivityLog:"ios_activity_log",pccCertificateList:"get_certificate_list",pccDuplicateList:"get_duplicates",pccClientState:"ios_profiles"},r={JOB_STATES:s.R,DEFAULT_JSON_LITE_FETCH_FIELDS:i,ACTIONS:R};var A={resetPccMachine(p){this.dispatch(E.constants.UPDATE,p)},fetchJsonLite(p){const I=p?.visible_only===!0;var U=p&&p.fields||i;return this.dispatch(E.constants.LOADING,!0),l().ajax({url:a()({controller:"pcc",action:"clients_json_lite",minified:!0}),data:{fields:U,visible_only:I},type:"POST"}).then(D=>{if(D.minified){var u=D.minified_cols;delete D.minified,delete D.minified_cols,c().each(D,(o,M,m)=>{m[M]=c().object(u,o)})}return D}).done(D=>{this.dispatch(E.constants.RESET,c().values(D))})},fetchComponentData(p,I){const U={id:p};let D;return I==="pccIosProfilesMissing"?D=`${(0,n.zbu)()}/profiles/devices/${p}/missing`:D=a()({controller:"pcc",action:E.constants.ACTIONS[I],id:p}),l().ajax({url:D}).fail(()=>{U[I]=s.R.FAILED,this.dispatch(E.constants.UPDATE,U)}).done(u=>{U[I]=u,this.dispatch(E.constants.UPDATE,U)})},refreshTableData(p,I){const U={id:p};U[I]=s.R.LOADING,this.dispatch(E.constants.UPDATE,U),A.fetchComponentData.bind(this)(p,I)},loadPccMachine(p,I){if(!Mkijson.pccm.hash[p].is_complete_record)return;const U=Mkijson.pccm.hash[p];let D=h.S.componentSelector(U,I);D=c().select(D,u=>E.constants.ACTIONS[u]),setTimeout(()=>{this.dispatch(E.constants.UPDATE,U)},0),c().each(D,u=>A.fetchComponentData.bind(this)(p,u)),U.has_mdm&&(!U.is_chrome||U.is_chrome&&d().pcc_new_chrome_emm_enabled&d().has_sme)&&A.fetchComponentData.bind(this)(p,"pccIosProfilesMissing")}};c().extend(E.constants,r);function S(p){p.store("PccMachineStore")||(p.addStore("PccMachineStore",E),p.addActions({pccMachines:A}))}},847597:(ae,x,e)=>{e.d(x,{F$:()=>T,o1:()=>m});var W=e(522224),C=e.n(W),g=e(652129),c=e(775113),y=e(758928),d=e.n(y),f=e(38123),l=e.n(f),_=e(764199),a=e(653806);const h="Online",s=["vpn","client_vpn_connect","client_vpn_disconnect"],t="all",n=60*60*24*14,E=()=>d()&&d().ng_id?`N_${d().ng_id}`:null,i=["clients","clientVpnEvents","clientVpnCurrentStats","clientVpnPastStats","disconnectedEvents"],R=(0,g.L)().withStoreName("ClientVpnStore").withModels(i).withFlexTables().create(),r=R.actions,A=(v,L)=>L.map((B,F)=>({...B,id:F+v})),S=({events:v,isFirstPage:L})=>(B,F)=>{const{locals:K,models:b}=F(),q=b.disconnectedEvents.byId,{nextId:j}=K,J=L?0:j;v.forEach(V=>{const N=`${V.eventData.user_id}+${V.eventData.local_ip}+${V.eventData.remote_ip}`;V.type==="client_vpn_disconnect"?q[N]={occurredAt:V.occurredAt,id:N}:V.type==="client_vpn_connect"&&q[N]&&(V.disconnectedAt=q[N].occurredAt,delete q[N])});const ee=A(J,v);B(L?r.addClientVpnEvents(ee):r.updateClientVpnEvents(ee)),B(r.addDisconnectedEvents(q)),B(r.updateLocals({nextId:J+ee.length}))},p=v=>{const{locals:L}=v(),B={},F=L.searchQuery;if(F){const K=(0,_.mA)(F),b=(q,j)=>{q.forEach(J=>{if(Array.isArray(J))b(J,j);else switch(J.key){case"connection_event_type":B.includedEventTypes?j.includedEventTypes.push(J.value):j.includedEventTypes=[J.value];break;case"connection_error":j.clientVpnErrorType=J.value;break;default:break}})};b(K,B)}return B},I=(v,L=10,B=!1)=>(F,K)=>{const b=l()(v,"X"),{locals:q}=K(),{eventLogPrevUrl:j=""}=q,J=E();if(!J)return;const V=B?((N,w)=>{const z={version:"v1",path:"networks/:networkId/events",networkId:J,productType:"appliance",endingBefore:N,perPage:w},ne=p(K),Y=ne.includedEventTypes,te=ne.clientVpnErrorType;return!Y&&!te?(z.clientVpnErrorType=t,z.includedEventTypes=s):(te&&(z.clientVpnErrorType=te,C().isEmpty(Y)&&(z.includedEventTypes=["vpn"])),C().isEmpty(Y)||(z.includedEventTypes=Y)),c.A.urlForApi(z)})(b.toISOString(),L):j;return F(r.requestClientVpnEvents()),(0,a.AT)("GET",V).then(N=>{const{data:{events:w},prevPageUrl:z}=N;F(S({events:w,isFirstPage:B})),F(r.updateLocals({eventLogPrevUrl:z}))}).catch(()=>{F(r.failedRequestingClientVpnEvents())}).finally(()=>{F(r.doneRequestingClientVpnEvents())})},U=(v,L)=>B=>{const F=E();if(!F)return;const K=c.A.urlForApi({version:"v1",path:"networks/:networkId/appliance/clientVpn/metrics",networkId:F,t0:v,t1:L});return B(r.clearClientVpnCurrentStats()),B(r.requestClientVpnCurrentStats()),(0,a.AT)("GET",K).then(b=>{const{failureEvents:q,connectionEvents:j,totalEvents:J}=b.data;B(r.addClientVpnCurrentStats([{connectionEvents:j,failureEvents:q}])),B(r.updateLocals({totalEvents:J}))}).catch(()=>{B(r.failedRequestingClientVpnCurrentStats())}).finally(()=>{B(r.doneRequestingClientVpnCurrentStats())})},D=(v,L)=>B=>{const F=E();if(!F)return;const K=L-v,b=c.A.urlForApi({version:"v1",path:"networks/:networkId/appliance/clientVpn/metrics",networkId:F,t0:v-K,t1:v});return B(r.clearClientVpnPastStats()),B(r.requestClientVpnPastStats()),(0,a.AT)("GET",b).then(q=>{const{failureEvents:j,connectionEvents:J}=q.data;B(r.addClientVpnPastStats([{connectionEvents:J,failureEvents:j}]))}).catch(()=>{B(r.failedRequestingClientVpnPastStats())}).finally(()=>{B(r.doneRequestingClientVpnPastStats())})},u=({clients:v,isFirstPage:L})=>B=>{const F=C().filter(v,K=>K.status===h);B(L?r.addClients(v):r.updateClients(v)),B(r.updateLocals({counterConnectedClients:F.length}))},o=1e3,M=()=>v=>{const L=E();if(!L)return;const B=(K,b=!1)=>(0,a.AT)("GET",K).then(q=>{const{data:j,nextPageUrl:J}=q;return v(u({clients:j,isFirstPage:b})),J?B(J):null});v(r.requestClients()),v(r.updateLocals({clientsIsFetchingPages:!0,clientsFetchingFailed:!1}));const F=c.A.urlForApi({version:"v1",path:"networks/:networkId/clients",networkId:L,perPage:o,getInternalData:!0,clientTypes:["clientVpn"],timespan:n});return B(F,!0).catch(()=>{v(r.failedRequestingClients()),v(r.updateLocals({clientsFetchingFailed:!0}))}).finally(()=>{v(r.doneRequestingClients()),v(r.updateLocals({clientsIsFetchingPages:!1}))})},m=C().extend({},r,{fetchClientsPaginated:M,fetchPreviousClientVpnEvents:I,fetchCurrentStats:U,fetchPastStats:D}),P=R.actionTypes,T=()=>R.createStore();var O=null},848e3:(ae,x,e)=>{e.d(x,{Dq:()=>d,Ay:()=>H,g1:()=>y,we:()=>n,jq:()=>s,jl:()=>R});var W=e(14602),C=e(310466),g=e(418562);const c={all:"All networks",none:"No network"},y=$=>c[$]||$,d=$=>[ce=>ce.name,ce=>ce.publicIp,ce=>ce.publicHostname,ce=>ce.localId||null,ce=>ce.remoteId,ce=>ce.privateSubnets,ce=>ce.myUserFqdn||null,ce=>ce.networkTags&&ce.networkTags.map(ve=>y(ve))].reduce((ce,ve)=>{const _e=ve($),Ee=[];if(_e)if(Array.isArray(_e)){const Se=_e.map(k=>k.toLocaleLowerCase());Ee.push(...Se)}else Ee.push(_e.toLocaleLowerCase());return ce.concat(Ee)},[]),f=({aggressiveMode:$,...le})=>$?{...le,ikeAggressiveMode:$?"aggressive":"main"}:le,l=$=>{if($.length===0||!$.every(_e=>_e.priorityInGroup&&_e.group))return $;const le={};$.forEach(_e=>{var Ee,Se;const k=(Ee=_e.group)===null||Ee===void 0?void 0:Ee.number;le[k]||(le[k]=[]),(Se=le[k])===null||Se===void 0||Se.push({..._e,isPrimary:!1})});const ce=Object.values(le).map(_e=>_e.sort((Ee,Se)=>Ee.priorityInGroup-Se.priorityInGroup)),ve=[];return ce.forEach(_e=>{const[Ee,...Se]=_e,k={...Ee,isPrimary:!0};if(Se.length>0){const G=k.group;if(!G)throw new Error("Peer group information is missing for coalescing peers.");k.children=Se.map(ie=>({...ie,isPrimary:!1,group:G}))}ve.push(k)}),ve.sort((_e,Ee)=>_e.index-Ee.index)},_=$=>{const le=$.map((ce,ve)=>{const{ipsecPolicies:_e,isRouteBased:Ee,ebgpNeighbor:Se,...k}=ce;return{...ce,index:ve,..._e&&{ipsecPolicies:f(_e)},key:(0,g.A)(),searchKeywords:d(k),...Ee!==void 0&&{isRouteBased:Ee?"true":"false"},...Se!==void 0&&{ebgpNeighbor:{...Se,...Se.pathPrepend&&{pathPrepend:Se.pathPrepend.join(" ")}}}}});return l(le)},a=$=>({peers:_($.peers)}),h=C.kC.injectEndpoints({endpoints:$=>({fetchNonMerakiVpnPeers:$.query({query:({organizationId:le})=>({url:`organizations/${le}/appliance/vpn/thirdPartyVPNPeers`}),transformResponse:a})}),overrideExisting:!1}),{useFetchNonMerakiVpnPeersQuery:s}=h,t=C.q9.injectEndpoints({endpoints:$=>({fetchIpsecPoliciesConfig:$.query({query:()=>({url:"manage/vpn/ipsec_policies_config"})})}),overrideExisting:!1}),{useFetchIpsecPoliciesConfigQuery:n}=t,E=$=>({enabled:$.enabled,asn:$.asNumber}),i=C.kC.injectEndpoints({endpoints:$=>({fetchBgpInfo:$.query({query:({networkId:le})=>({url:`networks/${le}/appliance/vpn/bgp`}),transformResponse:E})})}),{useLazyFetchBgpInfoQuery:R}=i;var r=e(964037);const A={ipsec_policy_options:{ike_sa:{cipher:[{value:"aes256",label:"AES 256"},{value:"aes192",label:"AES 192"},{value:"aes128",label:"AES 128"},{value:"des",label:"DES"},{value:"tripledes",label:"3DES"}],auth:[{value:"sha256",label:"SHA256"},{value:"sha1",label:"SHA1"},{value:"md5",label:"MD5"}],prf:[{value:"prfsha256",label:"SHA256"},{value:"prfsha1",label:"SHA1"},{value:"prfmd5",label:"MD5"},{value:"default",label:"Defaults to Authentication"}],dh_group:[{value:"group1",label:"1"},{value:"group2",label:"2"},{value:"group5",label:"5"},{value:"group14",label:"14"},{value:"group15",label:"15"},{value:"group21",label:"21"}]},child_sa:{cipher:[{value:"aes256",label:"AES 256"},{value:"aes192",label:"AES 192"},{value:"aes128",label:"AES 128"},{value:"des",label:"DES"},{value:"tripledes",label:"3DES"},{value:"null",label:"NULL"}],auth:[{value:"sha256",label:"SHA256"},{value:"sha1",label:"SHA1"},{value:"md5",label:"MD5"}],pfs:[{value:"disabled",label:"Off"},{value:"group1",label:"1"},{value:"group2",label:"2"},{value:"group5",label:"5"},{value:"group14",label:"14"},{value:"group15",label:"15"},{value:"group21",label:"21"}]}},ipsec_policy_presets:{default:{title:"Default",config:{ike_sa_cipher_algo:["tripledes"],ike_sa_auth_algo:["sha1"],ike_sa_prf_algo:["prfsha1"],ike_sa_dh_group:["group2"],ike_sa_lifetime:"28800",child_sa_cipher_algo:["tripledes","aes128","aes192","aes256"],child_sa_auth_algo:["md5","sha1"],child_sa_pfs_group:["disabled"],child_sa_lifetime:"28800"}},aws:{title:"AWS",config:{ike_sa_cipher_algo:["aes128"],ike_sa_auth_algo:["sha1"],ike_sa_prf_algo:["prfsha1"],ike_sa_dh_group:["group2"],ike_sa_lifetime:"28800",child_sa_cipher_algo:["aes128"],child_sa_auth_algo:["sha1"],child_sa_pfs_group:["group2"],child_sa_lifetime:"3600"}},azure:{title:"Azure",config:{ike_sa_cipher_algo:["aes256"],ike_sa_auth_algo:["sha1"],ike_sa_prf_algo:["prfsha1"],ike_sa_dh_group:["group2"],ike_sa_lifetime:"28800",child_sa_cipher_algo:["aes256"],child_sa_auth_algo:["md5","sha1","sha256"],child_sa_pfs_group:["disabled"],child_sa_lifetime:"3600"}},umbrella_short_lived:{title:"Umbrella",config:{ike_sa_cipher_algo:["aes256"],ike_sa_auth_algo:["sha1"],ike_sa_prf_algo:["prfsha1"],ike_sa_dh_group:["group14"],ike_sa_lifetime:"14400",child_sa_cipher_algo:["aes256"],child_sa_auth_algo:["sha1"],child_sa_pfs_group:["disabled"],child_sa_lifetime:"3600"}},umbrella:{title:"Umbrella (Deprecated)",config:{ike_sa_cipher_algo:["aes256"],ike_sa_auth_algo:["sha1"],ike_sa_prf_algo:["prfsha1"],ike_sa_dh_group:["group5"],ike_sa_lifetime:"28800",child_sa_cipher_algo:["aes256"],child_sa_auth_algo:["sha1"],child_sa_pfs_group:["disabled"],child_sa_lifetime:"28800"}},zscaler:{title:"Zscaler",config:{ike_sa_cipher_algo:["aes256"],ike_sa_auth_algo:["sha256"],ike_sa_prf_algo:["prfsha256"],ike_sa_dh_group:["group2"],ike_sa_lifetime:"86400",child_sa_cipher_algo:["null"],child_sa_auth_algo:["md5"],child_sa_pfs_group:["disabled"],child_sa_lifetime:"28800"}},secure:{title:"Secure",config:{ike_sa_cipher_algo:["aes256"],ike_sa_auth_algo:["sha256"],ike_sa_prf_algo:["default"],ike_sa_dh_group:["group21"],ike_sa_lifetime:"28800",child_sa_cipher_algo:["aes256"],child_sa_auth_algo:["sha256"],child_sa_pfs_group:["group21"],child_sa_lifetime:"14400"}}}},S=()=>{const{ipsec_policy_options:{ike_sa:$,child_sa:le},ipsec_policy_presets:{default:{title:ce,config:ve},aws:{title:_e,config:Ee},azure:{title:Se,config:k},umbrella_short_lived:{title:G,config:ie},umbrella:{title:fe,config:De},zscaler:{title:We,config:we},secure:{title:Ve,config:Pe}}}=A;return{ipsec_policy_options:{ike_sa:{...$,mode:[{value:"main",label:"Main"},{value:"aggressive",label:"Aggressive"}]},child_sa:le},ipsec_policy_presets:{default:{title:ce,config:{...ve,ike_aggressive_mode_option:["main"]}},aws:{title:_e,config:{...Ee,ike_aggressive_mode_option:["main"]}},azure:{title:Se,config:{...k,ike_aggressive_mode_option:["main"]}},umbrella_short_lived:{title:G,config:{...ie,ike_aggressive_mode_option:["main"]}},umbrella:{title:fe,config:{...De,ike_aggressive_mode_option:["main"]}},zscaler:{title:We,config:{...we,ike_aggressive_mode_option:["main"]}},secure:{title:Ve,config:{...Pe,ike_aggressive_mode_option:["main"]}}}}},p=[r.r.get("manage/vpn/ipsec_policies_config",($,le,ce)=>le(ce.status(200),ce.json(A)))],I=[r.r.get("manage/vpn/ipsec_policies_config",($,le,ce)=>le(ce.status(200),ce.json(S())))],U=[{name:"Hello",publicIp:"1.1.1.1",privateSubnets:["7.7.7.0/24"],remoteId:"1.1.1.2",ikeVersion:"1",networkTags:["all"],ipsecPoliciesPreset:"default",secret:"random",isRouteBased:!1},{name:"Another",publicIp:"2.2.2.2",privateSubnets:["2.2.2.0/24"],localId:"2.2.2.2",remoteId:"2.2.2.3",ikeVersion:"2",networkTags:["ALongTestTagNameForTestingPurposes5"],ipsecPoliciesPreset:"aws",secret:"random",myUserFqdn:"testing@testing.com",isRouteBased:!1},{name:"Peer",publicIp:"3.3.3.3",privateSubnets:["3.3.3.0/24"],localId:"3.3.3.4",remoteId:"3.3.3.4",ikeVersion:"2",secret:"random",ipsecPolicies:{ikeCipherAlgo:["aes128"],ikeAuthAlgo:["sha1"],ikePrfAlgo:["prfsha256"],ikeDiffieHellmanGroup:["group2"],ikeLifetime:28800,childCipherAlgo:["aes256","aes192","aes128","tripledes"],childAuthAlgo:["sha1","md5"],childPfsGroup:["disabled"],childLifetime:28800},networkTags:["all"],myUserFqdn:"testing@testing.com",isRouteBased:!1},{name:"Test",publicIp:"4.4.4.4",privateSubnets:["4.4.4.0/24"],localId:"4.4.4.5",remoteId:"4.4.4.6",ikeVersion:"2",networkTags:["TestTag4"],ipsecPoliciesPreset:"umbrella_short_lived",secret:"random",isRouteBased:!1},{name:"Peer7",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"umbrella",secret:"random",isRouteBased:!1},{name:"test1",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"test2",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"test3",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"test4",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"test5",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"test pagination",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1}],D=[{name:"Peer",publicIp:"3.3.3.3",privateSubnets:["3.3.3.0/24"],localId:"1.2.3.4",remoteId:"5.6.7.8",ikeVersion:"1",networkTags:["Test"],secret:"random",isRouteBased:!1,ipsecPolicies:{aggressiveMode:!0,ikeCipherAlgo:["aes128"],ikeAuthAlgo:["sha1"],ikeDiffieHellmanGroup:["group2"],ikeLifetime:28800,childCipherAlgo:["aes256","aes192","aes128","tripledes"],childAuthAlgo:["sha1","md5"],childPfsGroup:["disabled"],childLifetime:28800}}],u=[{name:"Peer",publicIp:"3.3.3.3",privateSubnets:["3.3.3.0/24"],localId:"1.2.3.4",remoteId:"5.6.7.8",ikeVersion:"1",networkTags:["Test"],secret:"random",isRouteBased:!1,ipsecPolicies:{ikeCipherAlgo:["aes128"],ikeAuthAlgo:["sha1"],ikeDiffieHellmanGroup:["group2"],ikeLifetime:28800,childCipherAlgo:["aes256","aes192","aes128","tripledes"],childAuthAlgo:["sha1","md5"],childPfsGroup:["disabled"],childLifetime:28800}}],o={name:"Peer with dynamic route",ikeVersion:"2",secret:"abc",privateSubnets:["12.1.0.0/24"],ipsecPolicies:{ikeCipherAlgo:["aes256"],ikeAuthAlgo:["sha1"],ikeDiffieHellmanGroup:["group14"],ikeLifetime:14400,childCipherAlgo:["aes256"],childAuthAlgo:["sha1"],childPfsGroup:["disabled"],childLifetime:3600},networkTags:["networkTag"],publicIp:"15.14.15.14",network:{ids:["N_123123"],names:["Peer with dynamic route"]},isRouteBased:!0,ebgpNeighbor:{neighborIp:"192.168.0.1",ipVersion:4,remoteAsNumber:65e3,ebgpHoldTimer:12,ebgpMultihop:64,sourceIp:"10.10.10.10",pathPrepend:[65e3,65002],multiExitDiscriminator:1,weight:99}},M=()=>{const{weight:$,pathPrepend:le,multiExitDiscriminator:ce,...ve}=o.ebgpNeighbor;return{...o,ebgpNeighbor:{...ve}}},m=[{name:"testIpv6Only",publicIp:"5.5.5.5",privateSubnets:["ffee::/64"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1},{name:"testIpv4AndIpv6",publicIp:"5.5.5.5",privateSubnets:["5.5.5.0/24, ffee::/64"],localId:"5.5.5.2",remoteId:"5.5.5.3",ikeVersion:"2",networkTags:["TestTag","TestTag2","TestTag3"],ipsecPoliciesPreset:"azure",secret:"random",isRouteBased:!1}],P={peers:U},T={peers:[...m,...U]},O={peers:D},v={peers:u},L={peers:[o]},B={peers:[M()]},F=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(P)))],K=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json({peers:[]})))],b=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(T)))],q=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(O)))],j=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(v)))],J=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(L)))],ee=[r.r.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",($,le,ce)=>le(ce.status(200),ce.json(B)))],V=($,le=0,ce=200)=>[rest.get("api/v1/organizations/:organizationId/appliance/vpn/thirdPartyVPNPeers",(ve,_e,Ee)=>_e(Ee.delay(le),Ee.status(ce),Ee.json({peers:$})))],N=$=>[rest.get("api/v1/organizations/:organizationId/appliance/vpn/siteToSite/ipsec/peers/slas",(le,ce,ve)=>ce(ve.status(200),ve.json({items:$})))],w=[r.r.get("/manage/supported_features/show",($,le,ce)=>le(ce.status(200),ce.json({has_source_probe_ip_support:!0})))],z=[...F,...p,...w],ne=[...K,...p],Y=[...b,...p],te=[...q,...I],Te=[...j,...I],me=[...J,...p],Me=[...ee,...p],Ie=($,le,ce)=>[...NonMerakiVpnPeersHandler($,le,ce),...IpsecPoliciesApiHandlers];var ge=e(652129);const de=(0,ge.L)().withStoreName("nonMerakiVpnStore").create(),H=(()=>de.createStore())()},852845:(ae,x,e)=>{e.d(x,{AA:()=>n,JL:()=>J,Tp:()=>I,o1:()=>K});var W=e(941669),C=e.n(W),g=e(522224),c=e.n(g),y=e(646894),d=e.n(y),f=e(869592),l=e.n(f),_=e(82960);const a=5e3,h="ng",s="org",t={NEW:"new",PENDING:"pending",RUNNING:"running",SUCCESS:"success",FAILED:"failed",FAILURE:"failure",COMPLETE:"complete"},n={SCOPE_ORG:s,SCOPE_NG:h,JOB_STATES:t},E={UPDATE_JOB:"UPDATE_JOB",CANCEL_JOB:"CANCEL_JOB",INIT_JOB:"INIT_JOB",ADD_TIMER:"ADD_TIMER",DELETE_TIMER:"DELETE_TIMER"};class i extends Error{constructor(N){super(N),this.message=N,this.name="ApiJobError"}}const R=V=>({type:E.DELETE_TIMER,jobKey:V}),r=(V,N,w)=>({type:E.ADD_TIMER,jobKey:V,timer:N,reject:w}),A=V=>new Promise((N,w)=>{C().ajax(V).done(z=>{N(z)}).fail(z=>{w(z)})}),S=(V,N)=>V.apiJobs.timers.byKey[N.jobKey],p=(V,N)=>V.apiJobs.statuses.byKey[N.jobKey],I={getTimerByJobKey:S,getJobByJobKey:p},U=(V,N,w,z,ne)=>new Promise((Y,te)=>{const Te=setTimeout(()=>{V(R(w)),Y(ne())},z);if(!c().isEmpty(S(N(),{jobKey:w})))throw new i("trying to track twice");V(r(w,Te,te))}),D=(V,N)=>({type:E.UPDATE_JOB,jobKey:V,change:N}),u=({jobKey:V,scope:N,largeRequests:w,pending:z=!0,jobStatusUrl:ne})=>({type:E.INIT_JOB,scope:N,jobKey:V,largeRequests:w,pending:z,jobStatusUrl:ne}),o=(V,N,w,z,ne)=>{const Y={status:{$set:N},updatedAt:{$set:ne}};return c().isUndefined(w)||(Y.payload={$set:w}),c().isUndefined(z)||(Y.request={$set:z}),D(V,Y)};var M=()=>{};const m=V=>(N,w)=>{const z=p(w(),{jobKey:V});if(c().isEmpty(z))return;const{id:ne,scope:Y,progressOptions:te,largeRequests:Te,jobStatusUrl:me}=z,Me=me||l()({controller:"dashboard",action:"job_data"});return U(N,w,V,a,()=>A({url:Me,data:{api_job_status:"true",job_action:"fetch",job_ids:[ne],scope:Y,progress_options:te},type:Te?"POST":"GET",dataType:"json"}).then(Ie=>{N(M(V,Ie,Te))}))};M=(V,N)=>w=>{if(Array.isArray(N)){const me=N.find(X=>X.id===V)||{},{status:Me,job_data:Ie,request:ge,type:de,updated_at:se}=me;if(["Sm::Jobs::EnableActivationLockBackgroundJob","Sm::Jobs::RemoveActivationLockBackgroundJob"].includes(de)){Me===t.COMPLETE?w(o(V,Me,Ie,ge,se)):(w(o(V,Me,Ie,ge,se)),w(m(V)));return}}const{status:z,value:ne,error:Y,request:te,updated_at:Te}=N;if(c().isEmpty(z)&&!c().isEmpty(Y)){w(o(V,t.FAILURE,Y,te));return}switch(z){case t.FAILURE:w(o(V,z,Y||"Unknown error running job",te,Te));break;case t.SUCCESS:w(o(V,z,ne,te,Te));break;default:w(o(V,z,ne,te,Te)),w(m(V));break}};const P=(V,N)=>w=>{let z=N;Array.isArray(N)&&(z=N.find(me=>me.id===V)||{});const{id:ne,status:Y,value:te,request:Te}=z;w(D(V,{$merge:{id:ne,status:Y,payload:te,request:Te}})),Y!==t.PENDING?w(M(V,z)):w(m(V))},T=(V,N,w,z,ne,Y)=>te=>{const Te=Y||l()({controller:"dashboard",action:"job_data"});return A({url:Te,data:{api_job_status:"true",job_action:"find",job_class:w,request_fields:z||{},scope:N},type:"GET",dataType:"json"}).then(me=>(te(u({jobKey:V,scope:N||h,largeRequests:ne,pending:!1,jobStatusUrl:Y})),te(P(V,me))))},O=V=>{var N=V;try{N=JSON.parse(V).error}catch{throw new i("Unknown error response")}throw new i(N)},v=(V,N)=>A({url:V,data:N,type:"POST",dataType:"json"}),L=V=>{const{jobKey:N,scope:w,url:z,data:ne,largeRequests:Y,jobStatusUrl:te}=V;return Te=>{Te(u({jobKey:N,scope:w||h,largeRequests:Y,jobStatusUrl:te})),v(z,ne).then(me=>{Te(P(N,me))},me=>{O(me.responseText)}).catch(me=>{const Me=me.message||me.responseText||`${me}`;Te(o(N,t.FAILURE,Me||"Network error"))})}},B=V=>({type:E.CANCEL_JOB,jobKey:V.jobKey}),K={startJob:L,cancelJob:B,findJob:V=>{const{jobKey:N,scope:w,jobClass:z,requestFields:ne,largeRequests:Y,jobStatusUrl:te}=V;return Te=>{Te(T(N,w,z,ne,Y,te)).catch(me=>{throw Te(B(V)),me})}}},b=(V={byKey:{}},N)=>{const{jobKey:w}=N;switch(N.type){case E.INIT_JOB:{const z={scope:N.scope,largeRequests:N.largeRequests,status:N.pending?t.PENDING:null,jobStatusUrl:N.jobStatusUrl,payload:{}};return d()(V,{byKey:{[w]:{$set:z}}})}case E.UPDATE_JOB:return d()(V,{byKey:{[w]:N.change}});case E.CANCEL_JOB:return{byKey:c().omit(V.byKey,w)};default:return V}},q=(V={byKey:{}},N)=>{const{jobKey:w}=N;switch(N.type){case E.ADD_TIMER:return d()(V,{byKey:{[w]:{$set:{timer:N.timer,reject:N.reject}}}});case E.CANCEL_JOB:case E.DELETE_TIMER:var z=V.byKey[w];return z&&clearTimeout(z),{byKey:c().omit(V.byKey,w)};default:return V}},j=(0,_.combineReducers)({statuses:b,timers:q}),J=()=>({actions:K,reducer:j,actionTypes:E});var ee=null},859953:(ae,x,e)=>{e.d(x,{U1:()=>I,o1:()=>S});var W=e(14602),C=e.n(W),g=e(941669),c=e.n(g),y=e(184988),d=e.n(y),f=e(869592),l=e.n(f),_=e(522224),a=e.n(_),h=e(652129),s=e(967720),t=e(281034);const n=["apps","softwareGroups","softwareDetails","tags"],E=(0,h.L)().withStoreName("PccSoftwaresPageStore").withModels(n).withChanges().withPrefs().withFlexTables().create(),i=E.actions,R=()=>U=>(U(i.requestSoftwareGroups()),(0,s.A)(l()({controller:"configure",action:"pcc_softwares_json"}),{credentials:"same-origin"}).then(D=>D.json()).then(D=>{const u=D.map(o=>(o.id=`${o.system_type}:${o.identifier}`,o));return U(i.addSoftwareGroups(u)),D})),r=(U,D)=>{const u=l()({controller:"configure",action:"pcc_software_details_json"}),[o,M]=U.split(":",2),m={software_platform:o,software_identifier:M,software_name:D};return P=>(P(i.requestSoftwareDetails()),c().ajax({url:u,type:"POST",data:m}).success(T=>{P(i.addSoftwareDetails(T.software_records)),P(i.updateSoftwareGroupsWithMerge([T.software_details]))}).error(T=>{d()(JSON.parse(T.responseText))}))},A=()=>U=>(U(i.requestApps()),(0,t.T$)().then(D=>{U(i.addApps(D))})),S=a().extend({},i,{fetchSoftwareGroups:R,fetchSoftwareDetails:r,fetchApps:A}),p=E.actionTypes,I=()=>E.createStore()},863055:(ae,x,e)=>{e.d(x,{A:()=>d});var W=e(941669),C=e.n(W),g=e(4933);const c=(0,g.A)("COUNTRY_STORE",{idKey:"alpha2"});var y={fetch(){return C().get("/countries").done(f=>{this.dispatch(c.constants.RESET,f)})}};function d(f){f.store("CountryStore")||(f.addStore("CountryStore",c),f.addActions({countries:y}))}},868243:(ae,x,e)=>{e.d(x,{U1:()=>M,o1:()=>u});var W=e(869592),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(652129),l=e(758928),_=e.n(l),a=e(775113),h=e(865736),s=e(609393);const t=["vpnInboundL3Rules","vpnOutboundL3Rules"],n=(0,f.L)().withStoreName("VpnFirewallRulesStore").withModels(t).withChanges().create(),E=n.actions,i=()=>{const P={path:"organizations/:orgId/appliance/vpn/vpnFirewallRules",orgId:_().org_id,version:"v1"};return a.A.urlForApi(P)},R=()=>P=>(P(E.updateContext({isFetchingVpnFirewallRulesContext:!0})),P(E.requestVpnInboundL3Rules()),d().getJSON(C()({controller:"organization",action:"vpn_firewall_context_json"})).done(T=>{P(E.updateContext({curVpnL3RulesContext:{...T},isFetchingVpnFirewallRulesContext:!1})),P(E.addVpnInboundL3Rules([{id:0,syslogEnabled:T.inbound_default_rule_logging}]))})),r=()=>P=>{P(E.requestVpnOutboundL3Rules());const T=i();return d().getJSON(C()({controller:T,global:!0})).done(O=>{const v=O.rules.map((L,B)=>({id:B.toString(),rowIndex:B,...L}));P(E.updateLocals({hasChanges:!1})),P(E.addVpnOutboundL3Rules(v))})},A=(P,T)=>(O,v)=>{const L=(0,h.kH)(v()),B=(0,s.IP)(L),F=typeof T>"u"?B.length-1:T;B.filter(K=>K.id!==P.id).forEach((K,b)=>{K.rowIndex=b>=F?b+1:b}),L[P.id]=(0,s.KC)(P,F),O(E.updateLocals({hasChanges:!0})),O(E.addVpnOutboundL3Rules(L))},S=P=>(T,O)=>{const v=(0,h.kH)(O()),L=(0,s.VI)(v,P,1);T(E.updateLocals({hasChanges:!0})),T(E.addVpnOutboundL3Rules(L))},p=P=>T=>{T(E.updateLocals({hasChanges:!0})),T(E.deleteVpnOutboundL3RulesById([P.id]))},I=P=>T=>{T(E.updateLocals({hasChanges:!0})),T(E.deleteVpnOutboundL3RulesById(P))},U=P=>(T,O)=>{T(E.updateLocals({hasChanges:!0}));const v=(0,h.yy)(O(),{id:P.id});T(E.updateVpnOutboundL3Rules([(0,s.KC)({...v,...P})]))},D=P=>T=>{T(E.updateLocals({hasChanges:!0})),T(E.addVpnInboundL3Rules([P]))},u=c().extend({},E,{addOrMoveVpnOutboundL3Rule:A,addBulkVpnOutboundL3Rule:S,deleteVpnOutboundL3Rule:p,deleteVpnOutboundL3Rules:I,fetchFirewallRulesContext:R,fetchVpnOutboundL3Rules:r,updateVpnDefaultInboundLogging:D,updateVpnOutboundL3Rule:U}),o=n.actionTypes,M=()=>n.createStore();var m=null},868981:(ae,x,e)=>{e.d(x,{Ap:()=>E,Ey:()=>i,FQ:()=>r,VL:()=>n,VR:()=>s,g1:()=>h,mP:()=>t,rc:()=>A,xo:()=>R});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466),y=e(986123),d=e(50811),f=e.n(d);const l=(0,g.L)().create().createStore(),_=(S,p,I,U,D,u,o,M)=>{const m=`organizations/${S}/switch/ports/profiles/overview/byProfile?`,P=[];return(0,y.Ed)(p)&&P.push(`networkIds[]=${p}`),(0,y.Ed)(I)&&P.push(`perPage=${I}`),(0,y.Ed)(U)&&P.push(`startingAfter=${U}`),(0,y.Ed)(D)&&P.push(`endingBefore=${D}`),(0,y.Ed)(u)&&P.push(`searchQuery=${u}`),(0,y.Ed)(o)&&P.push(`isOrganizationWide=${o}`),(0,y.Ed)(M)&&P.push(`radiusProfileEnabled=${M}`),m+P.join("&")},a=(S,p,I)=>{const U=`organizations/${S}/switch/ports/profiles/radius/assignments?`,D=[];return(0,y.Ed)(p)&&D.push(`networkIds[]=${p}`),(0,y.Ed)(I)&&D.push(`portProfileIds[]=${I}`),U+D.join("&")},h=c.kC.enhanceEndpoints({addTagTypes:["switchportProfile","switchportProfileDetails"]}).injectEndpoints({endpoints:S=>({fetchSwitchportProfiles:S.query({query:({organizationId:p,networkId:I,per_page:U,starting_after:D,ending_before:u,search_query:o,isOrganizationWide:M,radiusProfileEnabled:m})=>({url:_(p,I,U,D,u,o,M,m)}),providesTags:p=>{var I;return[...((I=p?.items)!==null&&I!==void 0?I:[]).map(({profileId:U})=>({type:"switchportProfile",profileId:U})),{type:"switchportProfile",id:"ALL"}]}}),fetchSwitchportProfileDetails:S.query({query:({organizationId:p,profileId:I,formattedStaticAssignments:U})=>({url:`organizations/${p}/switch/ports/profiles/${I}${U?`?formattedStaticAssignments=${U}`:""}`}),providesTags:(p,I,U)=>[{type:"switchportProfileDetails",id:U.profileId}]}),createSwitchportProfile:S.mutation({query:({organizationId:p,switchportProfileDetails:I})=>({url:`organizations/${p}/switch/ports/profiles`,method:"POST",body:I}),invalidatesTags:()=>[{type:"switchportProfile",id:"ALL"}]}),updateSwitchportProfile:S.mutation({query:({organizationId:p,switchportProfileDetails:I})=>({url:`organizations/${p}/switch/ports/profiles/${I.profileId}`,method:"PUT",body:I}),invalidatesTags:(p,I,U)=>[{type:"switchportProfileDetails",id:U.switchportProfileDetails.profileId},{type:"switchportProfile",id:"ALL"}]}),deleteSwitchportProfile:S.mutation({query:({organizationId:p,profileId:I})=>({url:`organizations/${p}/switch/ports/profiles/${I}`,method:"DELETE"}),invalidatesTags:()=>[{type:"switchportProfile",id:"ALL"}]}),fetchSwitchportProfilesRadius:S.query({query:({organizationId:p,networkId:I,portProfileIds:U})=>({url:a(p,I,U),method:"GET"})}),assignSwitchportProfilesRadius:S.mutation({async queryFn({organizationId:p,networkId:I,portProfiles:U}){try{const D=U.map(M=>({resource:`/organizations/${p}/switch/ports/profiles/radius/assignments`,operation:"create",body:{network:{id:I},portProfile:{id:M.id}}})),u={auth:{csrfToken:Mkiconf.authenticity_token}},{data:o}=await(0,d.batchedApiRequest)(p,D,u,{synchronous:D.length<=20});return{data:Array.isArray(o)?o:[o]}}catch(D){return{error:D}}}}),deleteSwitchportProfilesRadius:S.mutation({async queryFn({organizationId:p,radiusProfileIds:I}){try{const U=I.map(o=>({resource:`/organizations/${p}/switch/ports/profiles/radius/assignments/${o}`,operation:"destroy",body:{}})),D={auth:{csrfToken:Mkiconf.authenticity_token}},{data:u}=await(0,d.batchedApiRequest)(p,U,D,{synchronous:U.length<=20});return{data:Array.isArray(u)?u:[u]}}catch(U){return{error:U}}}})})}),{useFetchSwitchportProfilesQuery:s,useFetchSwitchportProfileDetailsQuery:t,useCreateSwitchportProfileMutation:n,useUpdateSwitchportProfileMutation:E,useDeleteSwitchportProfileMutation:i,useFetchSwitchportProfilesRadiusQuery:R,useAssignSwitchportProfilesRadiusMutation:r,useDeleteSwitchportProfilesRadiusMutation:A}=h},869009:(ae,x,e)=>{e.d(x,{A:()=>d});var W=e(941669),C=e.n(W),g=e(4933);const c=(0,g.A)("MX_PORT_INFO",{idKey:"id"}),y={subscribe(f){C().comet.node_subscribe("PortStatusJson",l=>{this.dispatch(c.constants.UPDATE,l.data)},f)}};function d(f){f.store("MxPortStore")||(f.addStore("MxPortStore",c),f.addActions({mxports:y}))}},869674:(ae,x,e)=>{e.d(x,{o:()=>n});var W=e(941669),C=e.n(W),g=e(652129),c=e(522224),y=e.n(c),d=e(869592),f=e.n(d),l=e(727788);const _=(0,g.L)().withStoreName("SensorHealthStore").withCustomKeyedModel("latestSensorHealth",i=>i.serial).create(),a=_.actions,h=(i,R)=>r=>(r(a.requestLatestSensorHealth()),new Promise((A,S)=>{C().ajax({url:f()({controller:"sensors/health",action:"latest_by_sensor"}),type:"GET",data:{serials:i,metrics:R}}).done(p=>{p.forEach(I=>{const{serial:U,metrics:D}=I,u=R.reduce((M,m)=>Object.assign(M,{[m]:null}),{});D.forEach(M=>{u[M.metric]=M});const o={serial:U,...u};r(a.updateLatestSensorHealthWithMerge([o]))}),A()}).fail(()=>{r(a.updateLocals({errors:"Failed request to fetch latest sensor health"})),S()}).always(()=>{r(a.doneRequestingLatestSensorHealth())})})),t=(i=>R=>h([R],i))(l.L),n=y().extend({},_.actions,{fetchLatestSensorDeviceHealth:t});var E=null},878821:(ae,x,e)=>{e.d(x,{Ay:()=>C,o1:()=>c});var W=e(748911);class C extends W.A{constructor(){super("locals")}}const c=(()=>new C().create())().actions},882519:(ae,x,e)=>{e.d(x,{U1:()=>t,o1:()=>s});var W=e(941669),C=e.n(W),g=e(652129),c=e(522224),y=e.n(c),d=e(869592),f=e.n(d);const l=["accessLogs"],_=(0,g.L)().withStoreName("AccessLogStore").withModels(l).withModal().withChanges().create(),a=_.actions,h=E=>i=>(i(a.updateLocals({isFetching:!0})),C().get(f()({controller:"access_logs",action:"events",params:E}),{credentials:"same-origin"}).then(R=>{y().isEmpty(R.errors)&&i(a.addAccessLogs(R)),i(a.updateLocals({isFetching:!1}))})),s=y().extend({},a,{fetchAccessLogs:h}),t=()=>_.createStore();var n=null},883878:(ae,x,e)=>{e.d(x,{XV:()=>l,eP:()=>C,eu:()=>f,qo:()=>y,rF:()=>c,tx:()=>d});var W=e(310466);const C={LIVE:"live",PENDING:"pending"},g=W.kC.enhanceEndpoints({addTagTypes:["ProvisioningPackage"]}).injectEndpoints({endpoints:_=>({fetchProvisioningPackages:_.query({query:({networkId:a})=>({url:`networks/${a}/sm/apple/provisioningPackages/`}),providesTags:()=>[{type:"ProvisioningPackage",id:"LIST"}]}),fetchProvisioningPackage:_.query({query:({networkId:a,id:h})=>({url:`networks/${a}/sm/apple/provisioningPackages/${h}`}),providesTags:(a,h,s)=>[{type:"ProvisioningPackage",id:s.id}],async onQueryStarted({networkId:a},{dispatch:h,queryFulfilled:s}){try{const{data:t}=await s;h(g.util.updateQueryData("fetchProvisioningPackages",{networkId:a},n=>{const E=n.findIndex(i=>i.id===t.id);E!==-1&&(n[E]=t)}))}catch{}}}),updateProvisioningPackage:_.mutation({query:({networkId:a,provisioningPackage:{id:h,...s}})=>({url:`networks/${a}/sm/apple/provisioningPackages/${h}`,method:"PUT",body:s}),invalidatesTags:a=>a?[{type:"ProvisioningPackage",id:a.id}]:[],async onQueryStarted({networkId:a},{dispatch:h,queryFulfilled:s}){try{const{data:t}=await s;h(g.util.updateQueryData("fetchProvisioningPackages",{networkId:a},n=>{const E=n.findIndex(i=>i.id===t.id);E!==-1&&(n[E]=t)}))}catch{}}}),createProvisioningPackage:_.mutation({query:({networkId:a,provisioningPackage:h})=>({url:`networks/${a}/sm/apple/provisioningPackages`,method:"POST",body:h}),async onQueryStarted({networkId:a},{dispatch:h,queryFulfilled:s}){try{const{data:t}=await s;h(g.util.updateQueryData("fetchProvisioningPackages",{networkId:a},n=>{n.push(t)}))}catch{}}}),deleteProvisioningPackage:_.mutation({query:({networkId:a,id:h})=>({url:`networks/${a}/sm/apple/provisioningPackages/${h}`,method:"DELETE"}),invalidatesTags:(a,h,s)=>h?[]:[{type:"ProvisioningPackage",id:s.id}],async onQueryStarted({networkId:a,id:h},{dispatch:s,queryFulfilled:t}){try{const{meta:n}=await t;n?.ok&&s(g.util.updateQueryData("fetchProvisioningPackages",{networkId:a},E=>{const i=E.findIndex(R=>R.id===h);i!==-1&&E.splice(i,1)}))}catch{}}})}),overrideExisting:!1}),{useFetchProvisioningPackageQuery:c,useFetchProvisioningPackagesQuery:y,useUpdateProvisioningPackageMutation:d,useCreateProvisioningPackageMutation:f,useDeleteProvisioningPackageMutation:l}=g},885245:(ae,x,e)=>{e.d(x,{i:()=>E});var W=e(388691),C=e(191328),g=e(813989),c=e(602257),y=e(113363),d=e(522224),f=e.n(d);const l=({incidentId:i,body:R})=>({url:`${y.Pu.PRIVATE_INTEL_PROXY.ROUTES.INCIDENT}/${i}`,method:"PATCH",body:R}),_=i=>l(i),a=(i,R)=>{if(!R||!i)return;const r=R.findIndex(S=>S.id===i.id);R[r]&&(R[r]=i)},h=(i,R,r)=>{if(!R||!i)return;const A=f().isEmpty(R.assignees),S=f().isEmpty(i.assignees);if(A===!S){const u=r.unassigned;r.unassigned=A?u-1:u+1}const p=c.Fk.includes(R.status),I=c.Fk.includes(i.status);if(p===!I){const u=r.open;r.open=p?u-1:u+1}const U=c.DH.includes(R.status),D=c.DH.includes(i.status);if(U===!D){const u=r.new;r.new=U?u-1:u+1}};var s=e(792273),t=e(899921);const n=W.DA.injectEndpoints({endpoints:i=>({updateIncident:i.mutation({async queryFn({args:R},r,A,S){var p,I,U,D,u;if(!r.getState().dashUser.canWriteOrg)return{error:{status:"CUSTOM_ERROR",error:"User does not have org write access."}};let M=await S(_(R));if(((p=M)===null||p===void 0||(I=p.error)===null||I===void 0?void 0:I.status)===429){var m;return r.dispatch(g.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,t.PE)((m=M)===null||m===void 0?void 0:m.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}}}else r.dispatch(g.o1.toggleRateLimitReached({reached:!1,retryAfter:0}));if(((U=M)===null||U===void 0||(D=U.error)===null||D===void 0?void 0:D.status)===401){const T=(await(0,W.FF)(C.VF,r,A)).data;T&&(r.dispatch(g.o1.updateAuthToken(T.access_token)),M=await S(_(R)))}return!((u=M)===null||u===void 0)&&u.error?{error:{status:"FETCH_ERROR",error:"Error updating incident."}}:{data:M.data}},async onQueryStarted(R,{dispatch:r,queryFulfilled:A,getState:S}){try{const{data:p}=await A,I=S().xdrIncidents.latest.global,U=S().xdrIncidents.latest.incidents.data.find(D=>D.id===p.id);r(s.OX.updateQueryData("getIncidents",{params:I},D=>{a(p,D.incidents)})),r(s.OX.updateQueryData("getIncidentCounts",{range:I.range},D=>{h(p,U,D)}))}catch(p){console.error(p)}}})})}),{useUpdateIncidentMutation:E}=n},885732:(ae,x,e)=>{e.d(x,{Az:()=>f,Be:()=>a,Es:()=>_,Jv:()=>c,U7:()=>l,Xg:()=>C,_0:()=>g});const W=/apr\dv(\d)/,C=({mac:h},s)=>h?s[h.substring(0,8)]:null,g=({manufacturer:h,os:s})=>{let t=s||"";return!h||!s||(h.match(/Meraki/)&&(t="Meraki"),!h.match(/Apple/)&&s.match(/^(Apple )?(iP[a-z]{2,4})$/)&&(h.match(/Huawei|LG Electronics|Motorola|Samsung/)?t="Android":t="")),t},c=({sent:h,recv:s})=>h+s,y=h=>{const s=h.slice(0,1);return{r:"wireless",s:"switch",x:"wired",g:"cellularGateway"}[s]},d=h=>{if(typeof h!="string")return null;const s=h.match(W);return s&&s[1]},f=({products:h,connectedBy:s})=>{let t=null;if(s===null)return t;const n=y(h);return n==="wireless"?t=s.toString():n==="wired"&&(t=d(s)),t},l=({products:h,connectedBy:s})=>{let t=null;if(s===null)return t;const n=s.toString(),E=y(h);return(E==="wired"&&!n.match(W)||E==="switch")&&(t=n),t},_=({products:h,connectedBy:s})=>{if(!h)return{cellularGateway:!1,wired:!1,switch:!1,wireless:!1,mxWireless:!1};const t=h.indexOf("x")>=0;return{cellularGateway:h.indexOf("g")>=0,wired:t,switch:h.indexOf("s")>=0,wireless:h.indexOf("r")===0,mxWireless:t&&!!d(s)}},a=({products:h,connectedBy:s})=>{const{wireless:t,mxWireless:n}=_({products:h,connectedBy:s}),E=l({products:h,connectedBy:s});return t||n?"wireless":E==="client_vpn"?"client-vpn":E==="anyconnect_vpn"?"anyconnect-vpn":"wired"}},888318:(ae,x,e)=>{e.d(x,{A:()=>_});var W=e(941669),C=e.n(W),g=e(758928),c=e.n(g),y=e(4933);const d=(0,y.A)("PROTOBUF_STORE"),f="/internalAPI/support_admin/protobufRequestNames",l={fetch(){this.dispatch(d.constants.LOADING,!0),c()&&c().protobuf_reqs?(this.dispatch(d.constants.UPDATE,c().protobuf_reqs),this.dispatch(d.constants.LOADING,!1)):C().get(f).done(a=>{this.dispatch(d.constants.UPDATE,a.items),this.dispatch(d.constants.LOADING,!1)})},getLoading(){return d.getLoading()}};function _(a){a.store("ProtobufStore")||(a.addStore("ProtobufStore",d),a.addActions({protobufReq:l}))}},888670:(ae,x,e)=>{e.d(x,{U:()=>l,o:()=>f});var W=e(652129),C=e(281034);const g=["devices"],c=(0,W.L)().withStoreName("PccMapStore").withModels(g).create(),y=c.actions,f={...y,fetchDevices:()=>_=>{_(y.requestDevices());const a=()=>_(y.doneRequestingDevices()),h=s=>{_(y.updateDevicesWithMerge(s.filter(t=>!!(t.best_lat&&t.best_lon)).map(t=>Object.assign(t,{lat:parseFloat(t.best_lat),lng:parseFloat(t.best_lon)}))))};(0,C.rQ)(h,a)}},l=()=>c.createStore()},889493:(ae,x,e)=>{e.d(x,{o1:()=>E});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(653806),_=e(38123),a=e.n(_);const h=(0,y.L)().withStoreName("SensorStatsStore").withCustomKeyedModel("aggregateBySensorStats",({serial:R,metric:r,t0:A})=>`${R}-${r}-${A}`).create(),s=h.actions,t=R=>r=>(r(s.requestAggregateBySensorStats()),Promise.all(R.map(A=>{const S=`/api/v1/networks/N_${f().ng_id}/sensor/stats/aggregateBySensor`,{metric:p,t0:I,t1:U,timespan:D}=A,u=I??a()().clone().subtract(D,"s").unix(),o=U??a()().clone(),m={...c().omit(A,"timespan"),t0:u,t1:o};return(0,l.AT)("GET",S,m).then(P=>P.data.map(O=>({...O,metric:p,t0:u,t1:o})))})).then(A=>r(s.updateAggregateBySensorStats(c().flatten(A,1)))).catch(A=>{const S=A.errors;r(s.updateAggregateBySensorStats({errors:S})),r(s.failedRequestingAggregateBySensorStats())}).finally(()=>{r(s.doneRequestingAggregateBySensorStats())}));var n=null;const E=c().extend({},h.actions,{fetchMultipleSensorStatsAggregateBySensor:t}),i=()=>h.createStore()},898011:(ae,x,e)=>{e.d(x,{U1:()=>X,o1:()=>de});var W=e(869592),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(652129),l=e(653806),_=e(776959),a=e(976472),h=e(619325),s=e(117397),t=e(609393);const n=["wiredOutboundL3Rules","wiredCellularL3Rules","wiredInboundL3Rules","wiredL7Rules"],E=(0,f.L)().withStoreName("FirewallRulesStore").withLiveTools().withModels(n).withChanges().create(),i=E.actions,R="FirewallCounters",r=()=>i.updateLocals({hasChanges:!1,isSavingWiredOutboundL3Rules:!1,saveOutboundL3RulesSuccess:!0,saveOutboundL3RulesErrors:null}),A=H=>i.updateLocals({hasChanges:!0,isSavingWiredOutboundL3Rules:!1,saveOutboundL3RulesSuccess:!1,saveOutboundL3RulesErrors:H}),S=()=>(0,t.cd)("l3FirewallRules"),p=()=>(0,t.cd)("cellularFirewallRules"),I=()=>(0,t.cd)("inboundFirewallRules"),U=()=>(0,t.cd)("l7FirewallRules"),D=()=>(0,t.cd)("l7FirewallRules/applicationCategories"),u=(H,$)=>(le,ce)=>{const ve=(0,h.Je)(ce()),_e=(0,t.IP)(ve),Ee=typeof $>"u"?_e.length-1:$;_e.filter(Se=>Se.id!==H.id).forEach((Se,k)=>{Se.rowIndex=k>=Ee?k+1:k}),ve[H.id]=(0,t.KC)(H,Ee),le(i.updateLocals({hasChanges:!0})),le(i.addWiredOutboundL3Rules(ve))},o=H=>($,le)=>{const ce=(0,h.Je)(le()),ve=(0,t.VI)(ce,H,1);$(i.updateLocals({hasChanges:!0})),$(i.addWiredOutboundL3Rules(ve))},M=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredOutboundL3RulesById([H.id]))},m=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredOutboundL3RulesById(H))},P=H=>($,le)=>{$(i.updateLocals({hasChanges:!0}));const ce=(0,h.dI)(le(),{id:H.id});$(i.updateWiredOutboundL3Rules([(0,t.KC)({...ce,...H})])),$(i.deleteSubscription(R))},T=()=>H=>{H(i.updateContext({isFetchingApplicationCategories:!0}));const $=D();return(0,l.AT)("GET",$).then(({data:le})=>{H(i.updateContext({...le,isFetchingApplicationCategories:!1}))})},O=()=>H=>(H(i.updateContext({failedFetchingFirewallRulesContext:!1,isFetchingFirewallRulesContext:!0})),d().getJSON(C()({controller:"configure",action:"firewall_context_json"})).done($=>{H(i.updateContext({currentWiredL3RulesContext:{...$},isFetchingFirewallRulesContext:!1}))}).fail(function(){H(i.updateContext({isFetchingFirewallRulesContext:!1,failedFetchingFirewallRulesContext:!0}))})),v=H=>H.map(($,le)=>({id:le.toString(),rowIndex:le,ipVer:H.length-1===le?t.s5.DUAL:(0,t.$M)($),hits:0,...$})),L=()=>H=>{H(i.requestWiredOutboundL3Rules());const $=S();return(0,l.AT)("GET",$).then(({data:le})=>{H(i.updateLocals({hasChanges:!1})),H(i.addWiredOutboundL3Rules(v(le.rules)))}).catch(()=>{H(i.failedRequestingWiredOutboundL3Rules())}).finally(()=>{H(i.doneRequestingWiredOutboundL3Rules())})},B=()=>H=>{H(i.requestWiredCellularL3Rules());const $=p();return(0,l.AT)("GET",$).then(({data:le})=>{H(i.updateLocals({hasChanges:!1})),H(i.addWiredCellularL3Rules(v(le.rules)))}).catch(()=>{H(i.failedRequestingWiredCellularL3Rules())}).finally(()=>{H(i.doneRequestingWiredCellularL3Rules())})},F=()=>H=>{H(i.requestWiredInboundL3Rules());const $=I();return(0,l.AT)("GET",$).then(({data:le})=>{const{rules:ce,syslogDefaultRule:ve}=le;ce&&(H(i.updateLocals({hasChanges:!1})),ce.length===0?H(i.addWiredInboundL3Rules([{syslogEnabled:ve,id:"0",rowIndex:0,destCidr:"Any",srcCidr:"Any",destPort:"Any",srcPort:"Any",policy:"Deny",protocol:"Any",ipVer:t.s5.DUAL}])):H(i.addWiredInboundL3Rules(v(ce))))}).catch(()=>{H(i.failedRequestingWiredInboundL3Rules())}).finally(()=>{H(i.doneRequestingWiredInboundL3Rules())})},K=()=>H=>{H(i.requestWiredL7Rules());const $=U();return(0,l.AT)("GET",$).then(({data:le})=>{const ce=le.rules;if(ce){const ve=ce.map((_e,Ee)=>({id:Ee.toString(),rowIndex:Ee,..._e}));H(i.updateLocals({hasChanges:!1})),H(i.addWiredL7Rules(ve))}}).catch(()=>{H(i.failedRequestingWiredL7Rules())}).finally(()=>{H(i.doneRequestingWiredL7Rules())})},b=(H,$)=>(le,ce)=>{const ve=(0,_.XK)(ce()),_e=(0,t.IP)(ve),Ee=typeof $>"u"?_e.length-1:$;_e.filter(Se=>Se.id!==H.id).forEach((Se,k)=>{Se.rowIndex=k>=Ee?k+1:k}),ve[H.id]=(0,t.KC)(H,Ee),le(i.updateLocals({hasChanges:!0})),le(i.addWiredCellularL3Rules(ve))},q=H=>($,le)=>{const ce=(0,_.XK)(le()),ve=(0,t.VI)(ce,H,1);$(i.updateLocals({hasChanges:!0})),$(i.addWiredCellularL3Rules(ve))},j=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredCellularL3RulesById([H.id]))},J=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredCellularL3RulesById(H))},ee=H=>($,le)=>{$(i.updateLocals({hasChanges:!0}));const ce=(0,_.ph)(le(),{id:H.id});$(i.updateWiredCellularL3Rules([(0,t.KC)({...ce,...H})]))},V=(H,$)=>(le,ce)=>{const ve=ce(),_e=(0,a.UL)(ve),Ee=1,Se=(0,t.IP)(_e),k=typeof $>"u"?Se.length-Ee:$;Se.filter(G=>G.id!==H.id).forEach((G,ie)=>{G.rowIndex=ie>=k?ie+1:ie}),typeof H.syslogEnabled>"u"&&(H.syslogEnabled=!1),_e[H.id]={...H,rowIndex:k},le(i.updateLocals({hasChanges:!0})),le(i.addWiredInboundL3Rules(_e))},N=H=>($,le)=>{const ce=le(),ve=1,_e=(0,a.UL)(ce),Ee=(0,t.VI)(_e,H,ve);$(i.updateLocals({hasChanges:!0})),$(i.addWiredInboundL3Rules(Ee))},w=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredInboundL3RulesById([H.id]))},z=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredInboundL3RulesById(H))},ne=H=>($,le)=>{$(i.updateLocals({hasChanges:!0}));const ce=(0,a.k7)(le(),{id:H.id});$(i.updateWiredInboundL3Rules([(0,t.KC)({...ce,...H})]))},Y=(H,$)=>(le,ce)=>{const ve=(0,s.fF)(ce()),_e=(0,t.IP)(ve),Ee=typeof $>"u"?_e.length-1:$;_e.filter(Se=>Se.id!==H.id).forEach((Se,k)=>{Se.rowIndex=k>=Ee?k+1:k}),le(i.updateLocals({hasChanges:!0})),le(i.addWiredL7Rules(ve))},te=H=>($,le)=>{const ce=(0,s.fF)(le()),ve=(0,t.VI)(ce,H,1);$(i.updateLocals({hasChanges:!0})),$(i.addWiredL7Rules(ve))},Te=H=>($,le)=>{$(i.updateLocals({hasChanges:!0}));const ce=(0,s.Ng)(le(),{id:H.id});$(i.updateWiredL7Rules([(0,t.KC)({...ce,...H})]))},me=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredL7RulesById([H.id]))},Me=H=>$=>{$(i.updateLocals({hasChanges:!0})),$(i.deleteWiredL7RulesById(H))},Ie=H=>($,le)=>{$(i.updateLocals({hasChanges:!0}));const ce=le().context,ve={...ce.currentWiredL3RulesContext,is_cell_firewall_on_secondary_uplinks_enabled:H};$(i.updateContext({...ce,currentWiredL3RulesContext:ve}))},ge=()=>(H,$)=>{H(i.updateLocals({isSavingStaticRouteChanges:!0}));const le=(0,h.Je)($()),ce=Object.values(le).sort((Ee,Se)=>Ee.rowIndex-Se.rowIndex),ve=ce.pop(),_e=S();d().ajax({url:C()({controller:_e,global:!0},{credentials:"same-origin"}),type:"PUT",dataType:"json",contentType:"application/json",data:JSON.stringify({rules:ce,syslogDefaultRule:ve.syslogEnabled})}).done(()=>{H(r())}).fail(Ee=>{let Se=[];try{const k=JSON.parse(Ee.responseText);Se=k.errors||[k.error]}catch{switch(Ee.status){case 404:Se.push("We can't find the page you are looking for.");break;case 500:Se.push("Our server can't respond right now. Please try again later.");break;default:Se.push("An error has occurred. Please try again.")}}H(A(Se))})},de=c().extend({},i,{addOrMoveWiredCellularL3Rule:b,addOrMoveWiredInboundL3Rule:V,addOrMoveWiredOutboundL3Rule:u,addOrMoveWiredL7Rule:Y,addBulkWiredCellularL3Rules:q,addBulkWiredInboundL3Rules:N,addBulkWiredOutboundL3Rules:o,addBulkWiredL7Rules:te,deleteWiredCellularL3Rule:j,deleteWiredInboundL3Rule:w,deleteWiredOutboundL3Rule:M,deleteWiredL7Rule:me,deleteWiredCellularL3Rules:J,deleteWiredInboundL3Rules:z,deleteWiredOutboundL3Rules:m,deleteWiredL7Rules:Me,fetchApplicationCategories:T,fetchFirewallRulesContext:O,fetchWiredCellularL3Rules:B,fetchWiredInboundL3Rules:F,fetchWiredOutboundL3Rules:L,fetchWiredL7Rules:K,submitChanges:ge,updateWiredCellularL3Rule:ee,updateWiredInboundL3Rule:ne,updateWiredOutboundL3Rule:P,updateWiredL7Rule:Te,updateIsCellFirewallOnSecondaryUplinkEnabled:Ie}),se=E.actionTypes,X=()=>E.createStore();var Oe=null},899921:(ae,x,e)=>{e.d(x,{B2:()=>y,Gn:()=>c,NS:()=>l,PE:()=>_,QH:()=>f,r5:()=>d});var W=e(602257),C=e(113363);const g=(a,h)=>({url:C.Pu.PRIVATE_INTEL_PROXY.ROUTES.INCIDENT_SEARCH,params:{query:a,offset:0,limit:1,...h}}),c=a=>g(C.Wl,a),y=a=>g(`${C.Wl} AND ${C.Lh.STATUS}:(${Object.values(W.I0.new).map(h=>`"${h}"`).join(" OR ")})`,a),d=a=>g(`${C.Wl} AND ${C.Lh.STATUS}:(${Object.values(W.I0.open).map(h=>`"${h}"`).join(" OR ")})`,a),f=a=>g(`${C.Wl} AND !${C.Lh.ASSIGNEES}:(*)`,a),l=a=>{var h;return Number(a==null||(h=a.response)===null||h===void 0?void 0:h.headers.get("x-total-hits"))},_=a=>{var h;return Math.round(Number(a==null||(h=a.response)===null||h===void 0?void 0:h.headers.get("retry-after"))/60)||1}},901715:(ae,x,e)=>{e.d(x,{WZ:()=>c.WZ,Pu:()=>C.Pu,T7:()=>c.T7,WJ:()=>d.WJ,VC:()=>d.VC,gr:()=>h});var W=e(813989),C=e(113363),g=e(388691),c=e(191328),y=e(40359),d=e(792273);const f=(s,t,n)=>({url:C.Pu.PRIVATE_INTEL_PROXY.ROUTES.USER_SEARCH,method:"POST",params:{sort_by:t,sort_order:n,offset:s.offset,limit:s.limit}}),l=()=>f({offset:0,limit:500},"user-name","asc");var _=e(899921);const a=g.DA.injectEndpoints({endpoints:s=>({getUsers:s.query({async queryFn(t,n,E,i){var R,r,A,S,p;let U=await i(l());if(((R=U)===null||R===void 0||(r=R.error)===null||r===void 0?void 0:r.status)===429){var D;return n.dispatch(W.o1.toggleRateLimitReached({reached:!0,retryAfter:(0,_.PE)((D=U)===null||D===void 0?void 0:D.meta)})),{error:{status:"FETCH_ERROR",error:"Rate limit reached"}}}else n.dispatch(W.o1.toggleRateLimitReached({reached:!1,retryAfter:0}));if(((A=U)===null||A===void 0||(S=A.error)===null||S===void 0?void 0:S.status)===401){const o=(await(0,g.FF)(c.VF,n,E)).data;o&&(n.dispatch(W.o1.updateAuthToken(o.access_token)),U=await i(l()))}return!((p=U)===null||p===void 0)&&p.error?{error:{status:"FETCH_ERROR",error:"Error fetching users data"}}:{data:{users:U.data}}}})})}),{useGetUsersQuery:h}=a},904096:(ae,x,e)=>{e.d(x,{$0:()=>d,N5:()=>f,wt:()=>l});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.kC.enhanceEndpoints({addTagTypes:["customStorage"]}).injectEndpoints({endpoints:a=>({fetchCustomStorageByNetwork:a.query({query:({orgId:h,networkIds:s})=>({url:`organizations/${h}/devices/packetCapture/storage/byNetwork${(0,g.DK)({networkIds:s})}`}),providesTags:(h,s)=>[{type:"customStorage",id:"ALL"}]}),createCustomStorage:a.mutation({query:({orgId:h,networkIds:s,s3:t})=>({url:`organizations/${h}/devices/packetCapture/storage${(0,g.DK)({networkIds:s})}`,method:"POST",body:t}),invalidatesTags:(h,s)=>[{type:"customStorage",id:"ALL"}]}),updateCustomStorage:a.mutation({query:({orgId:h,configId:s,s3Configuration:t})=>({url:`organizations/${h}/devices/packetCapture/storage/${s}`,method:"PUT",body:t}),invalidatesTags:(h,s)=>[{type:"customStorage",id:"ALL"}]})}),overrideExisting:!1}),{useFetchCustomStorageByNetworkQuery:d,useCreateCustomStorageMutation:f,useUpdateCustomStorageMutation:l,util:_}=y},908081:(ae,x,e)=>{e.d(x,{o1:()=>R});var W=e(522224),C=e.n(W),g=e(652129),c=e(653806),y=e(752054),d=e(609393);const f=["inboundCellularL3Rules"],l=(0,g.L)().withStoreName("CellularInboundL3RulesStore").withLiveTools().withModels(f).withChanges().create(),_=l.actions,a=()=>(0,d.cd)("inboundCellularFirewallRules"),h=()=>p=>{p(_.requestInboundCellularL3Rules());const I=a();return(0,c.AT)("GET",I).then(({data:U})=>{const D=U.rules.map((u,o)=>({id:o.toString(),rowIndex:o,ipVer:U.rules.length-1===o?d.s5.DUAL:(0,d.$M)(u),...u}));p(_.updateLocals({hasChanges:!1})),p(_.addInboundCellularL3Rules(D))}).catch(()=>{p(_.failedRequestingInboundCellularL3Rules())}).finally(()=>{p(_.doneRequestingInboundCellularL3Rules())})},s=(p,I)=>(U,D)=>{const u=(0,y.gX)(D()),o=(0,d.IP)(u),M=typeof I>"u"?o.length-1:I;o.filter(m=>m.id!==p.id).forEach((m,P)=>{m.rowIndex=P>=M?P+1:P}),u[p.id]=(0,d.KC)(p,M),U(_.updateLocals({hasChanges:!0})),U(_.addInboundCellularL3Rules(u))},t=p=>(I,U)=>{const D=(0,y.gX)(U()),u=(0,d.VI)(D,p,1);I(_.updateLocals({hasChanges:!0})),I(_.addInboundCellularL3Rules(u))},n=p=>I=>{I(_.updateLocals({hasChanges:!0})),I(_.deleteInboundCellularL3RulesById([p.id]))},E=p=>I=>{I(_.updateLocals({hasChanges:!0})),I(_.deleteInboundCellularL3RulesById(p))},i=p=>(I,U)=>{I(_.updateLocals({hasChanges:!0}));const D=(0,y.hg)(U(),{id:p.id});I(_.updateInboundCellularL3Rules([(0,d.KC)({...D,...p})]))},R=C().extend({},_,{addOrMoveInboundCellularL3Rule:s,addBulkInboundCellularL3Rules:t,deleteInboundCellularL3Rule:n,deleteInboundCellularL3Rules:E,fetchInboundCellularL3Rules:h,updateInboundCellularL3Rule:i}),r=l.actionTypes,A=()=>l.createStore();var S=null},913798:(ae,x,e)=>{e.d(x,{DU:()=>h,MB:()=>a,fC:()=>s,i1:()=>t,iZ:()=>f,vI:()=>E});var W=e(14602),C=e.n(W),g=e(652129),c=e(310466),y=e(50811),d=e.n(y);const f=(0,g.L)().create().createStore(),l="SmIseProfile",_=c.kC.enhanceEndpoints({addTagTypes:[l]}).injectEndpoints({endpoints:i=>({fetchIseProfile:i.query({query:({networkId:R,iseWifiProfileId:r})=>({url:`networks/${R}/sm/ise/wifi/profiles/${r}`}),providesTags:(R,r,A)=>[{type:l,id:A.iseWifiProfileId}]}),fetchIseProfiles:i.query({query:({networkId:R})=>({url:`networks/${R}/sm/ise/wifi/profiles`}),providesTags:R=>R?[...R.map(({iseWifiProfileId:r})=>({type:l,id:r})),{type:l,id:"LIST"}]:[{type:l,id:"LIST"}]}),createIseProfile:i.mutation({query:({networkId:R,profile:r})=>({url:`networks/${R}/sm/ise/wifi/profiles`,method:"POST",body:r}),invalidatesTags:[{type:l,id:"LIST"}]}),updateIseProfile:i.mutation({query:({networkId:R,profile:{iseWifiProfileId:r,...A}})=>({url:`networks/${R}/sm/ise/wifi/profiles/${r}`,method:"PUT",body:A}),invalidatesTags:(R,r,A)=>r?[]:[{type:l,id:"LIST"},{type:l,id:A.profile.iseWifiProfileId}]}),deleteIseProfile:i.mutation({query:({networkId:R,iseWifiProfileId:r})=>({url:`networks/${R}/sm/ise/wifi/profiles/${r}`,method:"DELETE"}),invalidatesTags:(R,r,A)=>r?[]:[{type:l,id:"LIST"},{type:l,id:A.iseWifiProfileId}]}),deleteIseProfiles:i.mutation({async queryFn({orgId:R,networkId:r,profileIds:A}){try{const{data:S}=await(0,y.batchedApiRequest)(R,A.map(p=>({resource:`/networks/${r}/sm/ise/wifi/profiles/${p}`,operation:"destroy",body:{}})),{auth:{csrfToken:Mkiconf.authenticity_token}},{synchronous:!0});return{data:S}}catch(S){return(0,y.isApiError)(S)?{error:S}:{error:{errors:[JSON.stringify(S,null," ")]}}}},invalidatesTags:(R,r,A)=>r?[{type:l,id:"LIST"}]:[...A.profileIds.map(S=>({type:l,id:S})),{type:l,id:"LIST"}]})})}),{useFetchIseProfileQuery:a,useFetchIseProfilesQuery:h,useCreateIseProfileMutation:s,useUpdateIseProfileMutation:t,useDeleteIseProfileMutation:n,useDeleteIseProfilesMutation:E}=_},919940:(ae,x,e)=>{e.d(x,{A:()=>f});var W=e(4933),C=e(967720),g=e(869592),c=e.n(g);const y=(0,W.A)("SCHEDULE_STORE"),d={reset(l){this.dispatch(y.constants.RESET,l)},update(l){this.dispatch(y.constants.UPDATE,l)},fetch(){return(0,C.A)(c()({controller:"schedules",action:"json"}),{credentials:"same-origin"}).then(l=>l.json()).then(l=>{this.dispatch(y.constants.RESET,l)})}},f=l=>{l.store("ScheduleStore")||(l.addStore("ScheduleStore",y),l.addActions({schedule:d}))}},925470:(ae,x,e)=>{e.d(x,{U1:()=>o,o1:()=>M});var W=e(14602),C=e.n(W),g=e(652129),c=e(644200);const y=(0,g.L)().withStoreName("ForwardingRulesStore").withContextOptions([c.RJ]).create(),d=y.actions,U={updateForwardingRulesByType:(P,T)=>(O,v)=>{const L={...v().locals.latest};L[P]=T,O(d.updateLocals({latest:L}))},addPortForwardingRule:P=>(T,O)=>{const v={...O().locals.latest};v.portForwardingRules=[...v.portForwardingRules,P],T(d.updateLocals({latest:v}))},updatePortForwardingRule:(P,T,O)=>(v,L)=>{const B={...L().locals.latest},F=B.portForwardingRules.findIndex(K=>K.key===T);B.portForwardingRules[F][P]=O,v(d.updateLocals({latest:B}))},deletePortForwardingRule:P=>(T,O)=>{const v={...O().locals.latest},L=v.portForwardingRules.filter(B=>B.key!==P);v.portForwardingRules=L,T(d.updateLocals({latest:v}))},addOneToOneNatMapping:P=>(T,O)=>{const v={...O().locals.latest};v.oneToOneNatRules=[...v.oneToOneNatRules,P],T(d.updateLocals({latest:v}))},updateOneToOneNatMapping:(P,T,O)=>(v,L)=>{const B={...L().locals.latest};B.oneToOneNatRules=B.oneToOneNatRules.map(F=>F.key===T?{...F,[P]:O}:F),v(d.updateLocals({latest:B}))},deleteOneToOneNatMapping:P=>(T,O)=>{const v={...O().locals.latest};v.oneToOneNatRules=v.oneToOneNatRules.filter(L=>P!==L.key),T(d.updateLocals({latest:v}))},addOneToOneNatAllowedInbound:(P,T)=>(O,v)=>{const L={...v().locals.latest};L.oneToOneNatRules=L.oneToOneNatRules.map(B=>B.key===P?{...B,allowedInbound:[...B.allowedInbound,T]}:B),O(d.updateLocals({latest:L}))},updateOneToOneNatAllowedInbound:(P,T,O,v)=>(L,B)=>{const F={...B().locals.latest};F.oneToOneNatRules=F.oneToOneNatRules.map(K=>K.key===T?{...K,allowedInbound:K.allowedInbound.map(b=>b.key===O?{...b,[P]:v}:b)}:K),L(d.updateLocals({latest:F}))},deleteOneToOneNatAllowedInbound:(P,T)=>(O,v)=>{const L=v().locals.latest;L.oneToOneNatRules=L.oneToOneNatRules.map(B=>B.key===P?{...B,allowedInbound:B.allowedInbound.filter(F=>T!==F.key)}:B),O(d.updateLocals({latest:{...L}}))},addOneToManyNatMapping:P=>(T,O)=>{const v={...O().locals.latest};v.oneToManyNatRules=[...v.oneToManyNatRules,P],T(d.updateLocals({latest:v}))},updateOneToManyNatMapping:(P,T,O)=>(v,L)=>{const B={...L().locals.latest};B.oneToManyNatRules=B.oneToManyNatRules.map(F=>F.key===T?{...F,[P]:O}:F),v(d.updateLocals({latest:B}))},deleteOneToManyNatMapping:P=>(T,O)=>{const v={...O().locals.latest};v.oneToManyNatRules=v.oneToManyNatRules.filter(L=>L.key!==P),T(d.updateLocals({latest:v}))},addOneToManyNatPortRule:(P,T)=>(O,v)=>{const L={...v().locals.latest};L.oneToManyNatRules=L.oneToManyNatRules.map(B=>B.key===P?{...B,portRules:[...B.portRules,T]}:B),O(d.updateLocals({latest:L}))},updateOneToManyNatPortRule:(P,T,O,v)=>(L,B)=>{const F={...B().locals.latest};F.oneToManyNatRules=F.oneToManyNatRules.map(K=>K.key!==T?K:{...K,portRules:K.portRules.map(b=>b.key!==O?b:{...b,[P]:v})}),L(d.updateLocals({latest:F}))},deleteOneToManyNatPortRule:(P,T)=>(O,v)=>{const L={...v().locals.latest};L.oneToManyNatRules=L.oneToManyNatRules.map(B=>B.key!==P?B:{...B,portRules:B.portRules.filter(F=>F.key!==T)}),O(d.updateLocals({latest:L}))}},D=y.actionTypes,u=y.selectors,o=()=>y.createStore(),M={...d,...U};var m=null},927395:(ae,x,e)=>{e.d(x,{lp:()=>c,tp:()=>y});var W=e(310466);const C="Settings",g=W.kC.enhanceEndpoints({addTagTypes:[C]}).injectEndpoints({endpoints:({query:d,mutation:f})=>({fetchSettings:d({query:({networkId:l})=>({url:`networks/${l}/settings`}),providesTags:[C]}),updateSettings:f({query:({networkId:l,body:_})=>({url:`networks/${l}/settings`,method:"PUT",body:_}),invalidatesTags:[C]})}),overrideExisting:!1}),{useFetchSettingsQuery:c,useUpdateSettingsMutation:y}=g},931135:(ae,x,e)=>{e.d(x,{BR:()=>M,o1:()=>u});var W=e(652129),C=e(653806),g=e(182223),c=e(593879),y=e(522224),d=e.n(y),f=e(869592),l=e.n(f),_=e(941669),a=e.n(_),h=e(796946);const s=["routes"],t=(0,W.L)().withStoreName("SecurityApplianceRoutesStore").withModels(s).withChanges().create(),n=t.actions,E=P=>(T,O)=>{const{locals:{mxNodeId:v}}=O(),L=B=>{const F=B.data.job;(F.status==="complete"||F.status==="failed")&&(window.location=P.onCompleteRedirectUrl)};a().comet.init("/cometd"),a().comet.node_subscribe("PccBackgroundJobStatus",L,v,{job_id:P.id})},i=(P,T)=>(O,v)=>{const L=B=>{if(d().any(B.data)){const F=d().reduce(B.data,(K,b)=>{const{id:q}=b;return q&&(0,c.GT)(v(),{id:q})&&K.push({id:q,connected:b.connected,forwarding:b.forwarding}),K},[]);O(n.updateRoutesWithMerge(F))}};a().comet.init("/cometd"),a().comet.node_subscribe("RouteStates",L,P,{routeIds:T})},R=()=>(P,T)=>{const{locals:{metadata:O}}=T();P(n.updateLocals({isFetchingRoutes:!0})),window.fetch(O.updateRoutesPath,{method:"POST",redirect:"manual"}).then(v=>{v.type==="opaqueredirect"?window.location=v.url:P(n.failedRequestingRoutes())})},r=()=>(P,T)=>{P(n.requestRoutes());const O=T(),{locals:v}=O,{isFetchedRoutes:L,mxNodeId:B,pagination:F={}}=v,K={controller:"nodes",action:"routes",page:(F||{}).page||1,perPage:F.perPage,sort:v.sort,filter:v.filter};return P(n.updateLocals({isFetchingRoutes:!0})),(0,C.AT)("GET",l()((0,h.l)(K))).then(b=>{const{data:q}=b,{backgroundRouteTableUpdateJob:j}=q;if(j){P(E(j));return}const{features:{supportsMxVrf:J},routes:{filter:ee,filterData:V,items:N,metadata:w={},pagination:z}}=(0,h.i)(q),ne={filter:ee,filterData:V,nodeId:B,pagination:z,metadata:w,supportsMxVrf:J};P(n.updateLocals(ne));const Y=N.map(te=>te.id);if(P(i(B,Y)),!L&&w.isUpdateDue){P(R());return}P(n.replaceOrderedRoutes(N)),P(n.updateLocals({isFetchedRoutes:!0,isFetchingRoutes:!1,fetchCompletedAt:Date.now()/1e3})),P(n.doneRequestingRoutes())}).catch(b=>{throw P(n.updateLocals({isFetchedRoutes:!0,isFetchingRoutes:!1})),P(n.failedRequestingRoutes()),b})},A=d().debounce(P=>P(r()),600),S=P=>T=>{const O=l()({controller:"nodes",action:"get_route_stats",route_id:P});return(0,C.AT)("GET",O).then(v=>{const L=(0,g.n)(P,v.data);T(n.changeRoutes(P,{routeStats:L}))}).catch(()=>{const v={routeStats:"Could not retrieve historical route stats."};T(n.changeRoutes(P,v))}).finally(()=>{})},p=P=>T=>{T(n.updateLocals({filter:P})),A(T)},I=P=>(T,O)=>{const{locals:{pagination:v}}=O();v.page=P+1,T(n.updateLocals({pagination:v})),T(r())},U=P=>(T,O)=>{const{locals:{pagination:v}}=O();v.perPage=P,T(n.updateLocals({pagination:v})),T(r())},D=P=>T=>{T(n.updateLocals({sort:P})),T(r())},u=d().extend({},n,{fetch:r,fetchRouteStats:S,rebuild:R,updateFilter:p,updatePage:I,updatePerPage:U,updateSort:D}),o=t.actionTypes,M=()=>t.createStore();var m=null},931478:(ae,x,e)=>{e.d(x,{U1:()=>D,o1:()=>I});var W=e(14602),C=e.n(W),g=e(869592),c=e.n(g),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(652129),a=e(355286);const h=["merakirules","userrules","nonIPv6AclCapableSwitches"],s=(0,_.L)().withStoreName("SwitchAclStore").withModels(h).withChanges().create(),t=s.actions,n=o=>t.updateLocals({saving:!1,saveSuccess:!0,saveErrors:null,saveWarnings:o}),E=o=>t.updateLocals({saving:!1,saveSuccess:!1,saveErrors:o,saveWarnings:null}),i=()=>(o,M)=>{o(t.updateLocals({saving:!0}));const m=(0,a.iw)(M()),P=Object.keys(m),T=d().reduce(P,(O,v)=>(m[v].deleted&&m[v].created||(O[v]=m[v]),O),{});return l().ajax({url:c()({controller:"configure",action:"new_update_switch_acl"}),type:"POST",contentType:"application/json",dataType:"json",data:JSON.stringify({validChanges:T})}).done(O=>{d().isEmpty(O.updates)||o(t.updateUserrules(O.updates)),d().isEmpty(O.deleted)||o(t.deleteUserrulesById(O.deleted)),o(t.resetAllChanges()),o(n(O.warnings))}).fail(O=>{const v=JSON.parse(O.responseText);o(E(v.errors||[v.error]))})},R=o=>{var M=Object.assign({},o);return delete M.id,delete M.comment,delete M.created,delete M.enabled,Object.values(M).join(",")},r=()=>(o,M)=>{const m=new Set,T=d().chain((0,a.Q4)(M())).values().reject(O=>O.deleted).value().reduce((O,v)=>{var L=R(v);return m.has(L)&&!O.includes(L)?O.push(L):m.add(L),O},[]);o(t.updateLocals({duplicateRules:T}))},A=()=>o=>(o(t.requestUserrules()),l().getJSON(c()({controller:"configure",action:"switch_heterogeneous_features_json",id:"ipv6_acl"}),{credentials:"same-origin"}).done(M=>{o(t.addNonIPv6AclCapableSwitches(M))})),S=()=>o=>(o(t.requestMerakirules()),l().getJSON(c()({controller:"configure",action:"switch_meraki_acl_json"}),{credentials:"same-origin"}).done(M=>{o(t.addMerakirules(M))})),p=()=>o=>(o(t.requestUserrules()),l().getJSON(c()({controller:"configure",action:"switch_user_acl_json"}),{credentials:"same-origin"}).done(M=>{o(t.addUserrules(M)),o(r())})),I=d().extend({},t,{fetchNonIPv6AclCapableSwitches:A,fetchMerakirules:S,fetchUserrules:p,submitSettings:i,findDuplicateRules:r}),U=s.actionTypes,D=()=>s.createStore();var u=null},932891:(ae,x,e)=>{e.d(x,{U1:()=>f,b5:()=>_,o1:()=>d,q3:()=>a});var W=e(652129),C=e(793847),g=e(281034),c=e(644200);const y=(0,W.L)().withStoreName("AccessControlStore").withModels(["trustedAccessConfigs","tags"]).withContextOptions([c.RJ]).withChanges().withForm().create(),d=y.actions;d.fetchUserTags=()=>h=>(h(d.requestTags()),(0,g._Y)("user").then(s=>{h(d.addTags(s))}));const f=()=>y.createStore(),{getModifiedObjectById:l,getModifiedObjectsAsList:_,getObjectById:a}=(0,C.A)("trustedAccessConfigs")},945234:(ae,x,e)=>{e.d(x,{DR:()=>d,Lo:()=>_,OO:()=>h,Um:()=>l,eF:()=>a});var W=e(310466),C=e(869592),g=e.n(C),c=e(652129);const y=(0,c.L)().withStoreName("NodeGroupStore").create(),d=()=>y.createStore(),f=W.q9.enhanceEndpoints({addTagTypes:["PccNodeGroup"]}).injectEndpoints({endpoints:s=>({fetchPccAgentVersions:s.query({query:({deviceId:t})=>({url:g()({controller:"pcc",action:"pcc_agent_versions",id:t}),headers:{"X-Requested-With":"XMLHttpRequest","X-CSRF-TOKEN":Mkiconf.authenticity_token}}),keepUnusedDataFor:300}),fetchTags:s.query({query:()=>({url:g()({controller:"configure",action:"pcc_tags_json"}),headers:{"X-Requested-With":"XMLHttpRequest"}})}),fetchSummaryJson:s.query({query:()=>({url:g()({controller:"pcc",action:"summary_json"}),headers:{"X-Requested-With":"XMLHttpRequest"}})}),fetchPccUsersJson:s.query({query:({limit:t,offset:n})=>({url:g()({controller:"configure",action:"pcc_users_json"}),headers:{"X-Requested-With":"XMLHttpRequest"},params:{limit:t,offset:n}})})}),overrideExisting:!1}),{useFetchPccAgentVersionsQuery:l,useFetchTagsQuery:_,useFetchSummaryJsonQuery:a,useFetchPccUsersJsonQuery:h}=f},948954:(ae,x,e)=>{e.d(x,{o:()=>se,U:()=>m});var W=e(14602),C=e(941669),g=e.n(C),c=e(869592),y=e.n(c),d=e(522224),f=e.n(d),l=e(652129),_=e(512729),a=e.n(_),h=e(885732);const s=(X,Oe)=>{const H={};for(let $=0;$<X.length;$++)H[Oe[$]]=X[$];return H},n=({clients:X=[],fields:Oe=[],ouis:H={}})=>{if(X.length===0||Oe.length===0)return[];const $=Object.values(H).length,le=Oe.map(ve=>a()(ve));return X.map(ve=>{const _e=s(ve,le),Ee=$?(0,h.Xg)(_e,H):null;_e.manufacturer=Ee,_e.totalUsage=(0,h.Jv)(_e);const Se=(0,h.Es)(_e);return Object.entries(Se).forEach(([k,G])=>{_e[k]=G}),_e.ssidNumber=(0,h.Az)(_e),_e.port=(0,h.U7)(_e),_e.os=(0,h._0)({os:_e.os,manufacturer:Ee}),_e.clientType=(0,h.Be)(_e),_e})};var E=e(175670),i=e(20656);const R=["recentDeviceSerial","recentDeviceName","recentDeviceMac","status","smInstalled","switchport","ssid","usage"],r=({firstSeen:X,lastSeen:Oe})=>{const H=$=>(0,i.E)($).unix();return{firstSeen:H(X),lastSeen:H(Oe)}},A=({usage:X})=>{const Oe=X.sent||0,H=X.recv||0;return{sent:Oe,recv:H,totalUsage:Oe+H}},S=X=>Object.fromEntries(Object.entries(X).filter(([Oe])=>!R.includes(Oe))),I=(X=[])=>X.length===0?[]:X.map(H=>{const $=S(H),le=(0,h.Es)($);Object.entries(le).forEach(([k,G])=>{$[k]=G}),$.ssidName=H.ssid,$.ssidNumber=(0,h.Az)($),$.port=(0,h.U7)($),$.os=(0,h._0)($),$.clientType=(0,h.Be)($),$.hasPcc=H.smInstalled;const{firstSeen:ce,lastSeen:ve}=r($);$.firstSeen=ce,$.lastSeen=ve;const{recv:_e,sent:Ee,totalUsage:Se}=A(H);return $.recv=_e,$.sent=Ee,$.totalUsage=Se,$.vlan=H.vlan===null?"":H.vlan.toString(),$});var U=e(24510),D=e(644200),u=e(29402);const o=(0,l.L)().withStoreName("ClientListStore").withLiveTools().withModels(["nodes","ssids","useblocks","ruleuseblocks"]).withLazyModels(["clients"]).withCustomKeyedModel("groupPolicies",X=>X.group_number).withContextOptions([D.RJ]).withFlexTables().withPrefs().create(),{actions:M,createStore:m}=o,{addClients:P,replaceClients:T,updateClients:O,updateLocals:v,requestClients:L,failedRequestingClients:B,doneRequestingClients:F,clearUseblocks:K,clearRuleuseblocks:b}=M,q=({clients:X,fields:Oe,ouis:H})=>$=>{const le=n({clients:X,fields:Oe,ouis:H});$(P(le))},j=(X={})=>{const{timespan:Oe,filter:H,skip_ta2:$}=X,le={...H&&{filter:H},...Oe&&{timespan:Oe},...$&&{skip_ta2:$}};return ce=>(ce(L()),ce(v({clientsIsFetchingPages:!0})),g().getJSON(y()({controller:"usage",action:"client_list_json",params:le})).done(({clients:ve,fields:_e=[],ouis:Ee={},too_many_clients:Se=!1,num_clients:k})=>{ce(v({tooManyClients:Se,clientCount:k,lastFetchedTimespan:Oe,lastFetchedFilter:H,clientsIsFetchingPages:!1})),Se&&ve.length===0?ce(F()):ce(q({clients:ve,fields:_e,ouis:Ee}))}).fail(()=>{ce(B()),ce(F()),ce(v({clientsIsFetchingPages:!1}))}))},J=({clients:X,isFirstPage:Oe})=>H=>{const $=Oe?T:O,le=I(X);H($(le))},ee=X=>Oe=>{Oe(M.requestNodes());const H=X.map($=>g().ajax({url:`/node_groups/${$}/nodes`,type:"GET",data:{f:["id","name","mac"]}}));return Promise.all(H).then($=>{const le=f().flatten($,!0);Oe(M.addNodes(le))}).catch(()=>{Oe(M.failedRequestingNodes()),Oe(M.doneRequestingNodes())})},V=(X,Oe,H,$)=>le=>{const ce=$.map(_e=>_e.id).join(" "),ve=$.map(_e=>_e.products[0]).join(" ");return g().ajax({url:y()({controller:"usage",action:"client_useblocks"}),data:{srcs:ve,ids:ce,ssid:X,t0:Oe,t1:H}}).done(_e=>{const Ee=Object.entries(_e).map(([Se,k])=>({id:Se,useblocks:k}));le(M.updateUseblocks(Ee))})},N=(X,Oe,H,$,le)=>ce=>{(0,u.A)(y()({controller:"usage",action:"rule_useblocks"}),{queryParams:{csid:H,csrid:$,t0:X,t1:Oe,src:le},fetchOptions:{method:"GET"}}).then(({response:ve,errors:_e})=>{if(_e)return;const Ee=ve.allnode.nruseblocks[H],Se=Object.entries(Ee).map(([k,G])=>({id:k,useblocks:G}));ce(M.updateRuleuseblocks(Se))})},w=(X,Oe,H)=>$=>{const{wired_group_num:le,wireless_group_nums:ce,ssid_masks:ve}=X,_e=Oe.map(Ee=>({...H[Ee],wiredGroupNum:le,wirelessGroupNums:ce,ssidMasks:ve}));$(O(_e))},z=({clients:X,fields:Oe=[],ouis:H={}})=>$=>{if(X.length>0){const le=n({clients:X,fields:Oe,ouis:H});$(O(le))}},se={...M,fetchNodes:ee,fetchClientsList:j,searchForClients:(X={})=>{const{timespan:Oe,filter:H,skip_ta2:$,search:le}=X,ce={...H&&{filter:H},...Oe&&{timespan:Oe},...$&&{skip_ta2:$},...le&&{search:le}};return ve=>g().getJSON(y()({controller:"usage",action:"client_list_json",params:ce})).done(_e=>{ve(z(_e))})},subscribeToDBClients:X=>Oe=>{const H=$=>{$&&$.data&&$.data.clients&&Oe(M.updateLiveToolData(U.cB,$.data.clients))};X.forEach($=>{const le=g().comet.node_group_subscribe("DBClients",H,{ng_type:$});Oe(M.registerLiveToolSubscription(U.cB,le))})},deleteDBClientsSubscription:()=>X=>{X(M.deleteSubscription(U.cB))},fetchClientUseblocks:V,fetchRuleUseblocks:N,deleteClientsById:X=>Oe=>{Oe(M.actionTable.uncheckItems(U.vn,X)),Oe(M.deleteClientsById(X))},updateClientPolicies:w,processApiClients:J,setClientsFirstPageLoaded:X=>v({clientsFirstPageLoaded:X}),paginatedFetchStarted:(X,Oe)=>H=>{H(L()),H(v({clientsFirstPageLoaded:!1,clientsIsFetchingPages:!0,clientsFetchingFailed:!1,lastFetchedTimespan:X,lastFetchedFilter:Oe}))},paginatedFetchFailed:()=>X=>{X(B()),X(v({clientsFetchingFailed:!0}))},paginatedFetchDone:()=>X=>{X(F()),X(v({clientsIsFetchingPages:!1}))},updateClientsLastSeen:()=>(X,Oe)=>{var H,$,le;const ce=Oe(),ve=((H=ce.models)===null||H===void 0||($=H.clients)===null||$===void 0?void 0:$.byId)||{},_e=((le=ce.liveTools.data)===null||le===void 0?void 0:le[U.cB])||{};if(!f().isEmpty(ve)&&!f().isEmpty(_e)){const Ee=Object.keys(_e).filter(k=>k in ve);X(M.requestDetailsForClients(Ee,["lastSeen"]));const Se=Ee.map(k=>({id:k,lastSeen:_e[k].last_seen}));X(M.mergeDetailsForClients(Se,["lastSeen"]))}},clearUseblocks:K,clearRuleuseblocks:b}},950264:(ae,x,e)=>{e.d(x,{L:()=>U,U1:()=>I,ai:()=>D,o1:()=>p});var W=e(14602),C=e.n(W),g=e(652129),c=e(644200),y=e(152743),d=e(310466),f=e(869592),l=e.n(f),_=e(686663),a=e(359039),h=e(985044);const s=(0,g.L)().withStoreName("ClientVpnSettingsStore").withContextOptions([c.RJ]).create(),t=s.actions,n=(u,o,M)=>{const m=u?.[`${o}_destinations`]||"";return u?.[`${o}_state`]===M?m:""},E=u=>{var o;return(o=u.radius_msg_auth_enabled)!==null&&o!==void 0?o:u.auth_type!==h.S.radius},i=(u,o,M)=>{var m;return!((m=u[o])===null||m===void 0)&&m.length?u[o]:[{...M}]},R=(u,o)=>{const M={},m=[];if(!u)return{pccNetworks:M,smeNetworks:m};for(const P in u)if(Object.prototype.hasOwnProperty.call(u,P)){const T=u[P],O=o[P];T&&T.has_sme&&(M[P]=T),T&&O&&(T.isSelected=!0,m.push({nodeGroupId:P,name:T.name,tags:O.tags,scope:O.scope}))}return m.length||m.push({...y.f_}),{pccNetworks:M,smeNetworks:m}},r={initLatest:u=>o=>{const M=u.anyconnectVpnConfig,m={split_tunnel_destinations_include:n(M,"split_tunnel","Include"),split_tunnel_destinations_exclude:n(M,"split_tunnel","Exclude"),dynamic_split_tunnel_destinations_include:n(M,"dynamic_split_tunnel","Include"),dynamic_split_tunnel_destinations_exclude:n(M,"dynamic_split_tunnel","Exclude")},P=E(M),T=u.servers,O={activeDirectoryServers:i(T,"client_vpn_active_directory_servers",y.Py),radiusServers:i(T,"client_vpn_radius_servers",y.Oz),ldapServers:i(T,"anyconnect_vpn_ldap_servers",y.Py),samlServers:i(T,"anyconnect_vpn_saml_servers",{})},v=R(u.pccNetworks,u.pccAuthTags);o(t.updateLocals({latest:{loading:!0,anyconnectVpnConfig:{...u.anyconnectVpnConfig,...m,radius_msg_auth_enabled:P},anyconnectClientLinks:u.anyconnectClientLinks,wiredConfig:u.wiredConfig,dynamicDnsName:u.dynamicDnsName,hasIpv6Support:u.hasIpv6Support,isChinaShard:u.isChinaShard,hasPccSentry:u.hasPccSentry,hasSystemsManagerSentry:u.hasSystemsManagerSentry,groupPolicyOptions:u.groupPolicyOptions,...O,...v,customCertProps:JSON.parse(u.customCertProps),customCertGenerateCsrModal:{visible:!1},customCertUploadCertModal:{visible:!1}}}))},updateAnyconnectVpnConfigs:(u,o)=>(M,m)=>{const P={...m().locals.latest},T={...P.anyconnectVpnConfig};T[u]=o,P.anyconnectVpnConfig=T,M(t.updateLocals({latest:P}))},updateServers:(u,o,M,m)=>(P,T)=>{const O={...T().locals.latest},v=O[o].slice();v[u][M]=m,O[o]=v,P(t.updateLocals({latest:O}))},addServer:(u,o)=>(M,m)=>{const P={...m().locals.latest},T=[...P[u],o];P[u]=T,M(t.updateLocals({latest:P}))},removeServer:(u,o,M)=>(m,P)=>{const T={...P().locals.latest},O=T[u].filter((v,L)=>L!==o);T[u]=O.length?O:[{...M}],m(t.updateLocals({latest:T}))},updateSmeNetworks:(u,o,M)=>(m,P)=>{const T={...P().locals.latest},O=T.smeNetworks.slice();O[u][o]=M,o==="scope"&&(M===a.zd||M===a.sr)&&(O[u].tags=[]),T.smeNetworks=O,m(t.updateLocals({latest:T}))},addSmeNetwork:(u,o)=>(M,m)=>{const P=m().locals.latest;if(P.smeNetworks.length<o){const T={...P};T.smeNetworks.push(u),u.nodeGroupId&&(T.pccNetworks[u.nodeGroupId].isSelected=!0),M(t.updateLocals({latest:T}))}},removeSmeNetwork:u=>(o,M)=>{const m={...M().locals.latest},P=m.smeNetworks[u].nodeGroupId,T=m.smeNetworks.filter((v,L)=>L!==u);m.smeNetworks=T.length?T:[{...y.f_}];const O=m.pccNetworks[P];O&&(O.isSelected=!1,O.isFetchingTags=!1),o(t.updateLocals({latest:m}))},updatePccAuthTagOptions:u=>(o,M)=>{const m={...M().locals.latest},P={...m.pccAuthTagOptions,...u};m.pccAuthTagOptions=P,o(t.updateLocals({latest:m}))},updateSelectedPccNetworks:(u,o,M,m)=>(P,T)=>{const O={...T().locals.latest},v={...O.pccNetworks},L=v[o];L.isSelected=m;const B=v[u];B&&(B.isSelected=!m),O.pccNetworks=v;const F=O.smeNetworks.slice();F[M]={nodeGroupId:o,name:L.name,scope:a.zd,tags:[]},O.smeNetworks=F,P(t.updateLocals({latest:O}))},updatePccAuthTagOptionsLoadingStates:(u,o)=>(M,m)=>{const P={...m().locals.latest},T={...P.pccNetworks};u.forEach(O=>{const v=T[O];v.isFetchingTags=o}),P.pccNetworks=T,M(t.updateLocals({latest:P}))},updateCustomCertModalStates:(u,o)=>(M,m)=>{const P={...m().locals.latest},T={...P[u],...o};P[u]=T,M(t.updateLocals({latest:P}))},clearCustomCertModalStates:u=>(o,M)=>{const m={...M().locals.latest};m[u]={visible:!1},o(t.updateLocals({latest:m}))}},A=d.q9.injectEndpoints({endpoints:u=>({fetchNodes:u.query({query:o=>({url:l()({controller:"nodes",action:"json"}),params:o})})})}),S=d.q9.injectEndpoints({endpoints:u=>({fetchTagsForNodeGroups:u.query({query:o=>({url:_.stringifyUrl({url:l()({controller:"configure",action:"pcc_load_tags_for_ngs"}),query:{ng_ids:o.ng_ids}},{skipEmptyString:!0,skipNull:!0,arrayFormat:"bracket"})})})})}),p={...t,...r},I=()=>s.createStore(),{useFetchNodesQuery:U}=A,{useFetchTagsForNodeGroupsQuery:D}=S},950778:(ae,x,e)=>{e.d(x,{Q:()=>W.QCY,r:()=>C});var W=e(298920);const C=[0,4096,8192,12288,16384,20480,24576,28672,32768,36864,40960,45056,49152,53248,57344,61440]},952826:(ae,x,e)=>{e.d(x,{QD:()=>I,o1:()=>A});var W=e(652129),C=e(522224),g=e.n(C),c=e(941669),y=e.n(c),d=e(720506),f=e(869592),l=e.n(f);const _=["userOrganizationFollows"],a=(0,W.L)().withStoreName("FollowedOrganizationsStore").withModels(_).withChanges().withPrefs().create(),h=a.actions,s=()=>D=>(D(h.requestUserOrganizationFollows()),y().get(l()({controller:"user_organization_follows",action:"index"})).done(u=>D(h.addUserOrganizationFollows(u.org_cases)))),t=(D,u)=>{const o=["case","device","license","org"],M={};let m=null;const P=[];for(let T=0;T<o.length;T++){const O=o[T];O==="org"&&(m=D.groups.org.hits),D.groups[O].list.forEach(v=>{const L=`${D.groups[O].label}: ${u}`;P.push({name:v.org_name,eid:v.org_eid,searchMethod:L})})}return M.orgList=P,M.orgHits=m,M},n=D=>u=>(u(h.updateLocals({isSearching:!0,searchResult:{}})),y().get(l()({controller:"customer_search",action:"search"}),{query:D}).then(o=>u(h.updateLocals({isSearching:!1,searchErrors:[],searchResult:t(o.results,D)}))).fail(o=>{const M=d.A.parseErrorsFromResponse(o);u(h.updateLocals({isSearching:!1,searchErrors:M}))})),E=D=>u=>(u(h.updateLocals({isSaving:!0})),y().post(l()({controller:"user_organization_follows",action:"add_organization_to_my_list"}),{org_eid:D}).done(o=>u(h.updateUserOrganizationFollows([o.added_follow]))).then(()=>u(h.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]}))).fail(o=>{const M=d.A.parseErrorsFromResponse(o);u(h.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:M}))})),i=D=>u=>(u(h.updateLocals({isSaving:!0})),y().post(l()({controller:"user_organization_follows",action:"remove_organization_from_my_list"}),{org_eid:D}).done(o=>u(h.deleteUserOrganizationFollowsById(o.deleted_follow_ids))).then(()=>u(h.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]}))).fail(o=>{const M=d.A.parseErrorsFromResponse(o);u(h.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:M}))})),R=()=>D=>(D(h.updateLocals({isSaving:!0})),y().post(l()({controller:"user_organization_follows",action:"follow_all_linked_orgs"})).done(u=>D(h.updateUserOrganizationFollows(u.follows))).then(()=>D(h.updateLocals({isSaving:!1,saveSuccess:!0,saveErrors:[]}))).fail(u=>{const o=d.A.parseErrorsFromResponse(u);D(h.updateLocals({isSaving:!1,saveSuccess:!1,saveErrors:o}))})),r=()=>D=>(D(h.updateLocals({isFetchingLinkedOrgs:!0})),y().get(l()({controller:"followed_organizations_summary",action:"linked_orgs"})).done(u=>D(h.updateContext({linkedOrgs:u}))).then(()=>D(h.updateLocals({isFetchingLinkedOrgs:!1})))),A=g().extend({},h,{fetchUserOrganizationFollows:s,onSearch:n,onFollowOrganization:E,onUnfollowOrganization:i,onFollowLinkedOrgs:R,fetchLinkedOrgs:r}),S=a.actionTypes,p=a.selectors,I=()=>a.createStore();var U=null},954740:(ae,x,e)=>{e.d(x,{U1:()=>E,o1:()=>n});var W=e(522224),C=e.n(W),g=e(941669),c=e.n(g),y=e(869592),d=e.n(y),f=e(652129),l=e(34953);const _=["netUseBlocks","nodes"],a=(0,f.L)().withStoreName("PublicPageStore").withModels(_).create(),h=a.actions,s=(R,r,A)=>S=>c().ajax({url:d()({controller:"public",action:"json",global:!0,handle:R,timespan:A-r}),data:{f:"netuseblocks"},jsonp:"jsonp",dataType:"jsonp"}).done(p=>{var I=window.useblocks_graphseries(p.allnode.nuseblocks,r,A,[]).map(U=>({id:U[0],x:U[0],y:U[1]/l.A.MEBI}));S(h.addNetUseBlocks(I))}),t=R=>r=>{var A={f:["id","mac","lat","lng","model","product_short_description","status#","clients#","gwhops#","usage#"]};return c().ajax({url:d()({controller:"public",action:"json",global:!0,handle:R}),data:A,jsonp:"jsonp",dataType:"jsonp"}).done(S=>{var p=S.nodes;r(h.addNodes(p))})},n=C().extend({},h,{fetchNetUseBlocks:s,fetchNodes:t}),E=()=>a.createStore();var i=null},955353:(ae,x,e)=>{e.d(x,{U1:()=>m,o1:()=>u});var W=e(652129),C=e(869592),g=e.n(C),c=e(522224),y=e.n(c),d=e(941669),f=e.n(d),l=e(75244),_=e(108627);const a=["switchConfigs","switchProfileConfigs","switchNodeGroupConfig","nonStormControlCapableSwitches","supportedSwitchFeatures"],h=(0,W.L)().withStoreName("SwitchSettingsStore").withModels(a).withChanges().create(),s=h.actions,t=()=>T=>{T(s.requestSwitchNodeGroupConfig());const O=g()({controller:"manage/switch_groups",action:"switch_node_group_config"}),v=f().getJSON(O);v.fail(()=>{T(s.updateLocals({errors:["An error occurred while fetching switch network data."]}))}),v.done(L=>{T(s.addSwitchNodeGroupConfig(L))})},n=()=>T=>{T(s.requestSwitchConfigs());const O=g()({controller:"manage/switches",action:"switch_configs"}),v=f().getJSON(O);v.fail(()=>{T(s.updateLocals({errors:["An error occurred while fetching switch data."]}))}),v.done(L=>{T(s.addSwitchConfigs(L))})},E=()=>T=>{T(s.requestSwitchProfileConfigs());const O=g()({controller:"manage/switch_profiles",action:"switch_profile_configs"}),v=f().getJSON(O);v.fail(()=>{T(s.updateLocals({errors:["An error occurred while fetching switch data."]}))}),v.done(L=>{T(s.addSwitchProfileConfigs(L))})},i=()=>T=>{T(s.requestNonStormControlCapableSwitches());const O=g()({controller:"configure",action:"switch_heterogeneous_features_json",id:"storm_control"}),v=f().getJSON(O);v.fail(()=>{T(s.updateLocals({errors:["An error occurred while fetching storm control data."]}))}),v.done(L=>{T(s.addNonStormControlCapableSwitches(L))})},R=()=>T=>{T(s.requestSupportedSwitchFeatures());const O=g()({controller:"manage/switch_groups",action:"supported_switch_features"}),v=f().getJSON(O);v.fail(()=>{T(s.updateLocals({errors:["An error occurred while switch network data."]}))}),v.done(L=>{T(s.addSupportedSwitchFeatures(L))})},r=(T,O)=>v=>{const L=T.reduce((B,F)=>(B[F]={mtu_size:O},B),{});v(s.changeManySwitchConfigs(L))},A=(T,O)=>v=>{const L=T.reduce((B,F)=>(B[F]={mtu_size:O},B),{});v(s.changeManySwitchProfileConfigs(L))},S=(T,O)=>v=>{v(s.changeSwitchConfigs(T,{id:T,combined_power_enabled:O}))},p=T=>(O,v)=>{const B=v().context.network.id;O(s.changeSwitchNodeGroupConfig(B,{id:B,combined_power_enabled:T}))},I=T=>(O,v)=>{const B=v().context.network.id;O(s.changeSwitchNodeGroupConfig(B,{id:B,mtu_size:T}))},U=T=>(O,v)=>{const B=v().context.network.id;O(s.changeSwitchNodeGroupConfig(B,{id:B,disable_client_sampling_on_uplink:T}))},D=T=>y().isEmpty(T.update_messages.errors)?(O,v)=>{const L=(0,_.IQ)(v());O(s.updateSwitchNodeGroupConfig(L)),O(s.resetSwitchNodeGroupConfigChanges());const B=(0,l.T8)(v());O(s.updateSwitchConfigsWithMerge(B)),O(s.resetSwitchConfigsChanges())}:()=>null,u=y().extend({},s,{fetchSwitchConfigs:n,fetchSwitchProfileConfigs:E,fetchSwitchGroupConfig:t,fetchNonStormControlCapableSwitches:i,fetchSupportedSwitchFeatures:R,changeSwitchGroupCombinedPowerEnabled:p,changeSwitchCombinedPowerEnabled:S,onSaveSuccess:D,changeSwitchGroupMtuSize:I,changeSwitchesMtuSize:r,changeSwitchProfilesMtuSize:A,changeSwitchGroupDisableClientSamplingOnUplink:U}),o=h.actionTypes,M=h.selectors,m=()=>h.createStore();var P=null},958215:(ae,x,e)=>{e.d(x,{U1:()=>i,o1:()=>E});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(652129),d=e(758928),f=e.n(d),l=e(653806);const _=(0,y.L)().withStoreName("SensorReadingsStore").withCustomKeyedModel("latestReadingsBySensor",({serial:R})=>`${R}`).withCustomKeyedModel("sensorReadingsHistoryByInterval",({serial:R,metric:r,startTs:A,endTs:S})=>`${R}-${r}-${A}-${S}`).create(),a=_.actions,h=R=>r=>{r(a.requestLatestReadingsBySensor());const A=`/api/v1/organizations/${f().org_id}/sensor/readings/latest`;return(0,l.AT)("GET",A,R).then(S=>{const p=S.data;r(a.updateLatestReadingsBySensor(p))}).catch(S=>{r(a.updateLatestReadingsBySensor(S.xhr.responseJSON)),r(a.failedRequestingLatestReadingsBySensor())}).finally(()=>{r(a.doneRequestingLatestReadingsBySensor())})},s=R=>r=>{r(a.requestSensorReadingsHistoryByInterval());const A=`/api/v1/organizations/${f().org_id}/sensor/readings/history/byInterval`;return(0,l.AT)("GET",A,R).then(S=>{const p=S.data;r(a.updateSensorReadingsHistoryByInterval(p))}).catch(S=>{const p=S.errors;r(a.updateSensorReadingsHistoryByInterval({errors:p})),r(a.failedRequestingSensorReadingsHistoryByInterval())}).finally(()=>{r(a.doneRequestingSensorReadingsHistoryByInterval())})},t=R=>r=>(r(a.requestSensorReadingsHistoryByInterval()),r(a.updateLocals({hasFetchedAllReadingsHistoryByInterval:!1})),Promise.all(R.map(A=>{const S=`/api/v1/organizations/${f().org_id}/sensor/readings/history/byInterval`;return(0,l.AT)("GET",S,A).then(p=>p.data)})).then(A=>r(a.updateSensorReadingsHistoryByInterval(c().flatten(A,1)))).catch(A=>{const S=A.errors;r(a.updateSensorReadingsHistoryByInterval({errors:S})),r(a.failedRequestingSensorReadingsHistoryByInterval())}).finally(()=>{r(a.doneRequestingSensorReadingsHistoryByInterval()),r(a.updateLocals({hasFetchedAllReadingsHistoryByInterval:!0}))}));var n=null;const E=c().extend({},_.actions,{fetchSensorLatestReadingsBySensor:h,fetchSensorReadingsHistoryByInterval:s,fetchMultipleSensorReadingsHistoryByInterval:t}),i=()=>_.createStore()},962746:(ae,x,e)=>{e.d(x,{iB:()=>f,MQ:()=>l});var W=e(652129),C=e(310466);const g=(0,W.L)().withStoreName("SgtWanStore").create(),c="SGT_WAN",y=()=>g.createStore(),d=C.kC.enhanceEndpoints({addTagTypes:[c]}).injectEndpoints({endpoints:_=>({fetchUplinks:_.query({query:({serial:a})=>({url:`devices/${a}/appliance/uplinks/settings`}),providesTags:[c]}),updateUplinks:_.mutation({query:({serial:a,body:h})=>({url:`devices/${a}/appliance/uplinks/settings`,method:"PUT",body:h}),invalidatesTags:(a,h)=>{var s;return!(a==null||(s=a.errors)===null||s===void 0)&&s.length||h?[]:[c]}})})}),{useFetchUplinksQuery:f,useUpdateUplinksMutation:l}=d},963327:(ae,x,e)=>{e.d(x,{JM:()=>a,_q:()=>d,aK:()=>f,lI:()=>l,x7:()=>_});var W=e(652129),C=e(310466),g=e(917157);const c=(0,W.L)().create().createStore(),y=C.kC.enhanceEndpoints({addTagTypes:["portMirrors"]}).injectEndpoints({endpoints:h=>({fetchSwitchMirrors:h.query({query:({orgId:s,networkIds:t})=>({url:`organizations/${s}/switch/ports/mirrors/bySwitch${(0,g.DK)({networkIds:t})}`}),providesTags:(s,t,{networkIds:n})=>n.map(E=>({type:"portMirrors",id:E}))}),fetchStackMirrors:h.query({query:({orgId:s,networkIds:t})=>({url:`organizations/${s}/switch/stacks/ports/mirrors/byStack${(0,g.DK)({networkIds:t})}`}),providesTags:(s,t,{networkIds:n})=>n.map(E=>({type:"portMirrors",id:E}))}),updateSwitchMirror:h.mutation({query:({serial:s,mirror:t})=>({url:`devices/${s}/switch/ports/mirror`,method:"PUT",body:t}),invalidatesTags:(s,t,{networkId:n})=>[{type:"portMirrors",id:n}]}),updateStackMirror:h.mutation({query:({networkId:s,switchStackId:t,mirror:n})=>({url:`networks/${s}/switch/stacks/${t}/ports/mirror`,method:"PUT",body:n}),invalidatesTags:(s,t,{networkId:n})=>[{type:"portMirrors",id:n}]}),bulkUpdateMirror:h.mutation({query:({networkId:s,updates:t})=>({url:`networks/${s}/switch/ports/mirror/bulk`,method:"PUT",body:{updates:t}}),invalidatesTags:(s,t,{networkId:n})=>[{type:"portMirrors",id:n}]})}),overrideExisting:!1}),{useFetchSwitchMirrorsQuery:d,useFetchStackMirrorsQuery:f,useUpdateSwitchMirrorMutation:l,useUpdateStackMirrorMutation:_,useBulkUpdateMirrorMutation:a}=y},985151:(ae,x,e)=>{e.d(x,{U1:()=>Ct,o1:()=>St});var W=e(995843),C=e.n(W),g=e(905880),c=e.n(g),y=e(14602),d=e.n(y),f=e(630789),l=e.n(f),_=e(723665),a=e(652129),h=e(941669),s=e.n(h),t=e(775113),n=e(917157),E=e(253320),i=e(758928),R=e.n(i),r=e(773697),A=e(639536),S=e(425615),p=e(625306),I=e(287651),U=e(538168),D=e(305776),u=e(633453),o=e(830870),M=e(111872),m=e(22068),P=e(228369),T=e(341714),O=e(129947),v=e(104719),L=e(846064),B=e(644200),F=e(281034),K=e(653806);const b=["nodes","ssids","vlans","nodeGroups","pskGroups","eapOverrides","groupPolicies","tags","networkTags","adaptivePolicyGroups","splashSettings","systemsManager","billing","deviceTypeGroupPolicies","bonjourForwarding","ssidVpn","firewall","devices","namedVlanProfiles","apSensor","dscpTags","trafficShapingSettings","mcgClusters","mdnsSettings","azureIdps","oweTransition","tunnelSettings","ssidProfileAssignments"],q="networks/:networkId/wireless/ssids",j="networks/:networkId/groupPolicies",J="networks/:networkId/wireless/billing",ee="networks/:networkId/vlanProfiles",V="organizations/:orgId/adaptivePolicy",N="organizations/:orgId/idps/search",w="organizations/:orgId/devices",z="networks/:networkId/wireless/apSensor",ne="networks/:networkId/trafficShaping/dscpTaggingOptions",Y="organizations/:orgId/wireless/ssids/trafficShaping",te="organizations/:orgId/wireless/ssids/oweTransition/byNetwork",Te=E.A.buildId(R().locale_id,R().ng_id),me=R().org_id,Me="organizations/:orgId/campusGateway/clusters",Ie="networks/:networkId/campusGateway/ssids",ge="organizations/:orgId/campusGateway/clusters/tunneling/byCluster/byNetwork",de="organizations/:orgId/wireless/ssids/profiles/assignments",se=(0,a.L)().withModels(b).withStoreName("AccessControlStore").withContextOptions([B.RJ]).withChanges().withModal().withPrefs().withFlexTables().create(),X=se.actions,Oe=()=>t.A.urlForApi({version:"v1",path:q,networkId:Te}),H=Z=>t.A.urlForApi({version:"v1",path:`${q}/${Z}`,networkId:Te}),$=Z=>t.A.urlForApi({version:"v1",path:`${de}${(0,n.DK)(Z)}`,orgId:me}),le=Z=>t.A.urlForApi({version:"v1",path:`${te}${(0,n.DK)(Z)}`,orgId:me}),ce=Z=>t.A.urlForApi({version:"v1",path:`${z}/${Z}`,networkId:Te}),ve=Z=>t.A.urlForManage({path:"base/change_ssid",ssid:Z}),_e=()=>t.A.urlForApi({version:"v1",path:j,networkId:Te}),Ee=()=>t.A.urlForApi({version:"v1",path:`${V}/groups`,orgId:me}),Se=()=>t.A.urlForApi({version:"v1",path:N,orgId:me}),k=()=>t.A.urlForApi({version:"v1",path:J,networkId:Te}),G=Z=>t.A.urlForApi({version:"v1",path:`${w}${(0,n.DK)(Z)}`,orgId:me}),ie=()=>t.A.urlForApi({version:"v1",path:ee,networkId:Te}),fe=()=>t.A.urlForApi({version:"v1",path:ne,networkId:Te}),De=Z=>t.A.urlForApi({version:"v1",path:`${Y}${(0,n.DK)(Z)}`,orgId:me}),We=Z=>t.A.urlForApi({version:"v1",path:`${Me}${(0,n.DK)(Z)}`,orgId:me}),we=Z=>t.A.urlForApi({version:"v1",path:`${ge}${(0,n.DK)(Z)}`,orgId:me}),Ve=Z=>t.A.urlForApi({version:"v1",path:`${Ie}/${Z}/mdns`,networkId:Te}),Pe=Z=>()=>{const oe=ve(Z);s().get(oe)},Re=()=>Z=>{const oe=`${Oe()}?_show=all`;return Z(X.requestSsids()),(0,K.AT)("GET",oe).then(({data:pe})=>{pe.forEach(Q=>{Q.id=`${Q.number}`}),Z(X.addSsids(pe)),Z(X.updateLocals({loadedSsids:!0}))}).finally(()=>{Z(X.doneRequestingSsids())})},Ke=()=>Z=>{const oe=$({networkIds:[Te]});return Z(X.requestSsidProfileAssignments()),(0,K.AT)("GET",oe).then(({data:pe})=>{const Q=pe.items;Q.forEach(ue=>{var he;ue.id=ue==null||(he=ue.ssid)===null||he===void 0?void 0:he.number}),Z(X.addSsidProfileAssignments(Q))}).finally(()=>{Z(X.doneRequestingSsidProfileAssignments())})},re=Z=>oe=>{const pe=`${ce(Z)}/configuration`;return oe(X.requestApSensor()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addApSensor([{...Q,id:Z}])),oe(X.updateLocals({loadedApSensor:!0}))}).catch(()=>{oe(X.failedRequestingApSensor())}).finally(()=>{oe(X.doneRequestingApSensor())})},Ae=Z=>oe=>{const pe=`${H(Z)}/splash/settings`;return oe(X.requestSplashSettings()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addSplashSettings([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingSplashSettings())})},$e=Z=>oe=>{const pe=`${H(Z)}/systemsManager`;return oe(X.requestSystemsManager()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addSystemsManager([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingSystemsManager())})},Fe=Z=>oe=>{const pe=`${H(Z)}/identityPsks`;return oe(X.requestPskGroups()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addPskGroups(Q))}).finally(()=>{oe(X.doneRequestingPskGroups())})},Ye=Z=>oe=>{const pe=`${H(Z)}/eapOverride`;return oe(X.requestEapOverrides()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addEapOverrides([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingEapOverrides())})},Le=()=>Z=>{const oe=_e();Z(X.requestGroupPolicies()),(0,K.AT)("GET",oe).then(({data:pe})=>{pe.forEach(Q=>{Q.group_number=Q.groupPolicyId,Q.id=Q.groupPolicyId}),Z(X.addGroupPolicies(pe))}).finally(()=>{Z(X.doneRequestingGroupPolicies())})},Be=Z=>oe=>{const pe=`${H(Z)}/deviceTypeGroupPolicies`;return oe(X.requestDeviceTypeGroupPolicies()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addDeviceTypeGroupPolicies([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingDeviceTypeGroupPolicies())})},je=()=>Z=>{const oe=Ee();Z(X.requestAdaptivePolicyGroups()),(0,K.AT)("GET",oe).then(({data:pe})=>{pe.forEach(Q=>{Q.id=Q.groupId}),Z(X.addAdaptivePolicyGroups(pe))}).finally(()=>{Z(X.doneRequestingAdaptivePolicyGroups())})},ze=()=>Z=>{const oe=Se();Z(X.requestAzureIdps());const pe=JSON.stringify({type:"azure_ad"});(0,K.AT)("POST",oe,pe).then(({data:Q})=>{Z(X.addAzureIdps(Q.items))}).finally(()=>{Z(X.doneRequestingAzureIdps())})},Xe=Z=>oe=>{const pe=`${H(Z)}/bonjourForwarding`;return oe(X.requestBonjourForwarding()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addBonjourForwarding([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingBonjourForwarding())})},Ze=Z=>oe=>{const pe=`${H(Z)}/vpn`;return oe(X.requestSsidVpn()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addSsidVpn([{...Q,id:Z}]))}).finally(()=>{oe(X.doneRequestingSsidVpn())})},lt=()=>Z=>{Z(X.requestTags()),(0,F._Y)().then(oe=>{Z(X.addTags(oe)),Z(X.doneRequestingTags())})},Et=Z=>(oe,pe)=>{oe(X.requestNetworkTags()),(0,F.n$)([Z]).then(Q=>{oe(X.addNetworkTags({...(0,L.hg)(pe()),...Q}))}),oe(X.doneRequestingNetworkTags())},ft=()=>Z=>{const oe=k();return Z(X.requestBilling()),(0,K.AT)("GET",oe).then(({data:pe})=>{Z(X.addBilling([{...pe,id:Te}]))}).finally(()=>{Z(X.doneRequestingBilling())})},vt=Z=>oe=>{const pe=`${H(Z)}/firewall/l3FirewallRules`;return oe(X.requestFirewall()),(0,K.AT)("GET",pe).then(({data:Q})=>{var ue;const{rules:he}=Q,Ce=(ue=he.filter(Ue=>Ue.destCidr==="Local LAN")[0])===null||ue===void 0?void 0:ue.policy;oe(X.addFirewall([{...Q,allowLanAccess:Ce==="allow",id:Z}]))}).finally(()=>{oe(X.doneRequestingFirewall())})},Mt=async(Z,oe=null)=>{const pe={...Z,perPage:1e3,...oe&&{startingAfter:oe}},Q=G(pe),ue=await(0,K.AT)("GET",Q);let he=ue.data||[];const Ce=(0,K.pO)(ue.linkHeader,"next");if(Ce){const xe=new URLSearchParams(Ce.split("?")[1]).get("startingAfter");if(xe){const Ne=await Mt(Z,xe);he=he.concat(Ne)}}return he},yt=100,Lt=(Z={networkIds:[Te],productTypes:["wireless"]})=>oe=>{oe(X.requestDevices());const{networkIds:pe,...Q}=Z,ue=[];for(let Ce=0;Ce<pe.length;Ce+=yt)ue.push(pe.slice(Ce,Ce+yt));const he=ue.map(Ce=>Mt({...Q,networkIds:Ce}));Promise.all(he).then(Ce=>{const Ue=Ce.flat();Ue.forEach(xe=>{xe.id=xe.serial}),oe(X.addDevices(Ue))}).catch(()=>{oe(X.failedRequestingDevices())}).finally(()=>{oe(X.doneRequestingDevices())})},Dt=()=>Z=>{const oe=ie();Z(X.requestNamedVlanProfiles()),(0,K.AT)("GET",oe).then(({data:pe})=>{pe.forEach(Q=>{Q.id=Q.iname}),Z(X.addNamedVlanProfiles(pe))}).finally(()=>{Z(X.doneRequestingNamedVlanProfiles())})},Rt=()=>Z=>{const oe=fe();Z(X.requestDscpTags()),(0,K.AT)("GET",oe).then(({data:pe})=>{pe.forEach(Q=>{Q.id=Q.dscpTagValue}),Z(X.addDscpTags(pe))}).finally(()=>{Z(X.doneRequestingDscpTags())})},dt=(Z={networkIds:[Te]})=>oe=>{const pe=le(Z);oe(X.requestOweTransition()),(0,K.AT)("GET",pe).then(({data:Q})=>{const he=Q.items[0].ssids.map(Ce=>({id:Ce.number,...Ce.oweTransition}));oe(X.addOweTransition(he))}).finally(()=>{oe(X.doneRequestingOweTransition())})},et=(Z={networkIds:[Te]})=>oe=>{const pe=De(Z);oe(X.requestTrafficShapingSettings()),(0,K.AT)("GET",pe).then(({data:Q})=>{Q.items.forEach(ue=>{ue.id=ue.number}),oe(X.addTrafficShapingSettings(Q.items))}).finally(()=>{oe(X.doneRequestingTrafficShapingSettings())})},pt=(Z={networkIds:[Te]})=>oe=>{const pe=We(Z);oe(X.requestMcgClusters()),(0,K.AT)("GET",pe).then(({data:Q})=>{Q.items.forEach(ue=>{ue.id=ue.clusterId}),oe(X.addMcgClusters(Q.items))}).catch(()=>{oe(X.failedRequestingMcgClusters())}).finally(()=>{oe(X.doneRequestingMcgClusters())})},ht=(Z={networkIds:[Te]})=>oe=>{const pe=we(Z);oe(X.requestMcgClusters()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addTunnelSettings(Q.items))}).catch(()=>{oe(X.failedRequestingTunnelSettings())}).finally(()=>{oe(X.doneRequestingTunnelSettings())})},gt=Z=>oe=>{const pe=Ve(Z);oe(X.requestMdnsSettings()),(0,K.AT)("GET",pe).then(({data:Q})=>{oe(X.addMdnsSettings([{...Q,id:Z}]))}).catch(()=>{oe(X.failedRequestingMdnsSettings())}).finally(()=>{oe(X.doneRequestingMdnsSettings())})},mt=Z=>async(oe,pe)=>{var Q,ue;const he=[],Ce=(0,r.zR)(pe());!_.A.isEmpty(Ce)&&Ce[Z]&&(oe(X.resetSsidsChanges()),he.push(oe(Re())));const Ue=(0,I.xj)(pe());_.A.isEmpty(Ue)||(oe(X.resetPskGroupsChanges()),he.push(oe(Fe(Z))));const xe=(0,D.UN)(pe());!_.A.isEmpty(xe)&&xe[Z]&&(oe(X.resetEapOverridesChanges()),he.push(oe(Ye(Z))));const Ne=(0,S.pS)(pe());!_.A.isEmpty(Ne)&&Ne[Z]&&(oe(X.resetSplashSettingsChanges()),he.push(oe(Ae(Z))));const be=(0,A.tW)(pe());!_.A.isEmpty(be)&&be[Z]&&(oe(X.resetApSensorChanges()),he.push(oe(re(Z))));const Qe=(0,p.LM)(pe());!_.A.isEmpty(Qe)&&Qe[Z]&&(oe(X.resetSystemsManagerChanges()),he.push(oe($e(Z))));const qe=(0,m.$)(pe());!_.A.isEmpty(qe)&&qe[Te]&&(oe(X.resetBillingChanges()),he.push(oe(ft())));const tt=(0,U.TQ)(pe());!_.A.isEmpty(tt)&&tt[Z]&&(oe(X.resetDeviceTypeGroupPoliciesChanges()),he.push(oe(Be(Z))));const ot=(0,u.Eq)(pe());!_.A.isEmpty(ot)&&ot[Z]&&(oe(X.resetBonjourForwardingChanges()),he.push(oe(Xe(Z))));const nt=(0,o.jp)(pe());!_.A.isEmpty(nt)&&nt[Z]&&(oe(X.resetSsidVpnChanges()),he.push(oe(Ze(Z))));const rt=(0,M.Em)(pe());!_.A.isEmpty(rt)&&rt[Z]&&(oe(X.resetFirewallChanges()),he.push(oe(vt(Z))));const ct=(0,P.ae)(pe());!_.A.isEmpty(ct)&&ct[Z]&&(oe(X.resetTrafficShapingSettingsChanges()),he.push(oe(et())));const ut=(0,T.b)(pe());!_.A.isEmpty(ut)&&ut[Z]&&(oe(X.resetMdnsSettingsChanges()),he.push(oe(gt(Z))));const{hasOweTransition:_t}=((Q=pe())===null||Q===void 0||(ue=Q.context)===null||ue===void 0?void 0:ue.supportFeatures)||{};if(_t){const ke=(0,O.zd)(pe()),He=!_.A.isEmpty(ke)&&ke[Z],Ge=!_.A.isEmpty(Ce)&&Ce[Z]&&["wpaEncryptionMode","authMode"].some(Je=>Je in Ce[Z]);(He||Ge)&&(oe(X.resetOweTransitionChanges()),he.push(oe(dt())))}const ye=(0,v.H3)(pe());!_.A.isEmpty(ye)&&ye[Z]&&(oe(X.resetSsidProfileAssignmentsChanges()),he.push(oe(Ke()))),await Promise.allSettled(he)},St=_.A.extend({},X,{fetchSsids:Re,fetchSsidProfileAssignments:Ke,fetchTags:lt,fetchNetworkTags:Et,fetchPskGroups:Fe,fetchEapOverrides:Ye,fetchGroupPolicies:Le,fetchDeviceTypeGroupPolicies:Be,fetchApSensorSettings:re,fetchAdaptivePolicyGroups:je,fetchAzureIdps:ze,fetchSplashSettings:Ae,fetchSystemsManager:$e,fetchBilling:ft,fetchBonjourForwarding:Xe,fetchSsidVpn:Ze,fetchFirewall:vt,fetchDevices:Lt,fetchNamedVlanProfiles:Dt,fetchDscpTags:Rt,fetchTrafficShapingSettings:et,updateSsidNumSession:Pe,fetchMcgClusters:pt,resetAndRefetchChanges:mt,fetchMdnsSettings:gt,fetchOweTransition:dt,fetchTunnelSettings:ht}),Ot=se.actionTypes,At=se.selectors,Ct=()=>se.createStore();var Ut=null},985935:(ae,x,e)=>{e.d(x,{Tp:()=>$e,U1:()=>Fe,o1:()=>re});var W=e(14602),C=e.n(W),g=e(652129),c=e(644200),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(758928),s=e.n(h),t=e(38123),n=e.n(t),E=e(379299),i=e(653806),R=e(573173);const r=["licenses","devices","licenseSkuToMatchingNodes","nodesToMatchingLicenseSkus","changeLogEntries"],A=[c.OF],S=(0,g.L)().withStoreName("LicenseStore").withModels(r).withContextOptions(A).withChanges().withPrefs().withModal().withFlexTables().withApiJobs().withPaginatedLicenseFetch().create(),p=S.actions,I=5e3,U=Le=>Le.map(Be=>({...Be,inventory_state:(0,R.Wd)(Be.in_inventory),device_name:Be.device_name||Be.device_mac,f_expiration_date:(0,R.R8)(Be.expiration_date)})),D=()=>p.updateLocals({showSuccessFailureModal:!0,saveSuccess:!0}),u=Le=>p.updateLocals({showSuccessFailureModal:!0,saveSuccess:!1,saveErrors:Le}),o=()=>Le=>(Le(p.requestLicenses()),l().get(a()({controller:"organization",action:"license_inventory_json"}),Be=>{Le(p.addLicenses(Be))}).fail(()=>{Le(p.updateLocals({fetchingFailed:!0}))})),M=1e3,m=5e3,P=()=>{const Le=async(Be,je)=>{let ze,Xe;try{const Ze=await(0,E.UG)(je);ze=Ze.data,Xe=(0,E.DW)(Ze.nextUrl,"perPage",M,m)}catch(Ze){Be(p.setFetchingPaginatedLicensesError(Ze.message));return}Be(p.updateLicenses(ze)),Be(p.updateFetchingPaginatedLicensesProgress(ze.length)),Xe?Le(Be,Xe):Be(p.doneFetchingPaginatedLicenses())};return Be=>{Be(p.initFetchingPaginatedLicenses());const je=`${a()({controller:"organization",action:"license_inventory_json"})}?perPage=${M}`;Le(Be,je)}},T=()=>Le=>{Le(p.updateLocals({fetchingLicensesOverview:!0}));const Be=`/api/v1/organizations/${s().org_id}/licenses/overview`;return(0,i.AT)("GET",Be).then(je=>{Le(p.updateLocals({licensesOverview:je.data,fetchingLicensesOverview:!1}))},()=>{Le(p.updateLocals({fetchingFailed:!0}))})},O=()=>Le=>{Le(p.updateLocals({fetchingLicensesExpiration:!0}));const Be=`/api/v1/organizations/${s().org_id}/licenses/expiration`;return(0,i.AT)("GET",Be).then(je=>{Le(p.updateLocals({licensesExpiration:je.data,fetchingLicensesExpiration:!1}))},()=>{Le(p.updateLocals({fetchingFailed:!0}))})},v=()=>Le=>(Le(p.requestDevices()),l().get(a()({controller:"organization",action:"devices_json"}),Be=>{const je=U(Be);Le(p.addDevices(je))}).fail(()=>{Le(p.updateLocals({fetchingFailed:!0}))})),L=()=>Le=>{Le(p.updateLocals({fetchingInventoryDevicesOverview:!0}));const Be=`/api/v1/organizations/${s().org_id}/inventory/devices/overview`;return(0,i.AT)("GET",Be).then(je=>{Le(p.updateLocals({inventoryDevicesOverview:je.data,fetchingInventoryDevicesOverview:!1}))},()=>{Le(p.updateLocals({fetchingFailed:!0}))})},B=()=>Le=>(Le(p.requestChangeLogEntries()),l().get(a()({controller:"organization",action:"licensing_change_log_json"}),Be=>{Le(p.addChangeLogEntries(Be))})),F=(Le=[])=>{const Be={candidate_skus:Le.join(",")};return je=>(je(p.requestLicenseSkuToMatchingNodes()),l().get(a()({controller:"organization",action:"get_matching_nodes"}),Be).done(ze=>{je(p.addLicenseSkuToMatchingNodes(ze))}))},K=()=>Le=>l().get(a()({controller:"organization",action:"sales_contact_json"}),Be=>{Le(p.updateLocals({salesContact:Be}))}),b=()=>Le=>l().get(a()({controller:"organization",action:"convert_to_pdl_preflight"}),Be=>{Le(p.updateLocals({convertToPdlPreflight:Be}))}),q=()=>Le=>{Le(T()),Le(L()),Le(O()),Le(B())},j=()=>Le=>{Le(p.updateLocals({inventoryDataOutOfDate:!1,inventoryDataLastUpdatedAt:n()().format("YYYY-MM-DD HH:mm:ss")})),Le(v()),Le(p.clearLicenses()),P()(Le)},J=()=>Le=>{Le(q()),Le(j())},ee=()=>(Le,Be)=>{const je=Be().locals;d().get(je,["licensesOverview","licenseCount"])>I?(Le(q()),Le(p.updateLocals({inventoryDataOutOfDate:!0}))):Le(J())},V=Le=>p.updateModal({onlyLicenses:Le.only_licenses,onlyDevices:Le.only_devices,previewData:Le.preview_data,previewDataAsList:Le.preview_nonmatch_data,previewDevices:Le.devices,previewLicenses:Le.licenses,canAutomatch:Le.can_automatch,licenseSkus:Le.license_skus,skuToMatchingNodeIds:Le.sku_to_matching_node_ids,autoAssignments:Le.auto_assignments,needsConversion:Le.needs_conversion,previewDone:!0,errors:Le.errors}),N=Le=>Be=>(Be(p.updateModal({previewDone:!1})),l().get(a()({controller:"organization",action:"preview_add_devices_json",items:Le.serialsOrOrders}),je=>{if(je.only_licenses){const ze=Array.from(je.license_skus,Xe=>Xe.id);Be(F(ze)).then(()=>{Be(V(je))})}else Be(V(je))})),w=Le=>Be=>(Be(p.updateModal({previewDone:!1})),l().get(a()({controller:"organization",action:"preview_add_devices_json",items:Le.serialsOrOrders})).then(je=>{if(!d().isEmpty(je.errors))return Be(p.updateModal({errors:je.errors})),Promise.reject();if(je.only_licenses){const ze=Array.from(je.license_skus,Xe=>Xe.id);Be(F(ze)).then(()=>{Be(V(je))})}else Be(V(je));return Promise.resolve()})),z=()=>Le=>l().post(a()({controller:"organization",action:"convert_pdl_to_coterm"}),()=>{Le(p.clearLicenses()),Le(p.clearDevices()),Le(p.clearChangeLogEntries())}).fail(Be=>{let je;try{je=JSON.parse(Be.responseText).errors}catch{je="Request failed!"}alert(je)}),ne=()=>Le=>{Le(p.updateLocals({showSuccessFailureModal:!1,saveErrors:[]}))},Y=Le=>Be=>l().post(a()({controller:"organization",action:"remove_nodes_from_locale_or_ng"}),{nodes:Le}).done(()=>{Be(ee()),Be(D())}).fail(je=>{const ze=JSON.parse(je.responseText).error;Be(u(ze))}),te=(Le,Be,je)=>ze=>l().post(a()({controller:"organization",action:"move_nodes_to_network"}),{nodes:Le,locale:Be,ng:je}).done(()=>{ze(ee()),ze(D())}).fail(Xe=>{const Ze=JSON.parse(Xe.responseText).error;ze(u(Ze))}),Te=(Le,Be)=>je=>l().post(a()({controller:"organization",action:"move_nodes_to_org"}),{nodes:Le,org:Be}).done(()=>{je(ee()),je(D())}).fail(ze=>{const Xe=JSON.parse(ze.responseText).error;je(u(Xe))}),me=(Le,Be)=>()=>{if(!d().isEmpty(Le))return new Promise((je,ze)=>l().post(a()({controller:"device_license",action:"move"}),{device_license_ids:Le,dest_org_eid:Be}).done(je).fail(ze))},Me=Le=>()=>{if(!d().isEmpty(Le))return new Promise((Be,je)=>l().post(a()({controller:"device_license",action:"move_sm_seats_to_org"}),{moves:JSON.stringify(Le)}).done(Be).fail(je))},Ie=(Le,Be,je)=>ze=>new Promise(Xe=>Promise.all([ze(me(Le,Be)),ze(Me(je))]).then(()=>{ze(ee()),Xe()}).catch(Ze=>{const lt=JSON.parse(Ze.responseText).error;ze(u(lt)),Xe()})),ge=Le=>Be=>{const je=a()({controller:`/api/v1/organizations/${Le.org}/licenses/${Le.id}`,global:!0});return l().ajax({type:"PUT",url:je,data:JSON.stringify({deviceSerial:null}),dataType:"json",contentType:"application/json"}).done(()=>{Be(ee()),Be(D())}).fail(ze=>{const Xe=JSON.parse(ze.responseText).error;Be(u(Xe))})},de=Le=>(Be,je)=>{const ze=a()({controller:`/api/v1/organizations/${Le.org}/licenses/`,global:!0});l().ajax({type:"GET",url:ze,data:{deviceSerial:Le.serial},dataType:"json",contentType:"application/json"}).done(Xe=>{const Ze=je().locals;Be(p.updateLocals({assignedLicenses:{...Ze.assignedLicenses,[Le.serial]:Xe}}))}).fail(Xe=>{const Ze=JSON.parse(Xe.responseText).error;Be(u(Ze))})},se=Le=>Be=>l().post(a()({controller:"device_license",action:"assign"}),{assignments:Le}).done(()=>{Be(ee()),Be(D())}).fail(je=>{const ze=JSON.parse(je.responseText).error;Be(u(ze))}),X=Le=>Be=>l().post(a()({controller:"organization",action:"reset_burning_wait_time_grace_period"}),{devices:Le}).done(()=>{Be(ee()),Be(D())}).fail(je=>{const ze=JSON.parse(je.responseText).error;Be(u(ze))}),Oe=Le=>Be=>l().post(a()({controller:"organization",action:"unclaim_devices"}),{items:Le}).done(()=>{Be(ee()),Be(D())}).fail(je=>{const ze=JSON.parse(je.responseText).error;Be(u(ze))}),H=Le=>Be=>{Be(p.updateLocals({orderKeysObj:Le}))},$=Le=>{let Be=0;const je={};return Object.values(Le).forEach(ze=>{Object.entries(ze).forEach(([Xe,Ze])=>{const[lt,Et]=Xe.split(",");Ze>0&&(je[Be]={sku:Et,count:Ze,node_id:lt},Be++)})}),je},le=Le=>(Be,je)=>{const ze=je().modal,Xe=je().locals;let Ze={};if(ze&&ze.isAutoAssignmentsApproved&&!d().isEmpty(ze.autoAssignments)?Ze=ze.autoAssignments:Xe&&!d().isEmpty(Xe.licenseAssignments)&&(Ze=$(Xe.licenseAssignments)),!d().isEmpty(Ze))return l().post(a()({controller:"device_license",action:"assign"}),{assignments:Ze,license_ids:Le}).done(()=>{Be(p.updateLocals({licenseAssignmentSuccess:!0}))}).fail(lt=>{const Et=JSON.parse(lt.responseText).error;Be(p.updateLocals({licenseAssignmentSuccess:!1,licenseAssignmentErrors:Et}))})},ce=(Le,Be=[])=>Object.values(Le).reduce((je,ze,Xe)=>(Be.length&&(ze.available_lic_ids=Be),ze.count>0&&(je[Xe]=ze),je),{}),ve=(Le,Be)=>l().post(a()(Be)).done(()=>{Le(p.updateLocals({licenseAssignmentSuccess:!0})),Le(J())}).fail(je=>{const ze=JSON.parse(je.responseText).error;Le(p.updateLocals({licenseAssignmentSuccess:!1,licenseAssignmentErrors:ze}))}),_e=(Le=[])=>(Be,je)=>{const{addSmSeatAssignments:ze}=je().locals;if(d().isEmpty(ze))return;const Xe=ce(ze,Le);return ve(Be,{controller:"device_license",action:"add_sm_seats_to_network",add_seats:Xe})},Ee=(Le=[])=>(Be,je)=>{const{renewSmSeatAssignments:ze}=je().locals;if(d().isEmpty(ze))return;const Xe=ce(ze,Le);return ve(Be,{controller:"device_license",action:"renew_sm_seats_in_network",renew_seats:Xe})},Se=Le=>{const Be={};return Object.entries(Le).forEach(([je,ze])=>{const Xe=ze.localeId,Ze=ze.ngEid;Be[Xe||Ze]||(Be[Xe||Ze]={nodes:[],locale:Xe,ng:Ze}),Be[Xe||Ze].nodes.push(je)}),Be},k=()=>(Le,Be)=>{const je=Be().locals;if(!je||d().isEmpty(je.networkAssignments))return;const ze=Se(je.networkAssignments);if(!d().isEmpty(ze))return l().post(a()({controller:"organization",action:"move_nodes_to_networks"}),{assignments:ze}).done(()=>{Le(p.updateLocals({networkAssignmentSuccess:!0}))}).fail(Xe=>{const Ze=JSON.parse(Xe.responseText).error;Le(p.updateLocals({networkAssignmentSuccess:!1,networkAssignmentErrors:Ze}))})},G=Le=>Be=>{Be(p.updateLocals({claimSuccess:!0})),Promise.all([Be(le(Le.data.device_license_ids)),Be(Ee(Le.data.device_license_ids)),Be(_e(Le.data.device_license_ids)),Be(k())]).then(()=>{Be(J())}).catch(()=>{Be(J())})},ie=Le=>Be=>{let je=[];try{je=JSON.parse(Le)}catch{Le?je.push(Le):je.push("This claim has failed. Please try again or contact Meraki Support.")}Be(p.updateLocals({claimSuccess:!1,claimErrors:je}))},fe=()=>Le=>{Le(p.deleteLocals("networkAssignments"))},De=()=>Le=>{Le(p.deleteLocals("licenseAssignments")),Le(p.deleteLocals("addSmSeatAssignments")),Le(p.deleteLocals("renewSmSeatAssignments"))},We=()=>Le=>{Le(p.deleteLocals("licenseAssignments")),Le(p.deleteLocals("networkAssignments")),Le(p.deleteLocals("claimSuccess")),Le(p.deleteLocals("licenseAssignmentSuccess")),Le(p.deleteLocals("networkAssignmentSuccess")),Le(p.clearModal())},we=()=>Le=>{Le(p.deleteLocals("orderKeysObj"))},Ve=()=>Le=>{Le(p.updateModal({isAutoAssignmentsApproved:!0}))},Pe=()=>Le=>{Le(p.updateModal({isAutoAssignmentsApproved:!1}))},Re=Le=>Be=>new Promise((je,ze)=>{Be(p.updateLocals({creatingNetwork:!0})),l().post(a()({controller:"organization",action:"create_network"}),Le).done(Xe=>{Be(p.fetchAdministeredOrgs()).then(()=>{Be(p.updateLocals({createNetworkSuccess:!0})),je(Xe.ng_id)})}).fail(Xe=>{const Ze=JSON.parse(Xe.responseText).error;Be(p.updateLocals({createNetworkSuccess:!1,createNetworkErrors:Ze})),ze()}).always(()=>{Be(p.updateLocals({creatingNetwork:!1}))})}),Ke=()=>Le=>{Le(p.deleteLocals("creatingNetwork")),Le(p.deleteLocals("createNetworkSuccess")),Le(p.deleteLocals("createNetworkErrors"))},re=d().extend({},p,{fetchEmAll:J,fetchMetrics:q,fetchInventory:j,refetchData:ee,fetchLicenses:o,fetchPaginatedLicenses:P,fetchLicensesOverview:T,fetchLicensesExpiration:O,fetchDevices:v,fetchInventoryDevicesOverview:L,fetchLicensingChangeLog:B,fetchSalesContact:K,fetchConvertToPdlPreflight:b,fetchPreviewItems:N,fetchPreviewItemsPromise:w,convertPerDeviceOrgToCotermOrg:z,hideSuccessFailureModal:ne,removeNodes:Y,moveToNetwork:te,moveToOrg:Te,moveAllLicensesToOrg:Ie,assignLicenses:se,resetGracePeriod:X,unclaimDevices:Oe,setSerialsOrOrders:H,fetchMatchingNodes:F,assignLicensesFromState:le,renewSMLicensesFromState:Ee,assignSMLicensesFromState:_e,postClaimSuccessActions:G,postClaimFailedActions:ie,resetNetworkAssignments:fe,resetLicenseAssignments:De,resetClaimState:We,removeOrderKeys:we,approveAutoAssignments:Ve,rejectAutoAssignments:Pe,createNetwork:Re,resetCreateNetworkState:Ke,unassignLicense:ge,getAssignedLicenses:de}),Ae=S.actionTypes,$e=S.selectors,Fe=()=>S.createStore();var Ye=null},986079:(ae,x,e)=>{e.d(x,{j:()=>R,o:()=>_});var W=e(14602),C=e.n(W),g=e(522224),c=e.n(g),y=e(646894),d=e.n(y),f=e(624923);const l={setForm:"SET_FORM",updateForm:"UPDATE_FORM",updateFormDeep:"UPDATE_FORM_DEEP",updateFormWithErrors:"UPDATE_FORM_WITH_ERRORS",updateFormDeepWithErrors:"UPDATE_FORM_DEEP_WITH_ERRORS",clearForm:"CLEAR_FORM"},_={setForm:r=>({type:l.setForm,form:r}),updateForm:r=>({type:l.updateForm,form:r}),updateFormDeep:(r,A,S)=>({type:l.updateFormDeep,path:r,key:A,value:S}),updateFormWithErrors:(r,A)=>({type:l.updateFormWithErrors,form:r,errors:A}),updateFormDeepWithErrors:(r,A,S,p)=>({type:l.updateFormDeepWithErrors,path:r,key:A,value:S,errors:p}),clearForm:()=>({type:l.clearForm})},a={errors:{}},h=r=>["errors"].concat((0,f.NB)(r)),s=(r,A,S,p)=>{const I=A.reverse().reduce((U,D)=>({[D]:U}),{[S]:{$set:p}});return d()(r,I)},t=(r,A)=>A.reduce((S,p,I)=>{const U=A.slice(0,I),D=(0,f.MZ)([...U,p])(r);return!c().isObject(D)&&!c().isArray(D)?s(S,U,p,{}):S},r),n=(r,A,S,p)=>{const I=[...(0,f.NB)(A)];return s(t(r,I),I,S,p)},E=(r=a,A)=>{switch(A.type){case l.setForm:return{...a,...A.form};case l.clearForm:return{...a};case l.updateForm:return{...r,...A.form};case l.updateFormDeep:{const S=n(r,A.path,A.key,A.value),p=h(A.path),I=t(S,p),U=c().omit((0,f.MZ)(p)(I),A.key);return s(I,p.slice(0,p.length-1),p[p.length-1],U)}case l.updateFormWithErrors:return{...r,...A.form,errors:A.errors};case l.updateFormDeepWithErrors:{const S=n(r,A.path,A.key,A.value);return n(S,h(A.path),A.key,A.errors)}default:return r}},i={getFlattenedFormErrors:r=>(0,f.s8)(r.form.errors)},R=()=>({actions:_,reducer:E,selectors:i,actionTypes:l})},988470:(ae,x,e)=>{e.d(x,{CV:()=>A,E5:()=>P,FY:()=>T,Gc:()=>i,Gg:()=>o,Nt:()=>S,R2:()=>p,Rr:()=>L,S0:()=>K,S1:()=>b,Tc:()=>v,Tn:()=>n,Vs:()=>I,YF:()=>E,YQ:()=>u,dO:()=>B,eU:()=>m,j:()=>M,ki:()=>D,o1:()=>d,ol:()=>O,s$:()=>F,sk:()=>R,xv:()=>U});var W=e(652129),C=e(310466),g=e(464193);const c=(0,W.L)().withStoreName("OutageOverviewStore").create(),y=()=>c.createStore(),d=c.actions,f=C.kC.enhanceEndpoints({addTagTypes:["Configs"]}).injectEndpoints({endpoints:j=>({fetchConfigs:j.query({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/networks`}),providesTags:()=>[{type:"Configs",id:"LIST"}]}),createConfigs:j.mutation({query:({organizationId:J,configs:ee})=>({url:`organizations/${J}/actionBatches`,method:"POST",body:{confirmed:!0,synchronous:!0,actions:ee}}),invalidatesTags:["Configs","Networks"]}),updateConfig:j.mutation({query:({organizationId:J,networkId:ee,data:V})=>({url:`organizations/${J}/extensions/thousandEyes/networks/${ee}`,method:"PUT",body:V}),invalidatesTags:["Configs"]}),deleteConfig:j.mutation({query:({organizationId:J,networkId:ee})=>({url:`organizations/${J}/extensions/thousandEyes/networks/${ee}`,method:"DELETE"}),invalidatesTags:["Configs","Networks"]}),fetchResponseTimeStats:j.query({query:({organizationId:J,networkId:ee})=>({url:`organizations/${J}/extensions/thousandEyes/networks/${ee}`})})})}),l=C.kC.injectEndpoints({endpoints:j=>({createTests:j.mutation({query:({organizationId:J,tests:ee})=>({url:`organizations/${J}/actionBatches`,method:"POST",body:{confirmed:!0,synchronous:!0,actions:ee}})})})}),_=C.kC.enhanceEndpoints({addTagTypes:["Networks"]}).injectEndpoints({endpoints:j=>({fetchEligibleNetworks:j.query({query:({organizationId:J,installed:ee})=>({url:ee===void 0?`organizations/${J}/extensions/thousandEyes/networks/supported`:`organizations/${J}/extensions/thousandEyes/networks/supported?agentInstalled=${ee}`}),providesTags:()=>[{type:"Networks",id:"LIST"}]}),fetchLicenseState:j.query({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/licenseCheck`})}),saveUserToken:j.mutation({query:({organizationId:J,userToken:ee,teEmail:V})=>({url:`organizations/${J}/extensions/thousandEyes/saveToken`,body:{userToken:ee,userEmailIdentifier:V},method:"POST"})}),accountLink:j.mutation({query:({organizationId:J,teAccountIdentifier:ee,accountName:V,agentToken:N})=>({url:`organizations/${J}/extensions/thousandEyes/accountLink`,body:{teAccountIdentifier:ee,accountName:V,agentToken:N},method:"POST"})}),deleteAccount:j.mutation({query:({organizationId:J,id:ee})=>({url:`organizations/${J}/extensions/thousandEyes/deleteAccount/${ee}`,method:"DELETE"})}),deleteUserAccount:j.mutation({query:({organizationId:J,teUserEmailIdentifier:ee})=>({url:`organizations/${J}/extensions/thousandEyes/deleteUserAccount`,method:"POST",body:{teUserEmailIdentifier:ee}})}),fetchAccountGroups:j.query({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/accountGroups`,method:"GET"})})})}),a=C.J5.enhanceEndpoints({addTagTypes:["Agents"]}).injectEndpoints({endpoints:j=>({fetchIsLinked:j.query({query:()=>({url:`${g.A.THOUSANDEYES_ENDPOINT_URL}/is_linked`})}),createNewAccount:j.query({query:()=>({url:`${g.A.THOUSANDEYES_ENDPOINT_URL}/get_trial`})}),fetchAgentList:j.query({query:()=>({url:`${g.A.THOUSANDEYES_ENDPOINT_URL}/agent_list`}),providesTags:()=>[{type:"Agents",id:"LIST"}]}),fetchAgentTests:j.query({query:({networkId:J})=>({url:`${g.A.THOUSANDEYES_ENDPOINT_URL}/agent_tests?networkId=${J}`})})}),overrideExisting:!1}),h=C.kC.injectEndpoints({endpoints:j=>({fetchDeployedTestNetworks:j.query({query:({organizationId:J,templateId:ee,userInputPayload:V})=>{let N=`organizations/${J}/extensions/thousandEyes/tests/networksDeployed?templateId=${ee}`;return V.tenant&&(N+=`&tenant=${V.tenant}`),V.targetUrl&&(N+=`&targetUrl=${V.targetUrl}`),{url:N}},keepUnusedDataFor:1})})}),s=C.kC.enhanceEndpoints({addTagTypes:["FreeTests"]}).injectEndpoints({endpoints:j=>({fetchFreeTests:j.query({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/freeTests`}),providesTags:()=>[{type:"FreeTests",id:"LIST"}]}),provisionTests:j.mutation({query:({organizationId:J,uniquePayloadId:ee})=>({url:`organizations/${J}/extensions/thousandEyes/freeTests`,method:"POST",body:{uuid:ee}}),invalidatesTags:["FreeTests"]})})}),t=C.kC.enhanceEndpoints({addTagTypes:["OAuth2"]}).injectEndpoints({endpoints:j=>({getThousandEyesOAuth2AuthorizeUrl:j.mutation({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/oauth2AuthorizeUrl`,method:"GET"})}),getThousandEyesOAuth2Success:j.query({query:({organizationId:J})=>({url:`organizations/${J}/extensions/thousandEyes/oauth2Status`,method:"GET"}),keepUnusedDataFor:0})})}),{useFetchConfigsQuery:n,useCreateConfigsMutation:E,useUpdateConfigMutation:i,useDeleteConfigMutation:R,useFetchResponseTimeStatsQuery:r}=f,{useCreateTestsMutation:A}=l,{useFetchIsLinkedQuery:S,useLazyFetchIsLinkedQuery:p,useLazyCreateNewAccountQuery:I,useFetchAgentListQuery:U,useFetchAgentTestsQuery:D}=a,{useFetchEligibleNetworksQuery:u,useFetchLicenseStateQuery:o,useLazyFetchAccountGroupsQuery:M,useSaveUserTokenMutation:m,useAccountLinkMutation:P,useDeleteAccountMutation:T,useDeleteUserAccountMutation:O}=_,{useFetchDeployedTestNetworksQuery:v}=h,{useProvisionTestsMutation:L,useFetchFreeTestsQuery:B}=s,{useGetThousandEyesOAuth2AuthorizeUrlMutation:F,useLazyGetThousandEyesOAuth2SuccessQuery:K}=t,b=()=>c.createStore();var q=null},989981:(ae,x,e)=>{e.d(x,{A:()=>l});var W=e(941669),C=e.n(W),g=e(4933),c=e(869592),y=e.n(c);const d=(0,g.A)("SWITCH_STACKS_STORE"),f={reset(_){this.dispatch(d.constants.RESET,_)},fetch(){return C().get(y()({controller:"configure",action:"switch_stacks_json"})).done(_=>{this.dispatch(d.constants.RESET,_)})},create(_){return C().post(y()({controller:"configure",action:"create_switch_stack"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},update(_){return C().post(y()({controller:"configure",action:"update_switch_stack"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},remove(_){return C().post(y()({controller:"configure",action:"delete_switch_stack"}),_).done(a=>{this.dispatch(d.constants.RESET,a)})},replaceSwitch(_){return C().post(y()({controller:"configure",action:"replace_switch_in_stack"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})},setRouterIdentifier(_){return C().post(y()({controller:"configure",action:"set_stack_ospf_router_identifier"}),_).done(a=>{this.dispatch(d.constants.UPDATE,a)})}};function l(_){_.store("SwitchStackStore")||(_.addStore("SwitchStackStore",d),_.addActions({switchStacks:f}))}},992023:(ae,x,e)=>{e.d(x,{Ay:()=>u});var W=e(540590),C=e.n(W),g=e(14602),c=e.n(g),y=e(522224),d=e.n(y),f=e(941669),l=e.n(f),_=e(869592),a=e.n(_),h=e(758928),s=e.n(h),t=e(4933),n=e(59347),E=e(776545),i=e(775113),R=e(653806),r=e(509365),A=e(917157);const S=(0,t.A)("NODE_STORE",{indices:["network_eid"]}),p=["name","tags","address","network_eid","notes","lat","lng","ap_port_profile_id","emergency_address"];function I(o,M){const m=o.usageGraph,P=[];let T=0;const O=1024;return P.push([E.A.secondsToMilliseconds(M),T]),m.forEach(v=>{T+=(v.sent+v.received)*O,P.push([Date.parse(v.endTime),T])}),P}function U(o){const M={path:"devices/:serial/cellularGateway/cellularUsageHistoryByTime",serial:o.serial,resolution:o.resolution,t0:o.t0,t1:o.t1,version:"v1"};return i.A.urlForApi(M)}const D={updateWithNodesFromRedux(o){this.dispatch(S.constants.UPDATE,d().values(o))},update(o,M,m={}){this.dispatch(S.constants.UPDATE,d().extend({},o,M));const P=d().pick(M,p);if(m.save!==!1&&d().size(P)>0)return l().ajax({url:`/nodes/${o.id}`,type:"PUT",data:P}).done(T=>this.dispatch(S.constants.UPDATE,T))},image:{update(o={}){if(!o.nodeId)return console.warn("NodeStore: actions.image.update called without 'nodeId'");if(!o.file)return console.warn("NodeStore: actions.image.update called without 'file'");var M=new FormData;M.append("image",o.file);var m=l().ajax({url:`/nodes/${o.nodeId}/node_images`,type:"POST",processData:!1,contentType:!1,data:M});return m.done(P=>{this.dispatch(S.constants.UPDATE,{id:o.nodeId,images:d().extend({},P.image_urls,{id:P.id}),is_image_missing_from_s3:!1})}),m},remove(o={}){if(!o.id)return console.warn("NodeStore: actions.image.remove called without 'id'");if(!o.nodeId)return console.warn("NodeStore: actions.image.update called without 'nodeId'");var M=l().ajax({url:`/node_images/${o.id}`,type:"DELETE"});return M.done(()=>{this.dispatch(S.constants.UPDATE,{id:o.nodeId,images:void 0})}),M}},remove(o){var M=l().post(a()({controller:"node_group",action:"remove_nodes"}),{nodes:o.serials}).done(()=>{this.dispatch(S.constants.REMOVE,{ids:o.ids})});return M},reset(o){this.dispatch(S.constants.RESET,o)},fetch(o={}){var M={f:["default","has_ms_ipv6_beta"],ids:o.id?o.id:void 0},m=(P={skip_expensive:!0})=>l().ajax({url:a()({controller:"nodes",action:"json"}),jsonp:"jsonp",type:"GET",dataType:"jsonp",data:d().extend({},M,d().omit(o,"id"),P)}).done(T=>{if(d().isEmpty(T.skipped_expensive_fields)||m({skip_expensive:!1,f:d().union(T.skipped_expensive_fields,["id"])}),s().products=d().extend({},s().products,T.products),o.id){var O=d().values(T.nodes)[0];this.dispatch(S.constants.UPDATE,O)}else this.dispatch(S.constants.UPDATE,d().values(T.nodes))});return m()},fetchGraphs(o={}){return o.id?o.t0?o.t1?(d().extend(o,{for_new_node_details:!0}),l().ajax({url:a()({controller:"nodes",action:"show3_graph_data"}),type:"GET",data:o}).done(M=>{const m=this.flux.stores.NodeStore.get(o.id);let P={};m&&m.series&&(P=m.series),M.timespan=M.t1-M.t0,this.dispatch(S.constants.UPDATE,{id:o.id,series:d().extend(P,M)})})):console.warn("NodeStore: actions.fetchGraphs called without 't1'"):console.warn("NodeStore: actions.fetchGraphs called without 't0'"):console.warn("NodeStore: actions.fetchGraphs called without 'id'")},fetchCellularUsageGraph(o={}){if(!o.serial)return console.warn("NodeStore: actions.fetchCellularUsageGraph called without 'serial'");if(!o.t0)return console.warn("NodeStore: actions.fetchCellularUsageGraph called without 't0'");if(!o.t1)return console.warn("NodeStore: actions.fetchCellularUsageGraph called without 't1'");const M=E.A.momentToUTCEpochTime(o.t0),m=E.A.momentToUTCEpochTime(o.t1),T=m-M>604800?14400:3600,O={serial:o.serial,resolution:T,t0:M,t1:m},v=U(O),L=l().ajax({url:v,type:"GET",data:{serial:O.serial,resolution:O.resolution,t0:O.t0,t1:O.t1}});return L.done(B=>{this.dispatch(S.constants.UPDATE,{id:o.id,cellularUsageHistory:I(B,M)})}),L.fail(()=>{this.dispatch(S.constants.UPDATE,{id:o.id,cellularUsageHistory:[]})}),L},fetchMeshThroughput(o={}){return o.id?o.timespan?l().ajax({url:a()({controller:"nodes",action:"graph3_throughput_data"}),type:"GET",data:o}).done(M=>{const m=d().map(M,P=>({x:P.time,y:P.value}));this.dispatch(S.constants.UPDATE,{id:o.id,meshThroughput:m})}):console.warn("NodeStore: actions.fetchGraphs called without 'timespan'"):console.warn("NodeStore: actions.fetchGraphs called without 'id'")},fetchClients(o={}){return o.id?o.serial?o.timespan?l().ajax({url:`/api/v1/devices/${o.serial}/clients`,type:"GET",data:{timespan:o.timespan}}).done(M=>{d().each(M,m=>{m.usage=m.usage.sent+m.usage.recv,m.description=m.description||m.mdnsName||m.dhcpHostname||m.mac}),this.dispatch(S.constants.UPDATE,{id:o.id,clientsData:{clients:M,timespan:o.timespan}})}):console.warn("NodeStore: actions.fetchClients called without 'timespan'"):console.warn("NodeStore: actions.fetchClients called without 'serial'"):console.warn("NodeStore: actions.fetchClients called without 'id'")},fetchMeshRoutes(o={}){return o.id?l().ajax({url:`/nodes/${o.id}/mesh_info`,type:"GET",data:{timespan:o.timespan}}).done(M=>{this.dispatch(S.constants.UPDATE,{id:o.id,routes:M.routes})}):console.warn("NodeStore: actions.fetchMeshRoutes called without 'id'")},fetchMeshNeighbors(o={}){return o.id?l().ajax({url:`/nodes/${o.id}/mesh_info`,type:"GET",data:{timespan:o.timespan}}).done(M=>{this.dispatch(S.constants.UPDATE,{id:o.id,neighbors:M.neighbors})}):console.warn("NodeStore: actions.fetchMeshNeighbors called without 'id'")},fetchFirewallTestsStatus(o={}){return o.id?o.timespan?l().ajax({url:a()({controller:"nodes",action:`${o.id}/firewall_tests_status`}),type:"GET",data:{timespan:o.timespan}}).done(M=>{M.timespan=M.t1-M.t0,this.dispatch(S.constants.UPDATE,{id:o.id,firewallTestsStatus:M})}):console.warn("NodeStore: actions.fetchFirewallTestsStatus called without 'timespan'"):console.warn("NodeStore: actions.fetchFirewallTestsStatus called without 'id'")},fetchCatalystWirelessStat(o={}){const M=s().org_id;return o.serial?l().ajax({url:`/api/v1/organizations/${M}/wireless/devices/wirelessControllers/byDevice`,type:"GET",data:{serials:[o.serial]}}).done(m=>{var P,T,O,v;const L=this.flux.stores.NodeStore.get(o.id);let B={};L&&L.catalyst_wireless_data&&(B=L.catalyst_wireless_data);const K=(0,A.cx)(m?.items).get(o.serial),b=(K==null||(P=K.details)===null||P===void 0||(T=P.find(J=>J.name==="catalyst serial"))===null||T===void 0?void 0:T.value)||"",q=K==null||(O=K.tags)===null||O===void 0?void 0:O[0],j={tags:{siteTag:q?.site,policyTag:q?.policy,rfTag:q?.rf},physicalSerial:b,mode:(0,A.o3)(K?.mode),countryCode:K?.countryCode,model:K?.model,wlcJoinTime:K.joinedAt,wirelessController:{serial:K==null||(v=K.controller)===null||v===void 0?void 0:v.serial}};this.dispatch(S.constants.UPDATE,{id:o.id,catalyst_wireless_data:d().extend(B,j)})}):console.warn("NodeStore: actions.fetchCatalystWirelessStat called without 'serial'")},fetchWirelessControllerInfo(o={}){const M=s().org_id;return o.wlcSerial?l().ajax({url:`/api/v1/organizations/${M}/devices`,type:"GET",data:{serials:[o.wlcSerial]}}).done(m=>{var P;const T=this.flux.stores.NodeStore.get(o.id);let O={};T&&T.catalyst_wireless_data&&(O=T.catalyst_wireless_data);const L=(0,A.cx)(m).get(o.wlcSerial),B={...(P=O)===null||P===void 0?void 0:P.wirelessController,url:L?.url,name:L?.name,mac:L?.mac};this.dispatch(S.constants.UPDATE,{id:o.id,catalyst_wireless_data:{...O,wirelessController:B}})}):console.warn("NodeStore: actions.fetchWirelessControllerInfo called without 'wlcSerial'")},fetchWirelessControllerFirmware(o={}){const M=s().org_id;return o.wlcSerial?l().ajax({url:`/api/v1/organizations/${M}/wirelessController/overview/byDevice`,type:"GET",data:{serials:[o.wlcSerial]}}).done(m=>{var P,T,O;const v=this.flux.stores.NodeStore.get(o.id);let L={};v&&v.catalyst_wireless_data&&(L=v.catalyst_wireless_data);const B=m==null||(P=m.items)===null||P===void 0||(T=P[0])===null||T===void 0?void 0:T.firmware.version.shortName;this.dispatch(S.constants.UPDATE,{id:o.id,catalyst_wireless_data:{...L,wirelessController:{...(O=L)===null||O===void 0?void 0:O.wirelessController,firmware_version:B}}})}):console.warn("NodeStore: actions.fetchWirelessControllerFirmware called without 'wlcSerial'")},fetchWirelessControllerStatus(o={}){const M=s().org_id;return o.wlcSerial?l().ajax({url:`/api/v1/organizations/${M}/devices/statuses`,type:"GET",data:{serials:[o.wlcSerial]}}).done(m=>{var P,T;const O=this.flux.stores.NodeStore.get(o.id);let v={};O&&O.catalyst_wireless_data&&(v=O.catalyst_wireless_data),this.dispatch(S.constants.UPDATE,{id:o.id,catalyst_wireless_data:{...v,wirelessController:{...(P=v)===null||P===void 0?void 0:P.wirelessController,status:m==null||(T=m[0])===null||T===void 0?void 0:T.status}}})}):console.warn("NodeStore: actions.fetchWirelessControllerStatus called without 'wlcSerial'")},fetchCatalystWirelessPowerInfo(o={}){const M=s().org_id;return s().ng_id?l().ajax({url:`/api/v1/organizations/${M}/wireless/devices/ethernet/statuses`,type:"GET",data:{networkIds:[`N_${s().ng_id}`]}}).done(m=>{var P,T,O,v;const L=this.flux.stores.NodeStore.get(o.id);let B={};L&&L.catalyst_wireless_data&&(B=L.catalyst_wireless_data);const K=(0,A.cx)(m).get(o.serial),b=(0,r.T7)(K==null||(P=K.power)===null||P===void 0?void 0:P.mode),q=(0,r.OB)(K==null||(T=K.ports)===null||T===void 0||(O=T[0])===null||O===void 0||(v=O.poe)===null||v===void 0?void 0:v.standard);this.dispatch(S.constants.UPDATE,{id:o.id,catalyst_wireless_data:{...B,power:{mode:b,type:q}}})}):console.warn("NodeStore: actions.fetchCatalystWirelessPowerInfo called without 'Mkiconf.ng_id'")},fetchBoundSwitches(o){return l().get(a()({controller:"switch_profiles",action:"bound_switches_json"}),o).done(M=>{this.dispatch(S.constants.RESET,M)})},fetchBindSwitchesList(o){return l().get(a()({controller:"switch_profiles",action:"unbound_switches_json"}),o).done(M=>{this.dispatch(S.constants.UPDATE,M)})},fetchSwitchDiffs(o){return l().get(a()({controller:"switch_profiles",action:"switch_diff"}),o).done(M=>{this.dispatch(S.constants.UPDATE,M)})},bindSwitchesFromSwitchList(o){const M={profile_id:o.profile.id,switch_ids:o.switch_ids};return l().post(a()({controller:"switch_profiles",action:"bind_switches"}),M).done(m=>{const P=d().difference(o.switch_ids,d().pluck(m.failed_to_bind,"id")),T=d().map(P,O=>({id:O,node_profile_id:o.profile.id,node_profile_name:o.profile.name}));this.dispatch(S.constants.UPDATE,T)})},bindSwitches(o){return l().post(a()({controller:"switch_profiles",action:"bind_switches"}),o).done(M=>{this.dispatch(S.constants.REMOVE,{ids:d().difference(o.switch_ids,d().pluck(M.failed_to_bind,"id"))})})},unbindSwitchesFromSwitchList(o){return l().post(a()({controller:"switch_profiles",action:"unbind_switches"}),o).done(M=>{const m=d().difference(o.switch_ids,d().pluck(M.failed_to_bind,"id")),P=d().map(m,T=>({id:T,node_profile_id:void 0,node_profile_name:void 0}));this.dispatch(S.constants.UPDATE,P)})},unbindSwitches(o){return l().post(a()({controller:"switch_profiles",action:"unbind_switches"}),o).done(M=>{this.dispatch(S.constants.REMOVE,{ids:d().difference(o.switch_ids,d().pluck(M.failed_to_unbind,"id"))})})},revertLocalOverrides(o){return l().post(a()({controller:"switch_profiles",action:"revert_local_overrides"}),o).done(M=>{const m=d().difference(d().keys(o.switches),d().pluck(M.failed_to_revert,"id")),P=d().map(m,T=>({id:T,overrides:void 0}));this.dispatch(S.constants.UPDATE,P)})},updateIp(o){var M;o.settings.direct_ip6_assignment?M=o.settings.direct_ip6_assignment==="auto"?{direct_ip6_assignment:"auto"}:o.settings:o.settings.direct_ip_assignment==="dhcp"?M=d().pick(o.settings,"direct_ip_assignment","ifnum","dhcp_vlan","is_alt_mgmt","uplink_aggregation_enabled"):o.settings.direct_ip_assignment==="static"?M=d().pick(o.settings,"direct_ip_assignment","ifnum","ip","vlan","nm","gw","dns1","dns2","is_alt_mgmt","uplink_aggregation_enabled"):M=d().pick(o.settings,"direct_ip_assignment","ifnum","pppoe_auth_enabled","pppoe_username","pppoe_password","pppoe_static_ip_enabled","pppoe_static_ip","uplink_aggregation_enabled");var m=[d().extend({id:o.id},M)];return l().post(a()({controller:"nodes",action:"assign_ip"}),{assignments:m}).done(P=>{d().each(P,T=>{this.dispatch(S.constants.UPDATE,T)}),window.location.reload()})},updateIpUsingApi({nodeId:o,settings:M}){if(!o)return console.warn("NodeStore: actions.updateIpUsingApi called without 'nodeId'");const m=S.get(o),P=`/api/v1/devices/${m.serial}/appliance/uplinks/settings`;return(0,R.AT)("PUT",P,JSON.stringify(M)).then(()=>{this.dispatch(S.constants.UPDATE,m),window.location.reload()}).catch(T=>{let O;try{const v=JSON.parse(T.xhr.responseText);O=v.error?[v.error]:v.errors}catch{O=["We are unable to process your request at this time. Please try again later."]}this.dispatch(S.constants.UPDATE,{id:o,serverErrors:O})})},updateAmiUsingApi({nodeId:o,settings:M}){if(!o)return console.warn("NodeStore: actions.updateIpUsingApi called without 'nodeId'");const m=S.get(o),P=`/api/v1/devices/${m.serial}/wireless/alternateManagementInterface/ipv6`,T={addresses:[{protocol:"ipv6",assignmentMode:M.direct_ip6_assignment,address:M.ip6||"",gateway:M.gw6||"",prefix:`${M.ip6}/${M.plen}`||"",nameservers:{addresses:[M.dns6_1||"",M.dns6_2||""]}}]};return(0,R.AT)("PUT",P,JSON.stringify(T)).then(()=>{this.dispatch(S.constants.UPDATE,m),window.location.reload()}).catch(O=>{let v;try{const L=JSON.parse(O.xhr.responseText);v=L.error?[L.error]:L.errors}catch{v=["We are unable to process your request at this time. Please try again later."]}this.dispatch(S.constants.UPDATE,{id:o,serverErrors:v})})},convertWan(o){return l().post(a()({controller:"nodes",action:"convert_wan"}),o).done(M=>{d().each(M,m=>{this.dispatch(S.constants.UPDATE,m)})})},setOSPFRouterIdentifier(o){const M=l().post(a()({controller:"nodes",action:"set_ospf_router_identifier"}),o);return M.done(m=>{const P={id:m.id,ospf_router_identifier:String(n.A.ipv4DotToNumber(m.router_identifier))};this.dispatch(S.constants.UPDATE,P)}),M},updateHasL3ForSwitch(o,M){this.flux.stores.NodeStore.get(o),this.dispatch(S.constants.UPDATE,{id:o,has_l3:M})},getCellularUplinkConfigurations(o={}){if(!o.id)return console.warn("NodeStore: actions.getCellularUplinkConfigurations called without 'id'");if(!o.ng_id)return console.warn("NodeStore: actions.getCellularUplinkConfigurations called without 'ng_id'");const M=S.get(o.id),m=l().ajax({url:`/api/v1/networks/N_${o.ng_id}/devices/${M.serial}/uplink/cellular`,type:"GET"});return m.done(P=>{d().isEmpty(P)||this.dispatch(S.constants.UPDATE,{id:o.id,cellular_uplink_configurations:P})}),m},setCellularUplinkConfigurations(o={}){if(!o.id)return console.warn("NodeStore: actions.setCellularUplinkConfigurations called without 'id'");if(d().isUndefined(o.enabled)&&d().isUndefined(o.apn))return console.warn("NodeStore: actions.setCellularUplinkConfigurations called without any options to set");const M=S.get(o.id),m=M&&M.cellular_uplink_configurations&&M.cellular_uplink_configurations[0]||{},P=d().isEmpty(m)?"":`/${m.id}`,T={...m};d().isUndefined(o.enabled)||(T.enabled=o.enabled),d().isUndefined(o.apn)||(T.apn=o.apn);const O=l().ajax({url:`/api/v1/networks/N_${s().ng_id}/devices/${M.serial}/uplink/cellular${P}`,type:d().isEmpty(m)?"POST":"PUT",datatype:"json",data:T});return O.done(v=>{v.id=v.id||m.id,this.dispatch(S.constants.UPDATE,{id:o.id,cellular_uplink_configurations:[v]})}),O}};function u(o){o.store("NodeStore")||(o.addStore("NodeStore",S),o.addActions({nodes:D}))}},994273:(ae,x,e)=>{e.d(x,{U1:()=>D,o1:()=>I});var W=e(869592),C=e.n(W),g=e(522224),c=e.n(g),y=e(941669),d=e.n(y),f=e(758928),l=e.n(f),_=e(652129),a=e(761704),h=e(195015);const s=["wirelessOutboundL3Rules"],t=(0,_.L)().withStoreName("WirelessFirewallRulesStore").withFlexTables().withModels(s).withChanges().create(),n=t.actions,E=o=>`/api/v1/networks/N_${l().ng_id}/wireless/ssids/${o}/firewall/l3FirewallRules`,i=(o,M)=>(m,P)=>{const T=(0,a.EN)(P()),O=(0,h.IP)(T),v=typeof M>"u"?O.length-2:M;O.filter(L=>L.id!==o.id).forEach((L,B)=>{L.rowIndex=B>=v?B+1:B}),T[o.id]=(0,h.KC)(o,v),m(n.updateLocals({hasChanges:!0})),m(n.addWirelessOutboundL3Rules(T))},R=o=>(M,m)=>{const P=(0,a.EN)(m()),T=(0,h.VI)(P,o,2);M(n.updateLocals({hasChanges:!0})),M(n.addWirelessOutboundL3Rules(T))},r=o=>M=>{M(n.updateLocals({hasChanges:!0})),M(n.deleteWirelessOutboundL3RulesById([o.id]))},A=o=>M=>{M(n.updateLocals({hasChanges:!0})),M(n.deleteWirelessOutboundL3RulesById(o))},S=o=>(M,m)=>{M(n.updateLocals({hasChanges:!0}));const P=(0,a.ie)(m(),{id:o.id});M(n.updateWirelessOutboundL3Rules([(0,h.KC)({...P,...o})]))},p=o=>M=>{M(n.requestWirelessOutboundL3Rules());const m=E(o);return d().getJSON(C()({controller:m,global:!0})).done(P=>{const T=P.rules.map((O,v)=>({id:v.toString(),rowIndex:v,hits:0,...O}));M(n.updateLocals({hasChanges:!1})),M(n.addWirelessOutboundL3Rules(T))})},I=c().extend({},n,{addOrMoveWirelessOutboundL3Rule:i,addBulkWirelessOutboundL3Rules:R,deleteWirelessOutboundL3Rule:r,deleteWirelessOutboundL3Rules:A,fetchWirelessOutboundL3Rules:p,updateWirelessOutboundL3Rule:S}),U=t.actionTypes,D=()=>t.createStore();var u=null},994786:(ae,x,e)=>{e.d(x,{o1:()=>N,U1:()=>w});var W=e(14602),C=e(869592),g=e.n(C),c=e(941669),y=e.n(c),d=e(522224),f=e.n(d),l=e(184988),_=e.n(l),a=e(652129),h=e(720506),s=e(703314),t=e(995843),n=e(967720),E=e(758928),i=e.n(E);const R=50;function r(Y){const te=[];let Te=[];for(let me=0;me<Y.ids.length;me++){const Me=Y.ids[me];Me!==void 0&&Te.push(Me),(me===Y.ids.length-1||me>0&&(me+1)%R===0)&&(te.push({...Y,ids:Te}),Te=[])}return te}async function A(Y){const te=r(Y.data),Te=de=>(0,n.A)(g()({controller:"configure",action:"update_switchports"}),{method:"POST",body:JSON.stringify(de),headers:{Accept:"application/json","Content-Type":"application/json","X-CSRF-TOKEN":i().authenticity_token}}).then(async se=>{if(se.ok)return await se.json();throw se}),me=[];for(const de of te)try{const se=await Te(de);me.push({success:!0,response:se})}catch(se){if(se instanceof Response){const X=await se.text(),Oe=se.status;me.push({success:!1,error:{status:Oe,responseText:X}})}else me.push({success:!1,error:{status:500,responseText:"An unknown error occurred"}});break}const Me=me.filter(de=>de.success),Ie=me.find(de=>!de.success),ge=Me.reduce((de,se)=>Object.assign(de,se.response.ports),{});if(Ie){const de=te.filter((X,Oe)=>Oe<Me.length).map(X=>X.ids).flat(),se=h.A.parseErrorsFromResponse(Ie.error);Y.onError({successfulIds:de,errors:se})}else Y.onSuccess({ports:ge})}var S=e(882197),p=e(243449);const I=["switchports"],U=(0,a.L)().withStoreName("SwitchportStore").withModels(I).withModal().withChanges().withPrefs().withFlexTables().create(),D=U.actions,u=Y=>Y.agg_group?Y.agg_group.ports?`${Y.switch_id}_${Y.agg_group.ports.join("_")}`:Y.agg_group.port_sw_ids?`${Y.stack_id}_${Y.agg_group.aggr_id}`:null:null,o=(Y,te)=>Y.agg_group.ports?Y.agg_group.ports.map(Te=>te[`${Y.switch_id}_${Te}`]):Y.agg_group.port_sw_ids.map(([Te,me])=>te[`${me}_${Te}`]);D.updateSaveNotice=Y=>{const te={...Y};return Y?.isSaving&&(te.errors=void 0,te.isSuccess=!1),Y?.isSuccess?(te.errors=void 0,te.isSaving=!1):Y?.errors&&(te.isSuccess=!1,te.isSaving=!1),D.updateLocals(te)};const M=()=>(Y,te)=>{const Te=te().models.switchports.byId,me={},Me={};Object.values(Te).forEach(Ie=>{if(Ie.num.length===1&&Ie.agg_group){const ge=u(Ie);if(!Me[ge]){const de=o(Ie,Te);Me[ge]={enabled:de.some(se=>se.enabled)}}me[Ie.id]={id:Ie.id,aggGroupEnabled:Me[ge].enabled}}}),Y(D.updateSwitchportsWithMerge(me))},m=(Y,te,Te)=>{let me=Object.values(Te),Me=D.addSwitchports(me);te&&(te.aggregates===!1&&(me=me.map(Ie=>({...Ie,individualPort:!0}))),te.node_ids||te.node_id?Me=D.updateSwitchportsWithMerge(me):Me=D.addSwitchports(me)),Y(Me),Y(M())},P=(Y,te=!1)=>Te=>{Te(te?D.updateLocals({isFetchingNewStatuses:!0}):D.requestSwitchports()),y().getJSON(g()({controller:"nodes",action:"ports_json"}),Y).done(Me=>{m(Te,Y,Me)}).fail(Me=>_()(Me.responseText)).always(()=>{Te(te?D.updateLocals({isFetchingNewStatuses:!1}):D.doneRequestingSwitchports())})},T=(Y,te=!1,Te,me=!0)=>Me=>{if(!Te||Te.length===0)return;let Ie=10;me&&(Me(D.updateLocals({isFetchingPortsByNodes:!0})),Me(te?D.updateLocals({isFetchingNewStatuses:!0}):D.requestSwitchports()),Ie=5);const ge=Te.length>Ie?Ie:Te.length;Y.node_ids=Te.slice(0,ge),y().getJSON(g()({controller:"nodes",action:"ports_json"}),Y).done(se=>{m(Me,Y,se)}).fail(se=>_()(se.responseText)).then(()=>{me&&Me(te?D.updateLocals({isFetchingNewStatuses:!1}):D.doneRequestingSwitchports()),Te.length<=ge&&Me(D.updateLocals({isFetchingPortsByNodes:!1}))}),Me(T(Y,te,Te.slice(ge),!1))},N={...D,fetchSwitchportData:P,fetchSwitchportDataByNodes:T,submitSwitchports:Y=>{const{onSuccess:te}=Y;return(Te,me)=>{const Me=me().changes.switchports;Me&&Object.entries(Me).forEach(([de,se])=>{var X;const Oe=(0,S.QD)(me(),{id:de});if(Mkiconf.features.has_aurora2_routed_ports&&se.mode==="switch_port"&&(se.mode=se.is_trunk?"trunk":"access"),Oe.individualPort===!0&&se.enforce_lacp_active===void 0&&(se.return_individual_ports=!0),((X=se.allowed_vlans_named_vlan)===null||X===void 0?void 0:X.toLowerCase())==="all"&&se.allowed_vlans===null&&(se.allowed_vlans="all",se.allowed_vlans_named_vlan=null),typeof Oe.aggGroupEnabled>"u")return;const H={};typeof se.aggGroupEnabled=="boolean"&&se.aggGroupEnabled!==Oe.aggGroupEnabled&&(H.enabled=se.aggGroupEnabled),(H.enabled||typeof se.aggGroupEnabled!="boolean"&&Oe.aggGroupEnabled)&&typeof se.enabled=="boolean"&&(!se.enabled||!Oe.enabled)&&(H.single_port_settings={enabled:se.enabled}),delete se.enabled,delete se.aggGroupEnabled,delete se.single_port_settings,Object.entries(H).forEach(([$,le])=>{se[$]=le})});const Ie=[];Object.entries(Me).forEach(([de,se])=>{const X=Ie.filter(Oe=>f().isMatch(Oe.change,se));X.length?X[0].ids.push(de):Ie.push({ids:[de],change:se})});const ge={ids:Ie[0].ids,...f().omit(Ie[0].change,"ids")};Te(D.updateModal({isSaving:!0})),A({data:ge,onSuccess(de){Te(D.actionTable.setCheckedItems(p.kF,[])),Te(D.updateSwitchportsWithMerge(de.ports)),Te(M()),Te(D.resetAllChanges()),Te(D.clearModal()),Te(D.updateSaveNotice({isSaving:!0})),Te(D.updateSaveNotice({isSuccess:!0})),te?.(de)},onError({successfulIds:de,errors:se}){Te(D.updateModal({...me().modal,saveErrors:se,isSaving:!1})),de.length&&Te(s.o1.uncheckItems("switchportsTable",de))}})}},showEditModal:Y=>te=>{te(D.updateModal({showEditModal:!0,portId:Y}))},cancelEditModal:()=>Y=>{Y(D.resetAllChanges()),Y(D.clearModal())},showSecureConnectComparisonModal:Y=>te=>{te(D.updateModal({showSecureConnectComparisonModal:!0,portId:Y}))},cancelSecureConnectComparisonModal:()=>Y=>{Y(D.resetAllChanges()),Y(D.clearModal())},showMirrorModal:Y=>te=>{te(D.updateModal({showMirrorModal:!0,portId:Y}))},cancelMirrorModal:()=>Y=>{Y(D.resetAllChanges()),Y(D.clearModal())},submitPortMirror:Y=>(te,Te)=>{const{controllerAction:me,data:Me}=(0,S.Hd)(Te(),Y);te(D.updateModal({isSaving:!0}));const Ie=y().ajax({type:"POST",url:g()({controller:"configure",action:me}),data:Me});return Ie.done(ge=>{te(D.clearModal()),te(D.updateSwitchportsWithMerge(ge.new_ports)),te(D.updateSaveNotice({isSaving:!0})),te(D.updateSaveNotice({isSuccess:!0}))}),Ie.error(ge=>{const de=h.A.parseErrorsFromResponse(ge);te(D.updateModalWithErrors({isSaving:!1},de))}),Ie},setMirrorDestinationPort:Y=>te=>{te(D.updateModal({destinationPort:Y}))},aggregatePorts:()=>(Y,te)=>{Y(D.updateSaveNotice({isSaving:!0}));const Te=(0,S.tP)(te()),me={ports:(0,S.Ut)(te())},Me=y().ajax({type:"POST",url:g()({controller:"configure",action:"aggregate_ports"}),data:me});return Me.done(Ie=>{Y(D.actionTable.uncheckItems(p.kF,Te)),Y(D.deleteSwitchportsById(Te)),Y(D.updateSwitchportsWithMerge(Ie.new_ports)),Y(D.updateSaveNotice({isSuccess:!0}))}),Me.error(Ie=>{const ge=h.A.parseErrorsFromResponse(Ie);Y(D.updateSaveNotice({errors:ge}))}),Me},splitPorts:()=>(Y,te)=>{Y(D.updateSaveNotice({isSaving:!0}));const Te=(0,S.tP)(te()),me={aggs:Te},Me=y().ajax({type:"POST",url:g()({controller:"configure",action:"split_ports"}),data:me});return Me.done(Ie=>{Y(D.actionTable.uncheckItems(p.kF,Te)),Y(D.deleteSwitchportsById(Te)),Y(D.updateSwitchportsWithMerge(Ie.new_ports)),Y(D.updateSaveNotice({isSuccess:!0}))}),Me.error(Ie=>{const ge=h.A.parseErrorsFromResponse(Ie);Y(D.updateSaveNotice({errors:ge}))}),Me},submitTagChanges:Y=>(te,Te)=>{const Me={ids:(0,S.tP)(Te()),...Y};te(D.updateModal({isSaving:!0,isSuccess:!1})),te(D.updateSaveNotice({isSaving:!0}));const Ie=y().ajax({type:"POST",url:g()({controller:"configure",action:"update_switchports"}),data:Me});return Ie.done(ge=>{te(D.updateSwitchportsWithMerge(ge.ports)),te(D.updateSaveNotice({isSuccess:!0}))}),Ie.error(ge=>{const de=h.A.parseErrorsFromResponse(ge);te(D.updateSaveNotice({errors:de}))}),Ie}},w=Y=>U.createStore(Y),z=U.actionTypes,ne=null},997100:(ae,x,e)=>{e.d(x,{o1:()=>E});var W=e(522224),C=e.n(W),g=e(869592),c=e.n(g),y=e(941669),d=e.n(y),f=e(652129);const l=["automatedCollectionOptIns"],_=(0,f.L)().withStoreName("AutomatedCollectionStore").withModels(l).withChanges().create(),a=_.actions,h=({nodeId:r}={})=>A=>{A(a.updateLocals({isFetching:!0}));const S=r?`?node_id=${r}`:"";return d().get(c()({controller:"automated_collection",action:"opt_ins_json"})+S).then(p=>{A(a.addAutomatedCollectionOptIns(p.opt_ins))}).always(()=>{A(a.updateLocals({isFetching:!1}))})},s=({cameraIds:r,newStatus:A},S,p)=>I=>{d().ajax({url:c()({controller:"automated_collection",action:"update_opt_in_status"}),type:"POST",contentType:"application/json",data:JSON.stringify({cameraIds:r,newStatus:A})}).done(U=>{I(a.updateAutomatedCollectionOptIns(U.opt_ins)),S()}).fail(U=>{p(U)})},t=({cameraIds:r},A,S)=>p=>{d().ajax({url:c()({controller:"automated_collection",action:"clean_opt_in_data"}),type:"POST",contentType:"application/json",data:JSON.stringify({cameraIds:r})}).done(I=>{p(a.updateAutomatedCollectionOptIns(I.opt_ins)),A()}).fail(I=>{S(I)})},n=({cameras:r},A,S)=>p=>{d().ajax({url:c()({controller:"automated_collection",action:"delete_opt_in_data_in_time_range"}),type:"POST",contentType:"application/json",data:JSON.stringify({cameras:r})}).done(I=>{p(a.updateAutomatedCollectionOptIns(I.opt_ins)),A()}).fail(I=>{S(I)})},E=C().extend({},a,{fetchOptIns:h,updateOptInStatus:s,cleanOptInData:t,deleteOptInDataInTimeRange:n}),i=()=>_.createStore();var R=null}}]);
