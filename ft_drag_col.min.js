/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
window.ftAddon=window.ftAddon||{},window.ftAddon.drag_col=function(k){return function(o){var i,l,a,h,r,c,s,f,g,u,p,b,e,n,m=k(document),w=o.container,v=k("<div />",{class:"drag_helper",style:"position:absolute"}),x=k("<td />",{class:"drag_highlight ui-state-highlight"}),y=k("<th />",{class:"drag_highlight ui-state-highlight"}),C=0;function W(){u.find(".drag_highlight").remove(),0===l?(u.find("thead > tr > th:nth-child(1)").before(y.clone()),u.find("tbody > tr > td:nth-child(1)").before(x.clone())):(u.find("thead > tr > th:nth-child("+l+")").after(y.clone()),u.find("tbody > tr > td:nth-child("+l+")").after(x.clone()));var t=p.find(">tr>th.drag_highlight");s=t.prev(":not(.nodrag)"),f=t.next(":not(.nodrag)")}n=o.columns,_.each(o.initial_fields,function(t){void 0!==(e=n[t])&&-1===(e.className||"").indexOf("nodrag")&&(o.container.find("th."+t).addClass("nodrag"),n[t].className+=" nodrag")}),o.extend_columns(n),w.off("mousedown.drag").on("mousedown.drag","th:not(.nodrag)",function(t){var e,n,d;w.hasClass("nodrag")||(e=k(this),d=n=!1,k("body").addClass("flex-table-dragging"),u=w.children("table"),p=u.children("thead"),b=w[0].getBoundingClientRect().left,l=i=e.index(),h=a=t.pageX,g=0,m.on("mousemove.col_adder",_.throttle(function(t){d||(h=t.pageX,g=h-a,n?(v.css("left",h-b-C),0<f.length&&f.offset().left+.5*f.width()<v.offset().left?(l=f.index(),W()):0<s.length&&s.offset().left+.5*s.width()>v.offset().left&&(l=s.index(),W())):20<Math.abs(g)&&(n=!0,function(t){C=t.width()/2,v.width(t.width()),v.height(t.height()),v.css({top:t.position().top,left:t.position().left-b-C,background:t.css("background"),color:t.css("background"),font:t.css("font"),padding:t.css("padding")}),v.html(t.html()),y.width(t.width()),w.append(v)}(t=e),s=t.prev(":not('.nodrag')"),f=t.next(":not('.nodrag')"),r=t.clone(!0),t.replaceWith(y.clone(!1)),c=u.find(">tbody>tr>td:nth-child("+(l+1)+")"),k.each(u.find(">tbody>tr>td:nth-child("+(l+1)+")"),function(t,e){k(e).replaceWith(x.clone(!1))})))},10,{leading:!1})),m.one("mouseup",function(){var t;m.off("mousemove.col_adder"),d=!0,k("body").removeClass("flex-table-dragging"),n&&(function(){for(var t=u.find(">tbody>tr>td.drag_highlight"),e=0,n=t.length;e<n;e++)k(t[e]).replaceWith(c[e]);p.find("th:eq("+l+")").replaceWith(r),v.remove()}(),(t=o.selected_fields()).splice(l,0,t.splice(i,1)[0]),o.set_selected_fields(t),n=!1)}))})}}(jQuery);