/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(){function e(t,e){var o;_.any(e.data,function(t){return t.histogrid&&t.histogrid.active})&&(o=_.any(e.data,function(t){return t.histogrid&&t.histogrid.mr_latency}),e.grid.hoverable=!0,e.series.nearBy={findItem:null,drawHover:null},e.series.mr_latency=o,t.hooks.processRawData.push(r),t.hooks.drawSeries.push(i))}function r(t,e,o,r){e.mr_latency||(e.yaxis.options.ticks=[2,4,6,8],e.yaxis.options.tickFormatter=function(t){return 8==t?"400+":(50*t).toString()}),e.color=$.color.parse(e.color),t.getPlaceholder().on("plothover",_.throttle(a,50))}function i(t,e,o){if(o.data&&0!==o.data.length)for(var r=t.getPlotOffset(),i=0,a=r.left,n=o.xaxis.box.width+o.xaxis.box.left,l=(o.yaxis.box.height-o.yaxis.box.top-2*o.yaxis.box.padding)/o.data[0][1].length,s=o.yaxis.box.height-o.yaxis.box.top,h=o.data.length,d=n/o.data.length,c=0;c<h&&i<n;c++)if(0!=c||o.mr_latency){var i=r.left+Math.max(0,o.xaxis.p2c(o.data[c][0])-1),f=o.data[c][1];if(f){var g=f.length,x=_.reduce(f,function(t,e){return t+e},0);if(0!==x){for(var u=0;u<g;u++){var v=s-(u+1)*l;t.hovered&&c===t.hovered.x&&u===t.hovered.y&&(e.fillStyle="#555",o.mr_latency?e.strokeRect(i-d-1,v-1,1+d,1+l):e.strokeRect(a-1,v-1,i-a+2,1+l)),o.color.a=Math.min(1,Math.round(100*f[u]/x)/50),e.fillStyle=o.color.toString(),o.mr_latency?e.fillRect(i+1-d,v,d-1,l-1):e.fillRect(a,v,i-a,l-1)}a=i+1}}}}function a(t,e,o,r){var i=r.getXAxes()[0],a=r.getYAxes()[0],n=e.y<a.min||e.y>=a.max,l=e.x<i.min||e.x>=i.max;if(n||l)return r.hovered?(r.hovered=null,r.getOptions().histogrid.on_hover.call(r),r.draw()):void 0;var s=r.getData()[0].data,h=r.getData()[0].histogrid.mr_latency;if(!h||1!==s.length||null!==s[0][0]){for(var d=0;d<s.length&&s[d][0]<e.x;d++);n=Math.floor(e.y),l=d<s.length?_.reduce(s[d][1],function(t,e){return t+e},0):0;if(h&&(d===s.length||7e5<s[d][0]-e.x||0===l))return r.hovered=null,r.getOptions().histogrid.on_hover.call(r),r.draw();r.hovered&&r.hovered.x===d&&r.hovered.y===n||(r.hovered={x:d,y:n},h=$(this).offset(),l=r.getPlotOffset(),i={top:h.top+l.top+a.p2c(n)-5,left:h.left+l.left+i.p2c(s[d][0])},r.getOptions().histogrid.on_hover.call(r,s[d],n,i),r.draw())}}$.plot.plugins.push({init:function(t){t.hooks.processOptions.push(e)},name:"histogrid",options:{series:{histogrid:{active:!1}}},version:"0.1"})}();