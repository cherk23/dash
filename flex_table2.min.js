/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
function flex_sort(e,t,n,i){var r,l,o,a,s,d,c,f;if(_.isArray(e)||(e=_.values(e)),(o=t[n])&&!1!==o.sorter&&!1!==o.sort_by){if(a=o.revsort,null==i&&(i=a),s=o.sort_by,d=o.sorter,"function"==typeof(s="function"!=typeof s&&"string"!=typeof s&&"function"!=typeof d?n:s))for(r in e)(l=e[r]).$$=s(l);else if("string"==typeof s){for(r in e)(l=e[r]).$$=l[s];d||"#"!==s.substr(s.length-1)||(d="#")}else s=!1;"#"===d?d=function(e,t){return numcmp(e.$$,t.$$)}:"function"!=typeof d?d=function(e,t){return smartcmp(e.$$,t.$$)}:s&&(c=d,d=function(e,t){return c(e.$$,t.$$)})}else d=function(){return 0};return f=(f=t.__fallback_sorter__?t.__fallback_sorter__.sorter:f)||function(){return 0},r=i?-1:1,l=a?-r:r,e.sort(function(e,t){return r*d(e,t)||l*f(e,t)}),e}window.ftAddon=window.ftAddon||{},make_flex_table=function(S){return function(f){if(!f.container||1!==S(f.container).length){var e=f.container instanceof S?f.container.selector:f.container;throw new Error("bad make_flex_table invocation: "+(e||""))}f.items&&f.search_filter&&log_error("Flextable created with both items and search_filter. Items is unnecessary",{id:S(f.container).attr("id")},"JS log"),_.defaults(f,{initial_fields:[]});var u,g,h,n,p,o,t,r,m=f.fields||f.columns,v={},w=0,b=[],y=f.footer?30:0,i=null,k=S(f.container),M={columns:m,unselectable_columns:f.unselectable_fields,container:k,initial_fields:f.initial_fields,checknum:!!f.checknum};function l(e,t){var n=e.charAt(0);"-"==n?(o=!0,e=e.substring(1)):"+"==n?(o=!1,e=e.substring(1)):o=!!t&&null,(p=N(e))&&m[p]||(p=o=null)}function C(e,t){(p=e)&&m[p]?o=t:((t=f.default_sort)&&l(t,!0),p||(t=j(h,!0),p=(t.length?t:h)[0])),null==o&&(o=m[p].revsort),flex_sort(u,m,p,o)}function a(){var e,t=f.row_hover||[];for(n=null,f.row_item_hover&&f.row_item_hover.call(M,b[i]),e=0;e<t.length;++e)t[e].call(M,i)}function s(e){i=this.id.substr(f.row_id_prefix.length),c()}function d(e){var t=this.id.substr(f.row_id_prefix.length);i==t&&(i=null,c())}function c(){var e=f.row_hover_timeout;"function"==typeof(e=null==e?200:e)&&(e=e.call(M,i)),n&&clearTimeout(n),n=setTimeout(a,e)}function L(){var e,t=u.length,n=y,i=f.items_per_page_options||[30,75,150,300],r="<table class='ft_foot'><tfoot><tr class='ft_foot'>";if(0<i.indexOf("All")&&(i[i.indexOf("All")]=5e3),i.sort(function(e,t){return e-t}),y<=0?y=n=i[i.length-1]:y<i[0]&&(y=n=i[0]),r+="<td class='pgsel'>",f.simple_footer||t<=i[0]){if(f.footer.tagName)return"";r+="<img src='"+Mkiconf.images+"onebyone.gif' alt='' style='visibility: hidden; height: 5px' />"}else if(1==i.length)r+=i[0]+" results per page,&nbsp;";else{for(r+="<select class='num_results'>",e=i.length-1;0<e&&(i[e]>n||i[e-1]>t);--e);for((n=i[e])<t&&(y=n),e=0;e<i.length&&(r+="<option value='"+i[e]+"'",n==i[e]&&(r+=" selected='selected'"),r+=">"+(i[e]>=t?"All":i[e])+"</option>",!(i[e]>=t));++e);r+="</select> results per page",w=Math.max(0,Math.min(t-t%n,w-w%n)),r+=",&nbsp;"}return r+=t+" total",r+="</td>",y<t&&(r+=function(e,t){var n,i,r,l,o,a,s=[],d="<svg class='page_link__pagerIcon' style='vertical-align: middle; padding: 0;' width='15' height='15' viewBox='0 0 15 15' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M13 14V15H2V14H13ZM14 13V2C14 1.48232 13.6067 1.05621 13.1025 1.00488L13 1H2C1.48232 1 1.05621 1.39333 1.00488 1.89746L1 2V13C1 13.5523 1.44772 14 2 14V15L1.7959 14.9893C0.854346 14.8938 0.1062 14.1457 0.0107422 13.2041L0 13V2C0 0.895431 0.895431 5.63724e-08 2 0H13C14.1046 0 15 0.895431 15 2V13C15 14.0357 14.2128 14.887 13.2041 14.9893L13 15V14C13.5523 14 14 13.5523 14 13Z' fill='var(--interact-icon-weak-default)'/><path fill-rule='evenodd' clip-rule='evenodd' d='M9.25592 3.73431C9.58136 4.04673 9.58136 4.55327 9.25592 4.86569L6.51184 7.5L9.25592 10.1343C9.58136 10.4467 9.58136 10.9533 9.25592 11.2657C8.93049 11.5781 8.40285 11.5781 8.07741 11.2657L4.74408 8.06569C4.41864 7.75327 4.41864 7.24673 4.74408 6.93431L8.07741 3.73431C8.40285 3.4219 8.93049 3.4219 9.25592 3.73431Z' fill='var(--interact-icon-weak-default)'/></svg>";for(1<e&&(d="<a class='page_link' href='#page"+(e-1)+"' title='Previous page' onclick='return false'>"+d+"</a>"),n=e<=(r=6)?r+2:2,i=t-(t-r<e?r+2:2)+1,r=1;r<=t;++r)r==e?s.push('<strong class="page_link page_link--current">'+e+"</strong>"):t<=11||r<=n||i<=r||e-2<=r&&r<=e+2?s.push("<a class='page_link' href='#page"+(o=r)+"' onclick='return false'>"+(a=(a=void 0)===a?o:a)+"</a>"):(s.push("..."),r=r<e?Math.min(e-2,i)-1:i-1);return l="<svg class='page_link__pagerIcon' style='vertical-align: middle; padding: 0;' width='15' height='15' viewBox='0 0 15 15' fill='none' xmlns='http://www.w3.org/2000/svg'><path d='M13 14V15H2V14H13ZM14 13V2C14 1.48232 13.6067 1.05621 13.1025 1.00488L13 1H2C1.48232 1 1.05621 1.39333 1.00488 1.89746L1 2V13C1 13.5523 1.44772 14 2 14V15L1.7959 14.9893C0.854346 14.8938 0.1062 14.1457 0.0107422 13.2041L0 13V2C0 0.895431 0.895431 5.63724e-08 2 0H13C14.1046 0 15 0.895431 15 2V13C15 14.0357 14.2128 14.887 13.2041 14.9893L13 15V14C13.5523 14 14 13.5523 14 13Z' fill='var(--interact-icon-weak-default)'/><path fill-rule='evenodd' clip-rule='evenodd' d='M5.74408 11.2657C5.41864 10.9533 5.41864 10.4467 5.74408 10.1343L8.48816 7.5L5.74408 4.86569C5.41864 4.55327 5.41864 4.04673 5.74408 3.73431C6.06951 3.4219 6.59715 3.4219 6.92259 3.73431L10.2559 6.93431C10.5814 7.24673 10.5814 7.75327 10.2559 8.06569L6.92259 11.2657C6.59715 11.5781 6.06951 11.5781 5.74408 11.2657Z' fill='var(--interact-icon-weak-default)'/></svg>",e<t&&(l="<a class='page_link' href='#page"+(e+1)+"' title='Next page' onclick='return false'>"+l+"</a>"),"<td class='pgnum'>"+d+s.join("")+l+"</td>"}(w/y+1,Math.ceil(t/y))),r+"</tr></tfoot></table>"}function $(e){var t=u.length,n=y;return t<=n||n<=0?0:Math.max(0,Math.min(t-t%n,e-e%n))}function V(e){var t,n,i,r,l=[];return m[e].disabled?l.push("<th></th>"):(t=m[e],highlight=m[e].highlight,n=null==t.l?"":t.l,i="right"===t.align?1:"center"===t.align||"center-th"===t.align?2:0,r=""!==n&&!1!==t.sort_by,l.push("<th"),t.width&&l.push(' style="width:'+t.width+'"'),t.t&&l.push(' title="'+JSTemplate.escape(m[e].t)+'"'),l.push(' data-testid="column-header"'),l.push(' class="ft ft'+(i?1==i?"r ":"c ":"l ")+(t.className||"")+" "+e.replace(/\W/g,"")),r?(highlight?l.push(' ftsortable highlight_failed_col"><table class="lean"'):l.push(' ftsortable"><table class="lean"'),i&&l.push(' style="margin:0'+(1==i?" 0 0":"")+' auto"'),l.push('><tbody><tr style="vertical-align:bottom">'),i&&e!=p&&l.push('<td style="padding:0 5px'+(1==i?"":" 0 0")+'"></td>'),l.push('<td class="ftlegend">'+n+"</td>"),e==p?o?l.push('<td style="padding:0; display: flex; align-items: center; justify-content: center;"><svg class="sort-arrow-icon" fill="var(--base-text-default)" width="15" height="15" viewBox="0 0 24 24" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="6 9 12 15 18 9"></polyline></svg></td>'):l.push('<td style="padding:0; display: flex; align-items: center; justify-content: center;"><svg class="sort-arrow-icon" fill="var(--base-text-default)" width="15" height=15" viewBox="0 0 24 24" stroke-width="3" stroke-linecap="round" stroke-linejoin="round"><polyline points="18 15 12 9 6 15"></polyline></svg></td>'):1!=i&&l.push('<td style="padding:0 5px'+(2==i?" 0 0":"")+'"></td>'),l.push("</td></tr></tbody></table></th>")):l.push(' ftlegend">'+n+"</th>")),l.join("")}function T(e,t,n){var i=m[e],r="";return i.disabled?"<td></td>":(n="string"==typeof(n=i.loading?'[%= index === 0 ? "<img id=\'column_loading_spinner\' alt=\'loading\' src=\'" + (Mkiconf.images + "spinner.gif") + "\' />" : "" %]':i.r?"string"==typeof i.r?i.r:"[%= this.render_funcs['"+e+"'].call(this, item, index) %]":i.tag?"[%= render_tags(item.tags) %]":"string"==typeof i.render?i.render:i.render?i.render.call(n,h):"")?{content:n}:S.extend({pre:"",post:""},n),t&&(r+='<td class="ft '+(i.translate?"":"notranslate ")+(i.className||e.replace(/\W/g,"")),i.align&&(r+="right"==i.align?" ftr":"center"==i.align?" ftc":""),i.filter_by&&(r+=" ftnowrap"),r+='">'),n.pre&&(r+=n.pre),i.render_string=n.content||'[%= escape(item["'+e+'"]) %]',r+=i.render_string,n.post&&(r+=n.post),i.filter_by&&(r+=action_links.make_filter("data-filter-field='"+e+"'")),t&&(r+="</td>"),r)}function A(n){var i="";return S.each(h,function(e,t){i+=T(t,!0,n)}),i}function j(e,t){var n,i=e.length,r=[],l={};if(f.initial_fields&&(e=f.initial_fields.concat(e)),t)for(start_index=e.length-i-1,n=start_index;0<=n;--n)l[e[n]]=!0;for(n=0;n<e.length;++n)m[e[n]]&&!l[e[n]]&&(r.push(e[n]),l[e[n]]=!0);return r}function N(e){var t=m[e];return t&&t.synonym||e}function H(){k.on("mouseover","table.filter>tbody>tr",s).on("mouseout","table.filter>tbody>tr",d)}function I(){(op=f.preferences)&&op.set({s:(o?"-":"+")+p,n:y,f:j(h,!0)})}function D(){for(var e=0;e<h.length;++e){var t,n=h[e],i=m[n];i.dashhelp&&window.dashhelp&&(0<(t=n.replace(/\W/g,"")).length&&(t=(n=k.find(">table>thead>tr>th."+t)).find(".ftlegend"),dashhelp(i.dashhelp,t.length?t:n)))}}return k.addClass("flex-table").data("flex-table",M),!f.row_num&&void 0!==f.row_num||(m.row_num=_.extend({l:"#",render:"[%= this.base+index+1 %]",sort_by:!1,colwidth:"0*",align:"right"},m.row_num||{})),(f.row_hover||f.row_item_hover)&&H(),_.each(m,function(e,t){e.r&&(v[t]=e.r)}),M.loading=f.loading,M.no_matches=!1,M.set_sort_field=l,M.set_selected_fields=function(e,t){h=e,k.trigger("columns_changed",[h,M]),t||I(),D()},M.lazy_cols=function(){return f.lazy_load||[]},M.extend_columns=function(e){_.extend(m,e)},M.add_column=function(n){h=h.concat(n);var e=V(n),t="[% var index, item; for (index = 0; index < this.items.length; ++index) { item = this.items[index]; %]";t+=T(n,!0,f.render_context)+"%23",t+="[% } %]";var i={items:M.items(!0),base:w,render_funcs:v};f.render_context&&S.extend(i,f.render_context);var r=new JSTemplate(t).render(i).split("%23"),i="<col "+(m[n].colwidth?'width="'+m[n].colwidth+'" ':"")+"/>";k.find(" > table th:last").after(e),k.find(" > table > tbody > tr ").find(">td:last").each(function(e,t){S(t).after(S(r[e]))}),k.find(" > table > colgroup").append(i),k.find(" > table > tfoot td.ft_foot").attr("colspan",function(e,t){S(this).attr("colspan",parseInt(t,10)+1)}),f.dynamic_data_on_columns_changed?(M.set_column_loading(n,!0),k.one("data_loaded",function(e,t){t=_.isUndefined(t)?n:t;M.set_column_loading(t,!1),k.trigger("change:"+t)})):k.trigger("change:"+n),_.contains(f.lazy_load,n)&&("lldp_info0"==n||"lldp_info1"==n?(i=_.difference(["lldp_info0","lldp_info1"],[n])[0],M.is_column_loading(i)?data3_load.ajax("n",{f:n},function(){M.set_column_loading(n,!1)}):M.set_column_loading(n,!1)):M.is_column_loading(n)&&data3_load.ajax("n",{f:n},function(){M.set_column_loading(n,!1)})),k.trigger("columns_changed",[h,M,n]),I(),D()},M.remove_column=function(e){h=_.without(h,e);var t=(m[e].className||e).replace(/\s+/,".").replace(/#/,""),n=k.find(" thead > tr > ."+t).index(),e=k.find(" thead > tr > ."+t);e.remove();t=k.find(" tbody > tr > ."+t);t.remove(),k.find(" > table > colgroup > col").eq(n).remove(),k.find(" tfoot td.ft_foot").attr("colspan",function(e,t){S(this).attr("colspan",parseInt(t,10)-1)}),S(M).trigger("DOM:remove",e),S(M).trigger("DOM:remove",t),k.trigger("columns_changed",[h,M]),I()},M.render=function(){var e,t,n,i,r,l,o,a=u.length,s="",d=f.footer,c=k.find(" > table")[0];if(0===a&&!M.loading&&(t=(t=M.no_matches?f.no_matches_html:t)||f.no_items_html))return M.empty_contents(),M.hide(),k.append("<div class='no_items_html'>"+t+"</div>"),d&&d.tagName&&S(d).hide(),void k.trigger("table_rendered");for(window.flex_table_now=(new Date).getTime()/1e3,d&&(s=L()),1e3<(e=a<(e=y)||e<=0?a:e)&&(e=1e3),Math.max(Math.ceil(a/e),1),w=$(w),a=u.slice(w,Math.min(w+e,a)),b=a,-1==S.inArray(p,h)&&C(h[0],null),i="",n=0;n<h.length;++n)i+="<col "+((t=m[h[n]]).colwidth?'width="'+t.colwidth+'" ':"")+"/>";if(i+="<thead><tr class='ft_head'>"+function(){var e,t=[];for(e=0;e<h.length;++e)t.push(V(h[e]));return t.join("")}()+"</tr></thead>",d&&d.tagName?S(d).show().html(s):d&&(r="<tfoot><tr class='ft_foot'><td class='ft_foot' colspan='"+h.length+"'>"+s+"</td></tr></tfoot>"),d='<tbody class="flex-table-body">[% var index, item; for (index = 0; index < this.items.length; ++index) { item = this.items[index]; %]<tr class="'+function(){var e,t=f.row_class_template||"ft[%= index % 2 %]",n="";if("string"==typeof t||0===t.length)return t;if(1==t.length)return t[0];for(e=0;e<t.length-1;++e)n+=(e?"[% } else ":"[% ")+"if (index % "+t.length+" == "+e+") { %]"+t[e];return n+"[% } else { %]"+t[t.length-1]+"[% } %]"}(),f.row_click&&(d+='" data-idx="[%= this.base + index %]" data-testid="Template - [%= escape_attr(item.name) %]" '),f.use_row_index?d+='" id="row_[%= index %]':f.row_id_prefix&&(d+='" id="'+f.row_id_prefix+"[%= escape_attr(item.id) %]"),t={items:a,base:w,render_funcs:v},f.render_context&&S.extend(t,f.render_context),d+='">'+A(t)+"</tr>[% } %]",f.footer_row&&(s=m,m=f.footer_row,d+='<tr class="'+function(){var e,t=f.footer_row_class_template||"ft_footer_row",n="";if("string"==typeof t||0===t.length)return t;if(1==t.length)return t[0];for(e=0;e<t.length-1;++e)n+=(e?"[% } else ":"[% ")+"if (index % "+t.length+" == "+e+") { %]"+t[e];return n+"[% } else { %]"+t[t.length-1]+"[% } %]"}()+'">',d+=A(t)+"</tr>",m=s),M.message&&(d+="<tr><td class='table_message' colspan='"+h.length+"'>"+M.message+"</td></tr>"),d+="</tbody>",M.loading?(o="<tbody></tbody>",M.showing_loading=!0):(o=new JSTemplate(d).render(t),M.showing_loading=!1),M.empty_contents(),M.show(),k.children(".no_items_html").remove(),void 0===c&&(c=document.createElement("table"),k.append(c)),S(c).replaceWith("<table class='filter "+f.className+"'>"+i+(r||"")+o+"</table>"),M.loading&&(o=k.find(">table.filter > tbody"),o=S('<td colspan="'+h.length+'" style="padding:5px">').appendTo(o).wrap("<tr>"),S.ajaxui.thin_indicator().appendTo(o)),I(),D(),f.time_sensitive_fields){for(l=[],n=0;n<h.length;++n)f.time_sensitive_fields[h[n]]&&l.push(h[n]);l.length&&(g=setInterval(function(){M.rerender_columns(l)},6e4))}window.flex_table_now=null,k.trigger("table_rendered",[a]),S(M).trigger("rendered"),M.table_rendered&&M.table_rendered(a,k)},M.sort_click=function(e){var t=S(this).index(),t=h[t];C(t,t==p?!o:null),w=0,M.render()},M.rerender_columns=function(e,t){if(_.contains(e,p))M.resort();else{var n,i,r,l,o,a,s=S(">table>tbody",k)[0];if(s&&!M.loading&&!M.showing_loading){for(s=s.childNodes,window.flex_table_now=(new Date).getTime()/1e3,n=0;n<e.length;++n)if(r=e[n],!((i=S.inArray(r,h))<0||m[r].disabled))for(a=S.extend({render_funcs:v,base:w},f.render_context||{}),l=new JSTemplate("[% var item = this.item; var index = this.index; { %]"+T(r,!1,a)+"[% } %]"),o=0;o<s.length;++o)a.item=u[w+o],void 0!==a.item&&(s[o].childNodes[i].innerHTML=l.render(_.extend(a,{index:o})));window.flex_table_now=null,k.trigger("table_rendered"),S(M).trigger("rendered")}}},M.change_prefs=function(e){var t,n;f.preferences&&e&&e!=f.preferences.keys[0]&&_.has(Mkiconf.initial_column_sets,e)&&(f.preferences=new DashboardPrefs(e),t=f.preferences,_.isEmpty(t.get("f"))&&(n=Mkiconf.initial_column_sets[e]||f.initial_fields,t.set("f",n)),e=_.extend([],t.get("f")),e=_.intersection(e,_.keys(m)),n=h.slice(M.initial_fields.length),t&&null!=(x=t.get("s"))&&l(x,!1),!p&&(x=f.sort_field||f.sort_column)&&l(x,!0),t&&null!=(x=t.get("n"))&&"number"==typeof x&&(y=x),_.isEqual(e,n)||(_.map(n,M.remove_column),M.render(),_.map(e,M.add_column)),C(p,o))},M.filter=function(e,t){u=[].concat(e),M.loading=!1,M.message=t,C(p,o),f.keep_page||(w=0),M.render()},M.scroll=function(e,t){e=null==e?w+t*y:e*y;(e=$(e))!=w&&(w=e,M.render())},M.set_options=function(e){_.extend(f,e)},M.get_surrounding=function(e,t){for(var n,i=w,r=Math.min(u.length,w+y+1),l=i;l<r;l++)if(u[l].id==e){n=l;break}if(void 0===n)return[];for(var i=Math.max(i,n-t),o=Math.min(r,n+t),a=[],l=i;l<o;l++)a.push(u[l].id);return a},M.items=function(e){var t=y,n=u.length;return e?(t<=0&&(t=n),u.slice(w,Math.min(w+t,n))):u},M.resort=function(){C(p,o),M.render()},M.set_items=function(e){if(e&&"function"==typeof e.done)return e.done(function(e){M.set_items(e)}),e.fail(function(){M.set_items([])}),M.set_table_loading(!0);if(Array.isArray(e))f.items=e;else for(var t in f.items=[],x=e,x)x.hasOwnProperty(t)&&f.items.push(x[t]);M.filter(f.items),M.loading||(k.trigger("data_loaded"),M.data_loaded&&M.data_loaded(u,k)),S(M).trigger("change:data")},M.items_per_page=function(e){if(void 0===e)return y;f.items_per_page_options=[e],y=e,M.render()},M.sort_field=function(){return p},M.selected_fields=function(){return[].concat(h)},M.set_no_items_html=function(e){f.no_items_html=e},M.bind_row_hover=function(e){f.row_hover||H(),f.row_hover=f.row_hover||[],f.row_hover.push(e)},M.get_item_for_row=function(e){return b[e]},M.set_table_loading=function(e){M.loading=e,M.render()},M.set_column_loading=function(e,t){_.isString(e)?m[e].loading!==t&&(m[e].loading=t,M.rerender_columns([e])):(_.each(e,function(e){m[e].loading!==t&&(m[e].loading=t)}),M.rerender_columns(e))},M.set_header_loading=function(e,t){var n=k.find("tbody > tr > td."+e+":first");(m[e].loading=t)?S("<img id='header_spinner' alt='loading'/>").attr("src",Mkiconf.images+"spinner.gif").appendTo(n):n.find("#header_spinner").remove()},M.set_column_highlight=function(e,t){m[e]&&(m[e].highlight=t)},M.is_column_loading=function(e){return m[e].loading},M.hover_item_id=function(){return i},M.empty_contents=function(){var e=S(">table>tbody",k)[0],t=k.children(".no_items_html");e&&(e.parentNode.removeChild(e),S(M).trigger("DOM:remove",e)),t&&t.remove(),g&&(clearInterval(g),g=void 0)},M.hide=function(){k.children().hide()},M.show=function(){k.children().show()},f=_.extend({items:[]},f),u=_.values(f.displayed||f.items),f.row_item_hover&&(f.use_row_index=!0,f.row_id_prefix="row_"),k.trigger("items_changed"),f.items_changed&&f.items_changed.call(M,M.items()),!0===f.row_id_prefix&&(f.row_id_prefix="item_"),f.items_per_page&&(y=f.items_per_page),(t=f.footer)&&!0!==t&&(f.footer=S(t)[0]),_.each(["table_rendered","columns_changed","items_changed","data_loaded"],function(e){var t=f[e];t&&(M[e]=t)}),r=f.preferences,function(e){var t,n=j([]);if(!(e=(!(e=e&&j(e))||e.length<=n.length)&&f.selected_fields?j(f.selected_fields):e)||e.length<=n.length){for(t in e=[],m)m[t].synonym||e.push(t);e.sort(strcmp),e=j(e)}h=_.difference(e,M.unselectable_columns),M.columns_changed&&M.columns_changed(h,M)}(function(){for(var e,t=[],n=r&&r.get("f")||[],i=0;i<n.length;++i)(e=N(n[i]))&&t.push(e);return t}()),_.each(f.addons,function(e){_.isFunction(ftAddon[e])&&new ftAddon[e](M)}),r&&null!=(t=r.get("s"))&&l(t,!1),!p&&(t=f.sort_field||f.sort_column)&&l(t,!0),0!=f.sort_field&&C(p,o),r&&null!=(t=r.get("n"))&&"number"==typeof t&&(y=t),"function"==typeof f.row_hover&&(f.row_hover=[f.row_hover]),delete f.displayed,f.search_filter&&(k.on("click","a.filter_link",function(e){var t=S(e.target).closest("a"),n=f.columns[t.data("filter-field")].filter_by,e="string"==typeof n?n:n.name||n.field,t=t.closest("td").find("[data-filter]").data("filter")||S(this).parent().text();return filter_string=e+":",void 0===t||t===n.empty_value?filter_string="-"+filter_string+"*":n.unquoted||t.toString().match(/^([0-9a-f]{2}([:\-]|$)){6}$/i)?filter_string+=t:filter_string+='"'+t+'"',f.search_filter.setQueryTerm(filter_string),!1}),k.on("click","a.tag",function(e){var t=S(e.target).attr("data-tag");return f.search_filter.setQueryTerm("tag:"+(null!=t?t:S(e.target).text())),!1}),S(f.search_filter).on("change:data",function(){M.loading=!1}).on("change:results",function(e,t,n){M.no_matches=n,u=t,C(p,o),M.render(),S(M).trigger("change:results")}),u=f.search_filter.results,M.no_matches=f.search_filter.noMatches()),f.footer&&k.on("change","select.num_results",function(){y=parseInt(this.value,10),M.render()}).on("click","a.page_link",function(){w=(this.hash.substr(5)-1)*y,M.render(),f.page_link_callback&&f.page_link_callback()}),f.row_click&&k.on("click","td.noclick",function(e){e.stopPropagation()}).on("click","table.filter>tbody>tr",function(e){if("A"===e.target.nodeName){if(!e.target.classList.contains("suppress_click"))return!0;e.preventDefault()}var t=u[S(this).data("idx")];if(t)return f.row_click.call(this,t,e)}),k.on("click","th.ftsortable",M.sort_click),M.render(),M}}(jQuery),jQuery.fn.flex_table=function(e){return e=$.extend({container:$(this)},e),make_flex_table(e)};