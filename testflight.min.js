/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
var testflight=function(o,l){var r={},u={all:[],waiting:[],active:[],done:[],succeeded:[],failed:[]};return r.add=function(t){Array.isArray(t)?(u.all=u.all.concat(t),u.waiting=u.waiting.concat(t)):(u.all.push(t),u.waiting.push(t))},r.run=function(t,a,n){n={done:0,cap:a||u.waiting.length,callback:n},l(r),function a(n,t){var e,c,i;if(1<t){for(e=0;e<t;e++)a(n,1);return}(!n.cap||n.done<n.cap)&&0<u.waiting.length&&(c=u.waiting.shift(),u.active.push(c),i={success:function(t,a,n){n&&(c.status=n.status),c.data=t,u.succeeded.push(c),i.complete()},failure:function(t,a,n){t&&(c.status=t.status),c.data=n,u.failed.push(c),i.complete()},complete:function(){if(!r.aborted){for(var t=0;t<u.active.length&&u.active[t]!==c;t++);remove_from_array(u.active,t),u.done.push(c),n.done++,l(r),$j.isFunction(n.callback)&&(n.cap&&n.done==n.cap||0===u.waiting.length&&0===u.active.length)&&n.callback(),a(n,1)}}},o(c,i))}(n,t||1)},r.cancel=function(){var t,a;for(r.aborted=!0,t=0;t<u.active.length;t++)(a=u.active[t]).xhr&&a.xhr.abort()},r.pool=function(){return u},r.is_done=function(){return u.done.length>=u.all.length},r};