/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(r){var e,l;function t(){lt_curl.stop(),live_toolbox.set_tool_status(lt_curl,!0),r("#curl_textarea").text(""),l={url:r("#curl_url").val(),proxy:r("#curl_proxy").val(),http_header:r("#curl_header").val(),interface:r("#curl_interface").val(),no_data:r("#curl_no_data").is(":checked"),filter:r("#curl_filter").val(),user_agent:r("#curl_user_agent").val()},r("#curl_meraki_cert")[0].checked&&(l.meraki_cert=!0),r("#curl_verbose")[0].checked&&(l.verbose=!0),r("#curl_include")[0].checked&&(l.include=!0),e=r.comet.command_subscribe(r.extend({},l,{broker:"CommandStream",command:"curl"}),c)}function c(e){l=new Date,l=unparse_date(l,"%b %-d %H:%M:%S %Z"),r("#curl_last_fetched").text("Completed at "+l),r("#curl_download").show();var t=r("#curl_textarea"),l=e.data.chunk;l&&0<l.length&&t.text(t.text()+l),e.data.completed&&lt_curl.stop()}function a(){var e,t;l&&(e=document.createElement("a"),t=r("#curl_textarea").val(),e.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(t)),e.setAttribute("id","curl_download_link"),t=l.url.replace(/[\/ :]/g,"-")+".txt",e.setAttribute("download",t),r("#curl_last_fetched").append(e),e.click(),r("#curl_download_link").remove())}window.lt_curl={},lt_curl.init=function(e){r("#lt_curl_tmpl").tmpl().appendTo(e),r("#curl_run").click(t),r("#curl_download").hide(),r("#curl_download").click(a);e=Mkiconf.feature_versions.curl_with_uagent_verbose_include;e?r("#curl_firmware_warning_version").text("builds before "+e+"."):r("#curl_firmware_warning_version").text("old firmware."),dashhelp("curl_help","#lt_curl_header",{above:!0}),dashhelp("live_tool_filter_help","#curl_filter_span")},lt_curl.stop=function(){e&&e.stop(),e=null,live_toolbox.set_tool_status(lt_curl,!1)}}(jQuery);