/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
function _mki_check_directory_traversal(e){return/(^|\/|%47)(\.|%2E){2}(\/|%47|$)/i.test(e)}!function(e){var a;window.Mkiconf&&Mkiconf.authenticity_token&&(a=/(\.(meraki|gov-meraki)\.(ca|com|cn|in))|(\.(test|dev)\.ikarem\.io)|(^\/)/,e.ajaxPrefilter(function(e,r,t){if(_mki_check_directory_traversal(e.url.split("?")[0]))throw"jQuery ajax: Directory traversal detected in url";e.headers=e.headers||{},a.test(e.url)&&(e.headers["X-CSRF-Token"]=Mkiconf.authenticity_token,Mkiconf.pageload_request_id&&(e.headers["X-Pageload-Request-Id"]=Mkiconf.pageload_request_id))})),e(document).ajaxSuccess(function(e,r,t){var a={};try{a=JSON.parse(r.responseText)}catch(e){}a&&a.redirect&&(window.location.href=a.redirect)}).ajaxSuccess(function(e,r,t){r=r.getResponseHeader("X-CSRF-Token");r&&(Mkiconf.authenticity_token=r)}).ajaxError(function(e,r,a){"OK"===r.statusText&&r.fail(function(e,r,t){"parsererror"===r&&(-1!==a.url.indexOf("cometd")?log_error("jQuery.ajax cometd parsererror: "+t.message,{file:a.url}):log_error("jQuery.ajax parsererror: "+t.message,{file:a.url}))})}).ajaxError(function(e,r,t){window.Mkiconf&&!Mkiconf.invalidate_stale_pages||_.defer(function(){_.some(o,function(e){return e.test(t.url)})||(403==r.status&&/Error: Bad session/i.test(r.responseText)||401==r.status&&"invalid auth token"==r.responseText)&&(change_tracker.reset(),window.location.reload())})});var o=[/dashboard\/quiet_update/,/dashboard\/keep_idle_timeout_alive/,/dashboard\/get_idle_status/,/pcc\/poll_changes/]}(jQuery);