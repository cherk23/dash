/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
function verifyAddressV3(n){_.defaults(n,{on_error:function(){},extended:!1});var e,s=n.on_success,o=n.on_success,r=(n.on_error,{APPROXIMATE:5,GEOMETRIC_CENTER:5,RANGE_INTERPOLATED:5,ROOFTOP:9});function d(e){var d,n;return(d=e.match(/^\s*([-+]?(?:\d+\.?\d*|\.\d+))\s*$/))?+d[1]:(d=e.match(/^\s*([-+]?\d+)\s*d\s*(?:(\d+\.?\d*|\.\d+)\s*m)?\s*$/))&&(d[2]||0)<=65?(n=d[1]<0?-1:1,+d[1]+n*(d[2]||0)/60):(d=e.match(/^\s*([-+]?\d+)\s*d\s*(\d+)\s*m\s*(?:(\d+\.?\d*|\.\d+)\s*s?)?\s*$/))&&d[2]<=65&&(d[3]||0)<=65?(n=d[1]<0?-1:1,+d[1]+n*((d[2]||0)/60+(d[3]||0)/3600)):null}function t(e,d){return d[2]=d[2].toUpperCase(),d[4]=d[4].toUpperCase(),"S"==(d="E"==d[2]||"W"==d[2]?[d[3],d[4],d[1],d[2]]:d)[2]&&(d[1]=-d[1]),"W"==d[4]&&(d[3]=-d[3]),"N"!=d[2]&&"S"!=d[2]||"E"!=d[4]&&"W"!=d[4]||d[1]<-90||90<d[1]||d[3]<-180||180<d[3]?null:{address:e,Point:{coordinates:[d[3],d[1],0]}}}if(verifyAddressV3.geocoder||(verifyAddressV3.geocoder=new google.maps.Geocoder),n.extended||(o=function(e){var d,n;e.Point?d=new google.maps.LatLng(e.Point.coordinates[1],e.Point.coordinates[0]):(d=e.geometry.location,n=r[e.geometry.location_type]),s(d.lat(),d.lng(),n)}),(e=n.address.match(/^\s*([-+]?(?:\d+\.?\d*|\.\d+))(?:\s+|\s*,\s*)([-+]?(?:\d+\.?\d*|\.\d+))\s*$/))&&(a=t(n.address,[null,+e[1],"N",+e[2],"E"])))return o(a);if((e=n.address.match(/^([-+\d\.\sdms]+)\s*([NSEW])(?:\s*,?\s*)([-+\d\.\sdms]+)\s*([NSEW])\s*$/))&&null!=(e[1]=d(e[1]))&&null!=(e[3]=d(e[3]))&&(a=t(n.address,e)))return o(a);var a={address:n.address};n.bounds&&(a.bounds=n.bounds),verifyAddressV3.geocoder.geocode(a,function(e,d){e?d!=google.maps.GeocoderStatus.OK?n.on_error(d):o(e[0]):n.on_error(d||0)})}function verifyAddressV3Extended(e){return verifyAddressV3(_.extend(e,{extended:!0}))}function addressBadDefaultHandler(e){603==e?alert("Unfortunately the map interface we use does not support the country or location that you entered.\n           You will probably need to enter an address in a different country for your nodes, or enter raw latitude and longitude.\n           We apologize for the inconvenience."):alert('Could not translate address, please try again.\n           Valid formats are:\n           - Address, City, State\n           - Street, Zip\n           - City, Country\n           - Latitude and longitude, such as "37.76N 122.4W"')}function extract_geocoded_address_component(e,d,n){e=_.find(e.address_components,function(e){return e.types[0]==d});return e&&e[n||"long_name"]||null}