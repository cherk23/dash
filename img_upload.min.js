/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(m){m.fn.upload_widget_init=function(e,a,t,n,i,o){!function n(i,e,o,a,t,r){r=m.extend({alt_image_tag:"Image",upload_text:"Upload an image",remove_text:"Remove this image",replace_text:"Replace this image",no_img_text:"No image",before_cb:m.noop,image_uri_cb:m.noop},r);var l=hQuery(e).html("").toggleClass("empty",!a),c=hQuery(o).children().remove().end(),g=r.complete||function(e){var a,t;return(t=e.match(/^Success: ([0-9a-f]+)\.(.*)/))?(a=t[1],4<(t=t[2]).length?alert('An error prevented Dashboard from processing your image. You can try again, or log a case in the "Help" tab.'):n(i,l,o,a,t,r)):/^Error/.test(e)?alert(e):alert('An error prevented Dashboard from processing your image. You can try again, or log a case in the "Help" tab.'),window.csui&&csui.bind_submit_handler(),c.show(),!1},e=function(){return c.hide().after(m.build_async_uploader({action:r.action,name:r.name,help_text:r.help_text,waiting_img:r.waiting_img||Mkiconf.images+"loadingAnimation.gif",before:r.before_cb,complete:g})),!1};hQuery("#"+i+"_md5").val(a||"").change(),extension=t?t.replace(/^\./,""):"",hQuery("#"+i+"_extension").val(extension).change(),a?(t=r.image_uri_cb(a,t),l.append('<img src="'+t+'" alt="'+r.alt_image_tag+'" />'),c.append(m('<li><a href="#replace" title="Upload something new to replace the image shown above">'+r.replace_text+"</a></li>").find("a").click(e).end()).append(m('<li><a href="#remove" title="Delete the image shown above">'+r.remove_text+"</a></li>").find("a").click(function(){return n(i,l,o,!1,"",r),!1}).end())):(l.append(r.no_img_text),c.append('<li><a href="#upload_logo">'+r.upload_text+"</a></li>").find("a").click(e).end())}(e,a,t,n,i,o)}}($);