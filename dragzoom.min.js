/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
var make_DragZoomControl=function(){var i;return function(t,o,e){function n(t,o,e){this.globals={draggingOn:!1,cornerTopDiv:null,cornerRightDiv:null,cornerBottomDiv:null,cornerLeftDiv:null,mapPosition:null,outlineDiv:null,mapWidth:0,mapHeight:0,mapRatio:0,startX:0,startY:0,borderCorrection:0},this.globals.style={opacity:.2,fillColor:"#000",border:"2px solid blue"};var n=this.globals.style;for(i in t)n[i]=t[i];var i,r=n.border.split(" ");for(i in n.outlineWidth=parseInt(r[0].replace(/\D/g,"")),n.outlineColor=r[2],n.alphaIE="alpha(opacity="+100*n.opacity+")",this.globals.backStack=[],this.globals.options={buttonHTML:"zoom ...",buttonStartingStyle:{width:"52px",border:"1px solid black",padding:"2px",display:"block"},buttonStyle:{background:"#FFF"},backButtonHTML:"zoom back",backButtonStyle:{background:"#FFF",display:"none"},buttonZoomingHTML:"Drag a region on the map",buttonZoomingStyle:{background:"#FF0"},overlayRemoveTime:6e3,backButtonEnabled:!1,stickyZoomEnabled:!1,disabledButtonOpacity:.5},o)this.globals.options[i]=o[i];this.globals.callbacks=e=null==e?{}:e}return i||((n.prototype=new GControl).initButton_=function(t){var o=this.globals,e=document.createElement("div");return e.innerHTML=o.options.buttonHTML,e.id="gzoom-control",DragZoomUtil.style([e],{cursor:"pointer"}),DragZoomUtil.style([e],o.options.buttonStartingStyle),DragZoomUtil.style([e],o.options.buttonStyle),t.appendChild(e),o.buttonOpacity=e.style.opacity,o.buttonFilterIE="alpha(opacity="+100*e.style.opacity+")",o.disabledButtonFilterIE="alpha(opacity="+100*o.options.disabledButtonOpacity+")",e},n.prototype.initBackButton_=function(t){var o=this.globals,e=document.createElement("div");return e.innerHTML=o.options.backButtonHTML,e.id="gzoom-back",DragZoomUtil.style([e],{cursor:"pointer"}),DragZoomUtil.style([e],o.options.buttonStartingStyle),DragZoomUtil.style([e],o.options.backButtonStyle),t.appendChild(e),e},n.prototype.setButtonMode_=function(t){var o=this.globals;"zooming"==t?(o.buttonDiv.innerHTML=o.options.buttonZoomingHTML,DragZoomUtil.style([o.buttonDiv],o.options.buttonStartingStyle),DragZoomUtil.style([o.buttonDiv],o.options.buttonZoomingStyle)):(o.buttonDiv.innerHTML=o.options.buttonHTML,DragZoomUtil.style([o.buttonDiv],o.options.buttonStartingStyle),DragZoomUtil.style([o.buttonDiv],o.options.buttonStyle))},n.prototype.initialize=function(t){var o=this.globals,e=this,n=t.getContainer(),i=document.createElement("div");DragZoomUtil.style([i],{cursor:"pointer"});var r=this.initButton_(i),a=this.initBackButton_(i);n.appendChild(i);var l=document.createElement("div");l.id="gzoom-map-cover",l.innerHTML='<div id="gzoom-outline" style="position:absolute;display:none;"></div><div id="gzoom-cornerTopDiv" style="position:absolute;display:none;"></div><div id="gzoom-cornerLeftDiv" style="position:absolute;display:none;"></div><div id="gzoom-cornerRightDiv" style="position:absolute;display:none;"></div><div id="gzoom-cornerBottomDiv" style="position:absolute;display:none;"></div>',DragZoomUtil.style([l],{position:"absolute",display:"none",overflow:"hidden",cursor:"crosshair",zIndex:101}),n.appendChild(l),o.listeners={button:GEvent.addDomListener(r,"click",function(t){e.buttonclick_(t)}),backButton:GEvent.addDomListener(a,"click",function(t){e.backbuttonclick_(t)}),mouseDown:GEvent.addDomListener(l,"mousedown",function(t){e.coverMousedown_(t)}),mouseMove:GEvent.addDomListener(n,"mousemove",function(t){e.drag_(t)}),mouseUp:GEvent.addDomListener(n,"mouseup",function(t){e.mouseup_(t)})};for(var s=["maptypechanged","zoomend","moveend"],p=0;p<s.length;++p)o.listeners[s[p]]=GEvent.addListener(t,s[p],function(t){return e.updateZoomInButton_(),!1});return o.mapPosition=DragZoomUtil.getElementPosition(n),o.outlineDiv=DragZoomUtil.gE("gzoom-outline"),o.buttonDiv=DragZoomUtil.gE("gzoom-control"),o.backButtonDiv=DragZoomUtil.gE("gzoom-back"),o.mapCover=DragZoomUtil.gE("gzoom-map-cover"),o.cornerTopDiv=DragZoomUtil.gE("gzoom-cornerTopDiv"),o.cornerRightDiv=DragZoomUtil.gE("gzoom-cornerRightDiv"),o.cornerBottomDiv=DragZoomUtil.gE("gzoom-cornerBottomDiv"),o.cornerLeftDiv=DragZoomUtil.gE("gzoom-cornerLeftDiv"),o.map=t,o.borderCorrection=2*o.style.outlineWidth,this.setDimensions_(),this.initStyles_(),o.mapCover.onselectstart=function(){return!1},i},n.prototype.remove=function(){var t,o=this.globals.listeners;for(t in o)o.hasOwnProperty(t)&&GEvent.removeListener(o[t]);jQuery("#gzoom-map-cover").remove()},n.prototype.getDefaultPosition=function(){return new GControlPosition(G_ANCHOR_TOP_LEFT,new GSize(3,120))},n.prototype.coverMousedown_=function(t){var o=this.globals,t=this.getRelPos_(t);return o.startX=t.left,o.startY=t.top,DragZoomUtil.style([o.mapCover],{background:"transparent",opacity:1,filter:"alpha(opacity=100)"}),DragZoomUtil.style([o.outlineDiv],{left:o.startX+"px",top:o.startY+"px",display:"block",width:"1px",height:"1px"}),o.draggingOn=!0,o.cornerTopDiv.style.top=o.startY-o.mapHeight+"px",o.cornerTopDiv.style.display="block",o.cornerLeftDiv.style.left=o.startX-o.mapWidth+"px",o.cornerLeftDiv.style.top=o.startY+"px",o.cornerLeftDiv.style.display="block",o.cornerRightDiv.style.left=o.startX+"px",o.cornerRightDiv.style.top=o.startY+"px",o.cornerRightDiv.style.display="block",o.cornerBottomDiv.style.left=o.startX+"px",o.cornerBottomDiv.style.top=o.startY+"px",o.cornerBottomDiv.style.width="0px",o.cornerBottomDiv.style.display="block",null!=o.callbacks.dragstart&&o.callbacks.dragstart(o.startX,o.startY),!1},n.prototype.drag_=function(t){var o=this.globals;if(o.draggingOn){t=this.getRelPos_(t);return rect=this.getRectangle_(o.startX,o.startY,t,o.mapRatio),addX=rect.left?-rect.width:0,addY=rect.top?-rect.height:0,DragZoomUtil.style([o.outlineDiv],{left:o.startX+addX+"px",top:o.startY+addY+"px",display:"block",width:"1px",height:"1px"}),o.outlineDiv.style.width=rect.width+"px",o.outlineDiv.style.height=rect.height+"px",o.cornerTopDiv.style.height=o.startY+addY-(o.startY-o.mapHeight)+"px",o.cornerLeftDiv.style.top=o.startY+addY+"px",o.cornerLeftDiv.style.width=o.startX+addX-(o.startX-o.mapWidth)+"px",o.cornerRightDiv.style.top=o.cornerLeftDiv.style.top,o.cornerRightDiv.style.left=o.startX+addX+rect.width+o.borderCorrection+"px",o.cornerBottomDiv.style.top=o.startY+addY+rect.height+o.borderCorrection+"px",o.cornerBottomDiv.style.left=o.startX-o.mapWidth+(o.startX+addX-(o.startX-o.mapWidth))+"px",o.cornerBottomDiv.style.width=rect.width+o.borderCorrection+"px",null!=o.callbacks.dragging&&o.callbacks.dragging(o.startX,o.startY,rect.endX,rect.endY),!1}},n.prototype.mouseup_=function(t){var o=this.globals;if(o.draggingOn){var e=this.getRelPos_(t);o.draggingOn=!1;var n=this.getRectangle_(o.startX,o.startY,e,o.mapRatio);n.left&&(n.endX=n.startX-n.width),n.top&&(n.endY=n.startY-n.height),this.resetDragZoom_();var i=new GPoint(n.startX,n.startY),r=new GPoint(n.endX,n.startY),a=new GPoint(n.endX,n.endY),l=new GPoint(n.startX,n.endY),s=o.map.fromContainerPixelToLatLng(i),p=o.map.fromContainerPixelToLatLng(r),e=o.map.fromContainerPixelToLatLng(a),n=o.map.fromContainerPixelToLatLng(l),c=new GPolyline([s,p,e,n,s],o.style.outlineColor,o.style.outlineWidth+1,.4);try{o.map.addOverlay(c),setTimeout(function(){o.map.removeOverlay(c)},o.options.overlayRemoveTime)}catch(t){}polyBounds=c.getBounds();p=polyBounds.getNorthEast(),n=polyBounds.getSouthWest(),e=new GLatLng(n.lat(),p.lng()),s=new GLatLng(p.lat(),n.lng());zoomLevel=o.map.getBoundsZoomLevel(polyBounds),center=polyBounds.getCenter(),o.map.setCenter(center,zoomLevel),null!=o.callbacks.dragend&&o.callbacks.dragend(s,p,e,n,i,r,a,l),o.options.stickyZoomEnabled&&(this.initCover_(),o.options.backButtonEnabled&&this.saveBackContext_(o.options.backButtonHTML,!1),o.backButtonDiv.style.display="none")}},n.prototype.setDimensions_=function(){var t=this.globals,o=t.map.getSize();t.mapWidth=o.width,t.mapHeight=o.height,t.mapRatio=t.mapHeight/t.mapWidth,DragZoomUtil.style([t.mapCover,t.cornerTopDiv,t.cornerRightDiv,t.cornerBottomDiv,t.cornerLeftDiv],{left:"0px",width:t.mapWidth+"px",height:t.mapHeight+"px"})},n.prototype.initStyles_=function(){var t=this.globals;DragZoomUtil.style([t.mapCover,t.cornerTopDiv,t.cornerRightDiv,t.cornerBottomDiv,t.cornerLeftDiv],{filter:t.style.alphaIE,opacity:t.style.opacity,background:t.style.fillColor}),t.outlineDiv.style.border=t.style.border},n.prototype.buttonclick_=function(){var t=this.globals;t.backButtonDiv.style.display="none","block"==t.mapCover.style.display?(this.resetDragZoom_(),t.options.backButtonEnabled&&(this.restoreBackContext_(),0==t.backStack.length&&(t.backButtonDiv.style.display="none"))):(this.initCover_(),t.options.backButtonEnabled&&this.saveBackContext_(t.options.backButtonHTML,!1))},n.prototype.backbuttonclick_=function(){var t=this.globals;t.options.backButtonEnabled&&0<t.backStack.length&&(this.restoreBackContext_(),null!=t.callbacks.backbuttonclick&&t.callbacks.backbuttonclick(t.methodCall))},n.prototype.saveBackContext_=function(t,o){var e=this.globals,n={};n.center=e.map.getCenter(),n.zoom=e.map.getZoom(),n.maptype=e.map.getCurrentMapType(),n.text=e.backButtonDiv.innerHTML,n.methodCall=o,e.backStack.push(n),e.backButtonDiv.innerHTML=t},n.prototype.restoreBackContext_=function(){var t=this.globals,o=t.backStack.pop();t.map.setCenter(o.center,o.zoom,o.maptype),t.backButtonDiv.innerHTML=o.text,t.methodCall=o.methodCall,0==t.backStack.length&&(t.backButtonDiv.style.display="none")},n.prototype.updateZoomInButton_=function(){var t=this.globals,o=this,e=t.map.getCurrentMapType().getMaximumResolution(t.map.getCenter());t.map.getZoom()>=e?t.listeners.button&&(GEvent.removeListener(t.listeners.button),DragZoomUtil.gE("gzoom-control").style.opacity=t.options.disabledButtonOpacity,DragZoomUtil.gE("gzoom-control").firstChild.style.filter=t.disabledButtonFilterIE,t.listeners.button=null):null==t.listeners.button&&(DragZoomUtil.gE("gzoom-control").style.opacity=t.buttonOpacity,DragZoomUtil.gE("gzoom-control").firstChild.style.filter=t.buttonFilterIE,t.listeners.button=GEvent.addDomListener(t.buttonDiv,"click",function(t){o.buttonclick_(t)}))},n.prototype.initCover_=function(){var t=this.globals;t.mapPosition=DragZoomUtil.getElementPosition(t.map.getContainer()),this.setDimensions_(),this.setButtonMode_("zooming"),DragZoomUtil.style([t.mapCover],{display:"block",background:t.style.fillColor}),DragZoomUtil.style([t.outlineDiv],{width:"0px",height:"0px"}),null!=t.callbacks.buttonclick&&t.callbacks.buttonclick()},n.prototype.getRelPos_=function(t){var o=DragZoomUtil.getMousePosition(t),t=this.globals;return{top:o.top-t.mapPosition.top,left:o.left-t.mapPosition.left}},n.prototype.getRectangle_=function(t,o,e,n){var i=!1,r=!1,a=e.left-t,e=e.top-o;return a<0&&(a*=-1,i=!0),e<0&&(e*=-1,r=!0),delta=e<a?a:e,{startX:t,startY:o,endX:t+delta,endY:o+parseInt(delta*n),width:delta,height:parseInt(delta*n),left:i,top:r}},n.prototype.resetDragZoom_=function(){var t=this.globals;DragZoomUtil.style([t.mapCover,t.cornerTopDiv,t.cornerRightDiv,t.cornerBottomDiv,t.cornerLeftDiv],{display:"none",opacity:t.style.opacity,filter:t.style.alphaIE}),t.outlineDiv.style.display="none",this.setButtonMode_("normal"),t.options.backButtonEnabled&&0<t.backStack.length&&(t.backButtonDiv.style.display=t.options.buttonStartingStyle.display)},i=n),new i(t,o,e)}}(),DragZoomUtil={gE:function(t){return document.getElementById(t)},getMousePosition:function(t){var o=0,e=0;return(t=t||window.event).pageX||t.pageY?(o=t.pageX,e=t.pageY):(t.clientX||t.clientY)&&(o=t.clientX+(document.documentElement.scrollLeft||document.body.scrollLeft),e=t.clientY+(document.documentElement.scrollTop||document.body.scrollTop)),{left:o,top:e}},getElementPosition:function(t){for(var o=t.offsetLeft,e=t.offsetTop,n=t.offsetParent;null!=n;)o+=n.offsetLeft,e+=n.offsetTop,n=n.offsetParent;return{left:o,top:e}},style:function(t,o){"string"==typeof t&&(t=DragZoomUtil.getManyElements(t));for(var e=0;e<t.length;e++)for(var n in o)t[e].style[n]=o[n]},getManyElements:function(t){for(var o=t.split(","),e=[],n=0;n<o.length;n++)e[e.length]=DragZoomUtil.gE(o[n]);return e}};