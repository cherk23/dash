/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(t){var r,i,e,p,_;function n(o){if(o=o?String(o):t("#port_bouncing_ports").val(),!Mkiconf.is_admin||Mkiconf.is_write_admin){e.hide(),p.hide(),o=o.replace(/\s+/g,""),port_ranges=o.split(",");for(var n=0;n<port_ranges.length;n++)if(port_ranges[n].match(/^\d+$/)){if(individual_port=parseInt(port_ranges[n]),individual_port>s3node.num_ports||individual_port<=0)return void alert("Port "+port_ranges[n]+" is invalid.")}else{if(!(result=port_ranges[n].match(/^(\d+)-(\d+)$/)))return void alert('Please provide the ports on which you would like to run the test.  You can provide a single port, comma-separated list of ports, a range of ports, or a combination of those.  For example, "1, 2, 11-15"');if(first_port=parseInt(result[1]),last_port=parseInt(result[2]),first_port>last_port||first_port<=0||last_port>s3node.num_ports)return void alert("Port range ["+port_ranges[n]+"] is invalid.")}r.show(),i.show(),_=t.comet.command_subscribe({broker:"PortBouncing",ports:o},node.id,a)}else alert("You do not have permissions to cycle ports on this network.")}function a(o){_.stop(),r.hide(),i.hide(),"ok"==o.data.body?e.show():(t("#port_bouncing_failed").html("Request failed, "+o.data.body),p.show())}window.lt_port_bouncing={},lt_port_bouncing.init=function(o){t("#lt_port_bouncing_tmpl").tmpl().appendTo(o),t("#port_bouncing_run").click(function(){n(0)}),r=t("#port_bouncing_spinner"),i=t("#port_bouncing_running"),e=t("#port_bouncing_finished"),p=t("#port_bouncing_failed")},window.port_page_port_bouncing=function(o){t("#port_page_port_bouncing_run").unbind("click").click(function(){n(o)}),r=t("#port_page_port_bouncing_spinner"),i=t("#port_page_port_bouncing_running"),e=t("#port_page_port_bouncing_finished"),p=t("#port_page_port_bouncing_failed"),r.hide(),i.hide(),e.hide(),p.hide()}}(jQuery);