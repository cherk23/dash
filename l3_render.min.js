/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
function mki_render_ssid(e){var r=Mkiconf.ssids[e];return r?JSTemplate.escape(r.name||"SSID "+e):"(unknown)"}function mki_render_ssid_from_port(e){if(e&&0==e.indexOf("apr")){e=/apr[0-9]+v([0-9]+)/g.exec(e);if(1<e.length)return mki_render_ssid(e[1])}return""}function render_ago_interval(e,r,n,t,a){if(n&&t<=r-n)return r-e<23328e3?unparse_date(e,"%b %d %H:%M",1):unparse_date(e,"%b %d %Y",1);e=(r||(new Date).getTime()/1e3)-e;return a&&e<a?"now":unparse_interval(e)+" ago"}function render_timestamp(e){return data3_now()-e<23328e3?unparse_date(e,"%b %d %H:%M",1):unparse_date(e,"%b %d %Y",1)}function node3_render_name(e,r,n){var t,a,i=nodes_hash[e.id]||extra_nodes_hash[e.id];return i&&i.mac||(i=e),a="<a",n&&n.aclass&&(a+=' class="'+n.aclass+'"'),n&&n.titlename&&(a+=' title="'+JSTemplate.escape(node_name(i))+'"'),a+=' href="',r=r||JSTemplate.escape(node_name(i)),n&&n.prefix&&(r=n.prefix+r),n&&n.suffix&&(r+=n.suffix),!Mkiconf.node_show_url||!e.id||n&&n.nolink?r:e.show_url||i.show_url?a+(e.show_url||i.show_url)+'">'+r+"</a>":i.network_eid&&i.network_eid!=Mkiconf.network_eid?((t=url_for_node_group({eid:i.network_eid,tag:i.network_url_tag}))&&("/"!==t.slice(-1)&&(t+="/"),r=a+t+"nodes#n="+i.id+"&"+show3.get_time_query()+'">'+r+"</a>",i.network_name&&(r+=' <small>[<i>in <a href="'+t+'">'+JSTemplate.escape(i.network_name)+"</a></i>]</small>")),r):n&&n.network_eid&&n.network_tag&&i.id?a+url_for_ng_and_node(i.id,{eid:n.network_eid,tag:n.network_tag})+'">'+r+"</a>":Mkiconf.h3nodes?a+"#n="+e.id+'">'+r+"</a>":a+make_query_url(Mkiconf.node_show_url.replace(/%23|%2523/,e.id),show3.get_time_query())+'">'+r+"</a>"}function node3_render_ap_alerts(e){var n="";return jQuery.each(e,function(e,r){n+=r.name+", "}),n.substring(0,n.length-2)}function node3_render_tags(e,r){var n;return e.tags?(n=Mkiconf.h3nodes?'<a href="#q=tag:*">*</a>':'<a href="'+Mkiconf.node_list_url+'#q=tag:*">*</a>',jQuery.trim(e.tags).replace(/[-._\w]+/g,function(e){return n.replace(/\*/g,e)})):null==r?'<span class="deftext">None</span>':r}function node3_render_to_gw_route(e,r){for(var n=e.to_gw_route.split(" "),t=[s3node.name||s3node.mac],a=0;a<n.length;++a)""!==n[a]&&t.push(node3_render_name({id:n[a]}));return t.join(r?" &gt;<br />":" &gt; ")}function node3_render_channel(e,r){var n,t=e.channel;if(t&&t.length&&1<t.length)for(n=1;n<t.length;++n)if(t[n]&&t[n]!=t[0])return node3_render_channel.hard(e,t,r);return"object"==typeof t?t[0]||"":t||""}function node3_render_num_active_ports(e){var r=e.num_active_ports||"-";return r+" / "+e.num_ports}function node3_render_l3_routing_status(e){return e.has_l3?"Enabled":"t"===e.supports_l3?"Not enabled":"Not supported"}function node3_render_last_active(e){var r,n=e["last_active#"]||0;return n?(r=data3_now()-data3_load.timeoffset("last_active#"),e=Mkiconf[nodes_meta.upseries?"node_upseries_thresh":"node_timeout"],render_ago_interval(n,r,nodes_meta["last_active#"],300,e)):"never"}function render_node_uptime(e,r){if("now"!=r)return"&mdash;";var n="",r=Math.floor(e/86400);r&&(n=n+r.toString()+"d "),e-=86400*r;r=Math.floor(e/3600);r&&(n=n+r.toString()+"h "),e-=3600*r;r=Math.floor(e/60);return r&&(n=n+r.toString()+"m "),n=(e-=60*r)?n+e.toString()+"s":n}function client3_render_name(e,r,n){if(url=Mkiconf.client_show_url,void 0===e.id||!url)return r;if(void 0===e.meraki_model||""===e.meraki_model)return 3==url.match(/%23|%2523/g).length&&url.match(/#c=%23|#c=%2523/)?(url=url.replace(/%23|%2523/,e.ng_tag),url=url.replace(/%23|%2523/,e.ng_eid),url=url.replace(/%23|%2523/,e.id),'<a href="'+url+'">'+r+"</a>"):2==url.match(/%23|%2523/g).length&&url.match(/#c=#/)?(url=url.replace(/%23|%2523/,e.ng_tag),url=url.replace(/%23|%2523/,e.ng_eid),url=url.replace("#c=#","#c="+e.id),'<a href="'+url+'">'+r+"</a>"):'<a href="'+url.replace(/%23|%2523/,e.id)+'">'+r+"</a>";var t="/%23/n/%23/"+Mkiconf.node_show_url.split("/").slice(4).join("/");return-1!==e.node_id?(url=t.replace(/%23|%2523/,e.ng_tag),url=url.replace(/%23|%2523/,e.ng_eid),url=t.replace(/%23|%2523/,e.node_network_name.replace(/\s+/g,"")),url=url.replace(/%23|%2523/,e.node_ng_eid),url=url.replace(/%23|%2523/,e.node_id),'<a href="'+url+'">'+r+"</a>"):r}function client3_render_description(e,r){e=e.client_vpn_details?e.description||e.mdns_name||e.netbois||e.client_vpn_details.user||"(unknown)":decodeURIComponent(e.description||e.mdns_name||e.netbios||e.dhcp_hostname||e.mac||"(unknown)");return r?e:JSTemplate.escape(e)}function client3_render_last_seen_at(e){var r=e["last_seen_at#"]||0;return e.curr_assoc?"now":r?render_ago_interval(r,data3_now()-data3_load.timeoffset("last_seen_at#"),clients_meta["last_seen_at#"],300,client3_render_last_seen_at.now_expiry):"unknown"}function client3_render_first_seen_at(e){e=e["first_seen_at#"]||0;return e?render_ago_interval(e,data3_now()-data3_load.timeoffset("first_seen_at#"),clients_meta["last_seen_at#"],300):"unknown"}function client3_render_last_seen_by(e){var r=nodes_hash[e.node_id||0],r=(r?r.name||r.mac:null)||"(unknown)";return Mkiconf.node_show_url&&e.node_id?'<a href="'+Mkiconf.node_show_url.replace(/%23|%2523/,e.node_id)+'" target="_blank">'+r+"</a>":r}function client3_render_ass_at(e){e=e.ass_at||0;return e?render_ago_interval(e,data3_now()-data3_load.timeoffset("ass_at"),clients_meta.ass_at,300,client3_render_last_seen_at.now_expiry):"unknown"}function client3_render_connection(e){return e.wiretype?2==e.wiretype?"wired, wireless":1==e.wiretype?"wired":"(unknown)":"wireless"}function client3_render_status(e,r){var n=!1;return void 0!==e.curr_assoc?n=e.curr_assoc:e["last_seen_at#"]&&(n=data3_now()-data3_load.timeoffset("last_seen_at#")-e["last_seen_at#"]<300),!r||e.port&&0==e.port.indexOf("apr")?"<div class='client_status'><img src='"+Mkiconf.images+"client_status_all.png' class='"+(n?"active":"inactive")+"'/></div>":""}function client3_access_status(e){var r=Mkiconf.bigacl_group_num_none,n=!!e.access_policy;return n&&(n&&e.access_policy.ssid?r="ssid_policy_map":n&&void 0!==e.access_policy.network?99<(r=e.access_policy.network)&&(r="group_policy"):hQuery("#group policies per device did not end well.")),r}function client3_render_mx_client_type(e,r){return e.client_vpn_details?"Client VPN":r+(0==e.port.indexOf("apr")?"Wireless":"Wired")}function group_num_to_text(e){switch(e){case Mkiconf.bigacl_group_num_none:return"normal";case Mkiconf.bigacl_group_num_blocked:return"blocked";case Mkiconf.bigacl_group_num_whitelist:return"whitelisted";default:return Mkiconf.group_policies[e]||"normal"}}function client3_access_status_to_text(e){var r,n=[],t=client3_access_status(e);switch(t){case Mkiconf.bigacl_group_num_none:case Mkiconf.bigacl_group_num_blocked:case Mkiconf.bigacl_group_num_whitelist:return group_num_to_text(t);case"group_policy":return group_num_to_text(e.access_policy.network);case"ssid_policy_map":for(var a in e.access_policy.ssid)r=group_num_to_text(e.access_policy.ssid[a]),$j.inArray(r,n)<0&&n.push(r);return n.join(", ");default:return hQuery(["#bewest.error unknown status code",t].join(": ")),"normal"}}function client3_render_access_status(e,r){var n=client3_access_status(e),e=client3_access_status_to_text(e),t="",a="",i="";switch(n){case Mkiconf.bigacl_group_num_none:i="as_normal";break;case Mkiconf.bigacl_group_num_blocked:i="as_blocked";break;case Mkiconf.bigacl_group_num_whitelist:i="as_whitelisted";break;case"group_policy":t="Custom policy: ",i="as_group_policy";break;case"ssid_policy_map":t="Per-SSID group policies (",a=")",i="as_group_policy"}return(r?[t,e,a]:["<span ","data-filter='",e,"' ","class='",i,"' ",">",t,e,a,"</span>"]).join("")}function client3_render_bigacl_status(e,r,n){var t=e.bigacl;if(null!=t){var a,i,_=!1;for(retval="<div>",a=0;a<t.length;a++)p=t[a],p.admin_only&&!Mkiconf.admin_user||(_=!0,i=Mkiconf.has_wired&&p.wired_vlan,"<div>"!=retval&&(retval+="<br />"),retval+="<div"+(p.admin_only?" class='adminhighlight'":"")+">",(Mkiconf.has_wireless||i)&&(retval+="<b>"+(i?"VLAN":"SSID")+": "+p.name+"</b><br />"),retval+=p.authorized+" ago, user authenticated with "+p.auth_reason+" splash.","s-auth-fb"!=p.raw_auth_reason&&(retval+="Authorization will expire "+p.expires+"."),"s-billing"!=p.raw_auth_reason&&(retval+=" (<span><a class='bigacledit-"+r+"-revoke' ssid='"+p.vap+(i?"' wired_vlan='"+p.wired_vlan:"")+"' reason='"+p.raw_auth_reason+"' href='#'>revoke authorization</a></span>)"),p.is_overridden&&(i=p.override,retval+="<br />Overridden by: "+i.reason+" "+i.when+" ago."),retval+="</div>");return retval+="</div>",_?n.show():n.hide(),retval}}function client3_render_capf(e){return general_capf(e.capf||-1)}function general_capf(e){return-1===e?"":"802.11"+"bgnnaann".charAt(7&e)+", "+(4&e?"2.4 and 5 GHz":"2.4 GHz")}function client3_render_rssi(e){return!e||e<0?"&mdash;":"<table class='lean'><tr><td style='width:3em'><div class='rmbar_gy' style='width:"+Math.round(100*Math.max(Math.min(e,50),0)/50)+"%'></div></td><td style='text-align:right;width:3em'>"+e+" dB</td></tr></table>"}function proportion_bar_html(e,r){var n=_.escape(e);return'<table class="lean" style="margin:0 0 0 auto"><tbody><tr><td style="width:7.5em"><div class="rmbar_gy" style="width:'+_.escape(r?r+"%":e)+'"></div></td><td style="text-align:right;width:3.5em">'+n+"</td></tr></tbody></table>"}function login3_render_login_at(e){e=e.login_at||0;return e?render_timestamp(e):"unknown"}function login3_render_client_description(e,r){var n=Mkijson.c.hash[e.client_key||0],n=n?client3_render_description(n):e.mac||"(unknown)";return!Mkiconf.client_show_url||!e.client_key||r&&r.nolink?n:'<a href="'+Mkiconf.client_show_url.replace(/%23|%2523/,e.client_key)+'">'+n+"</a>"}function login3_render_gateway(e,r){var n=nodes_hash[e.gateway||0],n=(n?n.name||n.mac:null)||"(unknown)";return!Mkiconf.node_show_url||!e.gateway||r&&r.nolink?n:'<a href="'+Mkiconf.node_show_url.replace(/%23|%2523/,e.gateway)+'">'+n+"</a>"}function render_power_field(e){return void 0!==e?e/1e3+" W":"-"}function render_bytes_field(e){return e?unparse_bytes(e):"-"}function render_packets_field(e){return e?human_readable_number(e):"-"}function render_port_mirror_status(e){if(e.is_mirror_src_port){if(e.mirror_dest_vlan)return"Mirrored to VLAN "+e.mirror_dest_vlan;var r=Mkijson.ports.hash[e.mirror_dest_port];return"Mirrored to "+r.switch+" / "+render_port_number(r)}return e.is_mirror_dest_port?"Mirror destination":"-"}function render_port_type(e){return e.is_dedicated_stack_port?"-":e.is_trunk?"trunk":"access"}function render_port_number(e){if(e.is_dedicated_stack_port)return"Dedicated stack port "+e.dedicated_stack_port_num;if(e.id.match(/stack_aggr/)){var r=[];return(r=e.agg_group.port_sw_ids?_.map(e.agg_group.port_sw_ids,function(e){var r=e[0];return e[2]+"/"+r}):r).join("<br/>")}return e.num.join(", ")}function render_port_description(e){var r="",n=e.id.match(/stack_aggr/),t=n?"Stack aggregate: "+e.agg_group.aggr_id:render_port_number(e);r+="<a href='#edit_port'>"+(n?e.stack:e.switch)+" / "+t+"</a>",e.is_uplink&&(r+=" - uplink");n=n?url_for_switchport(e.num[0][1],e.num[0][0]):url_for_switchport(e.switch_id,e.num[0]);return e.switch_id&&(r+="<a class='leave-link' target='_blank' href='"+n+"'>details</a>"),r}function render_switchport_vlan(e){if(e.is_dedicated_stack_port)return"-";if(e.is_trunk)return e.native_vid?"native "+e.native_vid:"&mdash;";var r=e.vid;return e.voice_vid&&(r+=", voice "+e.voice_vid),r}function render_switchport_trusted(e){return e.is_stackport?"-":1==e.dai_trusted}function render_mx_module_name(e){e=e.module.split(/;/);return"builtin"==e[0]?"Built-in":"Module "+(parseInt(e[0])+1)+" ("+e[1]+")"}function render_mx_port_vlan(e){var r;return"false"===e.enabled?"&mdash;":"true"===e.is_trunk?(r=Mkijson.mx_configured_vlans[e.native_vlan_guid])?"Native: "+_.escape(r.desc):"Drop untagged traffic":(r=Mkijson.mx_configured_vlans[e.access_vlan_guid])?_.escape(r.desc):"&mdash;"}function render_mx_port_allowed_vlans(e){var r,n,t="",a="";if("false"===e.enabled||"false"===e.is_trunk)return"&mdash;";if("all"===e.allowed_vlans[0])return"All";for(n in e.allowed_vlans)r=e.allowed_vlans[n],(r=Mkijson.mx_configured_vlans[r])&&(t+=a+_.escape(r.desc),a=", ");return t}function render_mx_port_access_policy_type(e){var r="";return"true"===e.is_trunk?r="&mdash;":"open"==(r=e.access_policy_type)?r="Open":"8021x"==r?r="802.1X":"mac_radius"==r?r="Mac authentication bypass":"hybrid_8021x_mac"==r&&(r="Hybrid"),r}function sort_switchport_trusted(e){return e.dai_trusted}function sort_switchport_vlan(e){var r=0;return e.is_trunk?r=1e4+e.native_vid:(r=e.vid,e.voice_vid&&(r+=e.voice_vid/5e3)),r}function render_traffic_field(e){var r="";return e.traffic||e.traffic_sent&&e.traffic_recv&&0===e.traffic?(r+=unparse_size(e.traffic,!0,"bps"),(e.traffic_sent||e.traffic_recv)&&(r+=dimtext(" ("+unparse_size(e.traffic_sent||0,!0,"bps")+" ↓, "+unparse_size(e.traffic_recv||0,!0,"bps")+" ↑)"))):r+="-",r}function render_switchport_status(e,t,a,i){function _(e){var r=$(this).offset();r.left+=e.midpoint+e.offset.left;e=unparse_date(e.start,"%b %-d %H:%M",1)+" &ndash; "+unparse_date(e.end,"%b %-d %H:%M",1)+"<br/>"+switchportStatusMessageText({curr_status:e.item[2],stp_flags:e.item[3],usageStatus:e.item[4],isAdmin:Mkiconf.is_acting_admin});$(this).hohelp(e,{offset:r,nostack:!0,above:!0})}var s=0,o=0;$(e).each(function(e,r){s=s||$(r).width(),o=o||$(r).height();var n=$(r).attr("id").match(/status_(.*)/)[1];t[n]&&($(r).empty(),$(r).fill_graph({data:switchportCodifyStatus(t[n].status),color_map:{5:"mki_dark_green_high_contrast",4:"mki_light_green_high_contrast",3:"mki_orange",2:"mki_red",1:"mki_light_gray",0:"mki_light_gray"},priority:[1,2,3,4,5,0],default_state:0,hover:_,check_visibility:!1,width:s,height:o,t0:a,t1:i}))})}function render_device_icon(e){var r="";if(e=e+""){if(e.match(/MS/g))r+="ms";else if(e.match(/MX/g)||e.match(/mx/g))r+="mx";else if(e.match(/Shoretel/g)||e.match(/Phone/g))r+="phone";else if(e.match(/Polycom/g))r+="speaker";else if(e.match(/MR11/g))r+="mr mr11";else if(e.match(/MR12/g))r+="mr mr12";else if(e.match(/MR14/g))r+="mr mr14";else if(e.match(/MR16/g))r+="mr mr16";else if(e.match(/MR18/g))r+="mr mr18";else if(e.match(/MR24/g))r+="mr mr24";else if(e.match(/MR26/g))r+="mr mr26";else if(e.match(/MR30H/g))r+="mr mr30h";else if(e.match(/MR32/g))r+="mr mr32";else if(e.match(/MR33/g))r+="mr mr33";else if(e.match(/MR34/g))r+="mr mr34";else if(e.match(/MR42/g))r+="mr mr42";else if(e.match(/MR52/g))r+="mr mr52";else if(e.match(/MR53/g))r+="mr mr53";else if(e.match(/MR58/g))r+="mr mr58";else if(e.match(/MR62/g))r+="mr mr62";else if(e.match(/MR66/g))r+="mr mr66";else if(e.match(/MR72/g))r+="mr mr72";else if(e.match(/MR74/g))r+="mr mr74";else{if(!e.match(/MR84/g))return"";r+="mr mr84"}return"<span><img src='/images/onebyone.gif' class='lldp_icon "+r+"'></span>"}return""}function render_lldp_device(e,r){if(!e)return"-";var n=e.mac?url_for({controller:"dashboard",action:"show",mac:e.mac}):null;if(r){for(var t,a,i=[],s=e.lldp&&e.lldp.opts||e.cdp&&e.cdp.opts,o=0;o<s.length;o++){var c=s[o][0],l=s[o][1]+"";"System name"===c?t=l:"Port ID"===c?a=l:"System description"===c&&(u=l),c=c.replace(/\r|\n/g," ").replace("'",""),l=l.replace(/\r|\n/g," ").replace("'",""),i.push({lldp_label:c,value:l,order:o})}return t=t||e.lldp&&e.lldp.device||e.cdp&&e.cdp.device,r=render_device_icon(u),r+=n?"<a href='"+_.escape(n)+"'>"+_.escape(t)+"</a>":_.escape(t),t&&a&&a.match(/^\s*\d+\s*$/)&&0<a&&(a=_.escape($.trim(a)),r+=" / "+(a=is_mki_mac(e.mac)?"<a href='"+_.escape(n)+"&port="+a+"'>"+a+"</a>":a)),t&&u?r+=" <span class='dimtext'>("+_.escape(u)+")</span>":u&&(r=n?"<a href='"+_.escape(n)+"'>"+_.escape(u)+"</a>":_.escape(u)),r+=" <a data-packet='"+_.escape(JSON.stringify(i))+"'class='raw_lldp_link' href='#'>raw</a>"}var d=[];if(s=e.lldp&&e.lldp.opts||e.cdp&&e.cdp.opts)for(o=0;o<s.length;o++){c=s[o][0],l=s[o][1]+"";"System description"===c&&(d=l)}var u=e.lldp&&e.lldp.device||e.cdp&&e.cdp.device||"-";return render_device_icon(d)+(n?"<a href='"+_.escape(n)+"'>"+_.escape(u)+"</a>":_.escape(u))}function render_lldp_url(e){if(e.device_id){var r=MKI.node_health_status[MKI.mtunnel_state_lookup[e.node_health]],n={model:e.model,"status#":0===r?2:1===r?0:2===r?1:3,is_gateway:!1,iswd:e.iswd,product_short_description:e.prod_desc,product_icon:e.prod_icon},r=node3_render_status(n);0<$(r).find('img[src="/images/node_icons/buck_all.png?5"]').length&&(r=$(r).css({top:"3px",width:"36px"})[0].outerHTML);n=url_for_ng_and_node(e.device_id,{tag:e.ng_tag,eid:e.ng_eid}),r="<div style='display:table;'><div style='display:table-cell;'>"+r+"</div><div style='display:table-cell;'><div style='position:relative; bottom:5px; left:2px;'><a href='"+_.escape(n)+"'>"+_.escape(e.name_or_mac)+"</a>";return e.port_desc&&(n=e.port_desc.split(" ")[1],n=url_for_ng_and_switchport(e.device_id,n,{tag:e.ng_tag,eid:e.ng_eid}),r+=" / <a href='"+_.escape(n)+"'>"+_.escape(e.port_desc)+"</a></div></div></div>"),r}return e.name_or_mac?(r=e.name_or_mac,e.port_desc?r+" / "+e.port_desc:r):e.port_desc||""}function render_parent_profile_link(e){return e.node_profile_id?link_for_switch_profile(e.node_profile_id,e.node_profile_name,_.pick(Mkiconf.config_template,["eid","name"])):""}function render_dhcp_agent_desc(e){var r="";return e.node_url&&e.link_desc?e.if_name?(r+="<a href='"+e.node_url+"'>"+e.link_desc+"</a>",r+=" (interface <a href='"+e.if_url+"'>"+e.if_name+"</a>)"):r+="<a href='"+e.node_url+"'>"+e.link_desc+"</a>":e.client_key&&e.link_desc?r+=link_for_client(e.client_key,e.link_desc):r+=e.mac,r}function render_node_links(e){return e.map(function(e){return e.url?"<a href='"+e.url+"'>"+e.name+"</a>":e.name})}function render_config_status(e){return parseInt(e["config_fetch_at#"],10)>=parseInt(e["config_new_at#"],10)?"Up to date":"Not up to date"}function render_config_last_fetched(e){return e["config_fetch_at#"]?(cf_ago=unparse_interval($.now()/1e3-e["config_fetch_at#"]),cf_ago+" ago"):"Never"}function render_fw_version(e){if(e.running_build){var r="<text";return e.firmware_mismatch&&(r+=' style="color:red;"'),e.configured_build&&(r+=' title="'+e.configured_build+'"'),r+=">"+e.running_build,e.eco&&(r+="*"),r+="</text>"}return""}function maybe_render_delete_cloudshark_link(e){return e.cloudshark_url&&"[deleted]"!=e.cloudshark_url?'<a href="#" onclick="delete_cloudshark(\''+e.id+"');\">Delete</a>":""}node3_render_status=function(){var l=["active","alerting","unreachable","dormant","dormant"],d=["Active","Alerting","Unreachable","Dormant","Unseen"],u={},f={};return function(e,r){var n,t,a=e["status#"],i="camera"===e.product_type||!e.is_gateway||null!=e.iswd&&e.iswd?"":"_gw",_=e.model;if(e.tags&&e.tags.match(/ airmarshal /i))return $("<img />",{src:"/images/mks/node-am-"+l[a]+".svg",alt:d[a]+" AirMarshal scanner"}).css({width:"20px",height:"20px"}).outerHTML();if((null==a||a<0||4<a)&&(a="x"),_&&(t=(r?f:u)[_])&&(t=t[a+i]))return t;var s,o=(s=r?"ni_sm":"ni")+"_",c="x"==a?(n="","blank"):(n=d[a]+" ",l[a]);return n+=node_product_info(e,"short_description","AP"),t='<div class="pc'+s+node_product_info(e,"icon_extra_class","")+'"><img src="'+Mkiconf.images+"node_icons/"+node_product_info(e,"icon","unknown")+(r?"_small":"_all")+'.png?5" class="p'+o+c+i+'" alt="'+(_||"UNKNOWN")+'" title="'+n+'" /></div>',_&&((c=r?f:u)[_]=c[_]||{},c[_][a+i]=t),t}}(),node3_render_channel.hard=function(e,r,n){for(var t=[],a=node_product_info(e,"interface_names"),i=0;i<r.length;++i)r[i]&&t.push([a[i]||i,r[i]]);for(t.sort(function(e,r){return strcmp(e[0],r[0])}),i=0;i<t.length;++i)t[i]=t[i][1]+(n?" ("+t[i][0]+")":"");return t.join(", ")},l3_render_rusagecol={percent:function(e,r){var n;return(r||0)<=0?"N/A":(n=100*(e||0)/r,r=unparse_fraction_as_percent(e,r),n<=.5?r:"<table class='lean' style='margin:0 0 0 auto'><tr><td style='width:7.5em'><div class='rmbar_gy' style='width:"+n.toFixed(1)+"%'></div></td><td style='text-align:right;width:3.5em'>"+r+"</td></tr></table>")}},node3_render_neighcol=function(){function r(e,r){var n=Math.round(r.fwd_rate*r.rev_rate/100),r="<td style='width:5em'><div class='rmbar";return n<40?r+="_r":n<70&&(r+="_y"),r+"' style='width:"+n+"%'></div></td><td style='text-align:right;width:2.5em'>"+n+"%</td>"}function n(e){return Math.round(e)+"%"}function i(e,r,n){for(var t,a="",i=e.stats,_=0;_<i.length;++_)t=(t=i[_]).is_wired?n:r(e,t),a+=_?"<br /><span class='mki-fade'>"+t+"</span>":t;return a}return{recv_signal:function(e){return i(e,function(e,r){r=r.rssi_11b;return 0<=r?r+" dB":"N/A"},"&mdash;")},linkqual:function(e){return function(e,r,n,t){for(var a,i="<table class='lean'"+(t||"")+">",_=e.stats,s=0;s<_.length;++s)i+=(s?"<tr class='mki-fade'>":"<tr>")+((a=_[s]).is_wired?n:r(e,a))+"</tr>";return i+"</table>"}(e,r,"<td colspan='2' style='text-align:right'>&mdash;</td>"," style='margin:0 0 0 auto'")},fwd:function(e){return i(e,function(e,r){return n(r.fwd_rate)},"&mdash;")},outr:function(e){return i(e,function(e,r){return"&nbsp;<small>"+n(r.fwd_rate)+"</small>"},"&mdash;")},rev:function(e){return i(e,function(e,r){return n(r.rev_rate)},"&mdash;")},inr:function(e){return i(e,function(e,r){return"&nbsp;<small>"+n(r.rev_rate)+"</small>"},"&mdash;")},interfaces:function(e){var n=node_product_info(s3node,"interface_names");return i(e,function(e,r){return n[r.inum-1]||""},"wired")},channel:function(e){var t=node_product_info(s3node,"interface_names"),a=s3node.channel||[];return i(e,function(e,r){var n=a[r.inum],r=t[r.inum];return n&&r?n+" ("+r+")":(n||"")+(r||"")},"wired")}}}(),client3_render_last_seen_at.now_expiry=30;var render_array=function(r){var n=!1;return function(e){return e&&0!==e.length?1===e.length?e[0]:(n||(r(document).on("click","div.multi_row_flex_cell a.show_hide_link",function(){var e=r(this).siblings("div.hidden_rows");return e.is(":visible")?(e.hide(),r(this).html(r(this).attr("num_hidden_rows")+" more &raquo;")):(e.show(),r(this).html("&laquo; hide")),!1}),n=!0),"<div class='multi_row_flex_cell'><span class='first_row'>"+e[0]+"&nbsp;&nbsp;</span><div class='hidden_rows' style='display: none'>"+e.slice(1).join("<br/>")+"</div><a href='#' class='show_hide_link' num_hidden_rows="+(e.length-1)+">"+(e.length-1)+" more &raquo;</a>"):""}}(jQuery);