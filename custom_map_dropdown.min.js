/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
!function(){var e=Backbone.Epoxy.View.extend({tagName:"li",bindings:{":el":"text:name,toggle:is_map_visible"}}),i=Backbone.Epoxy.View.extend({tagName:"ul",bindings:{":el":"collection:$collection"},itemView:e});window.MKI.Views.CustomMapDropdown=Backbone.View.extend({tagName:"div",events:{"click .header":"toggle","click li":"setMap"},initialize:function(){var e=this.$el,e=$("<div>",{class:"custom_map_type_control_wrapper"}).appendTo(e),t=$("<div>",{class:"custom_map_control custom_map_type list_hidden"}).appendTo(e);_custom_map_control_header=$('<div class="header"><span id="custom_map_header_text">'+(this.options.initial_map_name||"Floor plans")+'</span> <i class="fa fa-caret-down"></i></div>'),_custom_map_control_header.appendTo(t),this.list=new i({collection:this.collection}),t.append(this.list.$el),$("body").on("click",function(){t.addClass("list_hidden")}),this.showHide();var o=this;o.collection.on("change add remove reset",function(){o.showHide()})},toggle:function(e){this.$(".custom_map_control").toggleClass("list_hidden"),e.stopPropagation()},setMap:function(e){var o=this,t=$(e.target),e=o.collection.findWhere({name:t.text()}),i=e.id;google.maps.event.addListenerOnce(o.options.map,"bounds_changed",function(e){var t=o.options.map.getZoom();o.options.map.setZoom(10),setTimeout(function(){o.options.map.setZoom(t)},0)}),i!=o.options.map.getMapTypeId()&&(e.get("is_geoaligned")?o.options.map.setMapTypeId(i):e.get("node_floorplan_placements").fetch().done(function(){o.options.map.setMapTypeId(i)}),t.addClass("selected").siblings().removeClass("selected"),o.$("#custom_map_header_text").text(t.text()),o.$(".custom_map_control.custom_map_type").addClass("list_hidden"))},showHide:function(){this.$(".custom_map_control").toggle(_.any(this.collection.pluck("is_map_visible")))}})}();