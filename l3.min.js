/* Some or all contents Copyright (c) 2010-2025 Cisco Systems, Inc., all rights reserved */
function network_useblocks(e,t){var n,a,r,s=data3_load.timespan_aggobject("n",t-e);if(s&&(n=s.data.nuseblocks))return n;if(s&&(r=s.data.nsuseblocks)){for(a in n=[],r)blockseries_add(n,r[a]);return n}return(s=data3_load.timespan_aggobject("c",t-e))&&(n=s.data.cuseblocks)||(s=data3_load.timespan_aggobject("ng",t-e))&&(n=s.data.nuseblocks)?n:[]}function useblocks_graphseries(e,t,n,a){var r,s,o,i,c,l,u,d,_,p;if(!e||e.length<2)return[[1e3*t,0],[1e3*n,0]];for(r=[[1e3*((i=e[(s=Math.max(timeseries_upper_bound(e,t)-1,1))-1][0])-(u=(l=(c=(o=e[s])[0])-i)+1)+u/2),d=_=p=0]],max_area_error_factor=(n-t)/64;;){if(0==l)throw new Error("bad blockseries");var f=o[1]||0,h=o[2]||0,g=f||h?(i<t||n<c?0<=(m=(Math.min(c,n)-Math.max(i,t))/l)&&(_+=f*m,p+=h*m):(_+=f,p+=h),8192*(f+h)/l):0,m=n<=i||s>=e.length&&0==g;if(d!=g?((h=1e3*(i-(f=Math.min(u,l,max_area_error_factor))/2))>r[r.length-1][0]&&r.push([h,d]),r.push([1e3*(i+f/2),g])):m?r.push([1e3*i,g]):r.push([1e3*(i+l/2),g]),m)return a&&(a[0]=_,a[1]=p),r;d=g,u=l,i=c,l=(c=(o=e[++s]||[i+u])[0])-i}}function split_out(e){var n=new Array;return e.forEach(function(e,t){3===e.length?n.push([e[0],e[1],0]):n.push(e)}),n}function graph_network_useblocks_base(e,t,n){var a,r=Mkijson.main.meta,s=jQuery(n.canvas).data("timespan")||0,o=data3_load.timespan_aggobject("n",s,"nuseblocks")||data3_load.timespan_aggobject("c",s,"cuseblocks"),i=o&&o.meta.t0||r.t0,c=r.grapht1||o&&o.meta.t1||r.t1;if(i=i||Mkijson.n.meta.t0,c=c||Mkijson.n.meta.t1,null==i||null==c)return"stop";a=network_useblocks(i,c),download_traffic=split_out(a),t.push({data:useblocks_graphseries(a,i,c,(o={t:[]}).t),color:"rgb(0, 169, 224)",lines:{fill:!0,fillColor:"rgba(0, 169, 224, 0.3)"}}),n.displayDownload&&(download_totals={t:[]},t.push({data:useblocks_graphseries(download_traffic,i,c,download_totals.t),color:"rgb(97,123,255)",lines:{fill:!0,fillColor:"rgba(97, 123, 255, 0.3)"}})),null!=(a=Mkiconf.ssid_number)&&0<=a&&(s=Mkijson.n.all.nsuseblocks)&&(t[t.length-1].color="rgb(224,224,224)",o[a]=[0,0],s[a]&&t.push({data:useblocks_graphseries(s[a],i,c,o[a]),color:mkigraph.line_color})),n.xaxis.min=1e3*i,n.xaxis.max=1e3*c,r.at&&600<c-r.at&&((c=n.grid=n.grid||{}).coloredAreas=c.coloredAreas||[],c.coloredAreas.push({x1:1e3*r.at,x2:n.xaxis.max,color:"rgba(100,100,100,0.5)",mode:"top"})),(s=graph_network_useblocks_base.callback)&&s(o)}Mkijson=window.Mkijson||{},Mkijson.n=Mkijson.n||{hash:{},meta:{},all:{},allmeta:{}},Mkijson.c=Mkijson.c||{hash:{},meta:{},all:{},allmeta:{}},Mkijson.g=Mkijson.g||{hash:{},meta:{},all:{},allmeta:{}},Mkijson.ng=Mkijson.ng||{hash:{},meta:{},all:{},allmeta:{}},Mkijson.pccm=Mkijson.pccm||{hash:{},meta:{},all:{},allmeta:{}},nodes_hash=Mkijson.n.hash=window.nodes_hash||Mkijson.n.hash,nodes_meta=Mkijson.n.meta=window.nodes_meta||Mkijson.n.meta,clients_hash=Mkijson.c.hash=window.clients_hash||Mkijson.c.hash,clients_meta=Mkijson.c.meta=window.clients_meta||Mkijson.c.meta,set_page_loading_status(0),function(e){var t=0;window.inc_use_graph_loading=function(){Mkiconf.new_list?mkigraph.toggle_spinner("#usage_graph",!0):e("#transferreds_graph_spinner").show(),t++},window.dec_use_graph_loading=function(){--t<=0&&(t=0,Mkiconf.new_list?mkigraph.toggle_spinner("#usage_graph",!1):e("#transferreds_graph_spinner").hide())}}(jQuery);var graph_network_use=function(r){var n,a,s=0,o=!1;function e(e,t,n,a){var r=1e3*Math.max(Mkijson.c.meta.cuseblocks_fullt1||0,Mkijson.n.allmeta.nuseblocks_fullt1||0,Mkijson.c.allmeta.cuseblocks_fullt1||0),t=r&&t.x>r;t&&0<s?hohelp("#transferreds_graph_canvas",Mkiconf.graph_out_of_date_html,{bottom:-25,left:i(a,r),right:i(a,a.getAxes().xaxis.max),nostack:!0}):t||hohelp("#transferreds_graph_canvas",null,{nostack:!0})}function i(e,t){return parseInt(e.getAxes().xaxis.p2c(+t)+e.getPlotOffset().left)}function t(e,t,n,a){var r,s=1e3*Math.max(Mkijson.c.meta.cuseblocks_fullt1||0,Mkijson.n.allmeta.nuseblocks_fullt1||0,Mkijson.c.allmeta.cuseblocks_fullt1||0);n.xaxis.max-n.xaxis.min<864e5&&s&&s<n.xaxis.max&&((r=n.grid=n.grid||{}).coloredAreas=r.coloredAreas||[],r.coloredAreas.push({x1:s,x2:n.xaxis.max,color:"rgba(220,220,220,0.5)",mode:"top"}),r.hoverable=!0,r.autoHighlight=!1)}var c=!1,l={},u=!1;function d(e,t){u=e,l=t,n||(a=make_network_use_loader(d),mkigraph.add_plugin("network_useblocks",graph_network_useblocks_base),n=!0,d.resizable&&(r(window).resize(d.resize),r(d.resize),d.resize())),d.timeseries_flot=mkigraph.timeseries("network_useblocks",r.extend({canvas:"#transferreds_graph_canvas",usage_loader:a,skip_invisible:!0},l)),window.graph_network_rusage&&"usage3"==Mkiconf.base&&!u&&graph_network_rusage(a),(o=!a.empty())&&!c&&inc_use_graph_loading(),!o&&c&&dec_use_graph_loading(),c=o,d.loader_paused?a.clear():a.discharge()}return d.resize=function(){var e,t,n,a;e=u,t=l,n=r("#transferreds_graph_canvas"),(a=n.parent().width())!=n.width()&&(n.empty().width(a),d(e,t))},d.show_fullt1_warning=function(){mkigraph.add_plugin("network_useblocks",t,3),$j("#transferreds_graph_canvas").bind("plothover",e).mouseover(function(){++s}).mouseout(function(){0<s&&--s,hohelp("#transferreds_graph_canvas",null,{nostack:!0})})},d.loading=function(){return o},d}(jQuery);function make_network_use_loader(t){var p=null,f={},h=1,s={};function o(s){var o=[];return function(){for(var e,t,n,a,r=1;r<h;r<<=1)if(r&s)for(a=f[r].callbacks,e=0;e<a.length;++e)for(n=a[e],o.push(n),t=o.length-2;0<=t;--t)if(o[t]==n){o.pop();break}}(),function(){for(var e=0;e<o.length;++e)o[e]();t&&t()}}return s.prepare=function(l,u,d){function e(e,t,n,a){var r,s,o,i,c;if(n=n.join?n:[n],"c"==l&&!n.length)return!1;for(c in r=[l,u,a].join(","),(o=f[r])||(f[r]=o={type:l,p:u,callbacks:[],htype:a,ptype_bit:h},f[h]=o,h<<=1),d&&o.callbacks[0]!=d&&o.callbacks.push(d),s=o.ptype_bit,r=[l,e,t].join(","),(o=(p=p||{})[r])||(p[r]=o={t0:e,t1:t,type:l,ptype_mask:0,ids:{}}),o.ptype_mask|=s,i=o.ids,n)i[n[c]]=(i[n[c]]||0)|s;return++_,!1}var _=0;return e.empty=function(){return 0==_},e},s.discharge=function(){var e,t,n,a,r=[];if(p){for(e in p)if(function(e){var t,n=0;for(t in e.ids)++n;return n}(p[e])<=30)r.push(p[e]);else for(a=1;a<h;a<<=1)(n=function(e,t){var n,a=jQuery.extend({},e,{ids:{},ptype_mask:t}),r=0;for(n in e.ids)e.ids[n]&t&&(a.ids[n]=!0,++r);return 30<r&&(a.agg=1),0<r?a:null}(p[e],a))&&r.push(n);for(e=0;e<r.length;++e)r[e].clean_ids=data3_load.clean_ids(r[e].ids);for(e=0;e<r.length;++e)for(t=e+1;t<r.length;++t)r[e].clean_ids==r[t].clean_ids&&r[e].type==r[t].type&&(function(e,t){var n,a=e.ids;for(n in e.ptype_mask|=t.ptype_mask,t.ids)a[n]=!0}(r[e],r[t]),r.splice(t,1),--t);for(e=0;e<r.length;++e){for(n=jQuery.extend({},r[e]),null!=Mkiconf.ssid_number&&(n.ssid=Mkiconf.ssid_number),delete n.ptype_mask,delete n.type,delete n.clean_ids,n.f=[],a=1;a<h;a<<=1)r[e].ptype_mask&a&&n.f.push(f[a].p);n.f=n.f.join(" "),data3_load.ajax(r[e].type,n,{complete:o(r[e].ptype_mask)})}s.clear()}},s.clear=function(){p=null,f=[],h=1},s.empty=function(){return!p},s}function graph_client_useblocks_base(e,t,n,a){var r=e[1],s=Mkijson.c.hash,o=Mkijson.c.meta,i=s[r],e=o.t0,s=o.grapht1||o.t1;if(n.xaxis.min=1e3*e,n.xaxis.max=1e3*s,i){if(!i.cuseblocks)return data3_load.ajax("c",{t0:e,t1:o.t1,f:"cuseblocks",ids:r},a),!0;t.push({data:useblocks_graphseries(i.cuseblocks,e,s),color:mkigraph.line_color})}else t.push({data:[[1e3*e,0],[1e3*s,0]],color:mkigraph.line_color})}function mki_manage_url(e,t,n){return(e=url_for_node_group({eid:e,tag:t||Mkiconf.administered_networks[e].t}))?e+(n||""):null}function l3_clean_mac(e,t){return(e=e.toLowerCase()).match(/^:?[0-9a-f]{2}(:[0-9a-f]{2}){0,5}:?$/)||t&&e.match(/^([0-9a-f]{2}:){0,5}([0-9a-f]{1,2})$/)||(e=e.replace(/[-.]/g,":").replace(/(^|:)([0-9a-f])(?=$|:)/g,"$010")).match(/^:?[0-9a-f]{2}(:[0-9a-f]{2}){0,5}:?$/)?e:e.match(/^(?:[0-9a-f][0-9a-f]:?)+$/)&&(e=e.replace(/:/g,"")).length<=12&&e.length%2==0?e.replace(/(..)/g,"$1:").slice(0,-1):void 0}function show3_cidr_match(e,t,n){if(!e)return!1;for(var a,r,s,o=e.split("."),i=t.split("."),c=0;c<4&&0<n;++c,n-=8)if(a=parseInt(o[c]||0,10),r=parseInt(i[c]||0,10),n<8&&(a&=s=256-(1<<8-n),r&=s),a!==r)return!1;return!0}function ip_sortable_string(e){return e?e.replace(/\d+/g,function(e){return("000"+e).slice(-3)}):"~~"}function range_match(e,t,n){var a;if(!e)return!1;for(null==e.length&&(e=[e]),a=0;a<e.length;++a)if(e[a]>=t&&e[a]<n)return!0;return!1}function split_text_comparison(e){e=e.match(/^([=!<>]?=?)\s*(.*)/);return""==e[1]?e[1]="==":"="!=e[1]&&"!"!=e[1]||(e[1]+="="),[e[1],e[2]]}function l3_match_channel(e,t,n,a){var r,s,o;if(/^[0-9]+$/.test(e))r=s=parseInt(e,10);else if(o=e.match(/^([0-9]+)-([0-9]+)$/))r=parseInt(o[1],10),s=parseInt(o[2],10);else{if(/^([!=<>]=?)\s*([0-9]+)$/.test(e))return"x.channel"+(o=split_text_comparison(e))[0]+parseInt(o[1],10);if(/^(?:[bg]+|2(?:\.4)?\s*g(?:hz)?)$/i.test(e))r=1,s=14;else if(/^(?:[an]+|5\s*g(?:hz)?)$/i.test(e))r=36,s=165;else{if(!/^[abgn]+$/i.test(e))return"false";r=1,s=165}}return"range_match(x.channel,"+r+","+(s+1)+")"}function data3_bind_change(s,o){jQuery(document).bind("node_change",function(e,t){var n,a,r;for(n in t)t.hasOwnProperty(n)&&!o[n]&&(a=!0);if(a)s.resort();else{for(r=s.selected_fields(),a=[],n=0;n<r.length;++n)!{last_active:1,last_seen_at:1,first_seen_at:1}[r[n]]||a.push(r[n]);a.length&&s.rerender_columns(a)}})}function data3_column_loader(r,s,o){var i=clients_meta;return"n"==r?i=nodes_meta:"ng"==r&&(i=Mkijson.ng.meta),function(e,t,n){n=n||o;var a=_.select(n.selected_fields(),function(e){return s[e]&&!i[e]});a.length&&i.t0&&i.t1?data3_load.ajax(r,{t0:i.t0,t1:i.t1,f:a.join(" ")},function(){var e=a;_.contains(a,"lldp_info0")?e.push("lldp_info1"):_.contains(a,"lldp_info1")&&e.push("lldp_info0"),n.set_column_loading(e,!1)}):$(this).trigger("data_loaded")}}function checked_json_submit(e,t,a){var n,r=[];for(n in checkbox3.checked)r.push(n);if(0==r.length)return checkbox3.unchecked_alert();if((a=a||{}).prompt_for){if((t=jQuery.extend({},t))[a.prompt_for]=t[a.prompt_for]||prompt(a.prompt||"Enter text."),null==t[a.prompt_for])return!1}else if(a.confirm&&!confirm(a.confirm))return!1;a.spinner&&$j(a.spinner).show();t={type:"POST",url:e,data:jQuery.extend({ids:r.join(" ")},t),dataType:"json",success:function(e){a.spinner&&$j(a.spinner).hide(),e.errf?jQuery.isFunction(a.errorCallback)?a.errorCallback(e):alert(br2nl(e.error)):e.clients||e.nodes||e.node_groups?data3_load(e):e.nodes_networks&&Mkiconf.h3nodes?(urlHash.pushState({n:void 0}),window.location.reload(!0)):e.pcc?($j.extend(!0,Mkijson.pccm.hash,e.pcc),void 0!==search_filter?search_filter.setData(Mkijson.pccm.hash):flex_table.set_items(Mkijson.pccm.hash)):e.ports&&$j.extend(!0,Mkijson.ports.hash,e.ports),e.fail&&jQuery.isFunction(a.errorCallback)?a.errorCallback(e):jQuery.isFunction(a.successCallback)&&a.successCallback(e)},error:function(e,t,n){a.spinner&&$j(a.spinner).hide();e=xhr_extract_error_json(e);jQuery.isFunction(a.errorCallback)?a.errorCallback(e):alert(br2nl(e.error))}};a.jsonp&&$j.extend(t,{dataType:"jsonp",jsonp:"jsonp"}),$j.ajax(t)}function post_submit(e,t,a){t={type:"POST",url:e,data:t,dataType:"json",success:function(e){e.errf?jQuery.isFunction(a.errorCallback)?a.errorCallback(e):alert(br2nl(e.error)):e.clients||e.nodes?data3_load(e):e.nodes_networks&&Mkiconf.h3nodes?(urlHash.pushState({n:void 0}),window.location.reload(!0)):e.pcc&&(flex_table.set_items(e.pcc),checkbox3.select_all_or_none()),jQuery.isFunction(a.successCallback)&&a.successCallback(e)},error:function(e,t,n){e=xhr_extract_error_json(e);jQuery.isFunction(a.errorCallback)?a.errorCallback(e):alert(br2nl(e.error))}};a.jsonp&&$j.extend(t,{dataType:"jsonp",jsonp:"jsonp"}),$j.ajax(t)}function build_advanced_search_select(e,t,n){var a=_.chain(t).keys().map(function(e){return[void 0===n?_.escape(e):n(e),_.escape(e)]}).sortBy(function(e){return e[0]}).map(function(e){return"<option value='"+e[1].toLowerCase()+"' class='notranslate'>"+e[0]+"</option>"}).value().join(""),t=$(e).val();$(e).html(a).val(t).trigger("chosen:updated")}function initialize_tag_actions(r){var l=$j(r.selector),s=r.data,u=r.field||"tags",d=r.extra_data_fields,p=r.extra_params,f=r.validate,h=r.url,e=$j(r.table_div),g=r.get_checked,m=r.get_checked_ids,k=r.update_checked,b=r.update_checked_extended,o=r.validate_new_tag;i();function i(){var e,t,n=[],a={};if(null!=Mkiconf.available_tags)return _.each(Mkiconf.available_tags,function(e){n.push(e.tag),a[e.tag]=!0}),n;for(e in s)null!==(t=s[e][u])&&(t=get_tags(t),$j.each(t,function(e,t){void 0===a[t]&&(n.push(t),a[t]=!0)}));return n.sort()}function j(){return"function"==typeof g?g():checkbox3.checked}function c(e){var t=e.add,n=e.remove,a=j(),r={};if(d&&_.each(d,function(e,t){r[t]=l.find(e).val()}),!f||f({add_tags:t,remove_tags:n,checked:a,extra:r})){var s,o={};if(t)$("#add_tag button").button("updating").removeClass("btn-primary"),o={add_tags:t.join(" ")};else{if(!n)return;$("#remove_tag button").button("updating").removeClass("btn-primary"),o={remove_tags:n}}_.isEmpty(r)||(o=_.extend(o,r)),_.isEmpty(p)||(o=_.extend(o,p)),g?(o.ids=(s=j(),("function"==typeof m?m(s):_.pluck(s,"id")).join(" ")),h?$j.post(h,o).done(i).fail(c):i({})):checked_json_submit(h,o,$j.extend({errorCallback:c,successCallback:i},e.spinner?{spinner:e.spinner}:{}))}else x();function i(e){if(!_.isEmpty(e.error))return c(e);l.find(".alert").hide(),k?k(t,n):b?b({params:o,server_response:e}):function(e){var t;for(node_id in e)t=e[node_id],$j("#item_"+node_id+" ."+u).html(render_tags(t[u]))}(a),void 0!==t?($j("#add_tag select").val(""),$j("#add_tag .chosen-select").trigger("chosen:updated"),$j("#add_tag button").button("updated").addClass("btn-success"),setTimeout(function(){$j("#add_tag button").button("reset").removeClass("btn-success active").addClass("btn-primary")},3e3),l.trigger("tags_changed")):void 0!==n&&($j("#remove_tag select").val(""),$j("#remove_tag .chosen-select").trigger("chosen:updated"),$j("#remove_tag button").button("updated").addClass("btn-success"),setTimeout(function(){$j("#remove_tag button").button("reset").removeClass("btn-success active").addClass("btn-primary")},3e3),l.trigger("tags_changed"))}function c(e){var t="There was an error contacting the server.  No changes to your tags have been made.";try{t=(e.responseText?JSON.parse(e.responseText):e).error||t}catch(e){}l.find(".alert span").text(t).end().find(".alert").show(),$j("#add_tag button").button("reset").removeClass("btn-success active").addClass("btn-primary"),$j("#remove_tag button").button("reset").removeClass("btn-success active").addClass("btn-primary")}}function v(e,n){var a=[];return e.forEach(function(e){var t=document.createElement("option");t.setAttribute("value",e.tag||e),t.appendChild(document.createTextNode(e.display_name||e)),e.is_auto&&t.classList.add("auto-tag"),t.classList.add("notranslate"),n&&n.appendChild(t),a.push(t)}),a}function x(){var e,a,r,t=_.chain(j()).map(function(e){e=e[u];return e&&get_tags(e)}).flatten().compact().unique().value().sort(case_insensitive_sort),n="",s=0===t.length;_.isUndefined(Mkiconf.available_tags)?(e=v(i()),$j("#add_tag select").empty().append(e).trigger("chosen:updated")):(e=Mkiconf.allowed_tag_groups?_.select(Mkiconf.available_tags,function(e){return _.contains(Mkiconf.allowed_tag_groups,e.group)}):Mkiconf.available_tags,e=_.groupBy(e,function(e){return e.group}),a=e,r=[],Object.keys(a).forEach(function(e){var t=a[e],n=document.createElement("optgroup");n.setAttribute("label",e),v(t,n),r.push(n)}),e=r,$j("#add_tag select").empty().append(e).trigger("chosen:updated")),$j("#remove_tag table").toggle(!s),$j("#remove_tag .no_tags_selected").toggle(s),s||(n=$j.map(t,function(e){return"<option value='"+_.escape(e)+"'>"+tag_display_name(e)+"</option>"}),$j("#remove_tag select").html(n.join("")).trigger("chosen:updated")),$j("#remove_tag button").attr("disabled",s)}l.find("#add_tag .chosen-select").chosen({create_option:function(e,t){t.call(this,{value:_.unescape(e),text:_.unescape(e)})}}),l.find("#remove_tag .chosen-select").chosen(),l.children(".btn[data-toggle]").click(x),l.find("#add_tag button").off("click").click(function(){var e=l,t=e.find("#add_tag select");_.isEmpty(e.find(".search-field input").val())||e.find(".create-option").click();var n=t.val(),a=!o||o(n);void 0!==n&&a?c($j.extend({add:n},r.spinner?{spinner:r.spinner}:{})):e.find(".search-choice").each(function(e,t){$(t).find("span").text()==n&&$(t).find("a.search-choice-close").click()}),t.val("").trigger("blur")}),l.find("#remove_tag button").off("click").click(function(){var e=l.find("#remove_tag select"),t=e.val();void 0!==t&&c($j.extend({remove:t},r.spinner?{spinner:r.spinner}:{})),e.val("").trigger("blur")}),e.on("data_loaded",x),l.off("tags_changed").on("tags_changed",x)}function render_tags(e){e=get_tags(e);return _.map(e,function(e){return"<a href='#' class='tag' data-tag='"+_.escape(e)+"'>"+tag_display_name(e)+"</a>"}).join(" ")}graph_client_use=function(){var a;return function(e,t){var n;a||(mkigraph.add_plugin("client_useblocks",graph_client_useblocks_base),a=!0),n=make_network_use_loader(function(){graph_client_use(e,t)}),Mkiconf.has_rusage&&window.graph_client_rusage&&"retry"==graph_client_rusage(t,n)&&setTimeout(function(){graph_client_use(e,t)},50),graph_client_use.loader_paused?n.clear():n.discharge()}}(),list3_check_stale=function(){var a;return function(){var e=Mkiconf.usage?"last_seen_at#":"last_active#",t=Mkijson.main.meta[e],n=(new Date).getTime()/1e3-data3_load.timeoffset(e),e=300<=n-t;e?(t=unparse_interval(n-t),jQuery("#w3stale").html("Information on this page is "+t+" old").slideDown(),jQuery("#w3staleago").html("&nbsp;("+t+"&nbsp;ago)").fadeIn(),null!=a&&flex_table.render()):(jQuery("#w3stale").slideUp(),jQuery("#w3staleago").fadeOut()),a=e}}(),checkbox3=function(){var l,a={},n=[];function u(e,t,n){return(n=null==n?document.getElementById("cb"+e.id):n)&&(n.checked=!!t),e&&!!e.checked!=!!t?(t?(e.checked=!0,a[e.id]=e,++o.nchecked):e&&(delete e.checked,delete a[e.id],--o.nchecked),1):0}function d(e){var t;if(e)for(t=0;t<n.length;++t)n[t](o)}function o(e,t,n){var a,r,s,o,i=Mkijson.main.hash,c=0;if(n&&n.shiftKey&&l)for(r=l<=t?(a=l-1,t-2):(a=t,l-1),s=flex_table.items();a<=r&&a<s.length;++a)(o=document.getElementById("cb"+s[a].id))&&(c+=u(i[s[a].id],e.checked,o));return l=t,d(c+=u(i[e.name],e.checked,!1)),!0}return o.select_all_or_none=function(e){return jQuery("#cb_node_ft").is(":checked")?o.select(jQuery("input:checkbox[id*=cb]").map(function(e,t){return Mkijson.main.hash[jQuery(this).attr("name")]}).get()):o.select(!1)},o.bind=function(e){n.push(e)},o.unbind=function(e){for(var t=n.length-1;0<=t;--t)n[t]==e&&n.splice(t,1)},o.checked=a,o.nchecked=0,o.select=function(e){var t,n,a=0,r=Mkijson.main.hash,s="object"==typeof e?e:e?search_filter.results:{};if(Array.isArray(s))for(n=s,s={},t=n.length-1;0<=t;--t)s[n[t].id]=!0;if(e||o.nchecked)for(t in r)a+=u(r[t],s?s[t]:e(r[t]));return d(a),!1},o.toggle=function(e,t){d(u(e,t=null==t?!e.checked:t))},o.unchecked_alert=function(){var e={u:"clients",l:"access points",m:"access points",r:"rogue APs",p:"clients",ports:"ports"}[Mkiconf.h3mode];return alert("No "+e+" selected.\nPlease select one or more "+e+" and try again."),!1},o}(),Mkiconf&&Mkiconf.new_list||checkbox3.bind(function(){$j(".action_bar .actions > .btn-group > a").toggleClass("disabled",checkbox3.nchecked<=0),$j(".action_bar .actions > .btn-group > .btn-primary-active").toggleClass("btn-primary",0<checkbox3.nchecked)});